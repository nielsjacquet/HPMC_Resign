window._hpmcBridge = window._hpmcBridge || new function HpmcBridge() {

    this.ScreenRatioType = {
        X: "appToScreenRatioX",
        Y: "appToScreenRatioY"
    };

    var stateCallbacks = [];
    var communication = new NativeCommunication();
    var screenRatios = {};

    /**
    * bellow method should be override by the js client in order to register for rnr events.
    */

    /**
     * onStartRecord() called to indicate that record is starting.
     * @param {Function} eventcallback – a callback which should be called to indicate success or failure
     * @returns {undefined}
     */
    this.onStartRecord = null;

    /**
     * onStopRecord() called to indicate that record is ending.
     * @param {Function} eventcallback – a callback which should be called to indicate success or failure
     * @returns {undefined}
     */
    this.onStopRecord = null;

    /**
     * onStartReplay() called to indicate that replay is starting.
     * @param {Function} eventcallback – a callback which should be called to indicate success or failure
     * @returns {undefined}
     */
    this.onStartReplay = null;

    /**
     * onStopReplay() called to indicate that record is ending.
     * @param {Function} eventcallback – a callback which should be called to indicate success or failure
     * @returns {undefined}
     */
    this.onStopReplay = null;

    /**
     * onRequest() called when a new request is received. A request is a message that requires a response.
     * @param {Object} message – the request message sent by the testing tool.
     * @param {Function} responseCallback – callback function to be used to send the response for this specific request.
     * @returns {undefined}
     */
    this.onRequest = null;

    /**
     * onWaitForWebObject() called on native-to-web 'waitFor' action.
     * @param {Object} message – the request message sent by the testing tool ("webData").
     * @param {Integer} timeout – the remaining time to wait for the web element to be found (milliseconds).
     * @param {Function} responseCallback – callback function to be used to send the response.
     * @returns {undefined}
     */
    this.onWaitForWebObject = null;
    /**
     * onFindElement() called to when a findElement command is executed on the bridge.
     * param {JsonObject} query by which to locate the elements.
     * @param {Function} queryCallback – a callback which is called with the find results payload or error if occurred.
     * @returns {undefined}
     */
    this.onFindElement = null;

    /**
     * onWebViewVisible(isVisible) called when the webView change visibility.
     * @param {Boolean} isVisible - true - visible, false - invisible
     * @returns {JsonObject} - json object to pass to Tool's main.
     */
    this.onWebViewVisible = null;

    /**
     * setState(state) set or override runtime state of the Webview.
     * @param {JsonObject} state.
     * @param {Function} external JS callback.
     * @returns {undefined}
     */
    this.setState = function(state, callback){
        var stateStr = JSON.stringify(state);
        this.setStateResponse.callbackQueue.push(callback);
        communication.setState(stateStr);
    };

    /**
     * getState(state) get runtime state of the Webview.
     * @param {Function} external JS callback.
     * @returns {undefined}
     */
    this.getState = function(callback){
        this.getStateResponse.callbackQueue.push(callback);
        communication.getState();
    };

    /**
     * responseCallback() called to send a response for the appropriate request
     * @param {*} error – falsy if the sendMessage succeeded. truthy otherwise
     * @param {Object} responseMsg – the response message that should be forwarded to the testing tool which sent the request message which included this callback function
     * @returns {undefined}
     */
    function responseCallback(error, responseMsg) {
        console.log(this.context);
        if(error) {
            console.log("request failed");
        }
        var msgToSend = responseMsg;
        try {
            if(typeof responseMsg != "string") {
                msgToSend = JSON.stringify(responseMsg);
            }
            communication.sendMessage('JsResponse', msgToSend, this.context);
        } catch(e) {
            console.error("failed sending message " + msgToSend + " - exception: " + e);
        }
    }

    /**
     * waitForWebObjectCallback() called to send a response for the appropriate request
     * @param {Boolean} error – false if everything is fine
     * @param {Object} responseMsg – always returns JSON for webData (even on success)
     * @returns {undefined}
     */
    function waitForWebObjectCallback(error, responseMsg) {
        console.log(this.context);
        var response = {error: error, message: responseMsg};

        try {
            communication.sendMessage('JsResponse', JSON.stringify(response), this.context);
        } catch(e) {
            console.error("failed sending message " + response + " - exception: " + e);
        }
    }

    /**
     * responseCallback() called to send a findElement results
     * @param {*} error – falsy if the sendMessage succeeded. truthy otherwise
     * @param {Object} results – results returned that return to the native
     * @returns {undefined}
     */
    function queryCallback(error, results) {
        console.log(this.context);
        if(error) {
            console.log("request failed");
        }
        communication.sendQueryResultFromHpmcBridge(results, this.context);
    }

    // we save last state - in case we call to change state (e.g startRecord/startReplay) before tool connected.
    // then we'll call the state callback in connect()
    var _currentState = null;
    /**
     * connect() called to the indicate the js client finished registering to all the relevant events and ready to receive events.
     */
    this.connect = function(onConnect) {
        stateCallbacks['startRecord'] = this.onStartRecord;
        stateCallbacks['stopRecord'] = this.onStopRecord;
        stateCallbacks['startReplay'] = this.onStartReplay;
        stateCallbacks['stopReplay'] = this.onStopReplay;
        stateCallbacks['request'] = this.onRequest;
        stateCallbacks['webViewVisible'] = this.onWebViewVisible;
        console.log('set callback');

        // This didn't tested for Android - so for now it's only for iOS
        if (window.hpmcAgent == "ios" && _currentState) {
          setTimeout(function (){ doStateMsg(_currentState)}, 0);
        }
    };

    /**
     * sendEvent() called to notify the testing tool of an event
     * @param {Object} eventMsg – the event message sent by the testing tool
     * @param {Function} eventcallback – a callback which should be called by the mobile framework to indicate success or failure in delivering the event. eventCallback was defined previously under the record/replay section.
     * @returns {undefined}
     */
    this.sendEvent = function(eventMsg, eventCallback) {
        try {
            var eventToSend = stringify(eventMsg);

            communication.sendMessage('JsEvent', eventToSend, null);
        } catch(e) {
            console.error("failed sending message " + eventToSend + " - exception: " + e);
            eventCallback(e);
            return;
        }

        eventCallback();
    };

    function stringify (eventMsg) {

        if(typeof eventMsg != "string") {
            eventMsg = JSON.stringify(eventMsg);
        }

        return eventMsg;
    };

    /**
     * sendWebRequest() is called to send web request to the testing tool.
     * @param isSync
     * @param eventMsg
     * @param eventCallback
     * @param timeout
    */
    this.sendWebRequest = function(isSync, eventMsg, eventCallback, timeout) {
        try {
            // MC currently only supports sync web request without callback
            // The sync web response result will be stored in the localStorage "hpmc_js_sync_response"
            isSync = true;
            eventCallback = null;
            var eventToSend = stringify(eventMsg);
            communication.sendWebRequest(isSync, eventToSend, eventCallback, timeout);
        } catch(e) {
            console.error("failed to send sync web request " + eventToSend + " - exception: " + e);
            if (eventCallback) {
                eventCallback(e);
            }
            return;
        }
    };

    this.onMessage = function(command, message, nativeContext) {
        if(command != undefined) {
            switch(command) {
                case "startRecord":
                case "startReplay":
                case "stopRecord" :
                case "stopReplay" :
                    doStateMsg(command);
                    break;
                case "request" :
                    setTimeout(doRequestMessage.bind(this, message, nativeContext), 0);
                    break;
                case "webViewVisible":
                    if (stateCallbacks[command]) {
                        // in visibility api - 'message' will be boolean, not string: true/false, indicates webView visible/invisible
                        return JSON.stringify(stateCallbacks[command](message));
                    } else {
                        return "";
                    }
                    break;
            }
        }
    };

    this.version = "3.30.00" + "-" + "162";

    /**
     * getWebViewBounds() get the bounds of the webview.
     * @param {Function} external JS callback.
     * @returns {undefined}
     */
    this.getWebViewBounds = function(callback) {
        this.getWebViewBoundsResponse.callbackQueue.push(callback);
        communication.getWebViewBounds();
    };

    this.setStateResponse = function (error){
        var callback = this.setStateResponse.callbackQueue.shift();
        if (callback) {
          callback(error);
        }
    };
    this.setStateResponse.callbackQueue = [];

    this.getStateResponse = function (state, error){
        var callback = this.getStateResponse.callbackQueue.shift();
        if (callback) {
          callback(error, state);
        }
    };
    this.getStateResponse.callbackQueue = [];

    this.getWebViewBoundsResponse = function (bounds, error) {
        var callback = this.getWebViewBoundsResponse.callbackQueue.shift();
        if (callback){
          callback(error, bounds);
        }
    };
    this.getWebViewBoundsResponse.callbackQueue = [];

    this.findElement = function(query, nativeContext) {
        var callBack = queryCallback.bind({ context: nativeContext });
        this.onFindElement(query, callBack);
    };

    this.waitForWebObject = function(message, timeout, nativeContext) {
        var callBack = waitForWebObjectCallback.bind({ context: nativeContext });
        if (this.onWaitForWebObject) {
          console.log("sending message to 'onWaitForWebObject' callback");
          this.onWaitForWebObject(message, timeout, callBack);
        } else {
          console.error("No callback for 'onWaitForWebObject' !");
        }
    };

    this.notifyInjected = function () {
        if (!this.isRefreshing) {
            communication.notifyInjected(location.href);
        } else {
            communication.notifyInjected("");
        }
    };

    /**
     * Converts given logical point value to the device measurement value
     * @param logicalVal logical point value
     * @param screenRatioType screen ratio to use in the conversion, use _hpmcBridge.ScreenRatioType values
     * @returns {number} device measurement value
     */
    this.convertLogicalToDeviceValue = function(logicalVal, screenRatioType) {
        var zoomFactor = communication.getZoomFactor(false),
            screenRatio = screenRatios[screenRatioType] || 1;

        console.log("convertLogicalToDeviceValue - zoomFactor: " + zoomFactor + ", screenRatio: " + screenRatio);

        return Math.round(communication.convertLogicalToDeviceValue(logicalVal) * zoomFactor * screenRatio);
    };

    /**
     * Converts given device measurement value to logical point value
     * @param deviceVal device measurement value
     * @returns {number} logical point value
     */
    this.convertDeviceToLogicalValue = function(deviceVal) {
        var zoomFactor = communication.getZoomFactor(true);

        console.log("convertDeviceToLogicalValue - zoomFactor: " + zoomFactor);

        return Math.round(communication.convertDeviceToLogicalValue(deviceVal) * zoomFactor);
    };

    this.getZoomFactor = function(toDomValues) {
        return communication.getZoomFactor(toDomValues);
    };

    this.setWebViewBounds = function(bounds) {
        communication.setOuterWidth(bounds);
    };

    this.appSpaceToScreenSpaceRatio = function(appToScreenRatioX, appToScreenRatioY) {
        console.log("appSpaceToScreenSpaceRatio set - " + this.ScreenRatioType.X + ": " + appToScreenRatioX +
            ", " + this.ScreenRatioType.Y + ": " + appToScreenRatioY);

        screenRatios[this.ScreenRatioType.X] = appToScreenRatioX;
        screenRatios[this.ScreenRatioType.Y] = appToScreenRatioY;

        return true;
    };

    function doStateMsg(command) {
        if(stateCallbacks.hasOwnProperty(command)) {
            console.log("executing command " + command + " " + stateCallbacks[command]);
            stateCallbacks[command](onEventCallBack);
        }
        // save command - in case connect() hadn't been called yet
        _currentState = command;
    }

    function doRequestMessage(message, nativeContext) {
        if(stateCallbacks["request"]) {
            var callBack = responseCallback.bind({ context: nativeContext });
            stateCallbacks["request"](message, callBack);
        } else {
            console.log("js client did not register for request message");
        }
    }

    function onEventCallBack(error) {
        if(error) {
            console.log("onEventCallBack error");
        } else {
            console.log("onEventCallBack success");
        }
    }

    function onComplete(error) {
        if(error) {
            console.log("on Complete error");
        } else {
            console.log("on complete success");
        }
    }

}();
function NativeCommunication() {

    var webViewWidth,
        getLogger = function () {
            return window._aamWebViewBridge || console;
        };

    this.setOuterWidth = function(bounds) {
        webViewWidth = bounds.right - bounds.left;
    };

    this.getZoomFactor = function (toDomValues) {
        // either the real webViewWidth if available or the factor will return 1 (no zoom)
        var winAvailWidth = webViewWidth || window.innerWidth;

        return toDomValues ? window.innerWidth / winAvailWidth : winAvailWidth / window.innerWidth;
    };

    this.shouldPerformFullClick = function () {
        return true;
    };

    this.convertLogicalToDeviceValue = function(logicalVal) {
        // in iOS device works in logical pixel like the webview, so no conversion is needed
        return logicalVal;
    };

    this.convertDeviceToLogicalValue = function(deviceVal) {
        // in iOS device works in logical pixel like the webview, so no conversion is needed
        return deviceVal;
    };

    this.sendMsg = function (eventRecord) {
        getLogger().log("about to send recorded step: " + JSON.stringify(eventRecord));
        var url = "hpwebviewevent://?hpevent="+encodeURI(JSON.stringify(eventRecord));

        if (window.webkit == undefined){  // UIWebView
            var iframe = document.createElement("iframe");
            iframe.setAttribute("src", url);
            document.documentElement.appendChild(iframe);
            iframe.parentNode.removeChild(iframe);
            iframe = null;
        } else {// for WKWebView
                window.webkit.messageHandlers.hpmc.postMessage(url);
        }
    };

    this.sendQueryResult = function(queryResult) {
        getLogger().log("about to send query result: " + JSON.stringify(queryResult));
        return JSON.stringify(queryResult);
    };

    this.sendQueryResultFromHpmcBridge = function(queryResult, nativeContext) {
        getLogger().log("about to send query result: " + JSON.stringify(queryResult));
        sendMessageToNativeUsingIFrame('findElementResponse', {message: JSON.stringify(queryResult), context: nativeContext});
    };

    this.stepDone = function(result) {
        getLogger().log("about to send step done: " + JSON.stringify(result));
        return result;
    };

    this.getElementStatus = function (response) {
        getLogger().log("about to send element status: " + JSON.stringify(response));
        return response;
    };

    this.notifyInjected = function (urlToReport) {
        getLogger().log("notifyInjected: started");
        getLogger().log("notifyInjected: calling notifyInjected: " + urlToReport);
        sendMessageToNativeUsingIFrame("notifyLoad", {url: urlToReport});
        getLogger().log("notifyInjected: finished");
    };

    var urlFormat = "hpmcwebviewevent://?action=";
    function sendMessageToNativeUsingIFrame(action, params) {

        var url = urlFormat + action;
        if (params) {
            for(var paramName in params) {
                if (params.hasOwnProperty(paramName)) {
                    var paramVal = params[paramName];
                    url += "&" + paramName + "=" + paramVal;
                }
            }
        }
        console.log("url is: " + url);

        if (window.webkit == undefined){  // UIWebView
            var iframe = document.createElement("iframe");
            iframe.setAttribute("src", encodeURI("hpwebviewevent?" + url));
            document.documentElement.appendChild(iframe);
            iframe.parentNode.removeChild(iframe);
            iframe = null;
        } else {  // for WKWebView
            window.webkit.messageHandlers.hpmc.postMessage(url);
        }
    }

    this.sendMessage = function(type, message, nativeContext, sync, timeout) {
        getLogger().log("pass to bridge type " + type + " message " + message + " context " + nativeContext + " with timeout " + timeout);
        sendMessageToNativeUsingIFrame("sendMessage", {type: type, message: message, context: nativeContext, sync: sync, timeout:timeout});

    };

    this.sendWebRequest = function(isSync, eventMsg, eventCallback, timeout) {
        this.sendMessage('JsEvent', eventMsg, null, isSync, timeout);
      	if (eventCallback) {
      	     eventCallback();
      	}
    };

    this.getState = function(){
        sendMessageToNativeUsingIFrame("getState");
    };

    this.setState = function(state){
        sendMessageToNativeUsingIFrame("setState", {state: state});
    };

    this.getWebViewBounds = function () {
        sendMessageToNativeUsingIFrame("getWebViewBounds");
    };
}

window.hpmcAgent = "ios";
!function(){function querySelectorAllIncludeShadowDom(root,selector){root=root||window.document,targetElements=ShadowDomUtil.makeArray(root.querySelectorAll(selector));var shadowRoots=ShadowDomUtil.findAllShadowRoots(root);return targetElements=shadowRoots.reduce(function(targetAOs,childElem){return targetAOs.concat(ShadowDomUtil.makeArray(childElem.querySelectorAll(selector)))},targetElements),targetElements}function FrameLoopInjector(win){var win=win||window;this._contextWin=win.top,this._checkInterval=2e3}function injectAgentJs(win){try{if(win._hpJavaBridge&&win.top==win&&"about:blank"===win.location.href&&"<head></head><body></body>"===win.document.documentElement.innerHTML.toLowerCase())return;!win||win._QTP&&win._QTP.version||(win.document&&"complete"===win.document.readyState||"interactive"===win.document.readyState||win===win.top&&isHPMC?injectAndListenForNewFrames(win):win.addEventListener("load",function(){injectAndListenForNewFrames(win)},!0))}catch(e){safeConsoleError("injectAgentJs got exception. e ="+e.message)}}function injectAndListenForNewFrames(win){if(!win._QTP||!win._QTP.version){if(win===win.top&&"function"==typeof InjectUFTWebAgent)InjectUFTWebAgent();else{if(isHPMC&&"about:blank"===win.location.href)return;win.setTimeout(function(){win.eval("(function(){"+InjectUFTWebAgent.toString()+" InjectUFTWebAgent()})()")},0)}win.addEventListener("unload",function(){setTimeout(function(){injectAgentJs(win)},0)},!1),attachDomListener(win);for(var iframes=querySelectorAllIncludeShadowDom(win.document,"iframe"),i=0;i<iframes.length;++i){var iframe=iframes[i];frameLoopInjector.addFrametoMonitor(iframe),injectAgentJs(iframe.contentWindow)}for(var frames=querySelectorAllIncludeShadowDom(win.document,"frame"),i=0;i<frames.length;++i){var frame=frames[i];frameLoopInjector.addFrametoMonitor(frame),injectAgentJs(frame.contentWindow)}}}function attachDomListener(win){function handleNewNode(newNode){"IFRAME"!==newNode.tagName&&"FRAME"!==newNode.tagName||(frameLoopInjector.addFrametoMonitor(newNode),injectAgentJs(newNode.contentWindow))}try{if(win.MutationObserver){var observer=new win.MutationObserver(function(mutations){for(var i=0;i<mutations.length;++i)for(var mutation=mutations[i],j=0;j<mutation.addedNodes.length;++j)handleNewNode(mutation.addedNodes[j])}),target=win.document,observeConfig={childList:!0,subtree:!0};observer.observe(target,observeConfig)}else console.log("Using DOMNodeInserted event"),win.document.addEventListener("DOMNodeInserted",function(evt){handleNewNode(evt.target)},!0)}catch(err){safeConsoleError("Error while attempting to inject frame"),safeConsoleError(err)}}function safeConsoleError(str){var func=console.error||console.log;func&&func.call(console,str)}function isCrossDomainFrame(frame){try{frame.contentWindow.document}catch(ex){return!0}return!1}function InjectUFTWebAgent(){function X2JS(config){"use strict";function initConfigDefaults(){void 0===config.escapeMode&&(config.escapeMode=!0),config.attributePrefix=config.attributePrefix||"_",config.arrayAccessForm=config.arrayAccessForm||"none",config.emptyNodeForm=config.emptyNodeForm||"text",void 0===config.enableToStringFunc&&(config.enableToStringFunc=!0),config.arrayAccessFormPaths=config.arrayAccessFormPaths||[],void 0===config.skipEmptyTextNodesForObj&&(config.skipEmptyTextNodesForObj=!0),void 0===config.stripWhitespaces&&(config.stripWhitespaces=!0),config.datetimeAccessFormPaths=config.datetimeAccessFormPaths||[]}function initRequiredPolyfills(){function pad(number){var r=String(number);return 1===r.length&&(r="0"+r),r}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),"function"!=typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+pad(this.getUTCMonth()+1)+"-"+pad(this.getUTCDate())+"T"+pad(this.getUTCHours())+":"+pad(this.getUTCMinutes())+":"+pad(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}function getNodeLocalName(node){var nodeLocalName=node.localName;return null==nodeLocalName&&(nodeLocalName=node.baseName),null!=nodeLocalName&&""!=nodeLocalName||(nodeLocalName=node.nodeName),nodeLocalName}function getNodePrefix(node){return node.prefix}function escapeXmlChars(str){return"string"==typeof str?str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):str}function unescapeXmlChars(str){return str.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function toArrayAccessForm(obj,childName,path){switch(config.arrayAccessForm){case"property":obj[childName]instanceof Array?obj[childName+"_asArray"]=obj[childName]:obj[childName+"_asArray"]=[obj[childName]]}if(!(obj[childName]instanceof Array)&&config.arrayAccessFormPaths.length>0){for(var idx=0;idx<config.arrayAccessFormPaths.length;idx++){var arrayPath=config.arrayAccessFormPaths[idx];if("string"==typeof arrayPath){if(arrayPath==path)break}else if(arrayPath instanceof RegExp){if(arrayPath.test(path))break}else if("function"==typeof arrayPath&&arrayPath(obj,childName,path))break}idx!=config.arrayAccessFormPaths.length&&(obj[childName]=[obj[childName]])}}function fromXmlDateTime(prop){var bits=prop.split(/[-T:+Z]/g),d=new Date(bits[0],bits[1]-1,bits[2]),secondBits=bits[5].split(".");if(d.setHours(bits[3],bits[4],secondBits[0]),secondBits.length>1&&d.setMilliseconds(secondBits[1]),bits[6]&&bits[7]){var offsetMinutes=60*bits[6]+Number(bits[7]);offsetMinutes=0+("-"==(/\d\d-\d\d:\d\d$/.test(prop)?"-":"+")?-1*offsetMinutes:offsetMinutes),d.setMinutes(d.getMinutes()-offsetMinutes-d.getTimezoneOffset())}else-1!==prop.indexOf("Z",prop.length-1)&&(d=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds())));return d}function checkFromXmlDateTimePaths(value,childName,fullPath){if(config.datetimeAccessFormPaths.length>0){for(var path=fullPath.split(".#")[0],idx=0;idx<config.datetimeAccessFormPaths.length;idx++){var dtPath=config.datetimeAccessFormPaths[idx];if("string"==typeof dtPath){if(dtPath==path)break}else if(dtPath instanceof RegExp){if(dtPath.test(path))break}else if("function"==typeof dtPath&&dtPath(obj,childName,path))break}return idx!=config.datetimeAccessFormPaths.length?fromXmlDateTime(value):value}return value}function parseDOMChildren(node,path){if(node.nodeType==DOMNodeTypes.DOCUMENT_NODE){for(var result=new Object,nodeChildren=node.childNodes,cidx=0;cidx<nodeChildren.length;cidx++){var child=nodeChildren.item(cidx);if(child.nodeType==DOMNodeTypes.ELEMENT_NODE){var childName=getNodeLocalName(child);result[childName]=parseDOMChildren(child,childName)}}return result}if(node.nodeType==DOMNodeTypes.ELEMENT_NODE){var result=new Object;result.__cnt=0;for(var nodeChildren=node.childNodes,cidx=0;cidx<nodeChildren.length;cidx++){var child=nodeChildren.item(cidx),childName=getNodeLocalName(child);child.nodeType!=DOMNodeTypes.COMMENT_NODE&&(result.__cnt++,null==result[childName]?(result[childName]=parseDOMChildren(child,path+"."+childName),toArrayAccessForm(result,childName,path+"."+childName)):(null!=result[childName]&&(result[childName]instanceof Array||(result[childName]=[result[childName]],toArrayAccessForm(result,childName,path+"."+childName))),result[childName][result[childName].length]=parseDOMChildren(child,path+"."+childName)))}for(var aidx=0;aidx<node.attributes.length;aidx++){var attr=node.attributes.item(aidx);result.__cnt++,result[config.attributePrefix+attr.name]=attr.value}var nodePrefix=getNodePrefix(node);return null!=nodePrefix&&""!=nodePrefix&&(result.__cnt++,result.__prefix=nodePrefix),null!=result["#text"]&&(result.__text=result["#text"],result.__text instanceof Array&&(result.__text=result.__text.join("\n")),config.escapeMode&&(result.__text=unescapeXmlChars(result.__text)),config.stripWhitespaces&&(result.__text=result.__text.trim()),delete result["#text"],"property"==config.arrayAccessForm&&delete result["#text_asArray"],result.__text=checkFromXmlDateTimePaths(result.__text,childName,path+"."+childName)),null!=result["#cdata-section"]&&(result.__cdata=result["#cdata-section"],delete result["#cdata-section"],"property"==config.arrayAccessForm&&delete result["#cdata-section_asArray"]),1==result.__cnt&&null!=result.__text?result=result.__text:0==result.__cnt&&"text"==config.emptyNodeForm?result="":result.__cnt>1&&null!=result.__text&&config.skipEmptyTextNodesForObj&&(config.stripWhitespaces&&""==result.__text||""==result.__text.trim())&&delete result.__text,delete result.__cnt,!config.enableToStringFunc||null==result.__text&&null==result.__cdata||(result.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),result}if(node.nodeType==DOMNodeTypes.TEXT_NODE||node.nodeType==DOMNodeTypes.CDATA_SECTION_NODE)return node.nodeValue}function startTag(jsonObj,element,attrList,closed){var resultStr="<"+(null!=jsonObj&&null!=jsonObj.__prefix?jsonObj.__prefix+":":"")+element;if(null!=attrList)for(var aidx=0;aidx<attrList.length;aidx++){var attrName=attrList[aidx],attrVal=jsonObj[attrName];config.escapeMode&&(attrVal=escapeXmlChars(attrVal)),resultStr+=" "+attrName.substr(config.attributePrefix.length)+"='"+attrVal+"'"}return resultStr+=closed?"/>":">"}function endTag(jsonObj,elementName){return"</"+(null!=jsonObj.__prefix?jsonObj.__prefix+":":"")+elementName+">"}function endsWith(str,suffix){return-1!==str.indexOf(suffix,str.length-suffix.length)}function jsonXmlSpecialElem(jsonObj,jsonObjField){return!!("property"==config.arrayAccessForm&&endsWith(jsonObjField.toString(),"_asArray")||0==jsonObjField.toString().indexOf(config.attributePrefix)||0==jsonObjField.toString().indexOf("__")||jsonObj[jsonObjField]instanceof Function)}function jsonXmlElemCount(jsonObj){var elementsCnt=0;if(jsonObj instanceof Object)for(var it in jsonObj)jsonXmlSpecialElem(jsonObj,it)||elementsCnt++;return elementsCnt}function parseJSONAttributes(jsonObj){var attrList=[];if(jsonObj instanceof Object)for(var ait in jsonObj)-1==ait.toString().indexOf("__")&&0==ait.toString().indexOf(config.attributePrefix)&&attrList.push(ait);return attrList}function parseJSONTextAttrs(jsonTxtObj){var result="";return null!=jsonTxtObj.__cdata&&(result+="<![CDATA["+jsonTxtObj.__cdata+"]]>"),null!=jsonTxtObj.__text&&(config.escapeMode?result+=escapeXmlChars(jsonTxtObj.__text):result+=jsonTxtObj.__text),result}function parseJSONTextObject(jsonTxtObj){var result="";return jsonTxtObj instanceof Object?result+=parseJSONTextAttrs(jsonTxtObj):null!=jsonTxtObj&&(config.escapeMode?result+=escapeXmlChars(jsonTxtObj):result+=jsonTxtObj),result}function parseJSONArray(jsonArrRoot,jsonArrObj,attrList){var result="";if(0==jsonArrRoot.length)result+=startTag(jsonArrRoot,jsonArrObj,attrList,!0);else for(var arIdx=0;arIdx<jsonArrRoot.length;arIdx++)result+=startTag(jsonArrRoot[arIdx],jsonArrObj,parseJSONAttributes(jsonArrRoot[arIdx]),!1),result+=parseJSONObject(jsonArrRoot[arIdx]),result+=endTag(jsonArrRoot[arIdx],jsonArrObj);return result}function parseJSONObject(jsonObj){var result="";if(jsonXmlElemCount(jsonObj)>0)for(var it in jsonObj)if(!jsonXmlSpecialElem(jsonObj,it)){var subObj=jsonObj[it],attrList=parseJSONAttributes(subObj);if(null==subObj||void 0==subObj)result+=startTag(subObj,it,attrList,!0);else if(subObj instanceof Object)if(subObj instanceof Array)result+=parseJSONArray(subObj,it,attrList);else if(subObj instanceof Date)result+=startTag(subObj,it,attrList,!1),result+=subObj.toISOString(),result+=endTag(subObj,it);else{var subObjElementsCnt=jsonXmlElemCount(subObj);subObjElementsCnt>0||null!=subObj.__text||null!=subObj.__cdata?(result+=startTag(subObj,it,attrList,!1),result+=parseJSONObject(subObj),result+=endTag(subObj,it)):result+=startTag(subObj,it,attrList,!0)}else result+=startTag(subObj,it,attrList,!1),result+=parseJSONTextObject(subObj),result+=endTag(subObj,it)}return result+=parseJSONTextObject(jsonObj)}var VERSION="1.1.5";config=config||{},initConfigDefaults(),initRequiredPolyfills();var DOMNodeTypes={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(xmlDocStr){var isIEParser=window.ActiveXObject||"ActiveXObject"in window;if(void 0===xmlDocStr)return null;var xmlDoc;if(window.DOMParser){var parser=new window.DOMParser,parsererrorNS=null;if(!isIEParser)try{parsererrorNS=parser.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(err){parsererrorNS=null}try{xmlDoc=parser.parseFromString(xmlDocStr,"text/xml"),null!=parsererrorNS&&xmlDoc.getElementsByTagNameNS(parsererrorNS,"parsererror").length>0&&(xmlDoc=null)}catch(err){xmlDoc=null}}else 0==xmlDocStr.indexOf("<?")&&(xmlDocStr=xmlDocStr.substr(xmlDocStr.indexOf("?>")+2)),xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async="false",xmlDoc.loadXML(xmlDocStr);return xmlDoc},this.asArray=function(prop){return prop instanceof Array?prop:[prop]},this.toXmlDateTime=function(dt){return dt instanceof Date?dt.toISOString():"number"==typeof dt?new Date(dt).toISOString():null},this.asDateTime=function(prop){return"string"==typeof prop?fromXmlDateTime(prop):prop},this.xml2json=function(xmlDoc){return parseDOMChildren(xmlDoc)},this.xml_str2json=function(xmlDocStr){var xmlDoc=this.parseXmlString(xmlDocStr);return null!=xmlDoc?this.xml2json(xmlDoc):null},this.json2xml_str=function(jsonObj){return parseJSONObject(jsonObj)},this.json2xml=function(jsonObj){var xmlDocStr=this.json2xml_str(jsonObj);return this.parseXmlString(xmlDocStr)},this.getVersion=function(){return VERSION}}function BrowserConsoleAppender(){this.layout=new LazyFormatLayout,this.append=function(loggingEvent){var Level=log4javascript.Level,formattedMesage=this.layout.format(loggingEvent);window.console.debug&&Level.DEBUG.isGreaterOrEqual(loggingEvent.level)?window.console.debug(formattedMesage):window.console.info&&Level.INFO.equals(loggingEvent.level)?window.console.info(formattedMesage):window.console.warn&&Level.WARN.equals(loggingEvent.level)?window.console.warn(formattedMesage):window.console.error&&loggingEvent.level.isGreaterOrEqual(Level.ERROR)?window.console.error(formattedMesage):window.console.log(formattedMesage)},this.setLayout=function(layout){this.layout=layout},this.setThreshold=function(threshold){this.threshold=threshold}}function LocalStroageAppender(){}function WebSocketAppender(){this._buffer=[],this.enabled=!0,this.logWebSocket=null}function LazyFormatLayout(){this.JSONspaces=0}function LoggerUtil(catName){var log;try{log=log4javascript.getLogger(catName);var catLogLevel=LoggerUtilSettings.getCategoryLogLevel(catName);catLogLevel&&log.setLevel(log4javascript.Level[catLogLevel]),log.prettyTrace=function(){lazyFormatLayout.JSONspaces=2,log.log(log4javascript.Level.TRACE,arguments),lazyFormatLayout.JSONspaces=0},log.prettyDebug=function(){lazyFormatLayout.JSONspaces=2,log.log(log4javascript.Level.DEBUG,arguments),lazyFormatLayout.JSONspaces=0},isLog4JsLite||(log.addAppender(BrowserAppender),WebSocketAppenderInstance.enabled&&log.addAppender(WebSocketAppenderInstance))}catch(e){Util.safeConsoleError("QTP Agent: Got Exception "+e+"\nStack:"+e.stack)}return log}function Msg(type,to,data,tab){this._msgType=type,this._to=to||{},this._tab=tab,this._data=data}function mergeMessages(tgtMsg,srcMsg,valNameMapping,logger){function mergeStatus(tgtMsg,srcMsg,logger){if(srcMsg.status)return tgtMsg.status&&"OK"!==tgtMsg.status?void(logger&&"OK"!==srcMsg.status&&logger.warn("mergeMessages: Trying to merge copy two error statuses: "+srcMsg.status+" into "+tgtMsg.status)):void(tgtMsg.status=srcMsg.status)}valNameMapping=valNameMapping||{},tgtMsg._data=tgtMsg._data||{};for(var key in srcMsg._data)tgtMsg._data[valNameMapping[key]||key]=srcMsg._data[key];for(var p in valNameMapping)p!==valNameMapping[p]&&(tgtMsg._data[p]=tgtMsg._data[valNameMapping[p]]);return mergeStatus(tgtMsg,srcMsg,logger),tgtMsg}function MultipleResponses(responsesToWaitFor){if(this._logger=new LoggerUtil("Common.MultipleResponses"),this._logger.trace("Common.MultipleResponses"),responsesToWaitFor<1)return void this._logger.warn("MultipleResponses: received invalid numOfResponses="+responsesToWaitFor);this._numOfResponses=responsesToWaitFor}function WebIdContainer(){this._logger=new LoggerUtil("Common.WebIdContainer"),this._logger.info("WebIdContainer was created"),this._container=[]}function AsyncCommunicationHelper(options){this._logger=new LoggerUtil("Common.AsyncCommunicationHelper"),this._initializeOptions(options),this._logger.info("c'tor: Created with the following options:",this._options),this._listeners={},this._pendingAckForAsynMsgs=[],this._timerID=-1}function EventDispatcher(logger){this._logger=logger||new LoggerUtil("Common.EventDispatcher"),this._listeners={}}function MessageChannelComChannel(context,disableAsyncHelper){if("undefined"==typeof MessageChannel)return new PostMessageComChannel(context);switch(context){case"extension":this._logger=new LoggerUtil("ComChannels.MessageChannelComChannel.Extension"),this._mode="extension",this.id=-1,MessageChannelComChannel.prototype._ext=this;break;case"content":this._logger=new LoggerUtil("ComChannels.MessageChannelComChannel.Content"),this._mode="content",this.id=Math.random(),MessageChannelComChannel.prototype._content=this;break;default:throw new Error("MessageChannelComChannel initialized with an Unknown Context")}this._logger.info("Ctor: Created id:"+this.id),this._listeners={},disableAsyncHelper||(this._asyncHelper=new AsyncCommunicationHelper({timeout:15e3}),this._asyncHelper.addListener("MessageTimedOut",this))}function PostMessageComChannel(context){switch(context){case"extension":this._logger=new LoggerUtil("ComChannels.PostMessageComChannel.Extension"),this._mode="extension",this.id=-1,PostMessageComChannel.prototype._ext=this;break;case"content":this._logger=new LoggerUtil("ComChannels.PostMessageComChannel.Content"),this._mode="content",this.id=Math.random(),PostMessageComChannel.prototype._content=this;break;default:throw new Error("PostMessageComChannel initialized with an Unknown Context")}this._logger.info("Ctor: Created id:"+this.id),this._listeners={},this._asyncHelper=new AsyncCommunicationHelper({timeout:15e3}),this._asyncHelper.addListener("MessageTimedOut",this)}function EmbeddedBrowserAPI(){this._logger=new LoggerUtil("EmbeddedBrowserAPI"),this._logger.trace("EmbeddedBrowserAPI started."),this._clientTabId=webViewId}function EmbeddedBrowserTab(tab){this._logger=new LoggerUtil("EmbeddedBrowserTab"),this._logger.trace("EmbeddedBrowserTab created."),this.id=tab.id,this.windowId=tab.windowId}function MobileCenterComChannelStrategy(){}function MobileCenterComChannel(){EventDispatcher.call(this,new LoggerUtil("ComChannels.MobileCenterComChannel")),window._hpmcBridge.readyState=!1,this._mobileCenter=window._hpmcBridge,this._responseCallbacks={},this._mobileBrowserId=1e3,this.init(),Util.assert(null!=this._mobileCenter,"C'tor: MobileCenterComChannel is undefined",this._logger),Object.defineProperty(this,"id",{value:"MobileCenterComChannel",writable:!1}),this._logger.trace("MobileCenterComChannel: ctor completed")}function MobileCenterBrowserAPI(){this._logger=new LoggerUtil("MobileCenterAPI"),this._logger.trace("MobileCenterAPI started."),this._clientTabId=webViewId}function MobileCenterBrowserTab(tab){this._logger=new LoggerUtil("MobileCenterBrowserTab"),this._logger.trace("MobileCenterBrowserTab created."),this.id=tab.id,this.windowId=tab.windowId}function ExternalComChannel(strategy){this._logger=new LoggerUtil("ComChannels.ExternalComChannel"),this._listeners=[],this._applyStrategy(strategy),this._innerChannel=this._createInnerChannel()}function Browser(tab){this._logger=new LoggerUtil("Ext.Browser"),this._logger.info("Browser was created for tab "+tab.id),this._associatedTab=tab,this._creationTime=new Date,this._browserSessionId=tab.browserSessionId||(this._creationTime.getTime()+Math.random()).toString(),this._recordTransactionQueue=[],Object.defineProperty(this,"id",{value:this.getID(),writable:!1}),ext.dispatcher.addListener("Message",this),ext.dispatcher.addListener("clientRegistered",this)}function FrameTree(page){this._logger=new LoggerUtil("Ext.FrameTree"),this.page=page}function Page(associatedTab,browserRtId){this._logger=new LoggerUtil("Ext.Page"),this._logger.info("Page created"),this._tab=associatedTab,this._frames=new FrameTree(this),this._browserId=browserRtId,this._extToolkits=[],this._frameCreationCount=ext.app.initialFrameCounter||-1,Object.defineProperty(this,"id",{value:this.getID(),writable:!1}),ext.dispatcher.addListener("Message",this),ext.dispatcher.addListener("clientRegistered",this),ext.dispatcher.addListener("clientUnRegistered",this)}function BrowserRecorder(knownTabs){this._logger=new LoggerUtil("Ext.BrowserRecorder"),this._logger.info("BrowserRecorder was initiated"),this._knownTabs=knownTabs,this._tabsReplacedMap={},this._eventData={},this._destroyedTabs=[],this._lastRemoveInfo=null}function Agent(){this._logger=new LoggerUtil("Ext.Agent"),this._logger.info("Agent was initiated"),this._inspectionMode=null,this._inspectionOptions=null,ext.dispatcher.addListener("clientRegistered",this),this._registerAppEvent("onTabCreated",this._onTabCreated.bind(this)),this._registerAppEvent("onTabClosed",this._onTabClosed.bind(this)),this._registerAppEvent("onAddressBarNavigation",this._onAddressBarNavigation.bind(this)),this._registerAppEvent("onTabReplaced",this._onTabReplaced.bind(this)),this._registerAppEvent("onUserOpenedNewTab",this._onUserOpenedNewTab.bind(this)),this._registerAppEvent("onReload",this._onReload.bind(this)),this._registerAppEvent("onBack",this._onBack.bind(this)),this._registerAppEvent("onForward",this._onForward.bind(this)),this._registerAppEvent("onUserClosedTab",this._onUserClosedTab.bind(this)),this._registerAppEvent("onSpySuspended",this._onSpySuspended.bind(this)),this._registerAppEvent("onSpyResumed",this._onSpyResumed.bind(this)),Util.assert(typeof ext.app.onSpySuspended==typeof ext.app.onSpyResumed,"Both onSpySuspend && onSpyResumed should exist or not exist. But never a case where only one of them exists.",this._logger),this._testingToolIdMap={}}function ExtDispatcher(){this._logger=new LoggerUtil("Ext.Dispatcher"),this._logger.info("ExtDispatcher was created"),this.isConnectPerformed=!1,this._listeners={},this._responseCallbacks={},this._setExternalComChannel(),this._inboundChromeCOM=ext.app.createComChannel(),this._inboundChromeCOM.init(),this._inboundChromeCOM.addListener("event",this.onEvent.bind(this)),this._inboundChromeCOM.addListener("message",this.onAsyncMessage.bind(this)),this._inboundChromeCOM.addListener("response",this.onResponseMessage.bind(this)),this._inboundChromeCOM.addListener("clientConnected",this.onClientConnect.bind(this)),this._inboundChromeCOM.addListener("clientDisconnected",this.onClientDisconnect.bind(this)),this._inboundChromeCOM.addListener("MessageTimedOut",this.onRequestTimedout.bind(this))}function GestureDetector(){this._logger=new LoggerUtil("Content.GestureDetector"),this._detectors=[this.SwipePanDetector,this.TapDetector,this.PinchDetector].map(function(detector){return new detector(this)},this);var handler=this._addEvent.bind(this);["touchstart","touchmove","touchend","touchcancel"].forEach(function(name){window.addEventListener(name,handler,!0)},this),document.addEventListener("touchstart",Util.identity,!0),this._listeners=[],this._logger.trace("GestureDetector created")}function SimulateGesture(){this._logger=new LoggerUtil("Content.SimulateGesture"),this._touches=[]}function Recorder(frame){function AddEventListners(){this.recordingEvents.forEach(function(e){window.addEventListener(e,handler,!0)}),this.recordingEventsOnDocument=["mouseenter"],this.recordingEventsOnDocument.forEach(function(e){document.addEventListener(e,handler,!0)}),["beforeunload","hashchange"].forEach(function(eventName){window.addEventListener(eventName,this.sendBrowserRecordInfo.bind(this))},this)}this._logger=new LoggerUtil("Content.Recorder"),this._logger.info("Recorder was created"),this.frame=frame,(new GestureDetector).addListener(this._recordGesture.bind(this)),this.recordingEvents=["click","input","change","focus","blur","keydown","keyup","submit","mouseup","mouseover","mouseout","dragstart","drop","dragend","contextmenu","play","pause","ended","mousedown","dblclick","keypress","textInput","select","reset"];var handler=this._handlerFunc.bind(this);this.frame.isPage?AddEventListners.apply(this):Util.setTimeout(AddEventListners.bind(this))}function FrameCommunicationChannel(){this._logger=new LoggerUtil("ComChannel.FrameCommunicationChannel"),this._logger.info(" created"),this._listeners={}}function ElementInspector(frameId){this._init(frameId)}function ContentDispatcher(){this._logger=new LoggerUtil("Content.Dispatcher"),this._logger.info("ctor: created with registration data"),this._listeners={},this._responseCallbacks={},this._chromeChannel=BrowserServices.createComChannel(this._logger),this._chromeChannel.addListener("event",this.onEvent.bind(this)),this._chromeChannel.addListener("message",this.onMessage.bind(this)),this._chromeChannel.addListener("MessageTimedOut",this.onMessageTimedOut.bind(this)),this._chromeChannel.addListener("response",this.onResponseMessage.bind(this)),this._chromeChannel.addListener("connected",this.onComChannelConnected.bind(this)),this._chromeChannel.addListener("connectError",this.onComChannelConnectionFailed.bind(this)),this._frameComChannel=new FrameCommunicationChannel,this._frameComChannel.addListener("event",this.onEvent.bind(this)),this._frameComChannel.addListener("message",this.onMessage.bind(this)),this._frameComChannel.addListener("response",this.onResponseMessage.bind(this)),this._frameComChannel.addListener("connected",this.onFrameCOMChannelConnected.bind(this))}function DotObjJSProxy(obj,parentId){this._logger=new LoggerUtil("Content.DotObjJSProxy"),this._obj=obj,this._id=Util.shallowObjectClone(parentId),this._id.object=content.rtidManager.GetIDForElement(this),window.addEventListener("_DOT_OBJ_RESULT",this.ResultMsgHandler.bind(this))}function DomRequestSubscriber(){this.handlers="",this._htmlLogger=HTMLLogger}function BrowserContentHelper(frameAo){this._logger=new LoggerUtil("Content.BrowserContentHelper"),this._frameAo=frameAo}function Frame(){this._logger=new LoggerUtil("Content.Frame"),this._logger.info("Frame was created"),this._isPage=window===window.parent,this._recorder=new Recorder(this),window.addEventListener("message",this.responseFromHTMLHandler.bind(this),!1),window.addEventListener("_QTP_RUN_SCRIPT_RESULT",this._runOnDocResult.bind(this)),window.addEventListener("DialogHandled",this._recordDialogHandled.bind(this),!1),window.addEventListener("mouseover",function(ev){window.__uft_mouseover_elem=ev.target},!0),window.addEventListener("mouseout",function(ev){window.__uft_mouseover_elem=null},!0)}function KitsManager(){this._logger.trace("Created instance")}function ObjectRTIDManager(){this._logger=new LoggerUtil("Content.ObjectRTIDManager"),content.dispatcher.addListener("RegistrationResult",this)}function AO(element,parentID){this._elem=element,this._id=null,this._attrs={micclass:function(){return this._micclass}},this._methods={},this._behaviors=[],this._micclass=[],this._parentID=Util.shallowObjectClone(parentID),this._logger=WebKit._logger,this._logger.trace(function(){return"AO: new ao created for element "+element.tagName})}function WebExtKit(toolkits){this._logger=new LoggerUtil("Content.WebExtKit"),this._toolkitManager=new ToolkitManager,this._tagElements=[],this._skipTypes=[],this.loadToolkits(toolkits)}function ToolkitManager(){this._logger=new LoggerUtil("WebExt.ToolkitManager"),this._toolkits=[]}function Toolkit(kitInfo,index){this._logger=new LoggerUtil("WebExt.Toolkit"),this.toolkitindex=index,this.toolkitName=kitInfo.name.toUpperCase(),this.priority=kitInfo.description.Controls._priority||this.CONST_PRIORITY_ATTR_DEF_VALUE,this.scriptEnv=this._setScriptingEnviroment(),this.jsFunctionsManager=new JSFunctionsManager(kitInfo.jsFunctions,kitInfo.jsScripts),this._settings=[],Util.isNullOrUndefined(kitInfo.description.Controls.Settings)||(this._settings=this._settings.concat(kitInfo.description.Controls.Settings.Variable)),this._commonIdentificationInfo=kitInfo.description.Controls.CommonIdentification||null,this._commonIdentificationFunctionHandler=this.CONST_UNINITIALIZE,this._toolkitStatusNode=kitInfo.description.Controls.ToolkitStateQuery||null,this._toolkitStatusFunctionHandler=this.CONST_UNINITIALIZE,this._controlByMicClass=Object.create(null),this._controls=this._initControlList(kitInfo.description.Controls.Control),this._controlListByTags=null}function JSFunctionsManager(jsFunctionFileNames,jsFunctionsScripts){this._jsFunctionFileNames=jsFunctionFileNames,this._jsFunctionScripts=jsFunctionsScripts}function Control(controlInfo,index,toolkit){this._logger=new LoggerUtil("WebExt.Control"),this.controlIndex=index,this.controlType=controlInfo._TestObjectClass,this._toolkit=toolkit,this._controlInfo=controlInfo,this._identificationConditions=null,this._methodList=this._initMethodList(controlInfo),this._settings=[],Util.isNullOrUndefined(controlInfo.Settings)||Util.isNullOrUndefined(controlInfo.Settings.Variable)||(this._settings=this._settings.concat(controlInfo.Settings.Variable)),this._identificationHanlder=this.CONST_UNINITIALIZE,this._propertyHandler=this.CONST_UNINITIALIZE,this._innerElementHandler=this.CONST_UNINITIALIZE,this._listenToEventsHandler=this.CONST_UNINITIALIZE,this._learnFilterHandler=this.CONST_UNINITIALIZE,this._learnControl=this._getControlLearnType(),this._learnChildren=this._getChildrenLearnType()}function ConditionsExpress(conditionInfo){this._logger=new LoggerUtil("WebExt.Control.ConditionsExpress"),this._conditions=[],this._init(conditionInfo)}function Condition(conditionInfo){this._logger=new LoggerUtil("WebExt.Control.Conditions"),this._propName="",this._trimExpectedValue=!0,this._expectedValue="",this._isRegExp=!1,this._isNegative=!1,this._init(conditionInfo)}function WebExtAO(element,control,parentID){AO.call(this,element,parentID),this._logger=new LoggerUtil("WebExtAO"),this._control=control,this._innerAO=this._initInternalElement(element),this._baseAO=this._initBaseAO(element),this._excludeAttrs=[],this.mergeBehavior(WebExtAOBehavior),this._initMicClass(),this._sendingReport=!1,this._replayReport=null}function SectionHandlersFactory(){}function SectionHandlerBase(){this._sectionInfo=null,this._control=null,this._toolkit=null,this._valid=!1}function JScriptSectionHandler(){SectionHandlerBase.call(this),this._jsFileName="",this._function="",this._toolkitCommonFileName="",this._qtpCommonFileName="common.js",this._functionWrapperClassName="",this._functionWrapper=null}function FunctionWrapper(functionName,functionBody){this._functionName=functionName,this._functionBody=functionBody}function BoolSectionHandler(){SectionHandlerBase.call(this),this._value=!1}function QTPUtil(){}function ScriptWrapper(){this.key="#KEYPLACEHOLDER";var _elem=null,_QTPUtil=_uftext._QTPUtil;
//#USERSCRIPTSPLACEHOLDER
this._methods={},
//#METHODSPLACEHOLDER
(_elem||_QTPUtil)&&(this.dummy="dummy"),_uftext.PageAgent.registerScriptWrapper(this.key,this),this.invoke=function(elem,methodName,args,aoId){_elem=elem,this._elem=elem,this._aoId=aoId;var result,pageAgent=_uftext.PageAgent;pageAgent._activeScriptWrapper=this;var m=this._methods[methodName];try{if("function"!=typeof m)throw{message:methodName+" is not a function"};if(window[methodName]===m)throw{message:methodName+" is a window function"}}catch(e){return{status:pageAgent.INVOKE_STATUS_FAIL,data:{type:pageAgent.INVOKE_ERROR_METHOD_NOT_FOUND,error:e.message}}}if(null!==m&&void 0!==m)try{var ret=m.apply(null,args);result={status:pageAgent.INVOKE_STATUS_PASS,data:pageAgent.wrap(ret)}}catch(e){pageAgent._logger.error("error in executing code, e="+e),result={status:pageAgent.INVOKE_STATUS_FAIL,data:{type:pageAgent.INOVKE_ERROR_GENERAL,error:e.message}}}return result}}if(window._QTP||(window._QTP={}),!window._QTP.version){window._QTP.version="14.53.3798.2.r3c96af3ad",console.log("<<<<<< UFT Mobile Agent Version >>>>>> "+window._QTP.version+" ("+(new Date).toLocaleString()+") "),Array.prototype.shift||(Array.prototype.shift=function(){if(this.length>0){for(var firstItem=this[0],i=0,len=this.length-1;i<len;i++)this[i]=this[i+1];return this.length--,firstItem}});var log4javascript;if(function(){function Log4JavaScript(){}function getExceptionMessage(ex){return ex.message?ex.message:ex.description?ex.description:String(ex)}function getUrlFileName(url){var lastSlashIndex=Math.max(url.lastIndexOf("/"),url.lastIndexOf("\\"));return url.substr(lastSlashIndex+1)}function getExceptionStringRep(ex){if(ex){var exStr="Exception: "+getExceptionMessage(ex);try{ex.lineNumber&&(exStr+=" on line number "+ex.lineNumber),ex.fileName&&(exStr+=" in file "+getUrlFileName(ex.fileName))}catch(localEx){}return showStackTraces&&ex.stack&&(exStr+=newLine+"Stack trace:"+newLine+ex.stack),exStr}return null}function isError(err){return err instanceof Error}function bool(obj){return Boolean(obj)}function Appender(){function isLoaded(win){try{return bool(win.loaded)}catch(ex){return!1}}function finalInit(){popUpLoaded=!0,appendQueuedLoggingEvents()}function writeHtml(doc){var lines=getConsoleHtmlLines();doc.open();for(var i=0,len=lines.length;i<len;i++)doc.writeln(lines[i]);doc.close()}function pollConsoleWindow(){function pollConsoleWindowLoaded(){popUpLoaded?clearInterval(poll):bool(popUp)&&isLoaded(popUp)&&(clearInterval(poll),finalInit())}var poll=setInterval(pollConsoleWindowLoaded,100)}function init(){var windowProperties="width="+width+",height="+height+",status,resizable",windowName="log4javascriptLitePopUp"+location.host.replace(/[^a-z0-9]/gi,"_");popUp=window.open("",windowName,windowProperties),popUpClosed=!1,popUp?isLoaded(popUp)?(popUp.mainPageReloaded(),finalInit()):(writeHtml(popUp.document),isLoaded(popUp)?finalInit():pollConsoleWindow()):(isSupported=!1,complainAboutPopUpBlocking&&alert("log4javascript: pop-up windows appear to be blocked. Please unblock them to use pop-up logging.")),initialized=!0}function safeToAppend(){if(!popUpsBlocked&&!popUpClosed){if(popUp.closed)return popUpClosed=!0,!1;!popUpLoaded&&popUp.loaded&&(popUpLoaded=!0)}return!popUpsBlocked&&popUpLoaded&&!popUpClosed}function padWithZeroes(num,len){for(var str=""+num;str.length<len;)str="0"+str;return str}function padWithSpaces(str,len){for(;str.length<len;)str+=" ";return str}function appendQueuedLoggingEvents(){if(safeToAppend()){for(;queuedLoggingEvents.length>0;){var currentLoggingEvent=queuedLoggingEvents.shift(),date=currentLoggingEvent.timeStamp,formattedDate=padWithZeroes(date.getHours(),2)+":"+padWithZeroes(date.getMinutes(),2)+":"+padWithZeroes(date.getSeconds(),2),formattedMessage=formattedDate+" "+padWithSpaces(currentLoggingEvent.level.name,5)+" - "+currentLoggingEvent.getCombinedMessages(),throwableStringRep=currentLoggingEvent.getThrowableStrRep();throwableStringRep&&(formattedMessage+=newLine+throwableStringRep),popUp.log(currentLoggingEvent.level,formattedMessage)}focusPopUp&&popUp.focus()}}var getConsoleHtmlLines=function(){return["REMOVED"]},popUp=null,popUpsBlocked=!1,popUpClosed=!1,popUpLoaded=!1,complainAboutPopUpBlocking=!0,initialized=!1,isSupported=!0,width=600,height=400,focusPopUp=!1,queuedLoggingEvents=new Array;this.append=function(loggingEvent){initialized||init(),queuedLoggingEvents.push(loggingEvent),safeToAppend()&&appendQueuedLoggingEvents()}}function Logger(){var appender=new log4javascript.Appender,loggerLevel=Level.ALL;this.log=function(level,params){if(enabled&&level.isGreaterOrEqual(this.getLevel())){var exception,finalParamIndex=params.length-1,lastParam=params[params.length-1];params.length>1&&isError(lastParam)&&(exception=lastParam,finalParamIndex--);for(var messages=[],i=0;i<=finalParamIndex;i++)messages[i]=params[i];var loggingEvent=new LoggingEvent(this,new Date,level,messages,exception);appender.append(loggingEvent)}},this.setLevel=function(level){loggerLevel=level},this.getLevel=function(){return loggerLevel}}var newLine="\r\n";log4javascript=new Log4JavaScript,log4javascript.version="1.4.13",log4javascript.edition="log4javascript_lite";var enabled="undefined"==typeof log4javascript_disabled||!log4javascript_disabled;log4javascript.setEnabled=function(enable){enabled=bool(enable)},log4javascript.isEnabled=function(){return enabled};var showStackTraces=!1;log4javascript.setShowStackTraces=function(show){showStackTraces=bool(show)};var Level=function(level,name){this.level=level,this.name=name};Level.prototype={toString:function(){return this.name},equals:function(level){return this.level==level.level},isGreaterOrEqual:function(level){return this.level>=level.level}},Level.ALL=new Level(Number.MIN_VALUE,"ALL"),Level.TRACE=new Level(1e4,"TRACE"),Level.DEBUG=new Level(2e4,"DEBUG"),Level.INFO=new Level(3e4,"INFO"),Level.WARN=new Level(4e4,"WARN"),Level.ERROR=new Level(5e4,"ERROR"),Level.FATAL=new Level(6e4,"FATAL"),Level.OFF=new Level(Number.MAX_VALUE,"OFF"),log4javascript.Level=Level,log4javascript.Appender=Appender,Logger.prototype={trace:function(){this.log(Level.TRACE,arguments)},debug:function(){this.log(Level.DEBUG,arguments)},info:function(){this.log(Level.INFO,arguments)},warn:function(){this.log(Level.WARN,arguments)},error:function(){this.log(Level.ERROR,arguments)},fatal:function(){this.log(Level.FATAL,arguments)},isEnabledFor:function(level){return level.isGreaterOrEqual(this.getLevel())},isTraceEnabled:function(){return this.isEnabledFor(Level.TRACE)},isDebugEnabled:function(){return this.isEnabledFor(Level.DEBUG)},isInfoEnabled:function(){return this.isEnabledFor(Level.INFO)},isWarnEnabled:function(){return this.isEnabledFor(Level.WARN)},isErrorEnabled:function(){return this.isEnabledFor(Level.ERROR)},isFatalEnabled:function(){return this.isEnabledFor(Level.FATAL)}};var defaultLogger=null;log4javascript.getDefaultLogger=function(){return defaultLogger||(defaultLogger=new Logger),defaultLogger},log4javascript.getLogger=function(){return new Logger};var nullLogger=null;log4javascript.getNullLogger=function(){return nullLogger||(nullLogger=new Logger,nullLogger.setLevel(Level.OFF)),nullLogger};var LoggingEvent=function(logger,timeStamp,level,messages,exception){this.logger=logger,this.timeStamp=timeStamp,this.level=level,this.messages=messages,this.exception=exception};LoggingEvent.prototype={getThrowableStrRep:function(){return this.exception?getExceptionStringRep(this.exception):""},getCombinedMessages:function(){return 1===this.messages.length?this.messages[0]:this.messages.join(newLine)}},log4javascript.LoggingEvent=LoggingEvent,window.log4javascript=log4javascript}(),void 0===log4javascript&&"function"==typeof require)var log4javascript=require("./ThirdParty/log4javascript_uncompressed.js").log4javascript;var isLog4JsLite="log4javascript_lite"===log4javascript.edition;if(isLog4JsLite){var Layout=function(){};Layout.prototype={},log4javascript.Layout=Layout,log4javascript.PatternLayout=Layout,log4javascript.NullLayout=Layout,log4javascript.Appender=BrowserConsoleAppender,log4javascript.BrowserConsoleAppender=BrowserConsoleAppender,log4javascript.getRootLogger=log4javascript.getDefaultLogger;var originalGetLogger=log4javascript.getLogger;log4javascript.getLogger=function(catName){var logger=originalGetLogger();return logger.name=catName,logger.addAppender=function(appender){},logger.setLevel(log4javascript.Level[LoggerUtilSettings.DEFAULT_LOG_LEVEL]),logger}}LocalStroageAppender.prototype=new log4javascript.Appender,LocalStroageAppender.prototype.layout=new log4javascript.NullLayout,LocalStroageAppender.prototype.threshold=log4javascript.Level.DEBUG,LocalStroageAppender.prototype.append=function(loggingEvent){var appender=this,getFormattedMessage=function(){var layout=appender.getLayout(),formattedMessage=layout.format(loggingEvent);return layout.ignoresThrowable()&&loggingEvent.exception&&(formattedMessage+=loggingEvent.getThrowableStrRep()),formattedMessage};window.localStorage.setItem((new Date).toTimeString(),getFormattedMessage())},LocalStroageAppender.prototype.toString=function(){return"LocalStroageAppender"},WebSocketAppender.prototype=new log4javascript.Appender,WebSocketAppender.prototype.layout=new log4javascript.NullLayout,WebSocketAppender.prototype.threshold=log4javascript.Level.DEBUG,WebSocketAppender.prototype.append=function(loggingEvent){if(this.enabled){var appender=this,getFormattedMessage=function(){var layout=appender.getLayout(),formattedMessage=layout.format(loggingEvent);return layout.ignoresThrowable()&&loggingEvent.exception&&(formattedMessage+=loggingEvent.getThrowableStrRep()),(new Date).getTime()+" # "+formattedMessage};if(!this.logWebSocket)return void this._buffer.push(getFormattedMessage());switch(this.logWebSocket.readyState){case this.logWebSocket.CONNECTING:this._buffer.push(getFormattedMessage());break;case this.logWebSocket.OPEN:this.logWebSocket.send(getFormattedMessage());break;case this.logWebSocket.CLOSING:case this.logWebSocket.CLOSED:this.shutDown()}}},WebSocketAppender.prototype.connect=function(port){this.logWebSocket=new WebSocket("ws://127.0.0.1:"+port),this.logWebSocket.onopen=this.onOpen.bind(this),this.logWebSocket.onclose=this.onClose.bind(this),this.logWebSocket.onerror=this.onError.bind(this)},WebSocketAppender.prototype.onOpen=function(){this.enabled=!0,this._buffer.forEach(function(logMsg){this.logWebSocket.send(logMsg)},this),delete this._buffer},WebSocketAppender.prototype.onClose=function(){this.shutDown()},WebSocketAppender.prototype.onError=function(){Util.safeConsoleError("WebSocketAppender.onError: There was an error in WebSocket Appender"),this.shutDown()},WebSocketAppender.prototype.shutDown=function(){this.logWebSocket&&this.logWebSocket.close(),delete this._buffer,this.enabled=!1},WebSocketAppender.prototype.toString=function(){return"WebSocketAppender"};var WebSocketAppenderInstance=new WebSocketAppender;WebSocketAppenderInstance.setThreshold(log4javascript.Level.ALL),WebSocketAppenderInstance.setLayout(new log4javascript.PatternLayout("%d{HH:mm:ss} %c [%-5p] - %m")),LazyFormatLayout.prototype=new log4javascript.Layout,LazyFormatLayout.prototype.format=function(loggingEvent){var time=loggingEvent.timeStamp.toTimeString().split(/\s/)[0],head=time+" "+loggingEvent.logger.name+" ["+loggingEvent.level.name+"] - ",body=loggingEvent.messages.map(function(arg){try{switch(typeof arg){case"function":return arg();case"object":return JSON.stringify(arg,null,this.JSONspaces)}}catch(e){return"<<error while logging: "+(e.message||e.description)+" at: "+e.stack+">>"}return arg},this).join(""),result=head+body;if(loggingEvent.exception){var ex=loggingEvent.exception;result+=" ==> Exception: "+(ex.message||ex.description)+"\n"+ex.stack}return result.length>16384&&Util.safeConsoleWarn("Logging long message which may not show up at: ",Error().stack),result},LazyFormatLayout.prototype.ignoresThrowable=function(){return!1},LazyFormatLayout.prototype.toString=function(){return"LazyFormatLayout"};var BrowserAppender=new log4javascript.BrowserConsoleAppender;BrowserAppender.setThreshold(log4javascript.Level.ALL);var lazyFormatLayout=new LazyFormatLayout;BrowserAppender.setLayout(lazyFormatLayout),LoggerUtilSettings={_settings:null,DEFAULT_LOG_LEVEL:"WARN",init:function(){LoggerUtilSettings._settings={},log4javascript.getRootLogger().setLevel(log4javascript.Level[LoggerUtilSettings.DEFAULT_LOG_LEVEL])},setSettings:function(newSettings){LoggerUtilSettings._settings=newSettings;var defaultLogLevel=LoggerUtilSettings._settings["log:defaultLevel"]||LoggerUtilSettings.DEFAULT_LOG_LEVEL;log4javascript.getRootLogger().setLevel(log4javascript.Level[defaultLogLevel]),Object.keys(newSettings).filter(function(k){return k.match(/^log:cat/)}).forEach(function(catSetting){var logLevel=newSettings[catSetting],tokens=catSetting.split(":"),catName=tokens.pop();log4javascript.getLogger(catName).setLevel(log4javascript.Level[logLevel])}),newSettings.remoteLogging&&newSettings.remoteLogging.enabled?WebSocketAppenderInstance.connect(newSettings.remoteLogging.port):WebSocketAppenderInstance.shutDown()},getCategoryLogLevel:function(catName){if(!LoggerUtilSettings._settings)return null;var catLogLevel=LoggerUtilSettings._settings["log:cat:"+catName];return catLogLevel||null},getLogSettings:function(){var logSettings={};return Object.keys(LoggerUtilSettings._settings).filter(function(k){return k.match(/^log:/)}).forEach(function(logSetting){logSettings[logSetting]=LoggerUtilSettings._settings[logSetting]}),logSettings.remoteLogging=LoggerUtilSettings._settings.remoteLogging,logSettings},getAvailableLevels:function(){return Object.keys(log4javascript.Level)},getEmptyLogger:function(){function nop(){}return{trace:nop,prettyTrace:nop,debug:nop,prettyDebug:nop,warn:nop,info:nop,error:nop}}},"undefined"!=typeof exports&&(exports.LoggerUtil=LoggerUtil,exports.LoggerUtilSettings=LoggerUtilSettings);var MSG_TYPES={REGISTER_FRAME:"REGISTER_FRAME",QUERY:"QUERY_ATTR",SRVC_SET_GLOBAL_VARIABLES:"SRVC_SET_GLOBAL_VARIABLES",SRVC_GET_ALL_BROWSERS:"SRVC_GET_ALL_BROWSERS",QUERY_DESC_TO_ID:"QUERY_DESC_TO_ID",SRVC_CALL_OBJ_EVENT:"SRVC_CALL_OBJ_EVENT",SRVC_INVOKE_METHOD:"SRVC_INVOKE_METHOD",SRVC_MAKE_OBJ_VISIBLE:"SRVC_MAKE_OBJ_VISIBLE",SRVC_GET_SCREEN_RECT:"SRVC_GET_SCREEN_RECT",SRVC_EDIT_SET:"SRVC_EDIT_SET",SRVC_GET_FORM:"SRVC_GET_FORM",RECORD:"RECORD",REQUEST_COMID:"REQUEST_COMID",RESPONSE_COMID:"RESPONSE_COMID",DISPATCH_TO_FRAME_ELEM:"DISPATCH_TO_FRAME_ELEM",MATCH_DESC_TO_ID:"MATCH_DESC_TO_ID",FRAME_FROM_POINT:"FRAME_FROM_POINT",QUERY_GET_TABLE_DATA:"QUERY_GET_TABLE_DATA",SRVC_LOAD_KIT:"SRVC_LOAD_KIT",WEBEXT_REPORT_LINE:"WEBEXT_REPORT_LINE",WEBEXT_RECORD_EVENT:"WEBEXT_RECORD_EVENT"};Msg.prototype={_msgType:null,_to:null,_tab:-1,_data:null,toString:function(){return"\nType:"+this._msgType+"\nTo:"+this._to+"\nTab:"+this._tab+"\nData:"+this._data},clone:function(){return new Msg(this._msgType,this._to,this._data,this._tab)},QTP_COM_ID:-1};var ErrorReporter={ThrowGeneralError:function(){throw this.CreateExceptionObjFromStatus("ERROR")},ThrowNotImplemented:function(method){var e=this.CreateExceptionObjFromStatus("NotImplemented");throw e.Details=method,e},ThrowObjectNotFound:function(){throw this.CreateExceptionObjFromStatus("ObjectNotFound")},ThrowObjectDisabled:function(){throw this.CreateExceptionObjFromStatus("ObjectDisabled")},ThrowItemNotFound:function(){throw this.CreateExceptionObjFromStatus("ItemNotFound")},ThrowItemNotUnique:function(){throw this.CreateExceptionObjFromStatus("ItemNotUnique")},ThrowInvalidArg:function(){throw this.CreateExceptionObjFromStatus("InvalidArgument")},ThrowOutOfRange:function(){throw this.CreateExceptionObjFromStatus("OutOfRange")},ThrowMethodNotFound:function(){throw this.CreateExceptionObjFromStatus("MethodNotFound")},CreateExceptionObjFromStatus:function(status){return new Error(status)}},Util={identity:function(x){return x},identityWithCallback:function(x){(0,arguments[arguments.length-1])(x)},isUndefined:function(x){return void 0===x},isNullOrUndefined:function(x){return Util.isUndefined(x)||null===x},isObject:function(val){return"object"==typeof val&&!Array.isArray(val)},isFunction:function(val){return"function"==typeof val},isLegacyObject:function(obj){return void 0===obj&&-1!==(""+obj).search("HTMLAllCollection")},parseJSON:function(str,logger){if("undefined"==typeof JSON||null==JSON.parse)return logger&&logger.error("JSON or JSON.parse is undefined"),null;if(!str)return logger&&logger.error("Tried to parse empty message"),null;logger&&logger.trace("Parsing string: \n",str);try{return JSON.parse(str)}catch(e){return logger&&logger.error("Failed to parse string with exception: "+e+"\nString was: "+str+"\nStack:"+e.stack),null}},capitalize:function(str){return str[0].toUpperCase()+str.slice(1)},alwaysFalse:function(){return!1},alwaysTrue:function(){return!0},makeArray:function(seq){if(Array.isArray(seq))return seq;for(var array=new Array(seq.length),i=0;i<seq.length;i++)array[i]=seq[i];return array},arrayFindIndex:function(arr,predicate,thisArg){thisArg=thisArg||this;var result=-1;return Util.makeArray(arr).some(function(element,index,array){return!!predicate.call(thisArg,element,index,array)&&(result=index,!0)}),result},arrayFind:function(arr,predicate,thisArg){var realArray=Util.makeArray(arr),index=Util.arrayFindIndex(realArray,predicate,thisArg);if(-1!==index)return arr[index]},arrayCompact:function(arr){return Array.isArray(arr)?arr.filter(Util.identity):null},arrayWrap:function(obj){return Array.isArray(obj)?obj:[obj]},arrayReduce:function(array,iterateFunc,startVal){if(!Array.isArray(array))return null;var startIndex=0,cumulator=array[0];startVal&&(cumulator=startVal,indexOffset=1);for(var i=startIndex;i<array.length;i++)cumulator=iterateFunc(cumulator,array[i],i,array);return cumulator},stringNthPosition:function(str,substr,n){for(var pos=-1;n--;){var index=str.indexOf(substr,pos+1);if(-1===index)return-1;pos=index}return pos},stringCount:function(str,substr){if(!substr)return-1;var count=-1,index=-1;do{count++,index=str.indexOf(substr,index+1)}while(-1!==index);return count},stringTrimLeft:function(str){if("string"!=typeof str)throw Error("stringTrimLeft called with non-string");return"function"==typeof str.trimLeft?str.trimLeft(str):str.replace(/^\s+/,"")},formatString:function(format){var args=Array.prototype.slice.call(arguments,1);return format.replace(/{(\d+)}/g,function(match,number){return void 0!==args[number]?args[number]:match})},shallowObjectClone:function(srcObj){var targetObj={};for(var key in srcObj)"function"!=typeof srcObj[key]&&(targetObj[key]=srcObj[key]);return targetObj},deepObjectClone:function(srcObj){if(null==srcObj||"object"!=typeof srcObj)return srcObj;var targetObj;if(Array.isArray(srcObj)){targetObj=[];for(var index=0;index<srcObj.length;index++){var cloneValue=arguments.callee(srcObj[index]);targetObj[index]=cloneValue}return targetObj}switch(srcObj.constructor){case RegExp:targetObj=new RegExp(srcObj);break;case Date:targetObj=new Data(srcObj.getTime());break;default:targetObj={}}for(var key in srcObj)targetObj[key]=arguments.callee(srcObj[key]);return targetObj},isVisible:function(elemRect,containerRect){var intersection=Util.intersectRect(containerRect,elemRect);if(Util.isRectEmpty(intersection))return!1;var minimalIntersectionSize=Math.min(.9*Util.rectArea(elemRect),1e4);return Util.rectArea(intersection)>minimalIntersectionSize},isRectFullyInRect:function(elemRect,containerRect){var intersection=Util.intersectRect(containerRect,elemRect);return!Util.isRectEmpty(intersection)&&Util.rectArea(intersection)==Util.rectArea(elemRect)},rectArea:function(rect){return Util.isRect(rect)?(rect.right-rect.left)*(rect.bottom-rect.top):0},intersectRect:function(r1,r2){var intersectionRect={top:0,left:0,bottom:0,right:0};if(Util.isRectEmpty(r1)||Util.isRectEmpty(r2))return intersectionRect;var isIntersected=!1;return(r1.left<r2.right&&r1.left>=r2.left||r2.left<r1.right&&r2.left>=r1.left)&&(r1.top<r2.bottom&&r1.top>=r2.top||r2.top<r1.bottom&&r2.top>=r1.top)&&(isIntersected=!0),isIntersected?(intersectionRect.top=Math.max(r1.top,r2.top),intersectionRect.left=Math.max(r1.left,r2.left),intersectionRect.bottom=Math.min(r1.bottom,r2.bottom),intersectionRect.right=Math.min(r1.right,r2.right),intersectionRect):intersectionRect},getCenterPoint:function(rect){return{x:(rect.left+rect.right)/2,y:(rect.top+rect.bottom)/2}},isPoint:function(point){return!Util.isUndefined(point)&&!Util.isUndefined(point.x)&&!Util.isUndefined(point.y)},isRect:function(rectCandidate){return!(Util.isUndefined(rectCandidate)||Util.isUndefined(rectCandidate.top)||Util.isUndefined(rectCandidate.bottom)||Util.isUndefined(rectCandidate.left)||Util.isUndefined(rectCandidate.right))},isCircle:function(circleCandidate){return!Util.isUndefined(circleCandidate)&&!Util.isUndefined(circleCandidate.x)&&!Util.isUndefined(circleCandidate.y)&&!Util.isUndefined(circleCandidate.radius)&&circleCandidate.radius>=0},isEqualRects:function(rect1,rect2,threshold){threshold||(threshold=10);var isEdgeEqual=function(e1,e2){return Math.abs(e1-e2)<threshold};return!(!Util.isRect(rect1)||!Util.isRect(rect2))&&(isEdgeEqual(rect1.top,rect2.top)&&isEdgeEqual(rect1.bottom,rect2.bottom)&&isEdgeEqual(rect1.left,rect2.left)&&isEdgeEqual(rect1.right,rect2.right))},isRectEmpty:function(rect){return!Util.isRect(rect)||(rect.right<=rect.left||rect.bottom<=rect.top)},isPointInRect:function(point,rect,logger){return logger=logger||LoggerUtilSettings.getEmptyLogger(),Util.isPoint(point)?Util.isRect(rect)?point.x>=rect.left&&point.x<=rect.right&&point.y>=rect.top&&point.y<=rect.bottom:(logger.error("isPointInRect: received invalid rect: ",rect),!1):(logger.error("isPointInRect: received invalid point: ",point),!1)},isPointInCircle:function(point,circle,logger){if(logger=logger||LoggerUtilSettings.getEmptyLogger(),!Util.isPoint(point))return logger.error("isPointInCircle: received invalid point: ",point),!1;if(!Util.isCircle(circle))return logger.error("isPointInCircle: received invalid circle: ",circle),!1;var dx=circle.x-point.x,dy=circle.y-point.y;return dx*dx+dy*dy<=circle.radius*circle.radius},isPointInPoly:function(point,coords,logger){if(logger=logger||LoggerUtilSettings.getEmptyLogger(),Util.isNullOrUndefined(coords)||!Array.isArray(coords))return logger.error("isPointInPoly: received invalid coords: ",coords),!1;var intersects=0,wherex=point.x,wherey=point.y,totalv=coords.length/2,totalc=2*totalv,xval=coords[totalc-2],yval=coords[totalc-1],end=totalc,pointer=1;for(yval>=wherey!=coords[pointer]>=wherey&&(xval>=wherex==coords[0]>=wherex?intersects+=xval>=wherex?1:0:intersects+=xval-(yval-wherey)*(coords[0]-xval)/(coords[pointer]-yval)>=wherex?1:0);pointer<end;)if(yval=coords[pointer],pointer+=2,yval>=wherey){for(;pointer<end&&coords[pointer]>=wherey;)pointer+=2;if(pointer>=end)break;coords[pointer-3]>=wherex==coords[pointer-1]>=wherex?intersects+=coords[pointer-3]>=wherex?1:0:intersects+=coords[pointer-3]-(coords[pointer-2]-wherey)*(coords[pointer-1]-coords[pointer-3])/(coords[pointer]-coords[pointer-2])>=wherex?1:0}else{for(;pointer<end&&coords[pointer]<wherey;)pointer+=2;if(pointer>=end)break;coords[pointer-3]>=wherex==coords[pointer-1]>=wherex?intersects+=coords[pointer-3]>=wherex?1:0:intersects+=coords[pointer-3]-(coords[pointer-2]-wherey)*(coords[pointer-1]-coords[pointer-3])/(coords[pointer]-coords[pointer-2])>=wherex?1:0}return 0!=(1&intersects)},getAgentNPObj:function(){return window.document.getElementById("__QTP__OBJ__")},assert:function(cond,msg,logger){cond||logger&&logger.error("ASSERT: "+msg)},generateQTPPropertyName:function(){return"__QTP__"+(new Date).getTime()},padLeft:function(n,ndigits){for(var num=""+n,zeros=ndigits-num.length;zeros>0;)num="0"+num,--zeros;return num},getTextNodesValue:function(node){if("SCRIPT"===node.tagName)return[];if(3===node.nodeType)return[node.nodeValue];var res=[];return Util.makeArray(node.childNodes).forEach(function(element){res=res.concat(Util.getTextNodesValue(element))}),res},cleanSpecialChars:function(strToClean){if("string"!=typeof strToClean)return strToClean;var cleanAttrVal=strToClean.replace(/\n|\r/gm,"");return cleanAttrVal=cleanAttrVal.replace(/\t/g," ")},cleanMultipleSpaces:function(strToClean){return"string"!=typeof strToClean?strToClean:(strToClean=strToClean.replace(/\xa0/g," "),strToClean.replace(/ +/g," "))},browserApplicationVersion:function(logger){if("undefined"==typeof navigator&&"function"==typeof require){var system=require("sdk/system");if(system){return system.vendor+" "+system.name+" "+system.version}}var browserVersion=Util._parseUserAgent(navigator.userAgent,logger);if(browserVersion)return browserVersion;var browserVersion=Util._guessBrowserFromVendorAndPlatform(navigator.vendor,navigator.platform,logger);return browserVersion||(logger&&logger.error("browserApplicationVersion: unable to detect browser"),"UnknownBrowser 0")},_parseUserAgent:function(userAgent,logger){var browserName,regex;if(-1!==userAgent.indexOf("OPR"))browserName="Opera",regex=/OPR\S+/;else if(-1!==userAgent.indexOf("Edge"))regex=/Edge\S+/,browserName="Edge";else if(-1!==userAgent.indexOf("PhantomJS"))regex=/PhantomJS\S+/,browserName="PhantomJS";else if(-1!==userAgent.indexOf("Chrome"))regex=/Chrome\S+/,browserName="Chrome";else if(-1!==userAgent.indexOf("Firefox"))regex=/Firefox\S+/,browserName="Mozilla Firefox";else if(-1!==userAgent.indexOf("Safari")&&-1!==userAgent.indexOf("Version"))regex=/Version\S+/,browserName="Safari";else if(-1!==userAgent.indexOf("JavaFX"))regex=/JavaFX\S+/,browserName="JavaFX";else{if(-1===userAgent.indexOf("iPhone")&&-1===userAgent.indexOf("iPad")&&-1===userAgent.indexOf("iPod"))return logger&&logger.warn("_parseUserAgent: unknown user agent: "+userAgent),null;regex=/\b(?:iPhone|iPad|iPod)\b.*?OS [\d_]+/,browserName="Safari"}var sVersion=regex.exec(userAgent);if(!sVersion)return logger&&logger.warn("_parseUserAgent: unable to parse user agent: "+userAgent),null;var sVersion=sVersion[0];sVersion=sVersion.replace("/"," "),sVersion=sVersion.replace(/_/g,"."),sVersion=sVersion.slice(sVersion.lastIndexOf(" ")+1);var version=sVersion.split(".");return browserName+" "+version[0]+"."+version[1]},_guessBrowserFromVendorAndPlatform:function(vendor,platform,logger){return null==vendor||null==platform?(logger&&logger.error("_guessBrowserFromVendorAndPlatform: missing vendor or platform values. vendor: "+vendor+" platform: "+platform),null):vendor.match(/apple/i)&&platform.match(/(?:ipad|ipod|iphone)/i)?"Safari 0":(logger&&logger.warn("_guessBrowserFromVendorAndPlatform: unable to detect browser. vendor: "+vendor+" platform: "+platform),null)},jsonStringify:function(jsonObj,logger){return"undefined"==typeof JSON?(logger&&logger.error("jsonStringify: JSON is undefined"),null):null==JSON.stringify?(logger&&logger.error("jsonStringify: JSON.stringify is undefined"),null):JSON.stringify(jsonObj)},cleanTextProperty:function(text){return"string"!=typeof text?text:(text=Util.stringTrimLeft(text),text=text.replace(/\t/g," "),text=text.replace(/\r\n|\r|\n/g," "),text=text.replace(/ +/g," "),text=text.replace(/\xA0/g," "))},extend:function(obj,properties){return properties&&Object.keys(properties).forEach(function(key){obj[key]=properties[key]}),obj},calculateTabRect:function(pageDimensions,logger){if(!pageDimensions.window_rect)return logger&&logger.warn("window_rect is null on pageDimensions."),null;logger&&logger.trace("calculateTabRect: pageDimensions: ",pageDimensions);var deltaWidth=pageDimensions.outerWidth>pageDimensions.innerWidth?pageDimensions.outerWidth-pageDimensions.innerWidth:0,deltaHeight=pageDimensions.outerHeight>pageDimensions.innerHeight?pageDimensions.outerHeight-pageDimensions.innerHeight:0,borderPixels=deltaWidth/2,rect={},window_rect=pageDimensions.window_rect;return rect.top=window_rect.top+deltaHeight-borderPixels,"undefined"!=typeof navigator&&-1!=navigator.userAgent.indexOf("Edge")&&BrowserServices.isEdgeMaximized()&&(rect.top-=(window.outerHeight-window.screen.availHeight)/2),rect.bottom=window_rect.top+pageDimensions.outerHeight,rect.left=window_rect.left+borderPixels,rect.right=window_rect.left+pageDimensions.outerWidth-borderPixels,rect},calculateTabRectByScreenAttribs:function(pageDimensions,logger){logger&&logger.trace("calculateTabRectByScreenAttribs: pageDimensions: ",pageDimensions);var screen_height=screen.height,screen_availheight=screen.availHeight,screen_availwidth=(screen.width,screen.availWidth),borderPixels=(screen_availwidth-pageDimensions.innerWidth)/2,signal_bar=screen_height-screen_availheight,address_bar=(screen_availheight-pageDimensions.innerHeight)/2,rect={},window_rect=pageDimensions.window_rect;return rect.top=window_rect.top+address_bar+signal_bar-borderPixels,rect.bottom=window_rect.top+screen_availheight,rect.left=window_rect.left+borderPixels,rect.right=window_rect.left+screen_availwidth-borderPixels,rect},getMicClass:function(ao){for(var micclass=ao.GetAttrSync("micclass");Array.isArray(micclass);)micclass=micclass[0];return micclass},isContainerMicclass:function(micclass){return"Browser"===micclass||"Page"===micclass||"Frame"===micclass},map:function(obj,func,thisArg){return thisArg=thisArg||this,Array.isArray(obj)?obj.map(func,thisArg):func.call(thisArg,obj)},objectFromArray:function(arr,value){var obj=Object.create(null);return arr.forEach(function(key){obj[key]=value}),obj},inherit:function(child,base,properties){var baseP=base.prototype;child.prototype=Object.create(baseP);var childP=child.prototype;childP.constructor=child,Util.extend(childP,properties)},functionStringify:function(func){return"function"!=typeof func?null:"("+func.toString()+")();"},convertXmlStrToJson:function(xmlDoc){return(new X2JS).xml_str2json(xmlDoc)},isInjectableUrl:function(url){return!!url&&!url.match(/^(?:chrome|opera|about|javascript):/)},traverseObject:function(obj,traverseVisitorFunc,parentPath){parentPath=parentPath||"";for(var nodeName in obj){if(!1===traverseVisitorFunc(obj,nodeName,parentPath))return;"object"==typeof obj[nodeName]&&null!=obj[nodeName]&&this.traverseObject(obj[nodeName],traverseVisitorFunc,parentPath+nodeName+"/")}},elemHasClass:function(elem,name){return elem.classList&&elem.classList.contains?elem.classList.contains(name):!!elem.className&&-1!=elem.className.split(/\s+/).indexOf(name)},setTimeout:function(func,timeout){var setTimeoutFunction;if("function"==typeof require)try{require("sdk/timers")&&(setTimeoutFunction=require("sdk/timers").setTimeout)}catch(e){}return setTimeoutFunction||"object"!=typeof window||(setTimeoutFunction=window.setTimeout),setTimeoutFunction=setTimeoutFunction||setTimeout,setTimeoutFunction.apply(window,arguments)},setInterval:function(func,timeout){var setIntervalFunction;if("function"==typeof require)try{require("sdk/timers")&&(setIntervalFunction=require("sdk/timers").setInterval)}catch(e){}return setIntervalFunction||"object"!=typeof window||(setIntervalFunction=window.setInterval),setIntervalFunction=setIntervalFunction||setInterval,setIntervalFunction.apply(window,arguments)},clearInterval:function(id_of_setinterval){var clearIntervalFunction;if("function"==typeof require)try{require("sdk/timers")&&(clearIntervalFunction=require("sdk/timers").clearInterval)}catch(e){}return clearIntervalFunction||"object"!=typeof window||(clearIntervalFunction=window.clearInterval),clearIntervalFunction=clearIntervalFunction||clearInterval,clearIntervalFunction.apply(window,[id_of_setinterval])},nodeContains:function(rootNode,otherNode){if(null==rootNode||null==otherNode)return!1;if(null!=rootNode.contains)return rootNode.contains(otherNode);if(rootNode===otherNode)return!0;if(rootNode.compareDocumentPosition)return!!(rootNode.compareDocumentPosition(otherNode)&Node.DOCUMENT_POSITION_CONTAINED_BY);for(var currentNode=otherNode.parentNode;currentNode;){if(currentNode===rootNode)return!0;currentNode=currentNode.parentNode}return!1},safeReplace:function(source,search,replacement){return source.replace(search,function(){return replacement})},
findAncestor:function(element,pred){for(var elem=element;elem;elem=elem.parentElement)if(pred(elem))return elem},isExtEventRegistered:function(element,eventName){var attr=element.getAttribute("_uft_ext_events_hooked"),json=attr?JSON.parse(attr):null;return!(!json||!json.events)&&json.events.indexOf("on"+eventName.toLowerCase())>=0},startsWith:function(str,sub){return"string"==typeof str&&"string"==typeof sub&&(str.startsWith?str.startsWith(sub):0==str.indexOf(sub))},isFrameXSS:function(frameElem,containerWin){try{if("gap://ready"==frameElem.src)return!1;frameElem.contentWindow.document}catch(ex){return!1}return!0},safeConsoleError:function(str){var func=console.error||console.log;func&&func.call(console,str)},safeConsoleWarn:function(str){var func=console.warn||console.log;func&&func.call(console,str)},valMatchReg:function(actualValue,expectReg){return new RegExp("^\\s*(?:"+expectReg+")\\s*$","i").test(actualValue)},getChromeVersion:function(){var pieces=navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/);if(null!=pieces&&5==pieces.length)return pieces=pieces.map(function(piece){return parseInt(piece,10)}),{major:pieces[1],minor:pieces[2],build:pieces[3],patch:pieces[4]}}},Constants={noCoordinate:-9999},RtIdUtils={IsRuntimeId:function(webId){return!!webId&&("object"==typeof webId&&("browser"in webId&&"page"in webId&&"frame"in webId&&"object"in webId&&(webId.browser>=-1&&webId.page>=-1&&webId.frame>=-1||(!!RtIdUtils.IsRTIDExtension(webId)||!!RtIdUtils.IsRTIDTestingTool(webId)))))},IsRTIDAgent:function(rtid){return-1===rtid.browser&&-1===rtid.page&&-1===rtid.frame&&null===rtid.object},IsRTIDBrowser:function(rtid){return-1!==rtid.browser&&-1===rtid.page&&-1===rtid.frame&&null===rtid.object},IsRTIDPage:function(rtid){return-1!==rtid.browser&&-1!==rtid.page&&-1===rtid.frame&&null===rtid.object},IsRTIDFrame:function(rtid){return-1!==rtid.browser&&-1!==rtid.page&&-1!==rtid.frame&&null===rtid.object},IsRTIDAO:function(rtid){return-1!==rtid.browser&&-1!==rtid.page&&-1!==rtid.frame&&null!==rtid.object},IsRTIDExtension:function(rtid){return RtIdUtils._IsRTIDEqualToControl(rtid,RtIdUtils.GetExtensionRtId())},IsRTIDTestingTool:function(rtid){return RtIdUtils._IsRTIDEqualToControl(rtid,RtIdUtils.GetTestingToolRtId())},IsRTIDDaemon:function(rtid){return RtIdUtils._IsRTIDEqualToControl(rtid,RtIdUtils.GetDaemonRtId())},_IsRTIDEqualToControl:function(rtid,controlRtId){return rtid.browser===controlRtId.browser&&rtid.page===controlRtId.page&&rtid.frame===controlRtId.frame&&!rtid.object},IsRTIDEqual:function(rtid1,rtid2){return!(!this.IsRuntimeId(rtid1)||!this.IsRuntimeId(rtid2))&&(rtid1.browser===rtid2.browser&&(rtid1.page===rtid2.page&&(rtid1.frame===rtid2.frame&&(!(!this.IsRTIDAO(rtid1)&&this.IsRTIDAO(rtid2)||this.IsRTIDAO(rtid1)&&!this.IsRTIDAO(rtid2))&&(rtid1.object===rtid2.object||rtid1.object.entry===rtid2.object.entry&&rtid1.object.frameCockie===rtid2.object.frameCockie)))))},GetExtensionRtId:function(){return{browser:-2,page:-2,frame:-2,object:null}},GetTestingToolRtId:function(){return{browser:-5,page:-5,frame:-5,object:null}},GetDaemonRtId:function(){return{browser:-7,page:-7,frame:-7,object:null}},GetAgentRtid:function(){return{browser:-1,page:-1,frame:-1,object:null}},GetBrowserRtid:function(rtid){var clonedRtid=Util.deepObjectClone(rtid);return this.IsRuntimeId(clonedRtid)&&(clonedRtid.page=-1,clonedRtid.frame=-1,clonedRtid.object=null),clonedRtid}},ReadyState2Status={unintialized:0,complete:4,loading:1,interactive:4};MultipleResponses.prototype={_logger:null,_numOfResponses:-1,callback:function(func){var self=this;return function(){--self._numOfResponses,self._logger.trace("callback called - waiting for ",self._numOfResponses);var done=0===self._numOfResponses;switch(arguments.length){case 0:return func.call(self,done);case 1:return func.call(self,done,arguments[0]);default:var args=[done].concat(Util.makeArray(arguments));return func.apply(self,args)}}}};var AttrPartialValueUtil={IsPartialValue:function(val){return val&&"partial"===val.type},WrapValue:function(attrName,val,attachedData){return{type:"partial",attr:attrName,value:val,data:attachedData}},GetValue:function(wrappedValue,logger){return logger=logger||LoggerUtilSettings.getEmptyLogger(),Util.assert(AttrPartialValueUtil.IsPartialValue(wrappedValue),"AttrPartialValueUtil.GetValue: Received an object which is not a wrapped Partial value",logger),wrappedValue.value},GetAttachedData:function(wrappedValue,logger){return logger=logger||LoggerUtilSettings.getEmptyLogger(),Util.assert(AttrPartialValueUtil.IsPartialValue(wrappedValue),"AttrPartialValueUtil.GetValue: Received an object which is not a wrapped Partial value",logger),wrappedValue.data}},StatusUtil={OK:"OK",OBJECT_NOT_FOUND:"ObjectNotFound",OBJECT_NOT_UNIQUE:"ObjectNotUnique",isUnexpected:function(status){if(!status)return!1;switch(status){case StatusUtil.OK:case StatusUtil.OBJECT_NOT_FOUND:case StatusUtil.OBJECT_NOT_UNIQUE:return!1}return!0}},ControlLearnType={Yes:0,No:1,IfChildren:2},ChildrenLearnType={Yes:0,No:1,LetMeSupply:2};"undefined"!=typeof exports&&(exports.Util=Util);var SpecialObject={_create:function(type,params){var ret={specialObj:!0,type:type};return params&&Util.extend(ret,params),ret},CreateDescription:function(description){return this._create("recorded_description",{description:description})},CreatePropertyBag:function(properties){return this._create("property_bag",{properties:properties})},CreateDotObj:function(id){return this._create("object",{id:id})},CreateElementRequest:function(uid,asyncId){return this._create("DotObjMarkerElementRequest",{objUID:uid,dotUtilObjAsyncID:asyncId})},CreateDocumentRequest:function(asyncId){return this._create("DotObjMarkerDocumentRequest",{dotUtilObjAsyncID:asyncId})},CreateReferenceRequest:function(ref){return this._create("DotObjMarkerReferenceRequest",{objRef:ref})},CreateDotObjInHTML:function(cookie,asyncId){return this._create("DotObjInHTML",{cookie:cookie,dotUtilObjAsyncID:asyncId})},CreateMMFile:function(html){return this._create("writeMMFile",{html:html})},CreateFrameSource:function(path,source){return this._create("saveFrameSource",{fullPath:path,frameSource:source})},CreateTime:function(time){return this._create("UTCTime",{year:time.getUTCFullYear(),month:time.getUTCMonth()+1,day:time.getUTCDate(),hour:time.getUTCHours(),minute:time.getUTCMinutes(),second:time.getUTCSeconds(),milliseconds:time.getUTCMilliseconds()})},CreateAsyncRequest:function(cookie){return this._create("AsyncRequest",{cookie:cookie,onTimeout:null})},CreateProcessId:function(){return this._create("processId")},CreateEventId:function(event,id){return this._create("event id",{point:{x:event.clientX,y:event.clientY},name:event.type,sourceId:id,index:(new Date).getTime()%1e6})},CreateBase64:function(value){return this._create("Base64",{data:value})}},Description={_logger:new LoggerUtil("Common.Description"),GetIDsByDescription:function(desc,candidateFunc,optionalParamsObj,resultCallback){this._logger.trace("GetIDsByDescription: Started with the following description:",desc);var data=desc||{};delete data["Kit Id"],data.xpath&&delete data._xpath,data._xpath?(data.xpath=data._xpath,delete data._xpath,this.findObjId(data,candidateFunc,optionalParamsObj,function(children){this._logger.debug("GetIDsByDescription: using _xpath (",data.xpath,") returned ",children?children.length:"[undefined]"," matches"),delete data.xpath,Util.isUndefined(children)||1!==children.length?this.findObjId(data,candidateFunc,optionalParamsObj,resultCallback):resultCallback(children)}.bind(this))):this.findObjId(data,candidateFunc,optionalParamsObj,resultCallback)},GetIDsByDescriptionSync:function(desc,candidateFunc,optionalParamsObj){this._logger.trace("GetIDsByDescriptionSync: Started with the following description:",desc);var data=desc||{};if(delete data["Kit Id"],data.xpath&&delete data._xpath,data._xpath){data.xpath=data._xpath,delete data._xpath;var children=this.findObjIdSync(data,candidateFunc,optionalParamsObj);if(this._logger.debug("GetIDsByDescriptionSync: using _xpath (",data.xpath,") returned ",children?children.length:"[undefined]"," matches"),delete data.xpath,children&&1===children.length)return children}return this.findObjIdSync(data,candidateFunc,optionalParamsObj)},_removeDuplicateAOs:function(agentObjects){return Array.isArray(agentObjects)?agentObjects.filter(function(ao,index,arr){return Util.arrayFindIndex(arr,function(candidate){return candidate._elem===ao._elem})===index}):agentObjects},_findObjIdInternal:function(filterFunc,desc,candidateFunc,additionalParamsObj,resultCallback){this._logger.trace("_findObjIdInternal: Called"),additionalParamsObj=additionalParamsObj||{};var children=candidateFunc(desc,additionalParamsObj.rootElem);additionalParamsObj.extraAOs&&(children=children.concat(additionalParamsObj.extraAOs));var filter=additionalParamsObj.filter||Util.identity,filteredChildren=children.filter(filter);return additionalParamsObj.learn&&(filteredChildren=this._filterWebExtAOForLearn(filteredChildren)),filterFunc(filteredChildren,desc,resultCallback)},findObjId:function(desc,candidateFunc,additionalParamsObj,resultCallback){var self=this;additionalParamsObj=additionalParamsObj||{},this._findObjIdInternal(Description.filterAOList.bind(this),desc,candidateFunc,additionalParamsObj,function(resAOs){if(resAOs.length>0)return resultCallback(self._removeDuplicateAOs(resAOs));var potentialTargets=[],shadowRoots=ShadowDomUtil.findAllShadowRoots(document,this._logger);if(0==shadowRoots.length)return resultCallback(self._removeDuplicateAOs(resAOs));var multipleResponse=new MultipleResponses(shadowRoots.length);shadowRoots.forEach(function(shadowRoot){additionalParamsObj.rootElem=shadowRoot,this._findObjIdInternal(Description.filterAOList.bind(this),desc,candidateFunc,additionalParamsObj,multipleResponse.callback(function(doneForAllShadowRoots,resAOsInShadowRoot){if(potentialTargets=potentialTargets.concat(resAOsInShadowRoot),doneForAllShadowRoots)return void resultCallback(self._removeDuplicateAOs(potentialTargets))}))},this)}.bind(this))},findObjIdSync:function(desc,candidateFunc,additionalParamsObj){additionalParamsObj=additionalParamsObj||{};var aos=this._findObjIdInternal(Description.filterAOListSync.bind(this),desc,candidateFunc,additionalParamsObj),shadowRoots=ShadowDomUtil.findAllShadowRoots(document,this._logger);return aos=Util.arrayReduce(shadowRoots,function(targetAOs,childElem){return additionalParamsObj.rootElem=childElem,targetAOs.concat(this._findObjIdInternal(Description.filterAOListSync.bind(this),desc,candidateFunc,additionalParamsObj))}.bind(this),aos),this._removeDuplicateAOs(aos)},filterAOList:function(aos,filter,resultCallback){var resAOs=[],attrsNum=Object.keys(filter).length;if(aos.length*attrsNum==0)return void resultCallback(aos);var allAttrsResManager=new MultipleResponses(aos.length);aos.forEach(function(ao){var queryAttrs=this.transformFilter(filter),aoQueryMsg=new Msg("QUERY_ATTR",ao.getID(),queryAttrs);ao.onMessage(aoQueryMsg,allAttrsResManager.callback(function(doneForAllAOs,aoQueryMsgRes){this._logger.trace("filterAOList: Got following response message from the AO: ",aoQueryMsgRes),this._areAttrsEqual(aoQueryMsgRes._data,filter)&&resAOs.push(ao),doneForAllAOs&&resultCallback(resAOs)}.bind(this)))},this)},filterAOListSync:function(aos,filter){var attrsNum=Object.keys(filter).length;return 0===aos.length||0===attrsNum?aos:aos.filter(function(ao){var queryAttrs=this.transformFilter(filter),attrsValResult=ao.QueryAttributesSync(queryAttrs);return this._logger.trace("filterAOList: Got the following response message from the AO: ",attrsValResult),this._areAttrsEqual(attrsValResult,filter)},this)},_areAttrsEqual:function(attrVals,otherAttrVals){return!Object.keys(attrVals).some(function(attrName){var attrValue=attrVals[attrName],otherAttrValue=otherAttrVals[attrName];if(!(this._MatchFunctions[attrName]?this._MatchFunctions[attrName](attrValue,otherAttrValue,this._logger):this._MatchFunctions.matchByValType(attrValue,otherAttrValue,this._logger)))return!0},this)},transformFilter:function(filter){var res_filter={};return Object.keys(filter).forEach(function(field){switch(field){case"":case"url without form data":break;case"WEB_PN_ID":("string"==typeof filter.WEB_PN_ID||filter.WEB_PN_ID&&filter.WEB_PN_ID.isRegExp)&&(res_filter.WEB_PN_ID=filter.WEB_PN_ID);break;case"attribute":case"style":var attr_pairs=filter[field];res_filter[field]=[],attr_pairs.forEach(function(attr_pair){var attributeName=attr_pair[0].regExQuery||attr_pair[0];res_filter[field].push(attributeName)});break;default:res_filter[field]=filter[field]}}),res_filter},getElementsByXpath:function(xpath,rootElem){function resolverNamespace(){return root===document?document.body.namespaceURI:root.namesapceURI}for(var e,root=rootElem||document,it=document.evaluate(xpath,root,null,XPathResult.ANY_TYPE,null),elements=[];e=it.iterateNext();)elements.push(e);if(0===elements.length)for(var namespaceXPath=Description._convertToNamespaceXPath(xpath),it=document.evaluate(namespaceXPath,root,resolverNamespace,XPathResult.ANY_TYPE,null);e=it.iterateNext();)elements.push(e);return elements},_convertToNamespaceXPath:function(xpath){var xpathUnits=xpath.split("/");return 1===xpathUnits.length?xpath:xpathUnits.map(function(unit){if(unit.length>0){var firstChar=unit.charAt(0);(firstChar>="a"&&firstChar<="z"||firstChar>="A"&&firstChar<="Z")&&(unit="uft:"+unit)}return unit}).join("/")},_Selectors:[function(desc,output,rootElem){var name="html tag";if(desc[name]&&!desc.xpath&&!desc.css&&!desc[name].isRegExp){var root=rootElem||document,elements=[];elements=Util.makeArray(root.getElementsByTagName?root.getElementsByTagName(desc[name]):root.querySelectorAll(desc[name])),output.push(elements),delete desc[name]}},function(desc,output,rootElem){var name="xpath";if(desc[name]){var expression=desc[name].regExQuery||desc[name],elements=Description.getElementsByXpath(expression,rootElem);delete desc[name],output.push(elements)}},function(desc,output,rootElem){var name="css";if(desc[name]){var root=rootElem||document,elements=[];elements=Util.makeArray(root.querySelectorAll(desc[name].regExQuery||desc[name])),output.push(elements),delete desc[name]}}],GetCandidateElements:function(desc,rootElem){var selectorsMatches=[];switch(this._Selectors.forEach(function(selectorFunc){selectorFunc(desc,selectorsMatches,rootElem)}),selectorsMatches.length){case 0:var root=rootElem||document;return Util.makeArray(root.getElementsByTagName?root.getElementsByTagName("*"):root.querySelectorAll("*"));case 1:return selectorsMatches[0]}selectorsMatches.forEach(function(arr){arr.forEach(function(elem){elem._FitSelectorCount=(elem._FitSelectorCount||0)+1})});var ret=selectorsMatches[0].filter(function(elem){return elem._FitSelectorCount===selectorsMatches.length});return selectorsMatches.forEach(function(arr){arr.forEach(function(elem){delete elem._FitSelectorCount})}),ret},GetCandidateAOsForContent:function(parentID,optionalRootElem,desc,shadowRootElem){rootElem=shadowRootElem||optionalRootElem;var micclass,elements=this.GetCandidateElements(desc,rootElem);return desc&&(micclass=desc.micclass),elements.map(function(e){return content.kitsManager.createAO(e,parentID,!1,micclass)})},_MatchFunctions:{matchByValType:function(actualVal,expectedVal,logger){return!Util.isNullOrUndefined(actualVal)&&!Util.isNullOrUndefined(expectedVal)&&(AttrPartialValueUtil.IsPartialValue(expectedVal)?this.partialValueMatch(actualVal,expectedVal,logger):Util.isRect(expectedVal)?this.rectangleMatch(actualVal,expectedVal,logger):expectedVal.isRegExp?this.regExMatch(actualVal,expectedVal,logger):this.stringVals(actualVal,expectedVal,logger))},micclass:function(actualVal,expectedVal,logger){expectedVal=expectedVal.regExQuery||expectedVal,expectedVal=expectedVal.toUpperCase(),actualVal=Array.isArray(actualVal)?actualVal:[actualVal];var filtered=actualVal.filter(function(actualMicClass){return actualMicClass.toUpperCase()===expectedVal}),match=filtered.length>0;return logger&&logger.debug("_MatchFunctions.micclass: perform case-insensitive check between '",actualVal,"' and '",expectedVal,"'. Match: ",match),match},regExMatch:function(actualVal,expectedVal,logger){return logger&&logger.debug("matchAttr: Match is regular expression with:",expectedVal.regExQuery),Util.valMatchReg(actualVal,expectedVal.regExQuery)},rectangleMatch:function(actualVal,expectedVal){return Util.isEqualRects(expectedVal,actualVal)},partialValueMatch:function(actualVal,expectedVal,logger){return!(!AttrPartialValueUtil.IsPartialValue(actualVal)||!AttrPartialValueUtil.IsPartialValue(expectedVal))&&this.matchByValType(AttrPartialValueUtil.GetValue(actualVal),AttrPartialValueUtil.GetValue(expectedVal),logger)},attribute:function(actualVal,expectedVal,logger){return this.matchAttributeOrStyle(actualVal,expectedVal,logger)},style:function(actualVal,expectedVal,logger){return this.matchAttributeOrStyle(actualVal,expectedVal,logger)},matchAttributeOrStyle:function(actualVal,expectedVal,logger){return actualVal=Array.isArray(actualVal)?actualVal:[actualVal],expectedVal=Array.isArray(expectedVal)?expectedVal:[expectedVal],Util.assert(actualVal.length===expectedVal.length,"There are different number of values in actual from expected",logger),!expectedVal.some(function(expectedPropVal,propIndex){if(expectedPropVal=expectedPropVal[1],!this.matchByValType(actualVal[propIndex],expectedPropVal,logger))return!0},this)},stringVals:function(actualVal,expectedVal){return actualVal.trim&&(actualVal=actualVal.trim()),expectedVal.trim&&(expectedVal=expectedVal.trim()),actualVal.toUpperCase&&expectedVal.toUpperCase?actualVal.toUpperCase()===expectedVal.toUpperCase():actualVal===expectedVal},disabled:function(actualVal,expectedVal){return actualVal==expectedVal}},buildReturnMsg:function(msgType,to,aos,logger){var resMsg=new Msg(msgType,to,{WEB_PN_ID:[]});switch(aos.length){case 0:logger&&logger.trace("buildReturnMsg: Object not found"),resMsg._data.WEB_PN_ID=[],resMsg.status="ObjectNotFound";break;case 1:logger&&logger.trace("buildReturnMsg: Object is found"),resMsg._data.WEB_PN_ID=[aos[0].getID()];break;default:resMsg._data.WEB_PN_ID=[];for(var id_set={},i=0;i<aos.length;++i){var id=aos[i].getID(),strID=JSON.stringify(id);id_set[strID]||(id_set[strID]=!0,resMsg._data.WEB_PN_ID.push(id))}resMsg.status=resMsg._data.WEB_PN_ID.length>1?"ObjectNotUnique":"OK"}return resMsg},getAttributeInfo:function(propertyFullName){var seperatorIndex=propertyFullName.indexOf("/");return seperatorIndex<0?{name:propertyFullName.toLowerCase(),data:null}:{name:propertyFullName.substring(0,seperatorIndex).toLowerCase(),data:propertyFullName.substring(seperatorIndex+1)}},_getAttrsFromIdentificationProps:function(identificationAttributesObj,attributeCategory){this._logger.trace("_getAttrsFromIdentificationProps: started");var attrTypeKeys;attrTypeKeys=attributeCategory?Array.isArray(attributeCategory)?attributeCategory:[attributeCategory]:["mandatory","assistive","baseFilter","optionalFilter"];var attrObj={};return attrTypeKeys.forEach(function(attrType){identificationAttributesObj[attrType].forEach(function(attr){attrObj[attr]=null},this)},this),attrObj},createRecordDescription:function(agentObject,objIdentificationProps){this._logger.trace("createRecordDescription: started");var descriptionObj={},micclass=Util.getMicClass(agentObject);descriptionObj["logical name"]=this._getLogicalName(agentObject),descriptionObj.properties=this._getMandatoryProperties(agentObject,objIdentificationProps);for(var key in descriptionObj.properties)Util.isNullOrUndefined(descriptionObj.properties[key])&&delete descriptionObj.properties[key];var aoArr=[];if(Util.isContainerMicclass(micclass)){if("Frame"===micclass||"Browser"===micclass){var assistiveAttrsObj=Description._getAttrsFromIdentificationProps(objIdentificationProps,"assistive");Object.keys(assistiveAttrsObj).length>0&&(assistiveAttrsObj=agentObject.QueryAttributesSync(assistiveAttrsObj),Util.extend(descriptionObj.properties,assistiveAttrsObj))}}else aoArr=Description.GetIDsByDescriptionSync(Util.shallowObjectClone(descriptionObj.properties),Description.GetCandidateAOsForContent.bind(Description,agentObject.getID(),null),null),Util.assert(aoArr.length>0,"createRecordDescription: mandatory description returned no matches for micclass: "+micclass,this._logger),this._logger.trace("createRecordDescription: Received AO # ",aoArr.length);if(aoArr.length>1){var aoArrWithAssistive=this._getAOArrayWithAssistiveProperties(descriptionObj.properties,agentObject,objIdentificationProps);null!==aoArrWithAssistive&&(aoArr=aoArrWithAssistive),this._logger.trace("createRecordDescription: Added Assistive properties to description: ",descriptionObj),Util.assert(aoArr.length>0,"createRecordDescription: after assistive description, GetIDsByDescriptionSync returned no matches for micclass: "+micclass,this._logger)}return(aoArr.length>1||"Frame"===micclass)&&(descriptionObj.selector=this._getSelector(objIdentificationProps.selector,agentObject,aoArr)),descriptionObj["smart identification properties"]=this._getSmartIdProperties(objIdentificationProps,agentObject),descriptionObj.additionalInfo=this._getAdditionalInfoProperties(objIdentificationProps,agentObject),this._isXpathSupported(agentObject)&&(descriptionObj.properties._xpath=agentObject.GetAttrSync("_xpath")),descriptionObj.properties.micclass=micclass,SpecialObject.CreateDescription(descriptionObj)},createTestObjectDescription:function(agentObject,objIdentificationProps,callback){this._logger.trace("createTestObjectDescription: started");var descSpecialObject=Description.createRecordDescription(agentObject,objIdentificationProps),description=descSpecialObject.description;if(this._logger.info("Test object original description:",description),"Frame"===Util.getMicClass(agentObject)){var msg=new Msg("SRVC_FIX_FRAME_DESCRIPTION",agentObject.getID(),{description:description,objIdentificationProps:{frame:objIdentificationProps}});return void agentObject.onMessage(msg,function(resMsg){descSpecialObject.description=resMsg._data.description,callback(descSpecialObject)}.bind(this))}this._fixPartialValuesForDescription(agentObject,description,function(updatedDescription){descSpecialObject.description=updatedDescription,callback(descSpecialObject)})},_fixPartialValuesForDescription:function(agentObject,description,callback){this._logger.trace("_fixPartialValuesForDescription: started");var queryAttrObj={};if(Object.keys(description.properties).forEach(function(prop){AttrPartialValueUtil.IsPartialValue(prop)&&(queryAttrObj[prop]=null)}),Object.keys(description["smart identification properties"]).forEach(function(prop){AttrPartialValueUtil.IsPartialValue(prop)&&(queryAttrObj[prop]=null)}),this._logger.trace("PartialValue is queryAttrObj = ",queryAttrObj),0==Object.keys(queryAttrObj).length)callback(description);else{var queryAttrMsg=new Msg("QUERY_ATTR",agentObject.getID(),queryAttrObj);agentObject.onMessage(queryAttrMsg,function(resMsg){Object.keys(resMsg._data).forEach(function(propName){description.properties[propName]&&(description.properties.propName=resMsg._data.propName),description["smart identification properties"].propName&&(description["smart identification properties"].propName=resMsg._data.propName)}),callback(description)})}},_isXpathSupported:function(agentObject){return!(Util.isContainerMicclass(Util.getMicClass(agentObject))||!Util.isNullOrUndefined(agentObject._control))},createEmptyRecordDescription:function(ao){this._logger.trace("createEmptyRecordDescription: called");var micclass=Util.getMicClass(ao);return{"logical name":micclass,"smart identification properties":{},properties:{micclass:micclass},selector:null}},_getMandatoryProperties:function(agentObject,objIdentificationProps){this._logger.trace("_getMandatoryProperties: called");var micclass=Util.getMicClass(agentObject),mandatoryAttrsObj=Description._getAttrsFromIdentificationProps(objIdentificationProps,"mandatory");return mandatoryAttrsObj=agentObject.QueryAttributesSync(mandatoryAttrsObj),Object.keys(mandatoryAttrsObj).forEach(function(key){this._invalidForDescription(mandatoryAttrsObj[key])&&delete mandatoryAttrsObj[key]},this),mandatoryAttrsObj.micclass=micclass,mandatoryAttrsObj},_getLogicalName:function(agentObject){this._logger.trace("_getLogicalName: called");var logicalName=agentObject.GetAttrSync("logical name")||"";if(logicalName=logicalName.trim(),0===logicalName.length)return Util.getMicClass(agentObject);logicalName=logicalName.substring(0,30);var indexOfWhitespace=logicalName.indexOf(" ",21);return indexOfWhitespace>=0&&(logicalName=logicalName.substring(0,indexOfWhitespace)),logicalName=logicalName.replace(/\"/g,"'"),logicalName=logicalName.replace(/:=/g,":-"),logicalName=logicalName.replace(/@@/g,"@-")},_getSelector:function(selector,agentObject,candidateAoArr){this._logger.trace("_getSelector: called for selector: ",selector);var selectorValue;return"index"===selector?selectorValue=Description._getIndexOrdinal(agentObject,candidateAoArr):this._logger.error("_getSelector default case for selector ",selector),this._logger.trace("_getSelector: Adding Selector '",selector,"' with value: ",selectorValue),{name:selector,value:selectorValue}},_isForceAddingFrameSelector:function(){return window.frames.length>0},_getIndexOrdinal:function(agentObject,candidateAoArr){this._logger.trace("_getIndexOrdinal: called.");var rtidToFind=agentObject.getID();if("Frame"===Util.getMicClass(agentObject))return AttrPartialValueUtil.WrapValue("index",null,{frameRtid:rtidToFind,forceSelector:this._isForceAddingFrameSelector()});var index=Util.arrayFindIndex(candidateAoArr,function(elem){return RtIdUtils.IsRTIDEqual(rtidToFind,elem.getID())},this);return Util.assert(-1!==index,"_getIndexOrdinal: finding the index of the runtime id failed",this._logger),index},_getAOArrayWithAssistiveProperties:function(propertiesObj,agentObject,objIdentificationProps){this._logger.trace("_getAOArrayWithAssistiveProperties: called");for(var assistiveAttrNamesArr=objIdentificationProps.assistive,length=assistiveAttrNamesArr.length,aoArr=null,i=0;i<length;i++){var attr=assistiveAttrNamesArr[i],attrVal=agentObject.GetAttrSync(attr);if(!this._invalidForDescription(attrVal)&&(propertiesObj[attr]=attrVal,aoArr=Description.GetIDsByDescriptionSync(Util.shallowObjectClone(propertiesObj),Description.GetCandidateAOsForContent.bind(Description,agentObject.getID(),null),null),Util.assert(aoArr.length>0,"_getAssistiveProperties: GetIDsByDescriptionSync returned no matches for attrs: "+JSON.stringify(propertiesObj),this._logger),1===aoArr.length))break}return aoArr},_invalidForDescription:function(value){return value&&"object"==typeof value},_getSmartIdProperties:function(objIdentificationProps,agentObject){this._logger.trace("_getSmartIdProperties: called.");var smartIdProps=Description._getAttrsFromIdentificationProps(objIdentificationProps,["baseFilter","optionalFilter"]);return smartIdProps=agentObject.QueryAttributesSync(smartIdProps),smartIdProps.micclass=Util.getMicClass(agentObject),smartIdProps},_getAdditionalInfoProperties:function(objIdentificationProps,agentObject){this._logger.trace("_getAdditionalInfoProperties: called.");var additionalInfoProps={};return objIdentificationProps.additionalInfo&&(additionalInfoProps=Description._getAttrsFromIdentificationProps(objIdentificationProps,["additionalInfo"]),additionalInfoProps=agentObject.QueryAttributesSync(additionalInfoProps)),additionalInfoProps},_filterWebExtAOForLearn:function(aoList){aoList=aoList.reverse();for(var aoDeleteMask=[],index=0;index<aoList.length;++index){var ao=aoList[index];switch(ao.getChildrenLearnType()){case ChildrenLearnType.No:for(var i2=0;i2<index;++i2){var ao2=aoList[i2];!aoDeleteMask[i2]&&Util.nodeContains(ao._elem,ao2._elem)&&(aoDeleteMask[i2]=!0)}break;case ChildrenLearnType.LetMeSupply:for(var childrenSupplied=ao.getChildrenForLearn(ao._elem)||[],i2=0;i2<index;++i2){var ao2=aoList[i2];!aoDeleteMask[i2]&&Util.nodeContains(ao._elem,ao2._elem)&&childrenSupplied.indexOf(ao2._elem)<0&&(aoDeleteMask[i2]=!0)}}}aoList=aoList.filter(function(ao,index){return!aoDeleteMask[index]}),aoDeleteMask=[];for(var index=0;index<aoList.index;++index){var ao=aoList[index];switch(ao.getControlLearnType()){case ControlLearnType.No:aoDeleteMask[index]=!0;break;case ControlLearnType.IfChildren:for(var hasValidChild=!1,i2=0;i2<index;++i2)if(!aoDeleteMask[i2]&&Util.nodeContains(ao._elem,aoList[i2]._elem)){hasValidChild=!0;break}aoDeleteMask[i2]=!hasValidChild}}return aoList=aoList.filter(function(ao,index){return!aoDeleteMask[index]}),aoList.reverse()}};WebIdContainer.prototype={_logger:null,_container:null,add:function(idToAdd,objectWithId){if(this._logger.trace("WebIdContainer.add: Called"),!this._validateId(idToAdd))return void this._logger.error("WebIdContainer.add: Id NOT valid, unable to add to container.");if(!objectWithId)return void this._logger.error("WebIdContainer.add: object is invalid");try{var idArray=this._getArrayRepresentationOfId(idToAdd);this._createObjectPath(this._container,idArray);this._getObjectContainerByPath(this._container,idArray)[idArray.length-1]=objectWithId}catch(e){throw this._logger.error("WebIdContainer.add: Failed.\nStack:"+e.stack),e}},remove:function(idToRemove){this._logger.trace("WebIdContainer.remove: Called on ",idToRemove);try{return this._getObject(idToRemove,!0)}catch(e){throw this._logger.error("WebIdContainer.remove: Failed on ",idToRemove,"\nStack:",e.stack),e}},find:function(idToFind){this._logger.trace("WebIdContainer.find: Called on ",idToFind);try{return this._getObject(idToFind,!1)}catch(e){throw this._logger.error("WebIdContainer.find: Failed on ",idToFind,"\nStack:",e.stack),e}},_createObjectPath:function(containerArr,pathArray){0!==pathArray.length&&(containerArr[pathArray[0]]||(containerArr[pathArray[0]]=[]),this._createObjectPath(containerArr[pathArray[0]],pathArray.slice(1)))},_getObjectContainerByPath:function(containerArray,pathArray){return containerArray[pathArray[0]]?1===pathArray.length?containerArray:this._getObjectContainerByPath(containerArray[pathArray[0]],pathArray.slice(1)):null},_validateId:function(webId){return RtIdUtils.IsRuntimeId(webId)},_getArrayRepresentationOfId:function(id){var agentObjId=-1;return null!==id.object&&(agentObjId=id.object.entry),[id.browser,id.page,id.frame,agentObjId]},_getObject:function(objectId,isRemoveFromContainer){if(!this._validateId(objectId))return this._logger.error("WebIdContainer._getObject: Id NOT valid. _getObject failed."),null;var idArray=this._getArrayRepresentationOfId(objectId),lastLevelArray=this._getObjectContainerByPath(this._container,idArray);if(!lastLevelArray)return this._logger.trace("WebIdContainer._getObject: Id ",objectId," not found in container."),null;var lastIndex=idArray.length-1,objToBeRemoved=lastLevelArray[lastIndex];return isRemoveFromContainer&&(lastLevelArray[lastIndex]=null),objToBeRemoved}},AsyncCommunicationHelper.prototype={_logger:null,_pendingAckForAsynMsgs:[],_timerID:-1,_nextMessageID:0,_listeners:null,_options:null,updateMessageWithNeededInfo:function(msg){Util.isUndefined(msg._ComAsyncInfo)||this._logger.error("updateMessageWithNeededInfo: there is already asyncID on this message please handle it"),msg._ComAsyncInfo={id:++AsyncCommunicationHelper.prototype._nextMessageID}},addAsyncMsgToQueue:function(msg,destinationChannelId){this._logger.trace("addAsyncMsgToQueue: Started"),this._pendingAckForAsynMsgs.push({msg:msg,sendTime:new Date,destinationChannel:destinationChannelId}),-1===this._timerID&&(this._timerID=Util.setInterval(this.onResendTimer.bind(this),this._options.timeout)),this._logger.trace("addAsyncMsgToQueue: Finished")},onAckForAsyncMsg:function(msg){this._logger.trace("onAckForAsyncMsg: Started for message id:"+msg._ComAsyncInfo.id),this.removeMessageFromAsyncQueue(msg),this._logger.trace("onAckForAsyncMsg: Finished")},removeMessageFromAsyncQueue:function(msg){
this._logger.trace("removeMessageFromAsyncQueue: Started");var foundMsg=this._pendingAckForAsynMsgs.filter(function(queuedMsg){return!(!queuedMsg.msg._ComAsyncInfo||!msg._ComAsyncInfo)&&queuedMsg.msg._ComAsyncInfo.id===msg._ComAsyncInfo.id});if(1!==foundMsg.length)return void this._logger.error("removeMessageFromAsyncQueue: Async message not queued or there is too manay of them length=",foundMsg.length,"\nCurrent Message:",msg,"\nAsync Queue:",this._pendingAckForAsynMsgs);var elementIndex=this._pendingAckForAsynMsgs.indexOf(foundMsg[0]);this._pendingAckForAsynMsgs.splice(elementIndex,1),0===this._pendingAckForAsynMsgs.length&&(Util.clearInterval(this._timerID),this._timerID=-1),delete msg._ComAsyncInfo,this._logger.trace("removeMessageFromAsyncQueue: End")},addListener:function(eventName,listenerObj){this._logger.info("addListener: called"),this._listeners[eventName]||(this._listeners[eventName]=[]),this._listeners[eventName].push(listenerObj)},removeListener:function(eventName,listenerObj){if(this._logger.info("removeListener: called"),!this._listeners[eventName])return void this._logger.error("removeListener: Trying to remove listener that is not registered");var listenerIdx=this._listeners[eventName].indexOf(listenerObj);if(-1===listenerIdx)return void this._logger.error("removeListener: Removing unknown listener");this._inMiddleOfEvent?this._listeners[eventName][listenerIdx].toBeDeleted=!0:this._listeners[eventName].splice(listenerIdx,1)},dispatchEvent:function(eventName){var args=Util.makeArray(arguments);args.splice(0,1);var funcName="on"+eventName,listeners=this._listeners[eventName];this._inMiddleOfEvent=!0;for(var i=0;i<listeners.length;++i)listeners[i].toBeDeleted||listeners[i][funcName].apply(listeners[i],args);delete this._inMiddleOfEvent,this._listeners[eventName]=this._listeners[eventName].filter(function(listener){return!listener.toBeDeleted})},setAckMessage:function(msg){msg._ComAsyncInfo&&msg._ComAsyncInfo.id&&(this._logger.trace("setAckMessage: Started for message id:"+msg._ComAsyncInfo.id),this.removeMessageFromAsyncQueue(msg),this._logger.trace("setAckMessage: Finished"))},onResendTimer:function(){this._logger.trace("onResendTimer: Started");var timedoutMessages=this._pendingAckForAsynMsgs.filter(function(waitingForAckMsg){var timespanInMS=(new Date).getTime()-waitingForAckMsg.sendTime.getTime(),duration=waitingForAckMsg.msg.data._data.duration;return duration||(duration=0),timespanInMS>=this._options.timeout+duration},this);this.notifyTimedOutMessages(timedoutMessages),this._logger.trace("onResendTimer: Finished")},onDestinationHasDisconnected:function(destinationId){this._logger.info("onDestinationHasDisconnected:",destinationId," Has disconnected");var pendingMessages=this._pendingAckForAsynMsgs.filter(function(pendingMessgaeInfo){return null!=pendingMessgaeInfo.destinationChannel&&pendingMessgaeInfo.destinationChannel===destinationId},this);pendingMessages.length>0&&(this._logger.debug("onDestinationHasDisconnected: rejecting pending messages. #of messages:",pendingMessages.length),this.notifyTimedOutMessages(pendingMessages)),this._logger.trace("onDestinationHasDisconnected: finished")},notifyTimedOutMessages:function(timedoutMessages){timedoutMessages.forEach(function(timedOutMessage){this.removeMessageFromAsyncQueue(timedOutMessage.msg),this.dispatchEvent("MessageTimedOut",timedOutMessage.msg)},this)},getPendingMsgs:function(targetId){return this._pendingAckForAsynMsgs.filter(function(waitingForAckMsg){return waitingForAckMsg.msg.targetId===targetId}).map(function(waitingForAckMsg){return waitingForAckMsg.msg})},_initializeOptions:function(options){options=options||{},this._options={timeout:options.timeout||2e3}}},EventDispatcher.prototype={_listeners:null,addListener:function(eventName,listenerFunction){this._logger.trace("addListener: called for event "+eventName),this._listeners[eventName]||(this._listeners[eventName]=[]),this._listeners[eventName].push(listenerFunction)},removeListener:function(eventName,listenerFunction){if(this._logger.trace("removeListener: called for event "+eventName),!this._listeners[eventName]||-1===this._listeners[eventName].indexOf(listenerFunction))return void this._logger.warn("removeListener: Trying to remove listener that is not registered");this._listeners[eventName]=this._listeners[eventName].filter(function(listener){return listener!==listenerFunction})},removeAllListeners:function(){this._logger.info("removeAllListeners: called"),this._listeners=[]},_dispatchEvent:function(eventName){if(this._logger.trace("_dispatchEvent: called for event: "+eventName),!this._listeners[eventName])return void this._logger.info("_dispatchEvent: no listeners found for event: "+eventName);var args=Util.makeArray(arguments).slice(1);this._listeners[eventName].forEach(function(listener){listener.apply(listener,args)})}},"undefined"!=typeof exports&&(exports.EventDispatcher=EventDispatcher),MessageChannelComChannel.prototype={id:-1,_listeners:null,_knownTargets:[],_asyncHelper:null,_nextContentContextId:0,_connectionReceivedIds:{},_mode:null,_logger:null,_pageProxies:[],_messageChannel:null,_clientTabId:null,init:function(){switch(this._logger.trace("init called"),this._mode){case"content":this._logger.trace("init started listening for Content messages"),this._messageChannel=new MessageChannel,this._messageChannel.port1.onmessage=this._onMessage.bind(this),this._messageChannel.port1.start();break;case"extension":this._logger.trace("init started listening for Extension messages"),window.addEventListener("message",this._onMessage.bind(this),!1);break;default:this._logger.error("init: Unsupported context! init failed.")}},_sendMessageHelper:function(msg){this._logger.trace("sendMessage: send to: ",msg.targetId," - message:",msg);var proxy=null,shouldUseSyncDispatching=!1;switch(this._mode){case"content":proxy=this._messageChannel.port1,MessageChannelComChannel.prototype._ext&&(shouldUseSyncDispatching=!0);break;case"extension":this._knownTargets[msg.targetId]&&(proxy=this._knownTargets[msg.targetId]),MessageChannelComChannel.prototype._content&&MessageChannelComChannel.prototype._content.id===msg.targetId&&(shouldUseSyncDispatching=!0)}return proxy?(this._updateMessageWithNeededInfo(msg),shouldUseSyncDispatching?void this._sendMessageInThisContext(proxy,msg):(-1===this.id||this.id>=1?this._doPostMessage(proxy,msg):this._logger.trace("sendMessage: ComChannel still not ready. Message sending is delayed"),void this._addRequestAsyncMsgToQueue(msg))):void this._logger.error("sendMessage: No Proxy found. Returning - sending message failed !")},_sendMessageInThisContext:function(proxy,msgToSend){this._logger.trace("_sendMessageInThisContext: sending message locally");var otherMessageChannel="extension"===this._mode?MessageChannelComChannel.prototype._content:MessageChannelComChannel.prototype._ext;this._addRequestAsyncMsgToQueue(msgToSend),otherMessageChannel._onMessage({data:msgToSend,srcElement:proxy})},_envelopeMsg:function(msgData,client,type,msgEv){this._logger.trace("_envelopeMsg: called");var targetId="content"===this._mode?-1:client,theMsg=msgEv||{};return theMsg.sourceId=this.id,theMsg.data=msgData,theMsg.targetId=targetId,theMsg.client=client,theMsg.type=type,theMsg},sendMessage:function(msg,destTargetId){this._logger.trace("sendMessage: called");var msgToSend=this._envelopeMsg(msg,destTargetId,"request");this._sendMessageHelper(msgToSend)},sendEvent:function(msg,destTargetId){this._logger.trace("sendEvent: called");var msgToSend=this._envelopeMsg(msg,destTargetId,"event");this._sendMessageHelper(msgToSend)},addListener:function(eventName,listenerFunction){this._logger.trace("addListener: called for event: "+eventName),this._listeners[eventName]||(this._listeners[eventName]=[]),-1===this._listeners[eventName].indexOf(listenerFunction)&&this._listeners[eventName].push(listenerFunction)},removeListener:function(eventName,listenerFunction){if(this._logger.trace("removeListener: called"),!this._listeners[eventName])return void this._logger.trace("removeListener: Trying to remove listener that is not registered");this._listeners[eventName]=this._listeners[eventName].filter(function(listener){return listener!==listenerFunction})},dispatchEvent:function(eventName,client){this._logger.trace("dispatchEvent: called for event "+eventName);var args=Util.makeArray(arguments).slice(2);"function"==typeof args[args.length-1]?args.splice(args.length-1,0,client):args.push(client),this._listeners[eventName]&&this._listeners[eventName].forEach(function(listener){listener.apply(this,args)})},_onMessage:function(msgEv){var msgData=msgEv.data;if(msgData.targetId&&msgData.targetId===this.id)switch(this._logger.trace("_onMessage: Received a message from: ",msgData.sourceId," - the msg: ",msgData),msgData.type){case"connect":this._onConnect(msgData,msgEv.ports[0]);break;case"connectResponse":this._onConnectResponse(msgData);break;case"disconnect":this._onDisconnect(msgData,msgEv.srcElement);break;case"response":this._setAckMessage(msgData);case"event":this._logger.trace("_onMessage: This is response message: sourceId="+msgData.sourceId+" , targetId="+msgData.targetId),this.dispatchEvent(msgData.type,this._getClient(msgEv.srcElement,msgData.sourceId),msgData.data);break;case"request":this._logger.trace("_onMessage: This is request message"),this._handleRequest(this._getClient(msgEv.srcElement,msgData.sourceId),msgEv);break;default:this._logger.trace("_onMessage: unhandled message format: "+msgData.type)}},connect:function(){switch(this._logger.trace("connect: called"),this._mode){case"extension":break;case"content":var connectMsg={type:"connect",sourceId:this.id,targetId:-1,_debugInfo:{url:location.href}};this._logger.trace("connect: dispatching connect message: ",connectMsg),window.top.postMessage(connectMsg,"*",[this._messageChannel.port2])}},disconnect:function(){switch(this._logger.trace("disconnect: called "),this._mode){case"extension":this._logger.error("disconnect: houston we have a problem");break;case"content":var disconnectMsg={type:"disconnect",sourceId:this.id,targetId:-1,_debugInfo:{url:location.href}};this._logger.trace("disconnect: dispatching Disconnect message: ",disconnectMsg),this._doPostMessage(this._messageChannel.port1,disconnectMsg)}},_onConnect:function(message,port){this._logger.trace("_onConnect: called with request: ",message);var returnMsg={type:"connectResponse",targetId:message.sourceId,sourceId:this.id};if(this._connectionReceivedIds[message.sourceId])this._logger.info("_onConnect: Received two connection requests from the same content: "+message.sourceId+" which was already given the value: "+this._connectionReceivedIds[message.sourceId]),returnMsg.allocatedId=this._connectionReceivedIds[message.sourceId];else if(message.sourceId>=1)this._logger.info("_onConnect: Received a connection request from an already intialized frame: "+message.sourceId),returnMsg.allocatedId=message.sourceId,this._knownTargets[message.sourceId].onmessage=null,this._knownTargets[message.sourceId]=port,this._knownTargets[message.sourceId].onmessage=this._onMessage.bind(this);else{var newClientId=this._setTargetId(port);this._logger.trace("_onConnect: Newly Connected Target Id: "+newClientId),port.onmessage=this._onMessage.bind(this),this._knownTargets[newClientId]=port;var client=this._getClient(port,newClientId);this._logger.debug("_onConnect: dispatching 'clientConnected' to ",client),this.dispatchEvent("clientConnected",client),this._connectionReceivedIds[message.sourceId]=newClientId,returnMsg.allocatedId=newClientId}this._logger.trace("_onConnect: dispatching connection response: ",returnMsg),this._doPostMessage(port,returnMsg)},_onConnectResponse:function(message){this._logger.trace("_onConnectResponse: Connection Response: ",message),Util.assert(this.id<1||this.id===message.allocatedId,"_onMessage: connectResponse: received id: "+message.allocatedId+" while my id is: "+this.id,this._logger),this.id=message.allocatedId,this.dispatchEvent("connected",this.id)},_onDisconnect:function(message,target){this._logger.trace("_onDisconnect: Received Disconnection From: ",message);var clientId=message.sourceId;if(Util.assert(clientId>=0,"_onDisconnect: Error while trying to disconnect - received an invalid sourceId: "+clientId,this._logger),!(clientId<1)||(this._logger.info("_onDisconnect: Received a disconnection request from a Frame that didn't initialize yet: "+clientId+" - overriding the id with: "+this._connectionReceivedIds[clientId]),clientId=this._connectionReceivedIds[clientId])){delete this._knownTargets[clientId],delete this._connectionReceivedIds[clientId];var client={tabID:this._clientTabId.id,windowId:this._clientTabId.windowId,id:clientId};this._logger.debug("clientDisconnected: dispatching 'clientDisconnected' to ",client),this.dispatchEvent("clientDisconnected",client)}},_handleRequest:function(client,msgEv){function sendResponse(resMsg){var msg=msgEv.data;this._logger.trace("sendResponse: Dispatching response to: "+msg.sourceId),resMsg.status||(resMsg.status="OK");var msgToSend=this._envelopeMsg(resMsg,msg.sourceId,"response",msg);this._sendMessageHelper(msgToSend)}if(this._logger.trace("_handleRequest: dispatching a REQUEST message"),this._listeners.message){var msgData=msgEv.data.data;try{this.dispatchEvent("message",client,msgData,sendResponse.bind(this))}catch(e){this._logger.error("_handleRequest: Got Exception:"+e+" Details: "+(e.Details||"No details found in exception")+"\nStack:"+e.stack),e.message?msgData.status=e.message:msgData.status="ERROR",sendResponse.call(this,msgData)}}},onMessageTimedOut:function(timedOutMsg){this._logger.warn("onMessageTimedOut: the following message has timed out !!!:",timedOutMsg.data),this.dispatchEvent("MessageTimedOut",timedOutMsg.client,timedOutMsg.data)},_getClient:function(target,contentId){var client={};switch(this._mode){case"content":break;case"extension":if(target){if(!this._clientTabId)return void this._logger.error("_getClient: no clientTabId is set");client={tabID:this._clientTabId.id,windowId:this._clientTabId.windowId,id:contentId}}}return client},_setTargetId:function(target){return++MessageChannelComChannel.prototype._nextContentContextId},_onContentUnloaded:function(){this._logger.trace("_onContentUnloaded: Called"),Util.assert("content"===this._mode,"_onContentUnloaded: Called not from Content!",this._logger),this.disconnect()},_doPostMessage:function(port,msg){port.postMessage(msg)},setClientTabId:function(clientTabId){this._clientTabId=clientTabId},_updateMessageWithNeededInfo:function(msg){this._asyncHelper&&"request"===msg.type&&this._asyncHelper.updateMessageWithNeededInfo(msg)},_addRequestAsyncMsgToQueue:function(msg){this._asyncHelper&&"request"===msg.type&&this._asyncHelper.addAsyncMsgToQueue(msg)},_setAckMessage:function(msg){this._asyncHelper&&this._asyncHelper.setAckMessage(msg)}},PostMessageComChannel.prototype={id:-1,_listeners:null,_knownTargets:[],_asyncHelper:null,_nextContentContextId:0,_connectionReceivedIds:{},_mode:null,_logger:null,_pageProxies:[],_connectTimerId:null,init:function(){switch(this._logger.trace("init called"),this._mode){case"content":null==PostMessageComChannel.prototype._ext&&window.addEventListener("unload",this._onContentUnloaded.bind(this),!1);case"extension":window.addEventListener("message",this._onMessage.bind(this),!1);break;default:this._logger.error("init: Unsupported context! init failed.")}},_sendMessageHelper:function(msg){this._logger.trace("sendMessage: send to: ",msg.targetId," - message:",msg);var windowProxy=null,shouldUseSyncDispatching=!1;switch(this._mode){case"content":-1,windowProxy=window.top,PostMessageComChannel.prototype._ext&&(shouldUseSyncDispatching=!0);break;case"extension":this._knownTargets[msg.targetId]&&(windowProxy=this._knownTargets[msg.targetId]),PostMessageComChannel.prototype._content&&PostMessageComChannel.prototype._content.id===msg.targetId&&(shouldUseSyncDispatching=!0)}return windowProxy?("request"===msg.type&&this._asyncHelper.updateMessageWithNeededInfo(msg),shouldUseSyncDispatching?void this._sendMessageInThisContext(windowProxy,msg):(this._logger.prettyTrace("sendMessage: Sending the following object:\n",msg),-1===this.id||this.id>=1?windowProxy.postMessage(msg,"*"):this._logger.trace("sendMessage: ComChannel still not ready. Message sending is delayed"),void("request"===msg.type&&this._asyncHelper.addAsyncMsgToQueue(msg)))):void this._logger.error("sendMessage: NO Proxy found. Returning - sending message failed !")},_sendMessageInThisContext:function(proxy,msgToSend){this._logger.trace("_sendMessageInThisContext: sending message locally");var otherMessageChannel="extension"===this._mode?PostMessageComChannel.prototype._content:PostMessageComChannel.prototype._ext;"request"===msgToSend.type&&this._asyncHelper.addAsyncMsgToQueue(msgToSend),otherMessageChannel._onMessage({data:msgToSend,source:proxy})},_envelopeMsg:function(msgData,client,type,msgEv){this._logger.trace("_envelopeMsg: called");var targetId="content"===this._mode?-1:client,theMsg=msgEv||{};return theMsg.sourceId=this.id,theMsg.data=msgData,theMsg.targetId=targetId,theMsg.client=client,theMsg.type=type,theMsg.comChannelId="_PostMessageComChannel_",theMsg},sendMessage:function(msg,destTargetId){this._logger.trace("sendMessage: called");var msgToSend=this._envelopeMsg(msg,destTargetId,"request");this._sendMessageHelper(msgToSend)},sendEvent:function(msg,destTargetId){this._logger.trace("sendEvent: called");var msgToSend=this._envelopeMsg(msg,destTargetId,"event");this._sendMessageHelper(msgToSend)},addListener:function(eventName,listenerFunction){this._logger.trace("addListener: called"),this._listeners[eventName]||(this._listeners[eventName]=[]),this._listeners[eventName].push(listenerFunction)},removeListener:function(eventName,listenerFunction){if(this._logger.trace("removeListener: called"),!this._listeners[eventName])return void this._logger.trace("removeListener: Trying to remove listener that is not registered");this._listeners[eventName]=this._listeners[eventName].filter(function(listener){return listener!==listenerFunction})},dispatchEvent:function(eventName,client){this._logger.trace("dispatchEvent: called for event "+eventName);var args=Util.makeArray(arguments).slice(2);"function"==typeof args[args.length-1]?args.splice(args.length-1,0,client):args.push(client),this._listeners[eventName]&&this._listeners[eventName].forEach(function(listener){listener.apply(this,args)})},_onMessage:function(msgEv){var msgData=msgEv.data;if(msgData&&"_PostMessageComChannel_"===msgData.comChannelId){var sourceWindow=msgEv.source;if(msgData.targetId===this.id){if(!sourceWindow)return void this._logger.error("_onMessage: Received a message without a source window \n"+(new Error).stack);switch(this._logger.trace("_onMessage: Received a message from: "+msgData.sourceId),msgData.type){case"connect":this._onConnect(msgData,sourceWindow);break;case"connectResponse":this._onConnectResponse(msgData);break;case"disconnect":this._onDisconnect(msgData,sourceWindow);break;case"response":this._asyncHelper.setAckMessage(msgData);case"event":this._logger.trace("_onMessage: Mesasge of type '"+msgData.type+"' : sourceId="+msgData.sourceId+" , targetId="+msgData.targetId),this.dispatchEvent(msgData.type,this._getClient(sourceWindow,msgData.sourceId),msgData.data);break;case"request":this._logger.trace("_onMessage: This is request message"),this._handleRequest(this._getClient(sourceWindow,msgData.sourceId),msgEv)}}}},connect:function(){switch(this._logger.trace("connect: called "),this._mode){case"extension":break;case"content":var connectMsg={sourceId:this.id,targetId:-1,_debugInfo:{url:location.href},type:"connect",comChannelId:"_PostMessageComChannel_"};this._logger.trace("connect: dispatching connect message: ",connectMsg),window.top.postMessage(connectMsg,"*"),this._connectTimerId=Util.setTimeout(this._onConnectTimeout.bind(this),1e3)}},disconnect:function(){switch(this._logger.trace("disconnect: called "),this._mode){case"extension":this._logger.error("disconnect: houston we have a problem");break;case"content":var disconnectMsg={type:"disconnect",sourceId:this.id,targetId:-1,_debugInfo:{url:location.href},comChannelId:"_PostMessageComChannel_"};this._logger.trace("disconnect: dispatching Disconnect message: ",disconnectMsg),window.top.postMessage(disconnectMsg,"*")}},_onConnect:function(message,sourceWindow){this._logger.trace("_onConnect: called with request: ",message);var returnMsg={targetId:message.sourceId,sourceId:this.id};if(this._connectionReceivedIds[message.sourceId])this._logger.info("_onConnect: Received two connection requests from the same content: "+message.sourceId+" which was already given the value: "+this._connectionReceivedIds[message.sourceId]),returnMsg.allocatedId=this._connectionReceivedIds[message.sourceId];else if(message.sourceId>=1)this._logger.info("_onConnect: Received a connection request from an already intialized frame: "+message.sourceId),returnMsg.allocatedId=message.sourceId;else{var newClientId=this._setTargetId(sourceWindow);if(this._logger.trace("_onConnect: Newly Connected Target Id: "+newClientId),Util.isNullOrUndefined(newClientId))return void this._logger.trace("_onConnect: did not set target id - ignoring");this._knownTargets[newClientId]=sourceWindow;var client=this._getClient(sourceWindow,newClientId);this._logger.debug("_onConnect: dispatching 'clientConnected' to ",client),this.dispatchEvent("clientConnected",client),this._connectionReceivedIds[message.sourceId]=newClientId,returnMsg.allocatedId=newClientId}returnMsg.type="connectResponse",returnMsg.comChannelId="_PostMessageComChannel_",this._logger.trace("_onMessage: connect: dispatching connection response: ",returnMsg),sourceWindow.postMessage(returnMsg,"*")},_onConnectResponse:function(message){this._logger.trace("_onConnectResponse: Connection Response: ",message),Util.assert(!(this.id>=1&&this.id!==message.allocatedId),"_onMessage: connectResponse: received id: "+message.allocatedId+" while my id is: "+this.id,this._logger),window.clearTimeout(this._connectTimerId),this._connectTimerId=null,this.id=message.allocatedId,this.dispatchEvent("connected",this.id)},_onConnectTimeout:function(){this._logger.trace("_onConnectTimeout: called"),window.clearTimeout(this._connectTimerId),this._connectTimerId=null,this.dispatchEvent("connectError",this.id,"timeout")},_onDisconnect:function(message,sourceWindow){this._logger.trace("_onDisconnect: Received Disconnection From: ",message);var clientId=message.sourceId;Util.assert(clientId>=0,"_onDisconnect: Error while trying to disconnect - received an invalid sourceId: "+clientId,this._logger),clientId<1&&(this._logger.info("_onDisconnect: Received a disconnection request from a Frame that didn't initialize yet: "+clientId+" - overriding the id with: "+this._connectionReceivedIds[clientId]),clientId=this._connectionReceivedIds[clientId]),delete this._knownTargets[clientId];var client=this._getClient(sourceWindow,clientId);this._logger.debug("clientDisconnected: dispatching 'clientDisconnected' to ",client),this.dispatchEvent("clientDisconnected",client)},_handleRequest:function(client,msgEv){function sendResponse(resMsg){var msg=msgEv.data;this._logger.trace("sendResponse: Dispatching response to: "+msg.sourceId),resMsg.status||(resMsg.status="OK");var msgToSend=this._envelopeMsg(resMsg,msg.sourceId,"response",msg);this._sendMessageHelper(msgToSend)}if(this._logger.trace("_handleRequest: dispatching a REQUEST message"),this._listeners.message)try{this.dispatchEvent("message",client,msgEv.data.data,sendResponse.bind(this))}catch(e){var resData=msgEv.data.data;this._logger.error("_handleRequest: Got Exception:",e," Details: ",e.Details||"No details found in exception","\nStack:",e.stack,"\nfor message: ",msgEv.data),e.message?resData.status=e.message:resData.status="ERROR",sendResponse.call(this,resData)}},onMessageTimedOut:function(timedOutMsg){this._logger.warn("onMessageTimedOut: the following message has timed out !!!:",timedOutMsg.data),this.dispatchEvent("MessageTimedOut",timedOutMsg.client,timedOutMsg.data)},_getClient:function(target,contentId){var client={};switch(this._mode){case"content":break;case"extension":if(target){if(!this._clientTabId)return void this._logger.error("_getClient: no clientTabId is set");client={tabID:this._clientTabId.id,windowId:this._clientTabId.windowId,id:contentId}}}return client},_setTargetId:function(sourceWindow){return++PostMessageComChannel.prototype._nextContentContextId},_onContentUnloaded:function(){this._logger.trace("_onContentUnloaded: Called"),Util.assert("content"===this._mode,"_onContentUnloaded: Called not from Content!",this._logger),this.disconnect()},setClientTabId:function(clientTabId){this._logger.trace("setClientTabId: settings: ",clientTabId),this._clientTabId=clientTabId}};var ExtChannelEvent={MESSAGE:"message",RESPONSE:"response",CONNECTED:"connected",DISCONNECTED:"disconnected"},InnerChannelEvent={MESSAGE:"message",RESPONSE:"response",OPEN:"open",CLOSE:"close",ERROR:"error"},ExtComChannelUtil={getHandlerForMessage:function(msg){switch(msg._msgType){case"EVENT_INSPECT_ELEMENT":case"EVENT_INSPECT_CANCEL":return"AutInspection";case"EVENT_RECORD":return"Record";case"WEBEXT_REPORT_LINE":return"Replay";default:return"Query"}}},webViewId={id:1e3,windowId:1};EmbeddedBrowserAPI.prototype={_logger:null,name:"EmbeddedBrowser",initialFrameCounter:Math.round(32767*Math.random()),_clientTabId:null,getAllTabs:function(tabIdFilter,callbackFunction){this._logger.trace("getAllTabs: called"),callbackFunction([this.createTab(this._clientTabId)])},deleteCookies:function(finishedCallback){this._logger.error("deleteCookies: unsupported")},createComChannel:function(){var comChannel=new MessageChannelComChannel("extension");return comChannel.setClientTabId(this._clientTabId),comChannel},createExternalComChannel:function(){return new ExternalComChannel(RemoteComChannelStrategy.prototype)},gettingValue:function(key){return{}},getLogSettingsObject:function(){return{}},createTab:function(browserTab){return this._logger.trace("createTab: started"),new EmbeddedBrowserTab(browserTab)},getSettingValue:function(key){this._logger.warn("getSettingValue: unimplemented. called for key: "+key)}},EmbeddedBrowserTab.prototype={_logger:null,id:-1,windowId:-1,getTabProperty:function(attrName,successCallback,failCallback){failCallback("NotImplemented")},getState:function(successCallback,failCallback){this._logger.trace("getState: started. Returning Hardcoded Complete."),successCallback(ReadyState2Status.complete)},getNumberOfTabs:function(successCallback,failCallback){this._logger.trace("getNumberOfTabs: started. Returning hardcoded 1"),successCallback(1)},isActive:function(successCallback,failCallback){this._logger.trace("isActive: started"),successCallback(!0)},navigate:function(url,successCallback,failCallback){this._logger.debug("navigate: called. Return unsupported."),failCallback("unsupported")},select:function(successCallback,failCallback){this._logger.debug("select: called. Return unsupported."),failCallback("unsupported")},createNewTab:function(){this._logger.error("createNewTab: unsupported")},close:function(successCallback,failCallback){this._logger.error("close: unsupported"),failCallback("unsupported")},getWindowRect:function(successCallback,failCallback){this._logger.trace("getWindowRect: started"),failCallback("unsupported")}},MobileCenterComChannelStrategy.prototype={_createInnerChannel:function(){return new MobileCenterComChannel}},window._QTP=window._QTP||{},window._QTP.defaultObjectIdentificationProperties={browser:{assistive:[],baseFilter:["micclass"],mandatory:["micclass"],optionalFilter:["name","title","openurl","opentitle","hasstatusbar","hasmenubar","hastoolbar","openedbytestingtool","number of tabs"],selector:"creationtime"},frame:{assistive:[],baseFilter:["micclass"],mandatory:["micclass","name","url without form data"],optionalFilter:["name","title","url"],selector:"index"},image:{assistive:[],baseFilter:["html tag","micclass"],mandatory:["alt","html tag","image type","micclass"],optionalFilter:["alt","image type","html id","name","file name","class","visible","width","height"],selector:"index"},link:{assistive:["role","acc_name"],baseFilter:["html tag","micclass"],mandatory:["html tag","micclass","text"],optionalFilter:["text","html id","class","name","href","visible","acc_name"],selector:"index"},page:{assistive:[],baseFilter:["micclass"],mandatory:["micclass","url without form data"],optionalFilter:["title","url"],selector:"index"},viewlink:{assistive:[],baseFilter:[],mandatory:["html tag","innertext","micclass"],optionalFilter:[],selector:"index"},webarea:{assistive:[],baseFilter:["html tag","micclass"],mandatory:["alt","html tag","micclass"],optionalFilter:["alt","html id","map name","class","href","coords","visible"],selector:"index"},webaudio:{assistive:["html id","src","current source"],baseFilter:["html tag","micclass"],mandatory:["html tag","micclass","sources"],optionalFilter:["html id","src","sources","current source","duration","autoplay","loop","class","visible"],selector:"index"},webbutton:{assistive:["role","acc_name"],baseFilter:["html tag","micclass"],mandatory:["html tag","micclass","name","type"],optionalFilter:["name","type","html id","value","class","visible","acc_name"],selector:"index"},webcheckbox:{assistive:["role","acc_name"],baseFilter:["html tag","micclass"],mandatory:["html tag","micclass","name","type"],optionalFilter:["name","type","html id","value","class","visible"],selector:"index"},webedit:{assistive:["placeholder","acc_name"],baseFilter:["html tag","micclass","type"],mandatory:["html tag","micclass","name","type"],optionalFilter:["name","html id","max length","default value","class","rows","placeholder","acc_name"],selector:"index"},webelement:{assistive:["acc_name"],baseFilter:["html tag","micclass"],mandatory:["html tag","innertext","micclass"],optionalFilter:["html id","class","innertext","visible","acc_name"],selector:"index"},webfile:{assistive:[],baseFilter:["html tag","micclass"],mandatory:["html tag","micclass","name","type"],optionalFilter:["name","type","html id","class","default value","visible"],selector:"index"},weblist:{assistive:["role","acc_name"],baseFilter:["html tag","micclass"],mandatory:["html tag","micclass","name"],optionalFilter:["name","html id","class","default value","items count","visible items","visible","acc_name","first item"],selector:"index"},webmenu:{assistive:["html id","role","acc_name"],baseFilter:["html tag","micclass"],mandatory:["html tag","micclass","name"],optionalFilter:["html id","name","class","first item","acc_name"],selector:"index"},webnumber:{assistive:["html id"],baseFilter:["html tag","micclass","type"],mandatory:["html tag","micclass","name","type"],optionalFilter:["html id","name","class","default value","min","max","step","visible"],selector:"index"},webradiogroup:{assistive:[],baseFilter:["html tag","micclass"],mandatory:["html tag","micclass","name"],optionalFilter:["name","html id","class","items count","visible"],selector:"index"},webrange:{assistive:["html id"],baseFilter:["html tag","micclass","type"],mandatory:["html tag","micclass","name","type"],optionalFilter:["html id","name","class","default value","min","max","step","visible"],selector:"index"},webtable:{assistive:["role","acc_name"],baseFilter:["html tag","micclass"],mandatory:["html tag","micclass"],optionalFilter:["html id","border"],selector:"index"},webtabstrip:{assistive:["html id","role","acc_name"],baseFilter:["html tag","micclass"],mandatory:["html tag","micclass","name"],optionalFilter:["html id","name","class","acc_name","first item"],selector:"index"},webtree:{assistive:["html tag","role","acc_name"],baseFilter:["html tag","micclass"],mandatory:["micclass","name"],optionalFilter:["html id","name","class","acc_name","first item"],selector:"index"},webvideo:{assistive:["html id","src","current source"],
baseFilter:["html tag","micclass"],mandatory:["html tag","micclass","sources"],optionalFilter:["html id","src","sources","current source","duration","autoplay","loop","class","visible"],selector:"index"}};var defaultEventConfig={_attr_names:["EN_CONFIG_DATA","WEB_PN_ALWAYS_CONNECT_MOUSE_DOWN_UP"],_data:{EN_CONFIG_DATA:'<XML><Object Name="Any Web Object"><Event Name="onclick" Listen="2" Record="2"/><Event Name="oncontextmenu" Listen="2" Record="2"/><Event Name="ondragstart" Listen="2" Record="2"/><Event Name="ondrop" Listen="2" Record="2"/><Event Name="onkeydown" Listen="1" Record="2"/><Event Name="onmouseover" Listen="2" Record="1"/><Event Name="onmouseup" Listen="2" Record="1"><Property Name="button" Value="2" Listen="2" Record="2"/><Property Name="button" Value="4" Listen="2" Record="2"/></Event><Event Name="onsubmit" Listen="1" Record="2"/></Object><Object Name="Image"><Event Name="onclick" Listen="1" Record="2"/><Event Name="onmouseover" Listen="2" Record="6"/></Object><Object Name="Link"><Event Name="onclick" Listen="1" Record="2"/></Object><Object Name="WebArea"><Event Name="onclick" Listen="1" Record="2"/><Event Name="onmouseover" Listen="2" Record="6"/></Object><Object Name="WebButton"><Event Name="onclick" Listen="1" Record="2"/></Object><Object Name="WebCheckBox"><Event Name="onclick" Listen="1" Record="2"/><Event Name="onchange" Listen="1" Record="2"/></Object><Object Name="WebEdit"><Event Name="onblur" Listen="1" Record="2"/><Event Name="oninput" Listen="1" Record="2"/><Event Name="onchange" Listen="1" Record="2"/><Event Name="onfocus" Listen="1" Record="2"/><Event Name="onpropertychange" Listen="0" Record="2"><Property Name="propertyName" Value="value" Listen="1" Record="2"/></Event><Event Name="onsubmit" Listen="1" Record="2"/></Object><Object Name="WebElement"><Event Name="onclick" Listen="1" Record="2"/></Object><Object Name="WebFile"><Event Name="onblur" Listen="1" Record="2"/><Event Name="onfocus" Listen="1" Record="2"/></Object><Object Name="WebList"><Event Name="onblur" Listen="1" Record="2"/><Event Name="onchange" Listen="1" Record="2"/><Event Name="onfocus" Listen="1" Record="2"/></Object><Object Name="WebNumber"><Event Name="onblur" Listen="1" Record="2"/><Event Name="onchange" Listen="1" Record="2"/><Event Name="onfocus" Listen="1" Record="2"/></Object><Object Name="WebRadioGroup"><Event Name="onclick" Listen="1" Record="2"/><Event Name="onchange" Listen="1" Record="2"/></Object><Object Name="WebRange"><Event Name="onchange" Listen="1" Record="2"/></Object><Object Name="WebMenu"><Event Name="onclick" Listen="1" Record="2"/></Object><Object Name="WebTabStrip"><Event Name="onclick" Listen="1" Record="2"/></Object><Object Name="WebTree"><Event Name="onclick" Listen="1" Record="2"/></Object></XML>',WEB_PN_ALWAYS_CONNECT_MOUSE_DOWN_UP:1},_msgType:"SRVC_SET_EVENT_CONFIGURATION",_to:{browser:-1,frame:-1,object:null,page:-1}},PositionRelatedPropertyNames={x:"horizontal",y:"vertical",abs_x:"horizontal",abs_y:"vertical",width:"horizontal",height:"vertical"};Util.inherit(MobileCenterComChannel,EventDispatcher,{_mobileCenter:null,_responseCallbacks:null,_uid:-1,_initializeTime:null,init:function(){this._logger.trace("init"),this._initializeTime=new Date,this._mobileCenter.onStartRecord=this._onStartRecord.bind(this),this._mobileCenter.onStopRecord=this._onStopRecord.bind(this),this._mobileCenter.onStartReplay=this._onStartReplay.bind(this),this._mobileCenter.onStopReplay=this._onStopReplay.bind(this),this._mobileCenter.onRequest=this._onRequest.bind(this),this._mobileCenter.onFindElement=this._onFindElement.bind(this)},connect:function(){this._logger.trace("connect: called"),this._mobileCenter.connect(this._onConnect.bind(this)),this._dispatchEvent(InnerChannelEvent.OPEN),Util.setTimeout(function(){}.bind(this),200)},disconnect:function(){this._logger.trace("disconnect: called")},sendMessage:function(msg){"response"===msg.type?(this._onOutgoingMessage(msg),this._sendResponse(msg)):this.sendEvent(msg)},sendEvent:function(eventMsg){this._onOutgoingMessage(eventMsg);var strMsg=JSON.stringify(eventMsg);this._logger.info("sendEvent: called msg : "+strMsg),this._mobileCenter.sendEvent({data:strMsg},function(err){err&&this._logger.error("sendEvent: error: ",err," while sending: ",eventMsg)}.bind(this))},_onConnect:function(err){err&&this._logger.error("_onConnect: error connecting")},_createGlobalVariablesMsg:function(data){var names=[],values=[];return Object.keys(data).forEach(function(key){names.push(key),values.push(data[key])}),new Msg("SRVC_SET_GLOBAL_VARIABLES",RtIdUtils.GetAgentRtid(),{name:[names],value:[values]})},_onStartRecord:function(eventCallback){this._logger.info("_onStartRecord: called");var startRecordMsg=this._createGlobalVariablesMsg({WebActivityState:1,objectidentificationproperties:JSON.stringify(window._QTP.defaultObjectIdentificationProperties),testingtool:"hpmc",isTouchEnabled:!0,enablewebrolebasedkit:!0});this._dispatchMsgHelper({data:startRecordMsg},function(ignoreParameter){this._dispatchMsgHelper({data:defaultEventConfig},function(){this._logger.info("callback on _onStartRecord"),this._hasStartedRecord||(this._hasStartedRecord=!0,Util.setTimeout(eventCallback,500))}.bind(this),"request")}.bind(this),"request")},_onStopRecord:function(eventCallback){this._logger.info("_onStopRecord: called");var stopRecordMsg=this._createGlobalVariablesMsg({WebActivityState:0});this._dispatchMsgHelper({data:stopRecordMsg},function(ignoreParameter){eventCallback()},"request")},_onStartReplay:function(eventCallback){this._logger.info("_onStartReplay: called");var startReplayMsg=this._createGlobalVariablesMsg({isTouchEnabled:!0,enablewebrolebasedkit:!0});this._dispatchMsgHelper({data:startReplayMsg},function(){eventCallback()},"request")},_onStopReplay:function(eventCallback){this._logger.info("_onStopReplay: called"),eventCallback()},_onRequest:function(requestMsg,responseCallback){if(this._logger.trace("_onRequest: called requestMsgStr : ",requestMsg),"string"==typeof requestMsg.data){var webData=JSON.parse(requestMsg.data);if(webData||webData.data){var called=!1,uftStyleCallback=function(msg){called?this._logger.warn("_onRequest, callback called twice : ",msg):responseCallback(null,{result:JSON.stringify(msg)})};this._onIncomingMessage(webData),this._dispatchMsgHelper(webData,uftStyleCallback,"request")}}},_onFindElement:function(query,callback){if(this._logger.trace("onFindElement query =",query),query&&query.location){var called=!1,uftStyleCallback=function(msg){called?this._logger.warn("_onRequest, callback called twice : ",msg):callback(null,[{result:JSON.stringify(msg)}])};this._onIncomingMessage(query);var setObjIdentificationPropertiesMsg=this._createGlobalVariablesMsg({objectidentificationproperties:JSON.stringify(window._QTP.defaultObjectIdentificationProperties),enablewebrolebasedkit:!0});this._dispatchMsgHelper({data:setObjIdentificationPropertiesMsg},function(ignoreParameter){var defaultPageId={browser:this._mobileBrowserId,page:0,frame:-1,object:null},options=query.location.options||{};delete query.location.options;var msg=new Msg("QUERY_OBJ_CLIENT_POINT_TO_ID",defaultPageId,{pos:query.location,options:options});this._logger.trace("onFindElement msg=",msg),this._dispatchMsgHelper({data:msg},uftStyleCallback,"request")}.bind(this),"request")}},_sendResponse:function(msg){if(Util.isNullOrUndefined(msg.uid))return void this._logger.error("_sendResponse cannot get the uid");var responseCallback=this._responseCallbacks[msg.uid];if(!responseCallback)return void this._logger.error("_sendResponse fail to get the responseCallback");responseCallback(msg),delete this._responseCallbacks[msg.uid]},_dispatchMsgHelper:function(msgdata,responseCallback,type){var msg={uid:-1,type:type,data:msgdata},protectedCallback=ContentUtils.protectCallbackAgainstPrematureNavigation(responseCallback,msg,this._logger,type),callbackId=this._storeResponseCallback(protectedCallback);msg.uid=callbackId,this._logger.trace("_onDispatchEvent msg=",msg),this._dispatchEvent(InnerChannelEvent.MESSAGE,msg)},_storeResponseCallback:function(responseCallback){return this._responseCallbacks[++this._uid]=responseCallback,this._uid},_isPositionNode:function(obj,nodeName){var isRectNodeName=PositionRelatedPropertyNames[nodeName],isNumber="number"==typeof obj[nodeName];return isRectNodeName&&isNumber},_convertInboundPositionValue:function(parentNode,propertyName,parentPath){var oldVal=parentNode[propertyName];if(oldVal===Constants.noCoordinate)return void this._logger.trace("_convertInboundPositionValue: skipping noCoordinate in '"+parentPath+propertyName+"'");parentNode[propertyName]=this._mobileCenter.convertDeviceToLogicalValue(parentNode[propertyName]),this._logger.trace("_convertInboundPositionValue: converted '"+parentPath+propertyName+"' from "+oldVal+" to "+parentNode[propertyName])},_convertOutboundPositionValue:function(parentNode,propertyName,parentPath){var oldVal=parentNode[propertyName],screenRatioType=this._getScreenRatioType(propertyName);parentNode[propertyName]=this._mobileCenter.convertLogicalToDeviceValue(parentNode[propertyName],screenRatioType),this._logger.trace("_convertOutboundPositionValue: converted '"+parentPath+propertyName+"' from "+oldVal+" to "+parentNode[propertyName]+" - screen ratio type: "+screenRatioType)},_getScreenRatioType:function(propertyName){switch(PositionRelatedPropertyNames[propertyName]){case"horizontal":return this._mobileCenter.ScreenRatioType.X;case"vertical":return this._mobileCenter.ScreenRatioType.Y;default:return this._logger.error("_getScreenRatioType: unknown property name: "+propertyName),null}},_onIncomingMessage:function(msg){Util.traverseObject(msg,function(parentNode,nodeName,parentPath){this._isPositionNode(parentNode,nodeName)&&this._convertInboundPositionValue(parentNode,nodeName,parentPath)}.bind(this))},_onOutgoingMessage:function(msg){Util.traverseObject(msg,function(parentNode,nodeName,parentPath){this._isPositionNode(parentNode,nodeName)&&this._convertOutboundPositionValue(parentNode,nodeName,parentPath)}.bind(this))}}),Util.inherit(MobileCenterBrowserAPI,EmbeddedBrowserAPI,{createExternalComChannel:function(){return new ExternalComChannel(MobileCenterComChannelStrategy.prototype)},createTab:function(browserTab){return this._logger.trace("createTab: started"),new MobileCenterBrowserTab(browserTab)},ignoreBrowserDescription:!1}),Util.inherit(MobileCenterBrowserTab,EmbeddedBrowserTab,{getPageRect:function(successCallback,failCallback){var rect={left:0,top:0,right:window.outerWidth||window.innerWidth,bottom:window.outerHeight||window.innerHeight};this._logger.info("[getPageRect] - call back with rect: ",rect),successCallback(rect)}});var InnerChannelMsgType={REQUEST:"request",VOIDREQUEST:"voidRequest",RESPONSE:"response"};ExternalComChannel.prototype={_listeners:null,_innerChannel:null,_logger:null,_nextUid:0,_pendingMessages:null,shouldConnect:function(){return this._innerChannel.shouldConnect?this._innerChannel.shouldConnect():"unsupported"},init:function(){this._logger.trace("init: called"),this._initInnerChannel(),Object.defineProperty(this,"id",{value:-1,writable:!1}),this._logger.trace("init: completed with channel id "+this.id)},addListener:function(eventName,listenerFunction){this._logger.trace("addListener: called for event "+eventName),this._listeners[eventName]||(this._listeners[eventName]=[]),this._listeners[eventName].push(listenerFunction)},removeListener:function(eventName,listenerFunction){if(this._logger.trace("removeListener: called for event "+eventName),!this._listeners[eventName]||-1===this._listeners[eventName].indexOf(listenerFunction))return void this._logger.warn("removeListener: Trying to remove listener that is not registered");this._listeners[eventName]=this._listeners[eventName].filter(function(listener){return listener!==listenerFunction})},connect:function(){this._logger.trace("connect: started");var serverURL=this._getConnectionURL();this._logger.debug("connect: Going to connect to server:"+serverURL);try{this._innerChannel.connect(serverURL)}catch(e){this._logger.error("connect: exception occurred during connection to "+serverURL+": Error: "+e+"\nStack:"+e.stack)}},disconnect:function(){this._logger.trace("disconnect: called"),this._innerChannel.disconnect()},sendMessage:function(msg){this._logger.prettyDebug("sendMessage: ==========> ",msg),this._sendMessageInternal(msg,InnerChannelMsgType.REQUEST)},sendEvent:function(msg){this._logger.prettyDebug("sendEvent: ==========> ",msg),this._sendMessageInternal(msg,InnerChannelMsgType.VOIDREQUEST)},onMessage:function(receivedData){this._logger.trace("onMessage: called for message ",receivedData);var channelMessage=null;if(null===(channelMessage="object"==typeof receivedData?receivedData:Util.parseJSON(receivedData,this._logger)))return void this._logger.warn("onMessage: parsed message is null");this._logger.trace("onMessage: channelMessage=",channelMessage),this._processIncomingChannelMessage(channelMessage)},onOpen:function(){this._logger.trace("onOpen: called"),this.onConnectionOpened(),this._dispatchEvent(ExtChannelEvent.CONNECTED,this)},onConnectionOpened:function(){this._logger.trace("onConnectionOpened: called. sending registration message."),this._sendRegistrationMessage()},onClose:function(){this._logger.trace("onClose: called"),this.onConnectionClose(),this._dispatchEvent(ExtChannelEvent.DISCONNECTED,this)},onConnectionClose:function(){},onError:function(error){this._logger.error("onError: channel error occured. error: "+error)},transformToChannelMessage:function(request){if(this._logger.trace("transformToChannelMessage: called"),Util.isNullOrUndefined(request))return request;var requestData=request.data,channelMessage=request;return channelMessage.data={data:requestData,format:"WebMessageFormat"},channelMessage.handlerType=ExtComChannelUtil.getHandlerForMessage(requestData),channelMessage},getChannelType:function(){return"EXTERNAL"},_initInnerChannel:function(){this._logger.trace("_initInnerChannel: called"),this._innerChannel.addListener(InnerChannelEvent.MESSAGE,this.onMessage.bind(this)),this._innerChannel.addListener(InnerChannelEvent.OPEN,this.onOpen.bind(this)),this._innerChannel.addListener(InnerChannelEvent.CLOSE,this.onClose.bind(this)),this._innerChannel.addListener(InnerChannelEvent.ERROR,this.onError.bind(this))},_sendMessageInternal:function(msg,type){this._logger.trace("_sendMessageInternal: called for ",msg);var request=this._prepareRequest(msg,type),channelMessage=this.transformToChannelMessage(request);this._innerChannel.sendMessage(channelMessage)},_prepareRequest:function(msg,type){return{type:type||InnerChannelMsgType.REQUEST,uid:this._getNewUid(),data:msg}},_prepareResponse:function(msg,requestUid){return{type:InnerChannelMsgType.RESPONSE,uid:requestUid,data:msg}},_processIncomingChannelMessage:function(channelMessage){switch(this._logger.trace("_processIncomingChannelMessage: processing message [#"+channelMessage.uid+"] of type '"+channelMessage.type+"'"),channelMessage.type){case InnerChannelMsgType.REQUEST:this._processRequest(channelMessage);break;case InnerChannelMsgType.VOIDREQUEST:this._processVoidRequest(channelMessage);break;case InnerChannelMsgType.RESPONSE:this._processResponse(channelMessage);break;default:this._logger.error("_processIncomingChannelMessage: unsupported message type ["+channelMessage.type+"] - dropping the message")}},_processRequest:function(channelMessage){this._logger.trace("_processRequest: called");var uid=null;try{uid=channelMessage.uid;var innerData=this._extractPayloadFromChannelMessage(channelMessage);this._logger.prettyDebug("Receiving Request id=: ",uid," <========== ",innerData),this._dispatchEvent(ExtChannelEvent.MESSAGE,innerData,null,function(resMsg){this._logger.trace("_processRequest: got response for request ",uid," - send it"),this._logger.prettyDebug("Sending Response id=: ",uid," ==========> ",resMsg);var responseChannelMessage=this._generateResponseMsg(resMsg,uid);this._innerChannel.sendMessage(responseChannelMessage)}.bind(this))}catch(e){this._logger.error("_processRequest: ",e),channelMessage.type=InnerChannelMsgType.RESPONSE,innerData&&(innerData.status=e.message||"ERROR"),this._logger.trace("_processRequest: send the message back with ERROR status"),this._logger.prettyDebug("Sending Error Response id=: ",uid," ==========> ",channelMessage),this._innerChannel.sendMessage(channelMessage)}},_processVoidRequest:function(channelMessage){this._logger.trace("_processVoidRequest: called");var uid=channelMessage.uid,logger=this._logger;this._dispatchEvent(ExtChannelEvent.MESSAGE,this._extractPayloadFromChannelMessage(channelMessage),null,function(resMsg){logger.trace("_processVoidRequest: request ",uid," completed. Result: ",resMsg)})},_processResponse:function(channelMessage){this._logger.trace("_processResponse: called");var innerMsg=this._extractPayloadFromChannelMessage(channelMessage);this._dispatchEvent(ExtChannelEvent.RESPONSE,innerMsg)},_extractPayloadFromChannelMessage:function(channelMessage){return this._logger.trace("_extractPayloadFromChannelMessage: called"),channelMessage.data.data},_dispatchEvent:function(eventName){if(this._logger.trace("_dispatchEvent: called for event: "+eventName),!this._listeners[eventName])return void this._logger.trace("_dispatchEvent: no listeners found for event: "+eventName);var args=Util.makeArray(arguments);args.splice(0,1),this._listeners[eventName].forEach(function(listener){listener.apply(this,args)})},_getNewUid:function(){return ExternalComChannel.prototype._nextUid++},toString:function(){return"ExternalComChannel"},_getConnectionURL:function(){var defaultDaemonPort="8822",daemonServerPort=ext.app.getSettingValue("UFT_daemonPort")||defaultDaemonPort;return"ws://"+(ext.app.getSettingValue("UFT_daemonAddress")||"127.0.0.1")+":"+daemonServerPort},_generateResponseMsg:function(resMsg,uid){resMsg.status=resMsg.status?resMsg.status:"OK";var response=this._prepareResponse(resMsg,uid);return this.transformToChannelMessage(response)},_applyStrategy:function(strategy){if(this._logger.trace("_applyStrategy: called"),!Util.isNullOrUndefined(strategy))for(var prop in strategy)"function"==typeof strategy[prop]&&(this._logger.debug("_applyStrategy: "+(this[prop]?"override":"add")+" method "+prop),this[prop]=strategy[prop])},_createInnerChannel:function(){return new WebSocketComChannel},_sendRegistrationMessage:function(){}},Browser.prototype={_associatedTab:null,_creationTime:null,_browserSessionId:null,_logger:null,_settings:null,_pageId:null,_openData:null,_recordTransactionQueue:[],_openedbytestingtool:!1,_testingToolId:null,_listeners:{},init:function(){this._logger.info("init: Started");var page=new Page(this._associatedTab,Util.shallowObjectClone(this.id));this._pageId=page.getID();var browserInfo={hwnd:0,version:this.getVersion(),browserSessionId:this.getBrowserSessionId(),WEB_PN_ID:this.getID()};Util.isNullOrUndefined(this._testingToolId)||(browserInfo.processId=this._testingToolId);var msg=new Msg("EVENT_BROWSER_CREATE",ext.dispatcher.getParentDispatcherID(),browserInfo);ext.dispatcher.sendEvent(msg)},destroy:function(){var browserInfo={hwnd:0,WEB_PN_ID:this.getID()},destroyPageMsg=new Msg("EVENT_BROWSER_DESTROY",Util.shallowObjectClone(this._pageId),browserInfo);ext.dispatcher.sendEvent(destroyPageMsg),Util.isNullOrUndefined(this._testingToolId)||(browserInfo.processId=this._testingToolId);var notificationMsg=new Msg("EVENT_BROWSER_DESTROY",ext.dispatcher.getParentDispatcherID(),browserInfo);ext.dispatcher.sendEvent(notificationMsg),ext.dispatcher.removeListener("clientRegistered",this),ext.dispatcher.removeListener("Message",this)},getTestingToolId:function(){return this._testingToolId},setTestingToolId:function(testingToolId){this._testingToolId=testingToolId},onNewTestingToolId:function(callback){this._listeners["new testingtool id"]=callback},onMessage:function(msg,resultCallback){this._logger.trace("onMessage Started with\n",msg),this[msg._msgType]||(this._logger.error("onMessage Unhandled msg: ",msg._msgType),ErrorReporter.ThrowNotImplemented("Browser."+msg._msgType)),this[msg._msgType](msg,resultCallback)},QUERY_ATTR:function(msg,resultCallback){function addToContentQueryMessage(contentQueryMsg,valNameMappingObj,attrName,attrVal){this._logger.trace("addToContentQueryMessage: Started for attribute: "+attrName);var requestedAttr=attrName;for(var mappedAttr in valNameMappingObj)if(valNameMappingObj[mappedAttr]===attrName){this._logger.trace("addToContentQueryMessage: Found name mapping from: "+attrName+" to: "+mappedAttr),requestedAttr=mappedAttr;break}return contentQueryMsg._data[requestedAttr]=attrVal,contentQueryMsg}function queryAttrFromPage(msg,contentQueryMsg,valNameMappingObj,resultCallback){var logger=this._logger;this._logger.trace("queryAttrFromPage: Called. Need to query the content sending mesage to content"),contentQueryMsg._data.hasOwnProperty("title")&&!contentQueryMsg._data.hasOwnProperty("url")&&(contentQueryMsg._data.url=null,contentQueryMsg._extra="url"),this.DispatchMsgToPage(contentQueryMsg,function(resMsg){logger.trace("queryAttrFromPage: Got the following response ",resMsg),contentQueryMsg._data.hasOwnProperty("title")&&contentQueryMsg._data.hasOwnProperty("url")&&(resMsg._data.title||(resMsg._data.title=resMsg._data.url)),contentQueryMsg._extra&&(delete resMsg._data[contentQueryMsg._extra],delete contentQueryMsg._data.url,delete contentQueryMsg._extra),mergeMessages(msg,resMsg,valNameMappingObj),resultCallback(msg)})}this._logger.trace("QUERY_ATTR: Started");var contentQueryMsg=new Msg(MSG_TYPES.QUERY,null,{}),valNameMapping={},numOfResponses=Object.keys(msg._data).length;if(0===numOfResponses)return this._logger.error("QUERY_ATTR: called on 0 attributes"),void resultCallback(msg);var multiResponses=new MultipleResponses(numOfResponses);for(var valName in msg._data)this.GetAttr(valName,msg,valNameMapping,multiResponses.callback(function(keyName,isDone,attrVal){if(attrVal&&attrVal.askPage&&(contentQueryMsg=addToContentQueryMessage.call(this,contentQueryMsg,valNameMapping,keyName,msg._data[keyName])),this._logger.debug("QUERY_ATTR:"+keyName+"="+attrVal),msg._data[keyName]=attrVal,isDone){if(Object.keys(contentQueryMsg._data).length>0)return this._logger.trace("QUERY_ATTR: Need to ask content for the rest of requested properties"),void queryAttrFromPage.call(this,msg,contentQueryMsg,valNameMapping,resultCallback);this._logger.trace("QUERY_ATTR: finished"),resultCallback(msg)}}.bind(this,valName)))},_attrs:{micclass:function(){return[["Browser","Container"]]},"wasted time":function(){return 0},hwnd:function(){return this._associatedTab.hwnd||0},top_level_hwnd:function(){if(this._associatedTab.getTopLevelHwnd)return this._associatedTab.getTopLevelHwnd()},version:function(){return this.getVersion()},"application version":function(){return this._attrs.version.call(this)},creationtime:function(){return SpecialObject.CreateTime(this._creationTime)},openedbytestingtool:function(){return this._openedbytestingtool},browserid:function(){return this.getID()},openurl:function(){return this._openData?this._openData.url:""},opentitle:function(){return this._openData?this._openData.title:""},"page hwnd":function(){return null},browsersessionid:function(){return this.getBrowserSessionId()}},GetAttrSync:function(property){this._logger.trace("GetAttrSync: query property "+property);var func=this._attrs[property];return func?func.call(this):(this._logger.error("GetAttrSync: attribute "+property+" is unsupported"),null)},_getBrowserProperty:function(attrName,msg,resultCallback){function successCallback(attrValue){resultCallback(attrValue)}function failCallback(){resultCallback({askPage:!0})}this._associatedTab.getTabProperty(attrName,successCallback,failCallback)},GetAttr:function(property,msg,valNameMapping,resultCallback){this._logger.trace("GetAttr: query property "+property);var val,logger=this._logger,lcProperty=property.toLowerCase(),syncAttrFunc=this._attrs[lcProperty];if(syncAttrFunc)return void resultCallback(syncAttrFunc.call(this));switch(lcProperty){case"state":case"state_ignoring_frames":return void this._getBrowserState(lcProperty,resultCallback);case"frame from point":return void this.DispatchMsgToPage(msg,function(resMsg){val=resMsg._data["frame from point"],val&&val.browser&&(val=this.mergeWithBrowserRTID(val)),resultCallback(val)}.bind(this));case"name":valNameMapping.title="name";case"title":case"url":case"logical name":this._getBrowserProperty(lcProperty,msg,resultCallback);break;case"url no protocol":var urlRequestMsg=new Msg(MSG_TYPES.QUERY,this.getID(),{url:null});this.QUERY_ATTR(urlRequestMsg,function(resMsg){if(!resMsg._data.url)return resultCallback("");var urlTokens=resMsg._data.url.split("://");resultCallback(1===urlTokens.length?urlTokens[0]:urlTokens[1])});break;case"number of tabs":return logger.trace("number of tabs: started"),void this._associatedTab.getNumberOfTabs(resultCallback,function(errMsg){logger.error("Browser.GetAttr['number of tabs']: failed: ",errMsg),resultCallback(0)});case"abs_x":case"x":var queryRectX=new Msg("QUERY_ATTR",this.getID(),{rect:null});this.QUERY_ATTR(queryRectX,function(resMsg){resultCallback(resMsg._data.rect.left)});break;case"abs_y":case"y":var queryRectY=new Msg("QUERY_ATTR",this.getID(),{rect:null});this.QUERY_ATTR(queryRectY,function(resMsg){resultCallback(resMsg._data.rect.top)});break;case"rect":return void this.getBrowserRect(resultCallback);case"width":return void this.getBrowserRect(function(browserRect){resultCallback(browserRect.right-browserRect.left)});case"height":return void this.getBrowserRect(function(browserRect){resultCallback(browserRect.bottom-browserRect.top)});case"outerwidth":case"outerheight":case"innerwidth":case"innerheight":return void resultCallback({askPage:!0});case"isactive":this.isActive(resultCallback);break;case"elementinterface":ErrorReporter.ThrowNotImplemented();break;case"tab screen capture":this._captureScreenShot(resultCallback);break;case"windowid":resultCallback(this._associatedTab.windowId);break;case"frame from hwnd":case"all_qtp_slv_cookies":resultCallback({askPage:!0});break;default:this._logger.debug("GetAttr called for an unknown property: "+property),resultCallback&&resultCallback()}},_getBrowserState:function(propName,resCallback){function getPageState(){logger.trace("_getBrowserState.getPageState: Called");var contentQueryMsg=new Msg(MSG_TYPES.QUERY,null,Util.objectFromArray([propName],null));this.DispatchMsgToPage(contentQueryMsg,function(resMsg){var status=resMsg._data[propName];logger.trace("_getBrowserState.getPageState: Result: "+status),resCallback(status)})}function getStateSuccessCallback(status){logger.trace("_getBrowserState.getStateSuccessCallback: received callback with status "+status);var reqData={AN_METHOD_NAME:"BROWSER_DIALOG_EXISTS",value:null},reqMsg=new Msg(MSG_TYPES.SRVC_INVOKE_METHOD,this.getID(),reqData);ext.dispatcher.sendMessage(reqMsg,null,null,function(msg){return!0===msg._data.value?(logger.trace("dialog exists, state: result: ",status),void resCallback(status)):status!==ReadyState2Status.complete?(logger.trace("state: result: "+status),void resCallback(status)):this._associatedTab.isInjectable?void this._associatedTab.isInjectable(function(result){logger.debug("_getBrowserState.getStateSuccessCallback: is Tab Injectable? "+result),result?getPageState.call(this):resCallback(ReadyState2Status.complete)}.bind(this),getPageState.bind(this)):(logger.debug("_getBrowserState.getStateSuccessCallback: Tab doesn't support isInjectable API, dispatch to page"),void getPageState.call(this))}.bind(this))}function getStateErrorCallback(errorMsg){logger.warn("_getBrowserState.getStateErrorCallback: trying to get state of unknown tab: "+this._associatedTab.id),this.handleError(errorMsg);var failedStatus=ReadyState2Status.unintialized;logger.trace("_getBrowserState: Sending failure result : "+failedStatus),resCallback(failedStatus)}var logger=this._logger;logger.trace("_getBrowserState: started"),this._associatedTab.getState(getStateSuccessCallback.bind(this),getStateErrorCallback.bind(this))},getBrowserRect:function(resultCallback){this._logger.trace("getBrowserRect: Started"),this._associatedTab.getWindowRect(resultCallback,function(errorMsg){this._logger.warn("failed to get window rect via API, try ask content.",errorMsg);var webDriverType=window._QTP&&window._QTP.WebDriverInfo&&window._QTP.WebDriverInfo.WebDriverType,isEmbdeddedDriver=!!webDriverType&&("ChromeRemoteDebug"==webDriverType||"NWjs"==webDriverType),rectName=isEmbdeddedDriver?"screen_rect":"window_rect",queryData={};queryData[rectName]=null;var msgToPage=new Msg(MSG_TYPES.QUERY,null,queryData);this.DispatchMsgToPage(msgToPage,function(resMsg){resultCallback(resMsg._data[rectName])})}.bind(this))},getVersion:function(){return Util.browserApplicationVersion(this._logger)},getBrowserSessionId:function(){return this._browserSessionId},SRVC_SET_TESTINGTOOLID:function(msg,resultCallback){if(this._logger.trace("SET_TESTINGTOOL_ID: called"),Util.isNullOrUndefined(msg._data)||Util.isNullOrUndefined(msg._data.processId))return resultCallback(msg);var testingToolProcessId=msg._data.processId;this._testingToolId=testingToolProcessId,Util.isNullOrUndefined(this._listeners["new testingtool id"])||this._listeners["new testingtool id"](this._associatedTab.windowId,testingToolProcessId),resultCallback(msg)},SRVC_SET_GLOBAL_VARIABLES:function(msg,resultCallback){this._logger.trace("SRVC_SET_GLOBAL_VARIABLES: Started");var agentMsg=new Msg(msg._msgType,RtIdUtils.GetAgentRtid(),msg._data);ext.dispatcher.sendMessage(agentMsg,null,null,Util.identity),resultCallback(msg)},SRVC_SET_GLOBAL_VARIABLES_INTERNAL:function(msg,resultCallback){this._logger.trace("SRVC_SET_GLOBAL_VARIABLES_INTERNAL: Started");var new_settings=msg._data;this._settings=this._settings||{};for(var prop in new_settings)Object.defineProperty(this._settings,prop,{value:new_settings[prop],writable:!1,configurable:!0,enumerable:!0});if(Util.isNullOrUndefined(this._pageId))return void resultCallback(msg);var newMsg=new Msg(msg._msgType,Util.shallowObjectClone(this._pageId),new_settings);this.DispatchMsgToPage(newMsg,function(){resultCallback(msg)})},SRVC_SET_EMULATOR_DEVICE:function(msg,resultCallback){function emulatorTabSuccessCallback(){this._logger.trace("SRVC_SET_EMULATOR_DEVICE: received successful response");var setGlobalMsg=new Msg("SRVC_SET_GLOBAL_VARIABLES_INTERNAL",msg._to,{isTouchEnabled:this._associatedTab.isEmulatedDeviceTouchEnabled},msg._tab);this.SRVC_SET_GLOBAL_VARIABLES_INTERNAL(setGlobalMsg,function(){resultCallback(msg)})}function emulatorTabErrorCallback(errorMsg){this.handleError(errorMsg),this._logger.error("SRVC_SET_EMULATOR_DEVICE: set emulator device failed"),msg.status="ERROR",resultCallback(msg)}if(this._logger.trace("SRVC_SET_EMULATOR_DEVICE: Started"),msg._data.EMULATORDEVICE){var emulationSettings=msg._data.EMULATORDEVICE;if(ext.app.updateEmulationStatu)return void ext.app.updateEmulationStatu(this._associatedTab,emulationSettings,emulatorTabSuccessCallback.bind(this),emulatorTabErrorCallback.bind(this));this._logger.warn("InvokeMethod: unknown method updateEmulationStatu"),ErrorReporter.ThrowMethodNotFound()}this._logger.error("The input parameter do not inlculde valid EMULATORDEVICE field."),emulatorTabErrorCallback.call(this,"Emulator device invalid")},SRVC_HIGHLIGHT_OBJECT:function(msg,resultCallback){this._logger.trace("SRVC_HIGHLIGHT_OBJECT: Called"),resultCallback(msg),this.DispatchMsgToPage(msg,function(){})},SRVC_HIGHLIGHT_MATCHES:function(msg,resultCallback){if(this._logger.trace("SRVC_HIGHLIGHT_MATCHES: Called"),Util.isNullOrUndefined(msg._data.WEB_PN_ID)||msg._data.WEB_PN_ID.length<1)return this._logger.warn("SRVC_HIGHLIGHT_MATCHES: no element"),resultCallback(msg);this.DispatchMsgToPage(msg,resultCallback)},SRVC_GET_OBJ_DESCRIPTION:function(msg,resultCallback){this._logger.trace("Browser: SRVC_GET_OBJ_DESCRIPTION msg=",msg);var oldMsgType=msg._msgType
;msg._msgType="SRVC_GET_BROWSER_DESCRIPTION_INTERNAL",this.DispatchMsgToPage(msg,function(resMsg){resMsg._msgType=oldMsgType,this._fixDescription(resMsg._data.objDescription.description,function(){resultCallback(resMsg)})}.bind(this))},SRVC_SET_BROWSER_RESOLUTION:function(msg,resultCallback){if(this._logger.trace("SRVC_SET_BROWSER_RESOLUTION caled. msg = ",JSON.stringify(msg)),!this._associatedTab.setBrowserResolution)return this._featureNotImplemented("setBrowserResolution",msg,resultCallBack);this._associatedTab.setBrowserResolution(msg._data.width,msg._data.height,msg._data.left,msg._data.top,function(){resultCallback(msg)},function(error){this._logger.error("SRVC_SET_BROWSER_RESOLUTION: got error. err = ",error),msg.status="ERROR",resultCallback(msg)}.bind(this))},_mergeValue:function(msg,key,val){msg._data[key]?(Util.isUndefined(msg._data[key].length)&&(msg._data[key]=[[msg._data[key]]]),msg._data[key][0]=msg._data[key][0].concat([val])):msg._data[key]=val},QUERY_DIRECT_CHILD_DESC_TO_ID:function(msg,resultCallback){this._logger.trace("QUERY_DIRECT_CHILD_DESC_TO_ID called on ",msg),this.matchPageDescToId(msg,resultCallback)},QUERY_REPOSITORY_DESC2ID_DIRECT:function(msg,resultCallback){this._logger.trace("QUERY_REPOSITORY_DESC2ID_DIRECT: Strted"),this.matchPageDescToId(msg,resultCallback)},QUERY_REPOSITORY_DESC2ID:function(msg,resultCallback){this._logger.trace("QUERY_REPOSITORY_DESC2ID: Started");var pageMsg=new Msg(msg._msgType,null,msg._data);this.DispatchMsgToPage(pageMsg,function(resultMsg){this._logger.trace("QUERY_REPOSITORY_DESC2ID received async result"),msg._data.WEB_PN_ID=[this.getPageId()].concat(resultMsg._data.WEB_PN_ID),msg.status=resultMsg.status,resultCallback(msg)}.bind(this))},QUERY_OBJ_POINT_TO_ID:function(msg,resultCallback){var pageMsg=new Msg(msg._msgType,null,msg._data);this.DispatchMsgToPage(pageMsg,resultCallback)},QUERY_OBJ_CLIENT_POINT_TO_ID:function(msg,resultCallback){var pageMsg=new Msg(msg._msgType,null,msg._data);this.DispatchMsgToPage(pageMsg,resultCallback)},warnUnimplemented:function(name){this._logger.warn("Called unimplemented "+name)},SRVC_LOAD_KIT:function(msg,resultCallback){var progid=msg._data.progid;switch(this._logger.trace("SRVC_LOAD_KIT: started on "+progid),progid){case"Mercury.WebKit":return resultCallback(msg);case"Mercury.WebExtKit":return this.DispatchMsgToPage(msg,resultCallback);default:return this.warnUnimplemented("Browser.SRVC_LOAD_KIT: "+progid),resultCallback(msg)}},SRVC_LOAD_EXT_TOOLKIT:function(msg,resultCallback){function returnResult(resMsg){resMsg._data={},self._logger.trace("SRVC_LOAD_EXT_TOOLKIT: returning result: ",resMsg),resultCallback(resMsg)}this._logger.trace("SRVC_LOAD_EXT_TOOLKIT: Started");var self=this;Util.isNullOrUndefined(msg._data.name)||Util.isNullOrUndefined(msg._data.TOOLKIT)?returnResult(msg):this.DispatchMsgToPage(msg,returnResult)},_createDialogErrorCallback:function(msg,callback,name){return function(errorMessage,errorCode){msg.status=errorCode||"ERROR",this._logger.warn(name+" Failed: "+errorMessage),callback(msg)}.bind(this)},_featureNotImplemented:function(name,msg,callback){this._logger.debug("Browser doesn't support "+name),msg.status="NotImplemented",callback(msg)},SRVC_SET_EVENT_CONFIGURATION:function(msg,resultCallback){this._logger.trace("SRVC_SET_EVENT_CONFIGURATION: Started");var agentMsg=new Msg(msg._msgType,RtIdUtils.GetAgentRtid(),msg._data);ext.dispatcher.sendMessage(agentMsg,null,null,Util.identity),resultCallback(msg)},SRVC_SET_EVENT_CONFIGURATION_INTERNAL:function(msg,resultCallback){this._logger.trace("SRVC_SET_EVENT_CONFIGURATION_INTERNAL: Started"),this.DispatchMsgToPage(msg,resultCallback)},invokeMethods:{ZERO_WASTED_TIME:Util.identityWithCallback,BROWSER_DISABLE_KIT:Util.identityWithCallback,BROWSER_ENABLE_KIT:Util.identityWithCallback,SET_OPENEDBYQT_FLAG:function(msg,resultCallback){this._openedbytestingtool=!0,resultCallback(msg)},BROWSER_HANDLE_DIALOG:function(msg,callback){if(!ext.app.handleDialog)return this._featureNotImplemented("handleDialog",msg,callback);var accept=msg._data.name,text=msg._data.value;ext.app.handleDialog(this._associatedTab.id,accept,text,function(res){callback(msg)},this._createDialogErrorCallback(msg,callback,"BROWSER_HANDLE_DIALOG"))},BROWSER_DIALOG_EXISTS:function(msg,callback){if(!ext.app.dialogExists)return this._featureNotImplemented("dialogExists",msg,callback);ext.app.dialogExists(this._associatedTab.id,function(result){msg._data.value=result,callback(msg)},this._createDialogErrorCallback(msg,callback,"BROWSER_DIALOG_EXISTS"))},BROWSER_GET_DIALOG_TEXT:function(msg,callback){if(!ext.app.getDialogText)return this._featureNotImplemented("getDialogText",msg,callback);ext.app.getDialogText(this._associatedTab.id,function(result){msg._data.text=result,callback(msg)},this._createDialogErrorCallback(msg,callback,"BROWSER_GET_DIALOG_TEXT"))},BROWSER_IS_SIBLING_TAB_METHOD_NAME:function(msg,resultCallback){this._logger.trace("BROWSER_IS_SIBLING_TAB_METHOD_NAME: called"),Util.assert(RtIdUtils.IsRTIDBrowser(msg._data.WEB_PN_ID),"BROWSER_IS_SIBLING_TAB_METHOD_NAME contains no other browser data",this._logger);var queryWinIdMsg=new Msg("QUERY_ATTR",msg._data.WEB_PN_ID,{windowId:null}),self=this;ext.dispatcher.sendMessage(queryWinIdMsg,msg._to,null,function(result){var isSibling=result._data.windowId===self._associatedTab.windowId;msg._data.value=isSibling,resultCallback(msg)})},BROWSER_RESIZE:function(msg,resultCallBack){if(this._logger.trace("BROWSER_RESIZE: Started"),!this._associatedTab.resize)return this._featureNotImplemented("resize",msg,resultCallBack);this._associatedTab.resize(msg._data.width,msg._data.height,function(){resultCallBack(msg)},this.handleError.bind(this))}},isActive:function(callback){this._logger.trace("isActive: Started");var isActiveErrorCallback=function(asyncCookie,errMsg){this._logger.error("Browser.isActive: this._associatedTab.isActive failed."),callback(!1)};this._associatedTab.isActive(callback,isActiveErrorCallback.bind(this))},SRVC_INVOKE_METHOD:function(msg,resultCallback){var name=msg._data.AN_METHOD_NAME,func=this.invokeMethods[name];func||ErrorReporter.ThrowNotImplemented("Browser.invokeMethod: "+name),func.call(this,msg,resultCallback)},SRVC_TAKE_SCREENSHOT:function(msg,callback){if(this._logger.trace("SRVC_TAKE_SCREENSHOT: Started"),this._associatedTab.takeScreenshot){var rect=msg._data&&msg._data.rect?msg._data.rect:null,imageFormat=msg._data&&msg._data.type&&"jpeg"===msg._data.type?"jpeg":"png";this._associatedTab.takeScreenshot(rect,imageFormat,function(image){msg._data.type=imageFormat,msg._data.data=image,callback(msg)}.bind(this),function(error){this._logger.error("SRVC_TAKE_SCREENSHOT: failed: "+error),msg.status="ERROR",callback(msg)}.bind(this))}else msg.status="ERROR",callback(msg)},SRVC_MAKE_OBJ_VISIBLE:function(msg,callbackResult){this._logger.trace("SRVC_MAKE_OBJ_VISIBL: Started");var selectTabSuccessCallback=function(){this._logger.trace("SRVC_MAKE_OBJ_VISIBLE: received successful response"),callbackResult(msg)},selectTabErrorCallback=function(errorMsg){this.handleError(errorMsg),this._logger.error("SRVC_MAKE_OBJ_VISIBLE: select failed"),callbackResult(msg)};Util.isNullOrUndefined(msg._data)||!0!==msg._data["disable browser popup"]||"function"!=typeof this._associatedTab.selectTab?this._associatedTab.select(selectTabSuccessCallback.bind(this),selectTabErrorCallback.bind(this)):this._associatedTab.selectTab(selectTabSuccessCallback.bind(this),selectTabErrorCallback.bind(this))},_dispatchMsgToPageWhenLoadingComplete:function(resultCallback){var executeAccordingToPageStatus=function(loadingCallback,completeCallback){var msg=new Msg("QUERY_ATTR",this.getPageId(),{state:""});this.DispatchMsgToPage(Util.shallowObjectClone(msg),function(msg){msg._data.state===ReadyState2Status.complete?completeCallback&&completeCallback():loadingCallback&&loadingCallback()})}.bind(this),times=0,pageLoadingCallback=function(){var timerId=Util.setInterval(function(){times++<10?executeAccordingToPageStatus(null,function(){Util.clearInterval(timerId),resultCallback()}):(Util.clearInterval(timerId),resultCallback())},500)};Util.setTimeout(function(){executeAccordingToPageStatus(pageLoadingCallback,resultCallback)},2e3)},CMD_BROWSER_RUN_ENDED:function(msg,resultCallback){ext.app.browserRunEnded&&ext.app.browserRunEnded(this._associatedTab),resultCallback(msg)},CMD_BROWSER_BACK:function(msg,resultCallback){this._logger.trace("CMD_BROWSER_BACK: Called");var executed=!1;this._dispatchMsgToPageWhenLoadingComplete(function(){executed||(executed=!0,this.DispatchMsgToPage(msg,resultCallback))}.bind(this))},CMD_BROWSER_FORWARD:function(msg,resultCallback){this._logger.trace("CMD_BROWSER_FORWARD: Called");var executed=!1;this._dispatchMsgToPageWhenLoadingComplete(function(){executed||(executed=!0,this.DispatchMsgToPage(msg,resultCallback))}.bind(this))},CMD_BROWSER_NAVIGATE:function(msg,resultCallback){var logger=this._logger;logger.trace("CMD_BROWSER_NAVIGATE: started");var url=msg._data.url;logger.trace("Navigate: Got url "+url),url.match(/^\w+:\/\//)||url.match(/^about:/)||url.match(/^javascript:/)||(logger.trace("Navigate: URL with no protocol, default to http"),url="http://"+url);var errorCallback=function(errorMsg){switch(errorMsg){case"unsupported":logger.trace("CMD_BROWSER_NAVIGATE received unsupported error, dispatching to Content as Fallback"),msg._data.url=url,this.DispatchMsgToPage(msg,resultCallback);break;case"Illegal URL":msg.status="IllegalOperation",resultCallback(msg);break;default:this.handleError(errorMsg),msg.status="ERROR",resultCallback(msg)}};this._associatedTab.navigate(url,resultCallback.bind(this,msg),errorCallback.bind(this))},CMD_BROWSER_REFRESH:function(msg,resultCallBack){this._logger.trace("CMD_BROWSER_REFRESH: Called");var successCallback=function(){resultCallBack(msg)},errorCallback=function(errorMsg){switch(errorMsg){case"unsupported":return void this.DispatchMsgToPage(msg,resultCallBack);default:this.handleError(errorMsg)}resultCallBack(msg)};this._associatedTab.reload(successCallback,errorCallback.bind(this))},CMD_BROWSER_OPEN_NEW_TAB:function(msg,resultCallBack){this._associatedTab.createNewTab(),resultCallBack(msg)},CMD_BROWSER_CLOSE:function(msg,resultCallBack){this._logger.trace("Closing tab "+this._associatedTab.id);var browserCloseSuccessCallback=function(){resultCallBack(msg)},browserCloseErrorCallback=function(errorMsg){switch(errorMsg){case"unsupported":break;default:this.handleError(errorMsg)}resultCallBack(msg)};this._associatedTab.close(browserCloseSuccessCallback.bind(this),browserCloseErrorCallback.bind(this))},CMD_BROWSER_CLOSE_ALL_TABS:function(msg,resultCallback){this._logger.trace("CMD_BROWSER_CLOSE_ALL_TABS: Started and dispatch the request to agent"),"function"==typeof this._associatedTab.closeWindow?this._associatedTab.closeWindow(function(){resultCallback(msg)},function(errorMsg){this.handleError(errorMsg),resultCallback(msg)}.bind(this)):(msg._to=RtIdUtils.GetAgentRtid(),ext.dispatcher.sendMessage(msg,msg._to,null,resultCallback))},CMD_BROWSER_FULLSCREEN:function(msg,resultCallback){if(this._logger.trace("CMD_BROWSER_FULLSCREEN called"),!this._associatedTab.fullScreen)return this._logger.error("CMD_BROWSER_FULLSCREEN: not implemented"),msg.status="NotImplemented",void resultCallback(msg);this._associatedTab.fullScreen(function(){resultCallback(msg)},function(){this.handleError(error),msg.status="ERROR",resultCallback(msg)}.bind(this))},CMD_BROWSER_MINIMIZE:function(msg,resultCallback){if(this._logger.trace("CMD_BROWSER_MINIMIZE called"),!this._associatedTab.minimize)return this._logger.error("CMD_BROWSER_MINIMIZE: not implemented"),msg.status="NotImplemented",void resultCallback(msg);this._associatedTab.minimize(function(){resultCallback(msg)},function(){this.handleError(error),msg.status="ERROR",resultCallback(msg)}.bind(this))},CMD_BROWSER_RESTORE:function(msg,resultCallback){if(this._logger.trace("CMD_BROWSER_RESTORE called"),!this._associatedTab.restore)return this._logger.error("CMD_BROWSER_RESTORE: not implemented"),msg.status="NotImplemented",void resultCallback(msg);this._associatedTab.restore(function(){resultCallback(msg)},function(){this.handleError(error),msg.status="ERROR",resultCallback(msg)}.bind(this))},CMD_BROWSER_MAXIMIZE:function(msg,resultCallback){if(this._logger.trace("CMD_BROWSER_MAXIMIZE called"),!this._associatedTab.maximize)return this._logger.error("CMD_BROWSER_MAXIMIZE: not implemented"),msg.status="NotImplemented",void resultCallback(msg);this._associatedTab.maximize(function(){resultCallback(msg)},function(){this.handleError(error),msg.status="ERROR",resultCallback(msg)}.bind(this))},CMD_BROWSER_HOME:function(msg,resultCallback){if(this._logger.trace("CMD_BROWSER_HOME: called"),!this._associatedTab.goHome)return this._logger.error("CMD_BROWSER_HOME: not implemented"),msg.status="NotImplemented",void resultCallback(msg);this._associatedTab.goHome(function(){resultCallback(msg)},function(){this.handleError(error),msg.status="ERROR",resultCallback(msg)}.bind(this))},CMD_BROWSER_DELETE_COOKIES:function(msg,resultCallBack){var domain;msg._data&&(domain=msg._data.text),this._logger.trace("Removing cookies"+(domain?" for: "+domain:"")),ext.app.deleteCookies(domain,function(){this._logger.trace("Removing cookies finished successfully"),resultCallBack(msg)}.bind(this))},CMD_BROWSER_CLEAR_CACHE:function(msg,resultCallBack){this._logger.trace("Clearing cache"),ext.app.clearCache(function(){this._logger.trace("Clearing cache finished successfully"),resultCallBack(msg)}.bind(this))},CMD_SPY_START:function(msg,resultCallback){this._logger.trace("CMD_SPY_START: Started"),this.DispatchMsgToPage(msg,resultCallback)},CMD_SPY_END:function(msg,resultCallback){this._logger.trace("CMD_SPY_END: Started"),this.DispatchMsgToPage(msg,resultCallback)},CMD_MONITOR_MOUSE_START:function(msg,resultCallback){this._logger.trace("CMD_MONITOR_MOUSE_START: Started"),this.DispatchMsgToPage(msg,resultCallback)},CMD_MONITOR_MOUSE_END:function(msg,resultCallback){this._logger.trace("CMD_MONITOR_MOUSE_START: Started"),this.DispatchMsgToPage(msg,resultCallback)},SRVC_BATCH_QUERYATTR:function(msg,resCallback){this._logger.trace("SRVC_BATCH_QUERYATTR: Started");var objIds=Array.isArray(msg._data.WEB_PN_ID)?msg._data.WEB_PN_ID[0]:[msg._data.WEB_PN_ID],resMsg=new Msg(msg._msgType,msg._to,{}),attrNames=msg._data.name;delete msg._data.name,attrNames=Array.isArray(attrNames)?attrNames[0]:[attrNames],this._logger.debug("SRVC_BATCH_QUERYATTR: Going to batch query for the following fields"+attrNames);var batchInfo=[];objIds.forEach(function(id,idIndex){batchInfo[id.frame]||(batchInfo[id.frame]={indices:[],msgs:[]}),batchInfo[id.frame].indices.push(idIndex);var tmpMsg=new Msg(MSG_TYPES.QUERY,id,{}),indexInData=1;attrNames.forEach(function(attrName){switch(attrName){case"attribute":case"style":this._data[attrName]||(this._data[attrName]=[]);var keyNames=Array.isArray(msg._data.data)?msg._data.data[0][indexInData]:msg._data.data;this._data[attrName].push(keyNames),indexInData+=2;break;case"data":return;default:this._data[attrName]=null}},tmpMsg),batchInfo[id.frame].msgs.push(tmpMsg)},this),batchInfo[-1]&&(batchInfo.push(batchInfo[-1]),null!==batchInfo[-1].msgs[0]._to.object&&this._logger.error("SRVC_BATCH_QUERYATTR: There are messages for page with no content ID"));var ndigits=(""+objIds.length).length;if(batchInfo.length<1)return this._logger.error("SRVC_BATCH_QUERYATTR: there are no Objects to query ???!?!?"),void resCallback(msg);var numOfResponses=batchInfo.filter(Util.identity).length,waitForAllMessages=new MultipleResponses(numOfResponses);batchInfo.forEach(function(info){var tmpMsg=new Msg("INTERNAL_BATCH_QUERYATTR",Util.shallowObjectClone(info.msgs[0]._to),{});tmpMsg._to.object=null,tmpMsg._data.msgs=info.msgs,tmpMsg._data.indices=info.indices,this._logger.trace("SRVC_BATCH_QUERYATTR: Going to send the following msg:",tmpMsg);var logger=this._logger;ext.dispatcher.sendMessage(tmpMsg,null,"chrome",waitForAllMessages.callback(function(isDone,frameResMsg){frameResMsg._data.msgs.forEach(function(objResMsg,index){var objIDIndex=tmpMsg._data.indices[index],key=Util.padLeft(objIDIndex,ndigits);resMsg._data[key]=[[]],attrNames.forEach(function(attrName,attrIndex){var val=objResMsg._data[attrName];if(null===val||Util.isUndefined(val))resMsg._data[key][0][attrIndex]="VT_EMPTY";else{var attrValue=null;Array.isArray(val)?(attrValue=val[0],objResMsg._data[attrName]=objResMsg._data[attrName].slice(1)):attrValue=val,resMsg._data[key][0][attrIndex]="boolean"==typeof attrValue||"number"==typeof attrValue?attrValue:attrValue.toString()}})},frameResMsg),isDone&&(logger.debug("SRVC_BATCH_QUERYATTR: Thats it finished waiting lets wrap it up"),resCallback(resMsg))}))},this)},QUERY_DESC_TO_ID:function(msg,resultCallback){this._logger.trace("QUERY_DESC_TO_ID called on:\n",msg),this.matchPageDescToId(msg,function(resMsg){0===resMsg._data.WEB_PN_ID.length?(this._logger.trace("QUERY_DESC_TO_ID: No direct child (Page) found - look for the object under the Page."),this.DispatchMsgToPage(msg,resultCallback)):resultCallback(resMsg)}.bind(this))},matchPageDescToId:function(msg,resultCallback){this._logger.trace("matchPageDescToId called on:\n",msg),null===msg._data&&(msg._data={});var matchDescMsg=new Msg("MATCH_DESC_TO_ID",null,msg._data);this.DispatchMsgToPage(matchDescMsg,function(resultMsg){this._logger.trace("matchPageDescToId received async result");var result=new Msg(msg._msgType,msg._to);result._data=resultMsg._data,resultCallback(result)}.bind(this))},CMD_BROWSER_EMBED_SCRIPT:function(msg,resultCallback){this._logger.trace("CMD_BROWSER_EMBED_SCRIPT: Started"),this.DispatchMsgToPage(msg,resultCallback)},getID:function(){return{browser:this._associatedTab.id,page:-1,frame:-1,object:null}},DispatchMsgToPage:function(msg,resultCallback){this._logger.trace("DispatchMsgToPage: Started with message:\n",msg,"\nDispatching to page: ",this.getPageId());var oldTarget=msg._to;msg._to=this.getPageId();var logger=this._logger;ext.dispatcher.sendMessage(msg,null,"chrome",function(resMsg){logger.trace("DispatchMsgToPage: Async Result message:\n",resMsg),resMsg._to=oldTarget,resultCallback(resMsg)})},getPageId:function(){return Util.shallowObjectClone(this._pageId)},mergeWithBrowserRTID:function(runtimeID){return runtimeID.browser=this.getID().browser,runtimeID},handleError:function(error){switch(this._logger.trace("handleError: called with error="+error),error){case"tab doesnt exist":var notifyMSg=new Msg("NOTIFY_BROWSER_IS_NOT_VALID",RtIdUtils.GetAgentRtid(),{WEB_PN_ID:this.getID()});ext.dispatcher.sendMessage(notifyMSg,null,null,Util.identity);break;default:this._logger.error("handleError: unsupported error = ",error)}},_captureScreenShot:function(resultCallback){this._logger.trace("captureScreenShot: Started");var me=this;this._associatedTab.captureTabVisibleArea("png",function(dataURI){var resValue=dataURI.split(",");resultCallback(SpecialObject.CreateBase64(resValue[1]))},function(err){me.handleError(err),resultCallback()})},_initOpenData:function(registrationData){this._logger.trace("initOpenData: Called"),this._openData||(this._openData={title:registrationData.title,url:registrationData.url},this._logger.trace("initOpenData: Initialize _openData with ",this._openData))},onclientRegistered:function(client,registrationData,registrationResData){this._logger.info("onNewContentConnected: Called"),this._associatedTab.id===client.tabID&&(registrationData.isPage&&(this._logger.info("onclientRegistered: Got registration from page"),this._initOpenData(registrationData)),registrationResData._settings=this._settings)},_calculatePartialProperties:function(properties,callback){this._logger.trace("_calculatePartialProperties: Called");var partialAttrKeysArr=Object.keys(properties).filter(function(attr){return AttrPartialValueUtil.IsPartialValue(properties[attr])},this);if(0===partialAttrKeysArr.length)return void callback(properties);var attrObj=Util.objectFromArray(partialAttrKeysArr,null),queryAttrMsg=new Msg(MSG_TYPES.QUERY,this.getID(),attrObj);this.QUERY_ATTR(queryAttrMsg,function(resMsg){Util.extend(properties,resMsg._data),callback(properties)})},_calculateBrowserAttributes:function(msg,callback){if(this._logger.trace("_calculateBrowserAttributes: Called"),ext.app.ignoreBrowserDescription)return this._logger.debug("_calculateBrowserAttributes: No need to calculate Browser attributes since that it seems we're in a Container not a Browser. Continue."),void callback(msg);var recordedDescArr=msg._data["recorded description"][0],browserIndex=Util.arrayFindIndex(recordedDescArr,function(specialObj){return"Browser"===specialObj.description.properties.micclass},this);Util.assert(browserIndex>=0,"_calculateBrowserAttributes: Could not find browser description in recorded description",this._logger);var description=recordedDescArr[browserIndex].description,me=this,captureScreenNeeded=!!me._settings&&!me._settings.DisableSnapshotChromeFF;this._fixDescription(description,function(){ext.app.supportActiveScreen&&recordedDescArr.length>1&&captureScreenNeeded?me.GetAttr("tab screen capture",null,null,function(res){description["tab screen capture"]=res,callback(msg)}):callback(msg)})},_fixDescription:function(description,callback){this._calculatePartialProperties(description.properties,function(resProperties){description.properties=resProperties,this._calculatePartialProperties(description["smart identification properties"],function(resSmartIdProps){description["smart identification properties"]=resSmartIdProps;var creationTimeName="creationtime",creationTimeVal=this.GetAttrSync(creationTimeName);description.selector={name:creationTimeName,value:creationTimeVal},callback()}.bind(this))}.bind(this))},EVENT_RECORD:function(msg){this._logger.trace("EVENT_RECORD: Called"),this._recordTransactionQueue=[],this._calculateBrowserAttributes(msg,function(resMsg){resMsg._to=ext.dispatcher.getParentDispatcherID(),ext.dispatcher.sendEvent(resMsg)}.bind(this))},EVENT_INTERNAL_RECORD_QUEUE:function(msg){this._logger.trace("EVENT_INTERNAL_RECORD_QUEUE: Called"),this._recordTransactionQueue.push(msg)},EVENT_INTERNAL_RECORD_DISPATCH_QUEUE:function(msg){function dispatchEventAndHandleNext(eventQueue,eventIndex,eventMsg){eventMsg._msgType="EVENT_RECORD",eventMsg._to=ext.dispatcher.getParentDispatcherID(),ext.dispatcher.sendEvent(eventMsg),eventIndex!==eventQueue.length-1&&this._calculateBrowserAttributes(transactionQueue[eventIndex+1],dispatchEventAndHandleNext.bind(this,transactionQueue,eventIndex+1))}this._logger.trace("EVENT_INTERNAL_RECORD_QUEUE: Called");var transactionQueue=this._recordTransactionQueue;transactionQueue.push(msg),this._recordTransactionQueue=[],this._calculateBrowserAttributes(transactionQueue[0],dispatchEventAndHandleNext.bind(this,transactionQueue,0))},EVENT_INTERNAL_RECORD_QUEUE_CLEAR:function(msg){this._logger.trace("EVENT_INTERNAL_RECORD_QUEUE_CLEAR: Called"),this._recordTransactionQueue=[]},EVENT_INTERNAL_SEND_BROWSER_INFO:function(msg){this._logger.trace("EVENT_INTERNAL_SEND_BROWSER_INFO: called"),msg._to=this.getPageId(),ext.dispatcher.sendEvent(msg)}},FrameTree.prototype={_logger:null,page:null,hasFrames:function(){return ext.dispatcher.getNumberOfClients(this.page.getTabId())>1},_buildTree:function(rtidsToExclude,additionalInfo,resultCallback){if(rtidsToExclude=Array.isArray(rtidsToExclude)?rtidsToExclude:[rtidsToExclude],this.page._contentID<0)return this._logger.debug("_buildTree: no Page, returning the empty tree"),void resultCallback({id:null,children:[]});var msgData=additionalInfo||{};msgData.exclude=rtidsToExclude;var msg=new Msg("buildLayoutTree",this.page.getID(),msgData);this.page._DispatchToOurContent(msg,function(resMsg){"ERROR"!==resMsg.status&&"TimedOut"!==resMsg.status||(resMsg._data={id:null,children:[]}),resultCallback(resMsg._data)})},traverseAll:function(nodeFunc,shouldStopTraversalPredicate,thisObj,resCallback){thisObj=thisObj||window,this._logger.trace("traverseAll started"),this._buildTree([],{visibleFramesOnly:!1},function(frameTree){this._logger.trace("traverse build tree: \n",JSON.stringify(frameTree)),this._traverseTree(frameTree,nodeFunc,shouldStopTraversalPredicate,[],thisObj,resCallback)}.bind(this))},traverse:function(nodeFunc,shouldStopTraversalPredicate,thisObj,resCallback){this._logger.trace("traverse started"),this.traverseExcluding(nodeFunc,shouldStopTraversalPredicate,thisObj,[],resCallback)},traverseExcluding:function(nodeFunc,shouldStopTraversalPredicate,thisObj,rtidsToExclude,resCallback){thisObj=thisObj||window,this._logger.trace("traverseExcluding started"),this._buildTree(rtidsToExclude,{visibleFramesOnly:!0},function(frameTree){this._logger.trace("traverse build tree: \n",JSON.stringify(frameTree)),this._traverseTree(frameTree,nodeFunc,shouldStopTraversalPredicate,[],thisObj,resCallback)}.bind(this))},_traverseTree:function(node,nodeFunc,shouldStopTraversalPredicate,path,thisObj,resultCallback){nodeFunc.call(thisObj,node,path,function(result){if(shouldStopTraversalPredicate.call(thisObj,result))return void resultCallback(result);var children=node.children||[];children=children.reverse();var i=-1,callOnChild=function(){if(i++,0===children.length)return void resultCallback(result);var child=children.pop();if(null==child||null===child.id)return void callOnChild();this._traverseTree(child,nodeFunc,shouldStopTraversalPredicate,path.concat(i),thisObj,function(result){if(shouldStopTraversalPredicate.call(thisObj,result))return void resultCallback(result);callOnChild()})}.bind(this);callOnChild()}.bind(this))}},Page.prototype={_logger:null,_tab:null,_contentID:-1,_frameCreationCount:-1,_frames:null,_scriptsToEmbed:[],_browserId:null,_objIdentificationProps:null,_extToolkits:null,_cached_screen_rect:null,_cached_window_rect:null,_initialWindowRect:null,onMessage:function(msg,resultCallback){this._logger.trace("onMessage: called"),this[msg._msgType]||(this._logger.trace("onMessage Unhandled msg\n",msg),ErrorReporter.ThrowNotImplemented("Page."+msg._msgType)),this[msg._msgType](msg,resultCallback)},INTERNAL_BATCH_QUERYATTR:function(msg,resultCallback){if(this._logger.trace("INTERNAL_BATCH_QUERYATTR: started with ",msg),0===msg._data.msgs.length)return this._logger.error("INTERNAL_BATCH_QUERYATTR: no messages found"),void resultCallback(msg);var logger=this._logger,responses=new MultipleResponses(msg._data.msgs.length);msg._data.msgs.forEach(function(currMsg,i,arr){logger.debug("INTERNAL_BATCH_QUERYATTR: process message #",i,": ",currMsg),(RtIdUtils.IsRTIDFrame(currMsg._to)||RtIdUtils.IsRTIDAO(currMsg._to))&&logger.error("INTERNAL_BATCH_QUERYATTR: this is a content message! we don't expect it here"),this.onMessage(currMsg,responses.callback(function(isLast,resMsg){logger.debug("INTERNAL_BATCH_QUERYATTR: got result for message #"+i),arr[i]=resMsg,isLast&&(logger.debug("INTERNAL_BATCH_QUERYATTR: got result for all the messages. Invoke callback passing ",msg),resultCallback(msg))}))},this)},QUERY_ATTR:function(msg,resultCallBack){if(!resultCallBack)return void this._logger.error("QUERY_ATTR: Called without callback! Message: ",msg);var addToRequestToContentMessage=function(contentMessage,valName,valNameMapping,origValue){contentQueryMsg||(contentQueryMsg=new Msg(MSG_TYPES.QUERY,msg._to),contentQueryMsg._data={});var reqKey=valName;for(var k in valNameMapping)if(valNameMapping[k]===valName){reqKey=k;break}return contentQueryMsg._data[reqKey]=origValue,contentQueryMsg},numOfAttrs=Object.keys(msg._data).length;if(0===numOfAttrs)return this._logger.error("QUERY_ATTR: called on 0 attributes"),void resultCallBack(msg);this._logger.trace("QUERY_ATTR: Started for ",msg);var contentQueryMsg=null,valNameMapping={},multiResponses=new MultipleResponses(numOfAttrs);for(var valName in msg._data)this.GetAttr(valName,msg,valNameMapping,multiResponses.callback(function(keyName,done,val){if(this._logger.debug("QUERY_ATTR:",keyName,"=",val),val&&val.askContent?(this._logger.trace("QUERY_ATTR: Adding ",keyName," to content message"),contentQueryMsg=addToRequestToContentMessage(contentQueryMsg,keyName,valNameMapping,msg._data[keyName])):msg._data[keyName]=val,done){if(!contentQueryMsg)return void resultCallBack(msg);this._logger.debug("QUERY_ATTR: Need to query the content sending mesage to content: ",contentQueryMsg);var logger=this._logger;this._DispatchToOurContent(contentQueryMsg,function(resMsg){logger.trace("QUERY_ATTR: Got the following response ",resMsg),mergeMessages(msg,resMsg,valNameMapping),resultCallBack(msg)})}}.bind(this,valName)))},GetAttr:function(property,msg,valNameMapping,resultCallback){function defaultQuery(){this._contentID<0?(this._logger.warn("GetAttr: property= ",property," is calculated using content, but there's no registered content."),resultCallback(null)):resultCallback({askContent:!0})}switch(this._logger.trace("GetAttr: Started for property=",property),property.toLowerCase()){case"micclass":resultCallback("Page");break;case"frame from point":this.getFrameIDFromPoint(msg,resultCallback);break;case"hwnd":resultCallback(this._tab.hwnd||0);break;case"parent":valNameMapping.WEB_PN_ID="parent",resultCallback(this._browserId);break;case"state":case"state_ignoring_frames":this.pageState(msg,resultCallback);break;case"screen_rect":case"rect":this.getScreenRect(resultCallback);break;case"window_rect":this.getWindowRect(resultCallback);break;case"view_x":case"view_y":resultCallback(0);break;case"all_qtp_slv_cookies":this._getAllSlvCookies(resultCallback);break;case"frame from hwnd":this._getAllSlvCookies(function(windows){var wnd=msg._data["frame from hwnd"][0][0];this._logger.trace("GetAttr('frame from hwnd') got window list: "+windows+" looking for "+wnd),-1!==windows.indexOf(wnd)?resultCallback(this.getID()):resultCallback()}.bind(this));break;case"logical name":this._tab.getTabProperty("logical name",resultCallback,defaultQuery.bind(this));break;default:defaultQuery.call(this)}},pageState:function(msg,resultCallback){if(this._logger.trace("pageState: Started"),this._contentID<0)return this._logger.debug("pageState: Page with no content Id. State is Loading."),void resultCallback(ReadyState2Status.loading);if("state_ignoring_frames"in msg._data){this._logger.debug("pageState: ignore frames");var stateRequest=new Msg("QUERY_ATTR",this.getID(),{state:null});return void this._DispatchToOurContent(stateRequest,function(resStateMsg){resultCallback(resStateMsg._data.state)})}if(!ext.dispatcher.isIdle(msg._to.browser))return this._logger.info("pageState: isIdle returned false - so returning Status: Loading (1)"),void resultCallback(ReadyState2Status.loading);this._frames.traverse(function(node,path,traverseCallback){try{if(null===node.id)return void traverseCallback(ReadyState2Status.complete);var request=new Msg("QUERY_ATTR",Util.shallowObjectClone(node.id),{state:null});this._sendToContent(request,null,function(resMsg){traverseCallback(resMsg._data.state||-1)})}catch(ex){this._logger.warn("pageState: got exception from content: "+ex+" \n(wait for rebuild layout)"),traverseCallback(ReadyState2Status.loading)}}.bind(this),function(state){return state!==ReadyState2Status.complete},this,resultCallback)},getFrameIDFromPoint:function(msg,resultCallback){if(this._logger.trace("getFrameIDFromPoint: started ",msg),!this._frames.hasFrames())return this._logger.debug("getFrameIDFromPoint: dont have frames return our id"),void resultCallback(this.getID());var screentPoint=msg._data["frame from point"];this.GetAttr("screen_rect",msg,null,function(pageRect){this._logger.trace("getFrameIDFromPoint: GetAttr screen_rect received response now calculate point and dispatch to content");var pt={x:screentPoint.x-pageRect.left,y:screentPoint.y-pageRect.top},contentMsg=new Msg(MSG_TYPES.FRAME_FROM_POINT,this.getID(),{point:pt});this._DispatchToOurContent(contentMsg,function(resMsg){resultCallback(resMsg._data.WEB_PN_ID)})}.bind(this))},_getFrameIDFromClientPoint:function(point,resultCallback){
if(this._logger.trace("_getFrameIDFromClientPoint: started ",point),!this._frames.hasFrames())return this._logger.debug("_getFrameIDFromClientPoint: dont have frames return our id"),void resultCallback(this.getID());var contentMsg=new Msg(MSG_TYPES.FRAME_FROM_POINT,this.getID(),{point:point});this._DispatchToOurContent(contentMsg,function(resMsg){resultCallback(resMsg._data.WEB_PN_ID)})},QUERY_OBJ_POINT_TO_ID:function(msg,resultCallback){return this._logger.trace("QUERY_OBJ_POINT_TO_ID:"),this._DispatchToOurContent(msg,resultCallback)},QUERY_OBJ_CLIENT_POINT_TO_ID:function(msg,resultCallback){this._logger.trace("QUERY_OBJ_CLIENT_POINT_TO_ID: started for point: ",msg._data),this._getFrameIDFromClientPoint(msg._data.pos,function(rtid){this._logger.trace("QUERY_OBJ_CLIENT_POINT_TO_ID: ",rtid),-1===rtid.frame&&(rtid.frame=this._contentID);var queryObjFrameMsg=new Msg("QUERY_OBJ_CLIENT_POINT_TO_ID",rtid,msg._data);this._sendToContent(queryObjFrameMsg,null,resultCallback)}.bind(this))},QUERY_DESC_TO_ID:function(msg,resultCallback){function queryEveryFrames(node,path,traverseCallback){function mergeFrameMsg(frameMsg){frameMsg._data.WEB_PN_ID=Array.isArray(frameMsg._data.WEB_PN_ID)?frameMsg._data.WEB_PN_ID:[frameMsg._data.WEB_PN_ID],1===frameMsg._data.WEB_PN_ID.length&&(storedMsg._data.WEB_PN_ID=storedMsg._data.WEB_PN_ID.concat(frameMsg._data.WEB_PN_ID)),traverseCallback(storedMsg)}if(null===node.id)return this._logger.trace("frame is uninjectable return"),void traverseCallback(msg);var frameMsg=new Msg(storedMsg._msgType,Util.shallowObjectClone(node.id),Util.shallowObjectClone(storedMsg._data));this._sendToContent(frameMsg,null,mergeFrameMsg)}function frameTraverseCallback(){0===storedMsg._data.WEB_PN_ID.length&&(storedMsg.status="ObjectNotFound",this._logger.info("QUERY_DESC_TO_ID found no object")),1===storedMsg._data.WEB_PN_ID.length&&(storedMsg.status="OK"),storedMsg._data.WEB_PN_ID.length>1&&(storedMsg.status="ObjectNotUnique",this._logger.info("QUERY_DESC_TO_ID find multiple objects")),resultCallback(storedMsg)}this._logger.trace("QUERY_DESC_TO_ID: Started");var storedMsg=Util.deepObjectClone(msg);storedMsg._data.WEB_PN_ID=[],this._DispatchToOurContent(msg,function(resMsg){"ObjectNotFound"!==resMsg.status?resultCallback(msg):this._frames.traverse(queryEveryFrames.bind(this),Util.alwaysFalse,this,frameTraverseCallback.bind(this))}.bind(this))},SRVC_GET_OBJ_DESCRIPTION:function(msg,resultCallback){return this._logger.trace("SRVC_GET_OBJ_DESCRIPTION:"),this._DispatchToOurContent(msg,resultCallback)},SRVC_GET_BROWSER_DESCRIPTION_INTERNAL:function(msg,resultCallback){return this._logger.trace("SRVC_GET_BROWSER_DESCRIPTION_INTERNAL:"),this._DispatchToOurContent(msg,resultCallback)},QUERY_DIRECT_CHILD_DESC_TO_ID:function(msg,resultCallback){this._logger.trace("QUERY_DIRECT_CHILD_DESC_TO_ID got:\n",msg);var filterMsg=new Msg(MSG_TYPES.MATCH_DESC_TO_ID,this.getID(),msg._data);filterMsg._data.WEB_PN_ID=[],this.sendMessageToVisibleFrames(filterMsg,!1,function(resMsg){this._logger.trace("QUERY_DIRECT_CHILD_DESC_TO_ID Returned:\n",resMsg),mergeMessages(msg,resMsg),resultCallback(msg)}.bind(this))},QUERY_REPOSITORY_DESC2ID:function(msg,resultCallback){this._logger.trace("QUERY_REPOSITORY_DESC2ID: Started");var desc=Util.shallowObjectClone(msg._data);msg._data.WEB_PN_ID=[],this._frames.traverse(function(node,path,traverseCallback){if(null===node.id)return void traverseCallback(msg);node.id.frame!==this._contentID&&msg._data.WEB_PN_ID.push(Util.shallowObjectClone(node.id));var frameMsg=new Msg(msg._msgType,Util.shallowObjectClone(node.id),Util.shallowObjectClone(desc));this._sendToContent(frameMsg,null,function(frameMsg){frameMsg._data.WEB_PN_ID=Array.isArray(frameMsg._data.WEB_PN_ID)?frameMsg._data.WEB_PN_ID:[frameMsg._data.WEB_PN_ID],msg._data.WEB_PN_ID=msg._data.WEB_PN_ID.concat(frameMsg._data.WEB_PN_ID),traverseCallback(msg)})},Util.alwaysFalse,this,resultCallback)},MATCH_DESC_TO_ID:function(msg,resultCallback){this._logger.trace("MATCH_DESC_TO_ID: Started"),Description.filterAOList([this],msg._data,function(children){resultCallback(Description.buildReturnMsg(msg._msgType,msg._to,children,this._logger))}.bind(this))},invokeMethods:{DOC_EXECUTE_SCRIPT:function(msg,resultCallback){this._logger.trace("DOC_EXECUTE_SCRIPT: started"),this._DispatchToOurContent(msg,resultCallback)},SAVE_FRAME_SOURCE_NOT_RECURSIVE:function(msg,resultCallback){this._logger.trace("SAVE_FRAME_SOURCE_NOT_RECURSIVE: started"),this._DispatchToOurContent(msg,resultCallback)},GET_ID_FROM_SOURCE_INDEX:function(msg,resultCallback){this._logger.warn("Page.GET_ID_FROM_SOURCE_INDEX is not implemented"),resultCallback(msg)}},SRVC_INVOKE_METHOD:function(msg,resultCallback){var name=msg._data.AN_METHOD_NAME,func=this.invokeMethods[name];func||ErrorReporter.ThrowNotImplemented("invokeMethod: "+name),func.call(this,msg,resultCallback)},SRVC_HIGHLIGHT_OBJECT:function(msg,resultCallback){this._logger.trace("SRVC_HIGHLIGHT_OBJECT: Called"),this._DispatchToOurContent(msg,resultCallback)},SRVC_HIGHLIGHT_MATCHES:function(msg,resultCallback){this._logger.trace("SRVC_HIGHLIGHT_MATCHES: Called");var elementIds=msg._data.WEB_PN_ID;if(Util.isNullOrUndefined(elementIds)||elementIds.length<1)return this._logger.warn("SRVC_HIGHLIGHT_MATCHES: no element"),resultCallback(msg);var frames={};elementIds.forEach(function(id){var frameData=frames[id.frame];if(!frameData){var frameId=Util.deepObjectClone(id);frameId.object=null,frameData={id:frameId,elementIds:[]},frames[id.frame]=frameData}frameData.elementIds.push(id)});var frameKeys=Object.keys(frames);this._logger.debug("SRVC_HIGHLIGHT_MATCHES: sending to frames. frames #:",frameKeys.length);var multiResponses=new MultipleResponses(frameKeys.length);frameKeys.forEach(function(frameKey){var frameData=frames[frameKey],highlightMsg=new Msg("SRVC_HIGHLIGHT_MATCHES",frameData.id,{WEB_PN_ID:frameData.elementIds});ext.dispatcher.sendMessage(highlightMsg,frameData.id,null,multiResponses.callback(function(isDone,resultMsg){isDone&&resultCallback(msg)}))})},SRVC_GET_TEXT:function(msg,resultCallback){return this._logger.trace("SRVC_GET_TEXT:"),this._DispatchToOurContent(msg,resultCallback)},CMD_BROWSER_BACK:function(msg,resultCallBack){this._logger.trace("CMD_BROWSER_BACK: Called"),this._DispatchToOurContent(msg,resultCallBack)},CMD_BROWSER_FORWARD:function(msg,resultCallBack){this._logger.trace("CMD_BROWSER_FORWARD: Called"),this._DispatchToOurContent(msg,resultCallBack)},CMD_BROWSER_REFRESH:function(msg,resultCallBack){this._logger.trace("CMD_BROWSER_REFRESH: Called"),this._DispatchToOurContent(msg,resultCallBack)},CMD_BROWSER_NAVIGATE:function(msg,resultCallback){return this._DispatchToOurContent(msg,resultCallback)},CMD_BROWSER_EMBED_SCRIPT:function(msg,resultCallback){this._logger.trace("CMD_BROWSER_EMBED_SCRIPT: Started");var jsScript=msg._data.text;this._scriptsToEmbed.push(jsScript),this.sendMessageToAllFrames(msg,!1,resultCallback)},CMD_SPY_START:function(msg,resultCallback){this._logger.trace("CMD_SPY_START: Started"),this.sendMessageToVisibleFrames(msg,!1,resultCallback)},CMD_SPY_END:function(msg,resultCallback){this._logger.trace("CMD_SPY_END: Started"),this.sendMessageToVisibleFrames(msg,!1,resultCallback)},CMD_MONITOR_MOUSE_START:function(msg,resultCallback){this.sendMessageToVisibleFrames(msg,!1,resultCallback)},CMD_MONITOR_MOUSE_END:function(msg,resultCallback){var screenPoint=msg._data.pos;this.sendMessageToVisibleFrames(msg,!1,function(resMsg){screenPoint&&resMsg._data.pos&&(window.screenX=screenPoint.x-resMsg._data.pos.x,window.screenY=screenPoint.y-resMsg._data.pos.y),resultCallback(resMsg)})},SRVC_LOAD_KIT:function(msg,resultCallback){if(this._logger.trace("SRVC_LOAD_KIT: started on "+msg._data.progid),"Mercury.WebExtKit"===msg._data.progid){if(this._extToolkits.length>0)return this._logger.trace("SRVC_LOAD_KIT: send toolkits to frame for WebExtKit"),msg._data.toolkits=this._extToolkits.slice(0),this.sendMessageToAllFrames(msg,!1,resultCallback);this._logger.trace("Page.SRVC_LOAD_KIT: no toolkit for web extensibility")}resultCallback(msg)},SRVC_LOAD_EXT_TOOLKIT:function(msg,resultCallback){if(this._logger.trace("SRVC_LOAD_EXT_TOOLKIT: Started"),!this._extToolkits.some(function(item){return msg._data.name===item.name})){var XMLJsonObject=Util.convertXmlStrToJson(msg._data.TOOLKIT);null!==XMLJsonObject&&(this._logger.trace("SRVC_LOAD_EXT_TOOLKIT: add toolkit "+msg._data.name+" to the list"),this._extToolkits.push({name:msg._data.name,description:XMLJsonObject,jsFunctions:msg._data.JSFUNCTION||[],jsScripts:msg._data.text||[]}))}resultCallback(msg)},onclientRegistered:function(client,registrationData,registrationResData){this._logger.info("onclientRegistered: on page for tab ",this._tab.id," and client is: ",client," with the following info:",registrationData),this._tab.id===client.tabID&&(registrationData.isPage&&(this._logger.info("onclientRegistered: Got registration from page content"),this._contentID=client.id,this._initialWindowRect=registrationData.window_rect),registrationResData.frameCount=++this._frameCreationCount,registrationResData.scriptsToEmbed=this._scriptsToEmbed,registrationResData.extToolkits=this._extToolkits,registrationResData._parentPageId=Util.shallowObjectClone(this.id),registrationResData._frameId=Util.shallowObjectClone(this.id),registrationResData._frameId.frame=client.id)},getID:function(){var resRTID=Util.shallowObjectClone(this._browserId);return resRTID.page=this.getPageIdentifier(),resRTID},getPageIdentifier:function(){return 0},_DispatchToOurContent:function(msg,resultCallback){if(this._logger.trace("_DispatchToOurContent: Started with ",msg),this._contentID<0)return this._logger.warn("_DispatchToOurContent: Page has no content, do nothing"),void resultCallback(msg);var processed=!1,lastContentId=this._contentID,resultCallbackWrapper=function(theMsg){processed=!0,resultCallback(theMsg)};Util.setTimeout(function checkProceed(){processed||(this._contentID!=lastContentId?(this._logger.warn("_DispatchToOurContent: Page's content is changed, just callback it as FAIL."),msg.status="ERROR",resultCallback(msg)):Util.setTimeout(checkProceed.bind(this),1e3))}.bind(this),1e3),this._sendToContent(msg,this._contentID,resultCallbackWrapper)},_sendToContent:function(msg,target,resultCallBack){this._logger.trace("_sendToContent: Asking the content for:",msg,", and Target:",target);var origFrame=msg._to.frame;"number"==typeof target&&(msg._to.frame=target),this._logger.debug("_sendToContent: Going to send to the following frame id: ",msg._to.frame);var reqestMsg=msg;ext.dispatcher.sendMessage(msg,null,"chrome",function(resMsg){this._logger.debug("_sendToContent: Got the following response:",resMsg),resMsg=this._updateRTIDIfNeeded(resMsg),reqestMsg=mergeMessages(reqestMsg,resMsg,null,this._logger),reqestMsg._to.frame=origFrame,resultCallBack(reqestMsg)}.bind(this))},_updateRTIDIfNeeded:function(msg){this._logger.trace("_updateRTIDIfNeeded: Started");var data=msg._data;if(data&&data.WEB_PN_ID){this._logger.debug("_updateRTIDIfNeeded: The message contains RTIDs that needs to be updated");var pageID=this.getPageIdentifier();Array.isArray(data.WEB_PN_ID)?data.WEB_PN_ID.forEach(function(id){this.mergeWebRuntimeID(id,pageID)},this):this.mergeWebRuntimeID(data.WEB_PN_ID,pageID),this._logger.debug("_updateRTIDIfNeeded: After updating the RTIDs ",data.WEB_PN_ID)}return msg},areAllPropertiesFilled:function(msg){var data=msg._data;for(var p in data)if(null===data[p])return!1;return!0},sendMessageToAllFrames:function(message,stopOnReply,resultCallback){this._logger.trace("sendMessageToAllFrames: Started"),this._sendMessageToFrames(message,!1,stopOnReply,resultCallback)},sendMessageToVisibleFrames:function(message,stopOnReply,resultCallback){this._logger.trace("sendMessageToVisibleFrames: Started"),this._sendMessageToFrames(message,!0,stopOnReply,resultCallback)},_sendMessageToFrames:function(message,visibleOnly,stopOnReply,resultCallback){this._logger.trace("_sendMessageToFrames: Started",visibleOnly);var traverseFunc=visibleOnly?this._frames.traverse:this._frames.traverseAll;(traverseFunc=traverseFunc.bind(this._frames))(function(node,path,traverseCallback){if(null==node.id)return void traverseCallback(message);this._sendToContent(message,node.id.frame,traverseCallback)},stopOnReply?this.areAllPropertiesFilled:Util.alwaysFalse,this,resultCallback)},onclientUnRegistered:function(client){this._logger.trace("onclientUnRegistered: Page for tab=",this._tab.id," ,client=",client),client.tabID===this._tab.id&&client.id===this._contentID&&(this._logger.info("removeFrame: Page has disconnected"),this._contentID=-1)},mergeWebRuntimeID:function(runtimeID){runtimeID.frame===this._contentID&&(runtimeID.frame=-1)},SRVC_SET_GLOBAL_VARIABLES_INTERNAL:function(msg,resultCallback){msg._data.objectidentificationproperties&&(this._objIdentificationProps=JSON.parse(msg._data.objectidentificationproperties)),this.sendMessageToAllFrames(msg,!1,resultCallback)},SRVC_SET_EVENT_CONFIGURATION_INTERNAL:function(msg,resultCallback){this._logger.trace("SRVC_SET_EVENT_CONFIGURATION_INTERNAL: Started"),this.sendMessageToAllFrames(msg,!1,resultCallback)},SRVC_SAVE_HTML_SOURCE:function(msg,resultCallback){var baseFileName=msg._data.WEB_N_SSV_FRAME_BASE_NAME;msg._data={},msg._data.WEB_N_SSV_FRAME_SRC_MMF_HANDLES=[[]],msg._data.WEB_N_SSV_FRAME_SRC_MMF_SIZES=[[]],msg._data.WEB_N_SSV_FRAME_BASE_URLS=[[]],msg._data.WEB_N_SSV_FRAME_INTERNAL_NAMES=[[]],msg._data.WEB_N_SSV_FRAME_URLS=[[]],msg._data.WEB_N_SSV_FRAME_NAMES=[[]],msg._data.WEB_N_SSV_FRAME_INDEX=[[]];var frameCount=0;this._frames.traverse(function(node,path,traverseCallback){node.id&&this._contentID!==node.id.frame?(msg._data.WEB_N_SSV_FRAME_INDEX[0].push("0."+path.join(".")),msg._data.WEB_N_SSV_FRAME_INTERNAL_NAMES[0].push(baseFileName+"f"+path.join("f"))):(msg._data.WEB_N_SSV_FRAME_INDEX[0].push("0"),msg._data.WEB_N_SSV_FRAME_INTERNAL_NAMES[0].push(baseFileName));var data={"url without form data":null,"User-input in Post data":null,"Non user-input in Post data":null,"User input in Get data":null,"Non user-input in Get data":null,"All data in Get method":null,html_info:null,name:null,url:null},tmpMsg=new Msg(MSG_TYPES.QUERY,Util.shallowObjectClone(node.id),data);++frameCount,this._sendToContent(tmpMsg,null,function(frameResSourceMsg){data=frameResSourceMsg._data,msg._data.WEB_N_SSV_FRAME_SRC_MMF_HANDLES[0].push(data.html_info.MMF_HANDLE),msg._data.WEB_N_SSV_FRAME_SRC_MMF_SIZES[0].push(data.html_info.MMF_HANDLE.html.length),msg._data.WEB_N_SSV_FRAME_BASE_URLS[0].push(data.html_info.FRAME_BASE_URL),delete data.html_info,msg._data.WEB_N_SSV_FRAME_URLS[0].push(data.url),msg._data.WEB_N_SSV_FRAME_NAMES[0].push(data.name),delete data.url,delete data.name;for(var key in data)msg._data[key]=msg._data[key]||[[]],msg._data[key][0].push(data[key]);traverseCallback()})},Util.alwaysFalse,this,function(){msg._data.AN_PROCESS_ID=SpecialObject.CreateProcessId(),msg._data.WEB_N_SSV_TOTAL=frameCount,msg._data.WEB_N_SSV_STATIC_SAVE=!1,resultCallback(msg)})},SRVC_TAKE_SCREENSHOT:function(msg,callbackResult){this._logger.trace("SRVC_TAKE_SCREENSHOT: Started");var browserId={browser:msg._to.browser,page:-1,frame:-1,object:null},browserMsg=Util.deepObjectClone(msg);browserMsg._to=browserId,ext.dispatcher.sendMessage(browserMsg,null,null,function(resultMsg){msg._data=resultMsg._data,msg.status=resultMsg.status,callbackResult(msg)})},SRVC_MAKE_OBJ_VISIBLE:function(msg,callbackResult){this._logger.trace("SRVC_MAKE_OBJ_VISIBLE: started");var browserMsg=new Msg("SRVC_MAKE_OBJ_VISIBLE",Util.shallowObjectClone(this._browserId));ext.dispatcher.sendMessage(browserMsg,null,null,function(){this._logger.trace("SRVC_MAKE_OBJ_VISIBLE: received response"),msg._data.hwnd=0,this.GetAttr("screen_rect",msg,null,function(rect){msg._data.rect=rect,callbackResult(msg)})}.bind(this))},SRVC_GET_SCREEN_RECT:function(msg,resultCallback){this._logger.trace("SRVC_GET_SCREEN_RECT: started"),this._DispatchToOurContent(msg,resultCallback)},getScreenRect:function(resultCallback){this._logger.trace("getScreenRect: started");var logger=this._logger;if(this._tab.getPageRect)return this._logger.trace("getScreenRect: asking tab for Page rect"),void this._tab.getPageRect(resultCallback,function(errorMsg){logger.error("getScreenRect: "+errorMsg),resultCallback({left:0,top:0,right:0,bottom:0})});var heightWidthMsg=new Msg("QUERY_ATTR",this.getID(),{innerHeight:null,outerHeight:null,innerWidth:null,outerWidth:null,window_rect:null});this._DispatchToOurContent(heightWidthMsg,function(resMsg){var rect=Util.calculateTabRect(resMsg._data,this._logger);rect&&(this._cached_screen_rect=rect),rect=rect||this._cached_screen_rect,resultCallback(rect)}.bind(this))},getWindowRect:function(resultCallback){var msg=new Msg("QUERY_ATTR",this.getID(),{window_rect:null});this._DispatchToOurContent(msg,function(resMsg){var rect=resMsg._data.window_rect;rect&&(this._cached_window_rect=rect),rect=rect||this._cached_window_rect||this._initialWindowRect,rect||this._logger.warn("failed to get window rect. Cached rect:",this._cached_window_rect," initial window rect:",this._initialialWindowRect),resultCallback(rect)}.bind(this))},getTabId:function(){return this._tab.id},getParentId:function(){return Util.shallowObjectClone(this._browserId)},INTERNAL_QUERY_PAGE_CONTENT_ID:function(msg){var contentId=this.getID();return contentId.frame=this._contentID,msg._data.contentId=contentId,msg},EVENT_BROWSER_DESTROY:function(msg){return this._logger.info("destroy: Called"),ext.dispatcher.removeListener("clientRegistered",this),ext.dispatcher.removeListener("clientUnRegistered",this),ext.dispatcher.removeListener("Message",this),msg},SRVC_FIX_FRAME_DESCRIPTION:function(msg,callback){var frameRtid=msg._data.frameRtid,description=msg._data.description,objIdentificationProps=msg._data.objIdentificationProps||this._objIdentificationProps;this._fixFrameDescription(frameRtid,description,objIdentificationProps,function(updatedDescription){msg._data.description=updatedDescription,callback(msg)})},_getAllFramesWithMatchingProperties:function(excludedFrameRtid,properties,callback){this._logger.trace("_getAllFramesWithProperties: Called");var frameRtid=excludedFrameRtid,queryFrameByDescMsg=new Msg(MSG_TYPES.MATCH_DESC_TO_ID,this.getID(),Util.shallowObjectClone(properties));queryFrameByDescMsg._data.WEB_PN_ID=[];var nodeFunc=function(node,path,traverseCallback){if(RtIdUtils.IsRTIDEqual(frameRtid,node.id)||RtIdUtils.IsRTIDEqual(frameRtid,node.previousId))return this._logger.trace("_getAllFramesWithProperties: traverse node func: Found frame with id ",frameRtid),queryFrameByDescMsg._data.WEB_PN_ID.push(frameRtid),void traverseCallback(queryFrameByDescMsg);this._sendToContent(queryFrameByDescMsg,node.id.frame,function(){traverseCallback(queryFrameByDescMsg)}.bind(this))}.bind(this),isAlreadyCallback=!1;this._frames.traverseExcluding(nodeFunc,Util.alwaysFalse,this,frameRtid,function(resMsg){isAlreadyCallback=!0,callback(resMsg._data.WEB_PN_ID)}.bind(this));var _logger=this._logger;Util.setTimeout(function(){isAlreadyCallback||(_logger.warn("_getAllFramesWithMatchingProperties timeout send callback with empty object"),callback([]))},4e3)},_calculateFrameIndexSelector:function(description,callback){this._logger.trace("_calculateFrameIndexSelector: Called"),Util.assert("Frame"===description.properties.micclass,"_calculateFrameIndexSelector: Calculating partial selector for a non-Frame agent-object is not supported",this._logger);var properties=description.properties,selectorPartialVal=AttrPartialValueUtil.GetAttachedData(description.selector.value),frameRtid=selectorPartialVal.frameRtid,forceAddingSelector=selectorPartialVal.forceSelector;this._logger.trace("_calculateFrameIndexSelector: Finding selector for frame id: ",frameRtid),this._getAllFramesWithMatchingProperties(frameRtid,properties,function(rtidArr){if(forceAddingSelector||rtidArr.length>1){var indexVal=Util.arrayFindIndex(rtidArr,function(rtid){return RtIdUtils.IsRTIDEqual(frameRtid,rtid)},this);indexVal>=0?(this._logger.trace("_calculateFrameIndexSelector: Adding selector for frame ",frameRtid," - index selector val: ",indexVal),description.selector.value=indexVal):(this._logger.error("_calculateFrameIndexSelector: failed to calculate index selector for frame: ",frameRtid),delete description.selector)}else this._logger.trace("_calculateFrameIndexSelector: There is no need to add selector, force adding is: ",forceAddingSelector," - Candidate Frame # is ",rtidArr.length),delete description.selector;callback(description)}.bind(this))},_calculateFrameSelector:function(description,callback){switch(this._logger.trace("_calculateFrameSelector: Called"),Util.assert(description.selector&&AttrPartialValueUtil.IsPartialValue(description.selector.value),"_calculateFrameSelector: frame does not have required selector information",this._logger),description.selector.name){case"index":this._calculateFrameIndexSelector(description,callback);break;default:this._logger.error("_calculateFrameSelector: selector '"+description.selector.name+"' not handled for Frame."),delete description.selector,callback(description)}},_calculateFrameAssistiveProperties:function(properties,assistivePropsArr,allPropertiesVals,frameRtid,callback){function assistivePropertiesAlgorithm(assistivePropertyIndex,candidateRtIdsArr){switch(candidateRtIdsArr.length){case 0:Util.assert(!1,"_calculateFrameAssistiveProperties: assistivePropertiesAlgorithm received a result with no frames !",this._logger),callback(properties);break;case 1:this._logger.trace("_calculateFrameAssistiveProperties: assistivePropertiesAlgorithm: got to 1 result. finishing."),callback(properties);break;default:if(assistivePropertyIndex<assistivePropsArr.length){var nextAssistivePropName=assistivePropsArr[assistivePropertyIndex];properties[nextAssistivePropName]=allPropertiesVals[nextAssistivePropName],this._getAllFramesWithMatchingProperties(frameRtid,properties,assistivePropertiesAlgorithm.bind(this,assistivePropertyIndex+1))}else this._logger.trace("_calculateFrameAssistiveProperties: assistivePropertiesAlgorithm: finished adding assistive properties, no uniqueness is found. Candidate #"+candidateRtIdsArr.length),callback(properties)}}this._logger.trace("_calculateFrameAssistiveProperties: Called"),this._getAllFramesWithMatchingProperties(frameRtid,properties,assistivePropertiesAlgorithm.bind(this,0))},_calculateFrameDescription:function(msg,callback){this._logger.trace("_calculateFrameDescription: Called");var recordedDescriptionArr=msg._data["recorded description"][0],frameIndex=Util.arrayFindIndex(recordedDescriptionArr,function(descSpecialObj){return"Frame"===descSpecialObj.description.properties.micclass},this);if(-1===frameIndex)return this._logger.trace("_calculateFrameDescription: No Frame in description"),void callback(msg);var frameDescriptionSpecialObj=recordedDescriptionArr[frameIndex],frameRtid=msg._data.WEB_PN_ID[0][frameIndex];Util.assert(RtIdUtils.IsRTIDFrame(frameRtid),"_calculateFrameDescription: runtime id in index "+frameIndex+" doesn't contain a frame rtid. rtid= "+JSON.stringify(frameRtid),this._logger),this._fixFrameDescription(frameRtid,frameDescriptionSpecialObj.description,this._objIdentificationProps,function(updatedDescription){frameDescriptionSpecialObj.description=updatedDescription,callback(msg)}.bind(this))},_fixFrameDescription:function(frameRtid,description,objIdentificationProps,callback){var identificationProps=objIdentificationProps.frame,mandatoryPropsArr=identificationProps.mandatory||[],assistivePropsArr=identificationProps.assistive||[],allPropertiesValues=description.properties,mandatoryProperties={};mandatoryPropsArr.forEach(function(propName){mandatoryProperties[propName]=allPropertiesValues[propName]}),this._calculateFrameAssistiveProperties(mandatoryProperties,assistivePropsArr,allPropertiesValues,frameRtid,function(resultProperties){description.properties=resultProperties,this._calculateFrameSelector(description,function(updatedDescription){callback(updatedDescription)}.bind(this))}.bind(this))},EVENT_RECORD:function(msg){this._logger.trace("EVENT_RECORD: Called"),this._handleRecordEvent(msg)},EVENT_INTERNAL_RECORD_QUEUE:function(msg){this._logger.trace("EVENT_INTERNAL_RECORD_QUEUE: Called"),this._handleRecordEvent(msg)},EVENT_INTERNAL_RECORD_DISPATCH_QUEUE:function(msg){this._logger.trace("EVENT_INTERNAL_RECORD_DISPATCH_QUEUE: Called"),this._handleRecordEvent(msg)},EVENT_INTERNAL_RECORD_QUEUE_CLEAR:function(msg){this._logger.trace("EVENT_INTERNAL_RECORD_QUEUE_CLEAR: Called"),msg._to=this.getParentId(),ext.dispatcher.sendEvent(msg)},EVENT_INTERNAL_SEND_BROWSER_INFO:function(msg){if(this._logger.trace("EVENT_INTERNAL_SEND_BROWSER_INFO: Called"),this._contentID<0)return void this._logger.trace("EVENT_INTERNAL_SEND_BROWSER_INFO: Page has no content.");msg._to.frame=this._contentID,ext.dispatcher.sendEvent(msg)},_getAllSlvCookies:function(callback){var description=new Msg("QUERY_DESC_TO_ID",this.getID(),{"html tag":"OBJECT"});description._attr_names="html tag";var self=this;this.QUERY_DESC_TO_ID(description,function(msg){if("OK"!==msg.status||!msg._data.WEB_PN_ID||0===msg._data.WEB_PN_ID.length)return callback("");var remaining=msg._data.WEB_PN_ID.length,cookies=[];msg._data.WEB_PN_ID.forEach(function(id){var cookieMsg=new Msg("QUERY_ATTR",id,{qtp_slv_cookie:null});self.QUERY_ATTR(cookieMsg,function(resultMsg){var cookie=resultMsg._data.qtp_slv_cookie;cookie&&cookies.push(cookie),0==--remaining&&callback(cookies.join(";"))})})})},_handleRecordEvent:function(msg){this._logger.trace("_handleRecordEvent: Called"),this._calculateFrameDescription(msg,function(resMsg){this._logger.trace("_handleRecordEvent: Callback: Finished calculating partial attributes. Sending event to parent."),resMsg._to=this.getParentId(),ext.dispatcher.sendEvent(resMsg)}.bind(this))}},BrowserRecorder.prototype={_logger:null,_knownTabs:null,_destroyedTabs:[],_tabsReplacedMap:null,_eventData:null,_lastRemoveInfo:null,onTabReplaced:function(newTabId,oldTabId){this._logger.trace("onTabReplaced: replacing tab id: "+oldTabId+" with tab id: "+newTabId),this._tabsReplacedMap[oldTabId]=newTabId},onAddressBarNavigation:function(tabId,url){this._logger.trace("onAddressBarNavigation: started with tab id: "+tabId+" and url: "+url),this._onEventReceived(tabId,"navigate",url)},onReload:function(tabId){this._logger.trace("onReload: started with tab id: "+tabId),this._onEventReceived(tabId,"Refresh")},onBack:function(tabId,isFrameNavigation){this._logger.trace("onBack: started with tab id: "+tabId),this._onEventReceived(tabId,"Back"),isFrameNavigation&&this._askBrowserForData(tabId)},onForward:function(tabId,isFrameNavigation){this._logger.trace("onForward: started with tab id: "+tabId),this._onEventReceived(tabId,"Forward"),isFrameNavigation&&this._askBrowserForData(tabId)},onUserOpenedNewTab:function(openerTabId){this._logger.trace("onUserOpenedNewTab: started with tab id: "+openerTabId);var tabId=this._getUpdatedTabId(openerTabId);this._onEventReceived(tabId,"OpenNewTab"),this._askBrowserForData(tabId)},onUserClosedTab:function(closedTabId,removeInfo){this._logger.trace("onUserClosedTab: started with tab id: "+closedTabId);var tabId=this._getUpdatedTabId(closedTabId),browserToBeClosed=this._knownTabs[tabId];if(this._destroyedTabs[tabId]=browserToBeClosed,this._lastRemoveInfo&&this._lastRemoveInfo.isWindowClosing&&removeInfo&&this._lastRemoveInfo.windowId===removeInfo.windowId)this._logger.trace("onUserClosedTab: tab is closed by window close, so skipping record since CloseAllTabs was recorded.");else{var eventName=removeInfo&&removeInfo.isWindowClosing?"CloseAllTabs":"Close";this._onEventReceived(tabId,eventName)}this._lastRemoveInfo=removeInfo},onBrowserInformationReceived:function(tabId,browserInfo){this._logger.trace("onBrowserInformationReceived: started with tab id: "+tabId),tabId=this._getUpdatedTabId(tabId),this._eventData[tabId]||(this._eventData[tabId]={}),this._eventData[tabId].data=browserInfo,this._dispatchRecordEvent(tabId)},_askBrowserForData:function(tabId){var browser=this._knownTabs[tabId],recordMsg=new Msg("EVENT_INTERNAL_SEND_BROWSER_INFO",browser.getID(),{});browser.onMessage(recordMsg)},_onEventReceived:function(tabId,eventName,url){this._logger.trace("_onEventReceived: started with tab id: "+tabId+", event name: "+eventName+" and url: "+url),tabId=this._getUpdatedTabId(tabId),this._eventData[tabId]||(this._eventData[tabId]={}),this._eventData[tabId].name=eventName,this._eventData[tabId].url=url,this._dispatchRecordEvent(tabId),Util.setTimeout(function(){this._eventData[tabId]&&(this._logger.warn("_onEventReceived: clearing event data of: "+this._eventData[tabId].name+" - tab id: "+tabId),this._eventData[tabId].name=null)}.bind(this),1e4)},_getUpdatedTabId:function(tabId){if(this._tabsReplacedMap[tabId]){var newTabId=this._tabsReplacedMap[tabId];return this._logger.trace("_getUpdatedTabId: tab id: "+tabId+" was replaced with tab id: "+newTabId),newTabId}return tabId},_createRecordData:function(ao){this._logger.trace("_createRecordData: started");var micclass=Util.getMicClass(ao),objDesc=Description.createEmptyRecordDescription(ao),description=SpecialObject.CreateDescription(objDesc);return{WEB_PN_ID:[[ao.getID()]],micclass:[[micclass]],"recorded description":[[description]],"event id":[[]]}},_dispatchRecordEvent:function(tabId){if(this._logger.trace("_dispatchRecordEvent: Called for tabId: "+tabId),!Util.isNullOrUndefined(this._eventData[tabId])&&!Util.isNullOrUndefined(this._eventData[tabId].name)){var browser=this._knownTabs[tabId];browser||(browser=this._destroyedTabs[tabId]),Util.assert(browser,"_dispatchRecordEvent: Browser is undefined",this._logger);var data=this._eventData[tabId].data;if(Util.isNullOrUndefined(data)){if(browser.GetAttrSync("openurl").length>0)return;this._logger.trace("_dispatchRecordEvent: Creating an empty record description for uninitialized browser: "+tabId),data=this._createRecordData(browser)}this._logger.prettyDebug("_dispatchRecordEvent: Recording Navigation: ",this._eventData[tabId]);var eventName=this._eventData[tabId].name,url=this._eventData[tabId].url;delete this._eventData[tabId];var eventId=SpecialObject.CreateEventId({clientX:0,clientY:0,type:eventName},browser.getID());data["event id"][0][0]=eventId,data.event=eventName,data.text=eventName,data.url=url;var recordMsg=new Msg("EVENT_RECORD",browser.getID(),data);browser.onMessage(recordMsg)}}},Agent.prototype={_logger:null,_knownTabs:{},_inspectionMode:null,_settings:null,_eventConfigCache:null,_browserRecorder:null,_inspectionOptions:null,_testingToolIdMap:null,onMessage:function(msg,resultCallback){if(this._logger.trace("onMessage: Started with message ",msg),!this[msg._msgType])return void this._dispatchMessageToAllBrowsers(msg,resultCallback);this[msg._msgType](msg,resultCallback)},SRVC_SET_CLASS2WITYPE_OBJ:function(msg,resultCallback){resultCallback(msg)},SRVC_SET_ENUM2STRINGMAP_OBJ:function(msg,resultCallback){resultCallback(msg)},SRVC_GET_ALL_BROWSERS:function(msg,resultCallback){var resultArr=[],targetBrowsers=this._getTargetBrowsers();Util.isNullOrUndefined(msg._data.processId)||(targetBrowsers=targetBrowsers.filter(function(browser){return browser.getTestingToolId()==msg._data.processId})),targetBrowsers.forEach(function(browser){resultArr.push(browser.getID())}.bind(this)),1===resultArr.length?msg._data.WEB_PN_ID=resultArr[0]:msg._data.WEB_PN_ID=[resultArr],resultCallback(msg)},SRVC_INVOKE_METHOD:function(msg,resultCallback){var name=msg._data.AN_METHOD_NAME,func=this.invokeMethods[name];if(func)return void func.call(this,msg,resultCallback);ErrorReporter.ThrowNotImplemented("Browser.invokeMethod: "+name)},NOTIFY_BROWSER_IS_NOT_VALID:function(msg,resultCallback){var browserTabID=msg._data.WEB_PN_ID.browser;this.destroyBrowser(browserTabID),resultCallback(msg)},CMD_BROWSER_CLOSE_ALL_TABS:function(msg,resultCallback){this._logger.trace("CMD_BROWSER_CLOSE_ALL_TABS: Started")
;var closeTabMsg=new Msg("CMD_BROWSER_CLOSE",msg._to,{});this._dispatchMessageToAllBrowsers(closeTabMsg,resultCallback)},SRVC_SET_GLOBAL_VARIABLES:function(msg,resultCallback){this._logger.trace("SRVC_SET_GLOBAL_VARIABLES: Started"),this._settings=this._readSettingsFromMsg(msg),Util.assert(this._settings,"SRVC_SET_GLOBAL_VARIABLES: Received empty settings",this._logger),null!=this._settings.WebActivityState&&this._handleWebActivityState(this._settings.WebActivityState);var newSettingsMsg=new Msg("SRVC_SET_GLOBAL_VARIABLES_INTERNAL",this.getID(),this._settings);if(Util.isNullOrUndefined(msg._data)||Util.isNullOrUndefined(msg._data.processId))this._dispatchMessageToAllBrowsers(newSettingsMsg,function(){resultCallback(msg)});else{var browsers=this._getTargetBrowsers().filter(function(browser){return browser.getTestingToolId()===msg._data.processId});if(0===browsers.length)return resultCallback(msg);this._dispatchMessageToBrowsers(newSettingsMsg,browsers,function(){resultCallback(msg)})}},SRVC_TAKE_SCREENSHOT:function(msg,resultCallback){this._logger.trace("SRVC_TAKE_SCREENSHOT: Started");var targetBrowsers=this._getTargetBrowsers();return 0===targetBrowsers.length?(this._logger.warn("SRVC_TAKE_SCREENSHOT: No Target browsers to dispatch message to, Returning."),void resultCallback(msg)):1===targetBrowsers.length?(this._logger.trace("SRVC_TAKE_SCREENSHOT will take screenshot on only one browser"),targetBrowsers[0].onMessage(msg,resultCallback)):Description.filterAOList(targetBrowsers,{isActive:!0},function(activeBrowsers){0===activeBrowsers.length&&this._logger.warn("SRVE_TAKE_SNAPSHOT: No active browser. Use the first one instead."),(0===activeBrowsers.length?targetBrowsers[0]:activeBrowsers[0]).onMessage(msg,resultCallback)}.bind(this))},_readSettingsFromMsg:function(msg){this._logger.trace("_readSettingsFromMsg: Started");var settingPropName,variables=msg._data,new_settings={};if(Array.isArray(variables.name))for(var i=0;i<variables.name[0].length;++i)settingPropName="webactivitystate"==variables.name[0][i]?"WebActivityState":variables.name[0][i],new_settings[settingPropName]=variables.value[0][i];else settingPropName="webactivitystate"==variables.name?"WebActivityState":variables.name,new_settings[settingPropName]=variables.value;return new_settings},_handleWebActivityState:function(webActivityState){function setIdleMode(){this._inspectionMode=null,this._inspectionOptions=null,this._browserRecorder=null}switch(this._logger.trace("_handleWebActivityState: Started"),webActivityState){case 0:this._logger.trace("_handleWebActivityState: Idle mode set"),setIdleMode.call(this);break;case 1:this._logger.trace("_handleWebActivityState: Record started"),this._inspectionMode="record",this._inspectionOptions=null,this._browserRecorder||(this._browserRecorder=new BrowserRecorder(this._knownTabs));break;case 2:this._logger.trace("_handleWebActivityState: Replay started"),ext.app.runStarted&&ext.app.runStarted(),setIdleMode.call(this);break;default:this._logger.error("_handleWebActivityState: setting mode to idle. Unhandled WebActivityState: "+webActivityState),setIdleMode.call(this)}},SRVC_SET_EVENT_CONFIGURATION:function(msg,resultCallback){this._logger.trace("SRVC_SET_EVENT_CONFIGURATION: Started");var config=this._parseEventConfig(msg._data.EN_CONFIG_DATA);this._eventConfigCache=config;var newMsg=new Msg("SRVC_SET_EVENT_CONFIGURATION_INTERNAL",msg._to,{config:config});this._dispatchMessageToAllBrowsers(newMsg,function(){resultCallback(msg)})},_parseEventConfig:function(xml){this._logger.trace("_parseEventConfig: called.");var json=Util.convertXmlStrToJson(xml);if(!json)return this._logger.error("_parseEventConfig: Faile to convert configuration from XML to JSON! "+msg._data.EN_CONFIG_DATA),null;var config={};return Util.map(json.XML.Object,function(micclassConfig,args){var micclass=micclassConfig._Name.toLowerCase();config[micclass]={},Util.map(micclassConfig.Event,function(eventConfig){config[micclass][eventConfig._Name]={listen:parseInt(eventConfig._Listen),record:parseInt(eventConfig._Record)}})}),config},_setInspectionMode:function(msg,resultCallback){switch(this._logger.trace("_setInspectionMode: Called."),msg._msgType){case"CMD_SPY_START":this._inspectionMode="spy",this._inspectionOptions=msg._data;break;case"CMD_SPY_END":this._inspectionMode=null,this._inspectionOptions=null;break;default:return this._logger.error("_setInspectionMode called with unknown msg type: "+msg._msgType),void resultCallback(msg)}this._dispatchMessageToAllBrowsers(msg,resultCallback)},_onAddressBarNavigation:function(tabId,url){this._logger.trace("_setInspectionMode: Called."),this._doInRecord(function(){this._browserRecorder.onAddressBarNavigation(tabId,url)})},_onSpySuspended:function(){this._logger.trace("_onSpySuspended: Called.");var msg=new Msg("CMD_SPY_END",this.getID(),{});this._setInspectionMode(msg,Util.identity)},_onSpyResumed:function(){this._logger.trace("_onSpyResumed: Called.");var msg=new Msg("CMD_SPY_START",this.getID(),{});this._setInspectionMode(msg,Util.identity)},CMD_SPY_START:function(msg,resultCallback){this._logger.trace("CMD_SPY_START: Called."),ext.app.setInteractionMode?ext.app.setInteractionMode("spy"):this._logger.debug("CMD_SPY_START: Browser doesn't support InteractionMode"),this._setInspectionMode(msg,resultCallback)},CMD_SPY_END:function(msg,resultCallback){this._logger.trace("CMD_SPY_END: Called."),ext.app.setInteractionMode?ext.app.setInteractionMode("normal"):this._logger.debug("CMD_SPY_END: Browser doesn't support InteractionMode"),this._setInspectionMode(msg,resultCallback)},CMD_MONITOR_MOUSE_START:function(msg,resultCallback){this._logger.trace("CMD_MONITOR_MOUSE_START called"),this._dispatchMessageToAllBrowsers(msg,resultCallback)},CMD_MONITOR_MOUSE_END:function(msg,resultCallback){this._logger.trace("CMD_MONITOR_MOUSE_END called"),this._dispatchMessageToAllBrowsers(msg,resultCallback)},invokeMethods:{BROWSER_GET_ACTIVE_TAB_FOR_BROWSER_FRAME_WND:function(msg,resultCallback){function dispatchResult(browserResultArr){var returnMsg=Description.buildReturnMsg(msg._msgType,msg._to,browserResultArr,this._logger);delete returnMsg.status,resultCallback(returnMsg)}this._logger.trace("BROWSER_GET_ACTIVE_TAB_FOR_BROWSER_FRAME_WND: Started"),Description.filterAOList(this._getTargetBrowsers(),{isActive:!0},function(candidateActiveBrowsersArr){function DoFurtherFilter(candidateNormalBrowsersArr,filterProperties){if(candidateNormalBrowsersArr.length>0&&(candidateBrowsersArr=candidateBrowsersArr.concat(candidateNormalBrowsersArr)),candidateBrowsersArr.length<=1&&(filterProperties.rect||!msg._data.title))return void dispatchResult.call(this,candidateBrowsersArr);this._logger.trace("BROWSER_GET_ACTIVE_TAB_FOR_BROWSER_FRAME_WND More than one candidate browser found by rect - let's try to find by name");var browserTitle=msg._data.title.replace(" - Google Chrome","");browserTitle=browserTitle.replace(" - Mozilla Firefox",""),browserTitle=browserTitle.replace(" - Microsoft Edge",""),Description.filterAOList(candidateBrowsersArr,{title:browserTitle},function(filteredBrowsersArr){if(0===filteredBrowsersArr.length)return this._logger.debug("BROWSER_GET_ACTIVE_TAB_FOR_BROWSER_FRAME_WND: No match found trying to see if the URL is the given title"),void Description.filterAOList(candidateBrowsersArr,{"url no protocol":browserTitle},dispatchResult.bind(this));dispatchResult(filteredBrowsersArr)}.bind(this))}if(this._logger.trace("BROWSER_GET_ACTIVE_TAB_FOR_BROWSER_FRAME_WND.filterAOList: returned with "+candidateActiveBrowsersArr.length+" candidates"),candidateActiveBrowsersArr.length<=0)return void dispatchResult.call(this,candidateActiveBrowsersArr);var candidateBrowsersArr=[],normalBrowsersArr=[];candidateActiveBrowsersArr.forEach(function(browser){browser._associatedTab&&browser._associatedTab._emulatingDevice?candidateBrowsersArr.push(browser):normalBrowsersArr.push(browser)});var filterProperties={};msg._data.rect&&(filterProperties.rect=msg._data.rect),msg._data.width&&msg._data.height&&(filterProperties.outerwidth=msg._data.width,filterProperties.outerheight=msg._data.height),Description.filterAOList(normalBrowsersArr,filterProperties,function(candidateNormalBrowsersArr){if(0===candidateNormalBrowsersArr.length&&filterProperties.outerwidth&&filterProperties.outerheight){var filterPropertiesInner={innerwidth:msg._data["inner width"],innerheight:msg._data["inner height"]};if(filterPropertiesInner.innerwidth&&filterPropertiesInner.innerheight)return void Description.filterAOList(normalBrowsersArr,filterPropertiesInner,function(candidateNormalBrowsersArr){DoFurtherFilter.call(this,candidateNormalBrowsersArr,filterPropertiesInner)}.bind(this))}DoFurtherFilter.call(this,candidateNormalBrowsersArr,filterProperties)}.bind(this))}.bind(this))},CALL_UPDATE_OF_ALL_FRAMES:function(msg,resultCallback){this._logger.trace("CALL_UPDATE_OF_ALL_FRAMES: called"),resultCallback(msg)}},_mergeValue:function(msg,key,val){msg._data[key]?(Util.isUndefined(msg._data[key].length)&&(msg._data[key]=[[msg._data[key]]]),msg._data[key][0]=msg._data[key][0].concat([val])):msg._data[key]=val},_getTargetBrowsers:function(){var browserArr=[];return Object.keys(this._knownTabs).forEach(function(tabId){var browser=this._knownTabs[tabId];browser&&browserArr.push(browser)}.bind(this)),browserArr},_dispatchMessageToAllBrowsers:function(msg,resultCallback){this._logger.trace("_dispatchMessageToAllBrowsers: started");var targetBrowsers=(this._logger,this._getTargetBrowsers().filter(Util.identity));if(0===targetBrowsers.length)return this._logger.info("_dispatchMessageToAllBrowsers: No Target browsers to dispatch message to, Returning."),void resultCallback(msg);this._dispatchMessageToBrowsers(msg,targetBrowsers,resultCallback)},_dispatchMessageToBrowsers:function(msg,browsers,resultCallback){this._logger.trace("_dispatchMessageToBrowsers: started");var logger=this._logger;if(0===browsers.length)return void resultCallback(msg);var multiResponses=new MultipleResponses(browsers.length);browsers.forEach(function(browser){this._logger.trace("onMessage: Requesting browser ",browser.getID());var browserMsg=new Msg(msg._msgType,browser.getID(),msg._data);browser.onMessage(browserMsg,multiResponses.callback(function(isDone,resultMsg){mergeMessages(msg,resultMsg),isDone&&(logger.trace("_dispatchMessageToBrowsers: returned with message: ",msg),resultCallback(msg))}))},this)},UpdateKnownBrowsers:function(){this._logger.trace("UpdateKnownBrowsers: Called.");var filterKnownTabs=function(tabId){return!this._knownTabs[tabId]};ext.app.getAllTabs(filterKnownTabs.bind(this),function(tabsArr){this._logger.trace("UpdateKnownBrowsers: getAllTabs returned"),tabsArr.forEach(function(tab){this._logger.trace("UpdateKnownBrowsers: Creating browser for tabId = "+tab.id),this.createBrowser(tab)}.bind(this))}.bind(this))},createBrowser:function(tab,openerTabId){if(this._logger.info("createBrowser: called for tab Id: "+tab.id),this._knownTabs[tab.id])return void this._logger.info("createBrowser: We have already created browser for tab: "+tab.id);var shouldConnect=ext.dispatcher.shouldConnectExternal();"unsupported"===shouldConnect&&(shouldConnect=!this.hasOpenedTabs()&&!ext.dispatcher.isConnectPerformed),shouldConnect&&(this._logger.info("createBrowser: First time browser is created going to create the Testing Tools communication channel"),ext.dispatcher.connect());var browser=new Browser(tab);browser.onNewTestingToolId(this._onNewTestingToolId.bind(this));var windowTestingToolId=this._getTestingToolIdByWindowId(tab.windowId);Util.isNullOrUndefined(windowTestingToolId)||browser.setTestingToolId(windowTestingToolId);var openerTabtestingToolId=this._getOpenerTabTestingToolId(openerTabId);Util.isNullOrUndefined(openerTabtestingToolId)||browser.setTestingToolId(openerTabtestingToolId),this._knownTabs[tab.id]=browser,this._knownTabs[tab.id].init()},destroyBrowser:function(tabId){this._logger.info("destroyBrowser: called with tab Id: "+tabId),Util.isUndefined(this._knownTabs[tabId])||null===this._knownTabs[tabId]||(this._knownTabs[tabId].destroy(),delete this._knownTabs[tabId])},hasOpenedTabs:function(){return 0!==this._getTargetBrowsers().length},onclientRegistered:function(client,registrationInfo,registrationResData){this._logger.info("onclientRegistered: Started for client:\n",client,"\nregistrationInfo=\n",registrationInfo);var tabID=client.tabID;registrationResData.inspectionMode=this._inspectionMode,registrationResData.inspectionOptions=this._inspectionOptions,registrationResData.globalVariables=this._settings,registrationResData.eventConfig=this._eventConfigCache,registrationResData.ignoreBrowserDescription=!!ext.app.ignoreBrowserDescription,this._knownTabs[tabID]||(this._logger.debug("onclientRegistered: Got registration from unknown tab with id:"+tabID),registrationResData.status="pending")},_getTestingToolIdByWindowId:function(windowId){var testingToolId=null;return Util.isNullOrUndefined(windowId)||(testingToolId=this._findTestingtoolIdbyWID(windowId)),testingToolId},_getOpenerTabTestingToolId:function(openerTabId){var testingtoolId;return Util.isNullOrUndefined(openerTabId)||(testingtoolId=this._knownTabs[openerTabId].getTestingToolId()),testingtoolId},_onTabCreated:function(tab,openerTabId){this._logger.info("_onTabCreated: called for tab id: "+tab.id),this.createBrowser(tab,openerTabId)},_onTabClosed:function(tabId){this._logger.info("_onTabClosed: called for tab Id: "+tabId),this.destroyBrowser(tabId)},_onTabReplaced:function(newTabId,oldTabId){this._logger.trace("_onTabReplaced: replacing tab "+oldTabId+" with tab "+newTabId),this._doInRecord(function(){this._browserRecorder.onTabReplaced(newTabId,oldTabId)})},_onReload:function(tabId){this._logger.trace("_onReload: called for tab id: "+tabId),this._doInRecord(function(){this._browserRecorder.onReload(tabId)})},_onForward:function(tabId,isFrameNavigation){this._logger.trace("_onReload: called for tab id: "+tabId),this._doInRecord(function(){this._browserRecorder.onForward(tabId,isFrameNavigation)})},_onBack:function(tabId,isFrameNavigation){this._logger.trace("_onReload: called for tab id: "+tabId),this._doInRecord(function(){this._browserRecorder.onBack(tabId,isFrameNavigation)})},_onUserOpenedNewTab:function(openerTabId){this._logger.trace("_onUserOpenedNewTab: called for opener tab id: "+openerTabId),this._doInRecord(function(){this._browserRecorder.onUserOpenedNewTab(openerTabId)})},_onUserClosedTab:function(tabId,removeInfo){this._doInRecord(function(){this._browserRecorder.onUserClosedTab(tabId,removeInfo)}),Util.isNullOrUndefined(removeInfo)||Util.isNullOrUndefined(removeInfo.isWindowClosing)||!removeInfo.isWindowClosing||Util.isNullOrUndefined(removeInfo.windowId)||this._unRegisterTestingToolByWID(removeInfo.windowId)},CMD_BROWSER_RUN_ENDED:function(msg,resultCallback){if(Util.isNullOrUndefined(msg._data)||Util.isNullOrUndefined(msg._data.processId)||!ext.app.runEnded)ext.app.runEnded&&ext.app.runEnded(),resultCallback(msg);else{var browsers=this._getTargetBrowsers().filter(function(browser){return browser.getTestingToolId()===msg._data.processId});if(0===browsers.length)return resultCallback(msg);this._dispatchMessageToBrowsers(msg,browsers,function(){resultCallback(msg)})}},getID:function(){return{browser:-1,page:-1,frame:-1,object:null}},QUERY_IDS_TO_ATTRS:function(msg,resultCallback){var ids=msg._data.WEB_PN_ID;Array.isArray(ids)?ids=ids[0]:null!==ids&&(ids=[ids]);var prop;for(prop in msg._data)"WEB_PN_ID"!==prop&&(msg._data[prop]=[[[]]]);if(null===ids)return msg._data.WEB_PN_ID=[],void resultCallback(msg);var newData={};for(prop in msg._data)"WEB_PN_ID"!==prop&&(newData[prop]=null);for(var multiResponses=new MultipleResponses(ids.length),multiResponsesCallback=multiResponses.callback(function(done,rtnMsg){this._logger.trace("QUERY_IDS_TO_ATTRS: QUERY_ATTR message's callback invoked. All done: "+done);for(var prop in newData){var val=rtnMsg._data[prop];Array.isArray(val)?msg._data[prop][0][0].push(val[0]):msg._data[prop][0][0].push(val)}done&&(this._logger.trace("QUERY_IDS_TO_ATTRS: Finished quering all the runtids going to 'fix' the message rtids"),Array.isArray(msg._data.WEB_PN_ID)&&(msg._data.WEB_PN_ID=msg._data.WEB_PN_ID[0]),resultCallback(msg))}.bind(this)),i=0;i<ids.length;i++){var newMsg=new Msg(MSG_TYPES.QUERY,Util.shallowObjectClone(ids[i]),Util.shallowObjectClone(newData));ext.dispatcher.sendMessage(newMsg,null,"chrome",multiResponsesCallback)}},EVENT_INTERNAL_RECORD_BROWSER_INFO:function(msg){if(!this._browserRecorder)return void this._logger.warn("EVENT_INTERNAL_RECORD_BROWSER_INFO: BrowserRecorder is empty");this._browserRecorder.onBrowserInformationReceived(msg._data.WEB_PN_ID[0][0].browser,msg._data)},_registerAppEvent:function(eventName,callback){ext.app[eventName]?(ext.app[eventName](callback),this._logger.trace("registerAppEvent: Registered for '"+eventName+"' event.")):this._logger.info("registerAppEvent: Current Browser doesn't support the '"+eventName+"' event.")},_doInRecord:function(func){"record"===this._inspectionMode&&(Util.assert(this._browserRecorder,"_doInRecord: BrowserRecorder is empty during Recording",this._logger),func.call(this))},_onNewTestingToolId:function(windowId,testingtoolId){this._logger.trace("_onNewTestingToolId called windowId = ",windowId,", testingtoolId = ",testingtoolId),this._registerTestingToolByWID(windowId,testingtoolId)},_findTestingtoolIdbyWID:function(windowId){return this._testingToolIdMap[windowId]},_registerTestingToolByWID:function(windowId,testingToolId){var result=!1;return Util.isNullOrUndefined(windowId)||Util.isNullOrUndefined(testingToolId)||(Util.isNullOrUndefined(this._testingToolIdMap[windowId])?(this._testingToolIdMap[windowId]=testingToolId,result=!0):this._testingToolIdMap[windowId]!==testingToolId&&this._logger.warn("registerTestingToolByWID:  one window is register different testingtool id.")),result},_unRegisterTestingToolByWID:function(windowId){var result=!1;return Util.isNullOrUndefined(windowId)||(delete this._testingToolIdMap[windowId],result=!0),result}},ExtDispatcher.prototype={isConnectPerformed:!1,_logger:null,_externalComChannel:null,_inboundChromeCOM:null,_knownClients:[],_nextMessageID:0,_responseCallbacks:null,_listeners:null,_currentGlobalErrorHandler:null,shouldConnectExternal:function(){return this._externalComChannel.shouldConnect()},connect:function(){this._logger.info("connect: Started"),this.isConnectPerformed=!0,this._connectExternalComChannel(),this._logger.info("connect finished: with daemon channel id ",this._externalComChannel.id)},disconnect:function(){this._logger.trace("disconnect: Called"),this._externalComChannel.disconnect(),this._inboundChromeCOM.disconnect(),this.isConnectPerformed=!1},onUnload:function(){this._externalComChannel&&this._externalComChannel.disconnect()},sendMessage:function(msg,target,forceCOMType,resultCallback){return this._logger.trace("sendMessage: Going to send \n ",msg,"\nto:\n",target),target=target||msg._to,this._isLocalTarget(target)?this._dispatchMessageLocally(msg,resultCallback):this._dispatchMessageExternally(msg,target,forceCOMType,resultCallback)},sendEvent:function(msg,target){if(this._logger.prettyTrace("sendEvent: Going to send \n ",msg,"\nto:\n",target),target=target||msg._to,this._isLocalTarget(target))return this._dispatchMessageLocally(msg,Util.identity);this._logger.trace("sendEvent: dispatching event to an external context");var comChannel=this._getTargetCOMChannel(target);this._transformMessageIfNeeded(msg,target),comChannel.sendEvent(msg,target.frame)},getParentDispatcherID:function(){return RtIdUtils.GetTestingToolRtId()},isIdle:function(tabID){this._logger.trace("isIdle: Started for tab=",tabID);var ports=this._knownClients[tabID]||[],unattached=ports.filter(function(p){return!p.attached});return unattached.forEach(function(unAttachPort){unAttachPort.idleTimes=unAttachPort.idleTimes||0,unAttachPort.idleTimes++>=5&&(this._logger.warn("isIdle: ",tabID," Tab unattached port reaches the max idle times. Should clean the times and set the attached flag"),unAttachPort.attached=!0,delete unAttachPort.idleTimes)}.bind(this)),0===unattached.length},getNumberOfClients:function(tabID){return this._logger.info("getNumberOfClients: started"),this._knownClients[tabID].length},addListener:function(eventName,listenerObj){switch(this._logger.info("addListener: called"),eventName){case"Message":this._logger.trace("addListener Message for ",listenerObj.id),this._listeners[eventName]||(this._listeners[eventName]=new WebIdContainer),this._listeners[eventName].add(listenerObj.id,listenerObj);break;default:this._listeners[eventName]||(this._listeners[eventName]=[]),this._listeners[eventName].push(listenerObj)}},removeListener:function(eventName,listenerObj){if(this._logger.info("ExtDispatcher.removeListener: called"),!this._listeners[eventName])return void this._logger.error("ExtDispatcher.removeListener: Trying to remove listener that is not registered");switch(eventName){case"Message":if(!this._listeners[eventName].remove(listenerObj.id))return void this._logger.error("removeListener: Removing unknown listener");break;default:var listenerIdx=this._listeners[eventName].indexOf(listenerObj);if(-1===listenerIdx)return void this._logger.error("removeListener: Removing unknown listener");this._inMiddleOfEvent?this._listeners[eventName][listenerIdx].toBeDeleted=!0:this._listeners[eventName].splice(listenerIdx,1)}},dispatchEvent:function(eventName){if(this._logger.info("dispatchEvent: called for event: ",eventName),!this._listeners[eventName])return void this._logger.trace("dispatchEvent: no listeners found for event: ",eventName);var args=Util.makeArray(arguments);args.splice(0,1);var funcName="on"+eventName,listeners=this._listeners[eventName];this._inMiddleOfEvent=!0;for(var i=0;i<listeners.length;++i)listeners[i].toBeDeleted||listeners[i][funcName].apply(listeners[i],args);delete this._inMiddleOfEvent,this._listeners[eventName]=this._listeners[eventName].filter(function(listener){return!listener.toBeDeleted})},onClientConnect:function(client){this._logger.info("onClientConnect started for client=",client),this._knownClients[client.tabID]&&0!==this._knownClients[client.tabID].length||(this._logger.info("onClientConnect: First frame registration for this page for tab:",client.tabID),this._knownClients[client.tabID]=[]),this._knownClients[client.tabID].push(client),this._logger.info("onClientConnect: Finished")},onClientDisconnect:function(client){this._logger.info("onClientDisconnect: Removing Client ",client),client=this._getClientFromSender(client);var tabId=client.tabID,content=this._knownClients[tabId],index=content.indexOf(client);if(-1===index)return void this._logger.error("onClientDisconnect: disconnect on non existint client");content.splice(index,1),this.dispatchEvent("clientUnRegistered",client),this._logger.info("onClientDisconnect: Finished")},onMessage:function(msg,sender,resultCallback){this._logger.prettyTrace("onMessage: Received message: \n",msg),this._setGlobalErrorHandler(msg,resultCallback);try{this._onMessageInternal(msg,sender,resultCallback)}finally{this._resetGlobalErrorHandler()}},_onMessageInternal:function(msg,sender,resultCallback){this._logger.trace("_onMessageInternal: Called");var func=this._messageHandlers[msg._msgType];return func?func.call(this,msg,sender,resultCallback):this._handleDefaultMessageDispatch(msg,resultCallback)},onAsyncMessage:function(msg,sender,callback){this._logger.trace("onAsyncMessage: started with message:\n",msg);var client=this._getClientFromSender(sender);this.onMessage(msg,client,callback)},onEvent:function(msg,sender){this._logger.trace("onEvent: started with message:\n",msg),this._onMessageInternal(msg,sender,Util.identity)},onResponseMessage:function(msg,client){this._logger.prettyTrace("onResponseMessage: Started with the following message:\n",msg);var asyncInfo=msg._extAsyncInfo;if(delete msg._extAsyncInfo,!asyncInfo)return void this._logger.debug("onResponseMessage: The message has no async information");if(Util.isNullOrUndefined(asyncInfo.id))return void this._logger.debug("onResponseMessage: asyncInfo does not contain a cookie id");if(!this._responseCallbacks[asyncInfo.id])return void this._logger.debug("onResponseMessage: No call back info for message with async Cookie =",asyncInfo.id);StatusUtil.isUnexpected(msg.status)&&this._logger.error("onResponseMessage: Got error message response. Process anyway. Status: ",msg.status,". Message: ",msg),delete this._responseCallbacks[asyncInfo.id].origMsg._extAsyncInfo;var func=this._responseCallbacks[asyncInfo.id].func;this._currentGlobalErrorHandler=this._responseCallbacks[asyncInfo.id].globalErrorHandler;try{msg.delay?(delete msg.delay,ext.app.isNewMsgDelayEnabled?Util.setTimeout(func.bind(null,msg),120):func(msg)):func(msg)}catch(e){this._logger.error("onResponseMessage: Got Exception:"+e+" Details: "+(e.Details||"")+". Call global error callback\nStack:"+e.stack),this._currentGlobalErrorHandler?this._currentGlobalErrorHandler(e):this._logger.warn("onResponseMessage: global error callback is not set")}this._resetGlobalErrorHandler(),delete this._responseCallbacks[asyncInfo.id]},onRequestTimedout:function(requestMsg,clientId){this._logger.warn("onRequestTimedout: Destination ",clientId," on message ",requestMsg),requestMsg.status="TimedOut",this.onResponseMessage(requestMsg,clientId)},_getTargetCOMChannel:function(target,forceCOMType){switch(this._logger.trace("_getTargetCOMChannel: Started for target:",target," forceCOMType is:",forceCOMType),forceCOMType){case"chrome":return this._inboundChromeCOM;case"daemon":case"uft":return this._externalComChannel}return RtIdUtils.IsRTIDTestingTool(target)?this._externalComChannel:RtIdUtils.IsRTIDDaemon(target)?this._externalComChannel:RtIdUtils.IsRTIDFrame(target)||RtIdUtils.IsRTIDAO(target)?this._inboundChromeCOM:void this._logger.error("_getTargetCOMChannel: no COMChannel has returned for rtid: ",target,". Error Stack: "+(new Error).stack)},_getClientFromSender:function(sender){return this._logger.trace("_getClientFromSender: started"),(this._knownClients[sender.tabID]||[]).filter(function(client){return sender.id===client.id})[0]},_isLocalTarget:function(target){return!!RtIdUtils.IsRuntimeId(target)&&!!(RtIdUtils.IsRTIDAgent(target)||RtIdUtils.IsRTIDBrowser(target)||RtIdUtils.IsRTIDPage(target))},_messageHandlers:{REGISTER_FRAME:function(msg,sender,resultCallback){this._logger.info("_messageHandlers.REGISTER_FRAME: Got Registration for tab:",sender.tabID,", sender id:",sender.id);var registrationInfo=msg._data;registrationInfo.frameID=sender.id;var registrationResData={};if(this.dispatchEvent("clientRegistered",sender,registrationInfo,registrationResData),0===Object.keys(registrationResData).length)return void this._logger.warn("_messageHandlers.REGISTER_FRAME: Got error during registration of + "+JSON.stringify(sender)+" going to ignore it.");registrationResData.tabID=sender.tabID,registrationResData.logSettings=LoggerUtilSettings.getLogSettings(),msg._data=registrationResData,resultCallback(msg)},"Frame Attached":function(msg,sender,resultCallback){this._logger.trace("_messageHandlers['Frame Attached']: Got 'Frame Attached' for frameID: ",msg._data.frameID),sender.attached=!0,resultCallback(msg)},EVENT_INSPECT_ELEMENT:function(msg,sender,resultCallback){this._logger.trace("_messageHandlers.EVENT_INSPECT_ELEMENT: started");var inspectMsg=new Msg("EVENT_INSPECT_ELEMENT",msg._data.WEB_PN_ID[0]);this.sendEvent(inspectMsg,this.getParentDispatcherID()),resultCallback(msg)},EVENT_INSPECT_CANCEL:function(msg,sender,resultCallback){this._logger.trace("_messageHandlers.EVENT_INSPECT_CANCEL: started");var inspectMsg=new Msg("EVENT_INSPECT_CANCEL",this.getParentDispatcherID(),{});this.sendEvent(inspectMsg,this.getParentDispatcherID()),resultCallback(msg)},WEBEXT_REPORT_LINE:function(msg,sender,resultCallback){this._logger.trace("_messageHandlers.WEBEXT_REPORT_LINE: started"),this.sendEvent(msg,this.getParentDispatcherID()),resultCallback(msg)},SRVC_BATCH_QUERYATTR:function(msg,sender,resultCallback){var objIds=Array.isArray(msg._data.WEB_PN_ID)?msg._data.WEB_PN_ID[0]:[msg._data.WEB_PN_ID];if(!objIds)return void this._logger.error("_messageHandlers.SRVC_BATCH_QUERYATTR: Received SRVC_BATCH_QUERYATTR with no data");this._logger.trace("_messageHandlers.SRVC_BATCH_QUERYATTR: Fixing browser id for SRVC_BATCH_QUERYATTR message to be ",objIds[0].browser),msg._to.browser=objIds[0].browser,this._handleDefaultMessageDispatch(msg,resultCallback)}},_handleDefaultMessageDispatch:function(msg,resultCallback){this._UftToChromeRtid(msg),this._logger.trace("_handleMessageDispatch: sending direct message to ",msg._to),this._isLocalTarget(msg._to)?this._dispatchMessageLocally(msg,function(result){this._logger.prettyTrace("_handleMessageDispatch: received response from Local AO: [ASYNC] \n",result),this._ChromeToUftRtid(result),resultCallback(result)}.bind(this)):(this._logger.prettyTrace("_handleMessageDispatch: sending message to content:\n",msg),ext.dispatcher.sendMessage(msg,null,"chrome",function(result){this._logger.prettyTrace("_handleMessageDispatch: received message from content: [ASYNC]\n",result),this._ChromeToUftRtid(result),resultCallback(result)}.bind(this)))},_dispatchMessageLocally:function(msg,returnResult){this._logger.trace("_dispatchMessageLocally: dispatching ",returnResult?"Async ":"Sync"," message to locally, content: ",msg);var targetAO=RtIdUtils.IsRTIDAgent(msg._to)?ext.agent:this._listeners.Message.find(msg._to);return targetAO?msg=targetAO.onMessage(msg,returnResult):(this._logger.error("_dispatchMessageLocally: unable to find target AO in container for: ",msg._to),msg.status="ERROR",void returnResult(msg))},_dispatchMessageExternally:function(msg,target,forceCOMType,resultCallback){this._logger.trace("_dispatchMessageExternally: dispatching message to an external context");var comChannel=this._getTargetCOMChannel(target,forceCOMType);return resultCallback&&(Util.isUndefined(msg._extAsyncInfo)||this._logger.error("sendMessage: There is already asyncCookie on this message please handle it"),msg._extAsyncInfo={id:++ExtDispatcher.prototype._nextMessageID},this._responseCallbacks[msg._extAsyncInfo.id]={func:resultCallback,origMsg:msg,globalErrorHandler:this._currentGlobalErrorHandler}),this._transformMessageIfNeeded(msg,target),comChannel.sendMessage(msg,target.frame)},_getAllClients:function(){var clients=[];return this._knownClients.forEach(function(clientsInTab){clients=clients.concat(clientsInTab)}),clients},_connectExternalComChannel:function(){this._logger.trace("_connectToDaemonComChannel: called"),this._externalComChannel.connect()},_setExternalComChannel:function(){this._logger.trace("_setExternalComChannel: called"),this._externalComChannel=ext.app.createExternalComChannel(),this._externalComChannel.init(),this._externalComChannel.addListener("message",this.onMessage.bind(this)),this._externalComChannel.addListener("response",this.onResponseMessage.bind(this))},_transformMessageIfNeeded:function(msg,target){target=target||msg._to,this._getTargetCOMChannel(target)===this._externalComChannel&&(this._logger.trace("_transformMessageIfNeeded: transforming message with target: ",target),this._ChromeToUftRtid(msg))},_UftToChromeRtid:function(msg){var aoContainer=this._listeners.Message,logger=this._logger,shouldBeChanged=function(rtid){return rtid&&rtid.object&&-1===rtid.frame},changeRtid=function(rtid){if(shouldBeChanged(rtid)){var pageObjId={browser:rtid.browser,page:rtid.page,frame:-1,object:null},pageAO=aoContainer.find(pageObjId);if(!pageAO)return void logger.error("_UftToChromeRtid::changeRtid: Page ",pageObjId," doesn't exist in container");logger.trace("_UftToChromeRtid.changeRtid: changing from rtid ",rtid),rtid.frame=pageAO._contentID,logger.trace("_UftToChromeRtid.changeRtid: changed to rtid ",rtid)}};if(msg&&(changeRtid(msg._to),msg._data&&msg._data.WEB_PN_ID)){
var objIds=Array.isArray(msg._data.WEB_PN_ID)?msg._data.WEB_PN_ID:[msg._data.WEB_PN_ID];objIds=Array.isArray(objIds[0])?objIds[0]:objIds,objIds.forEach(function(id){changeRtid(id)})}},_ChromeToUftRtid:function(msg){function shouldRevert(rtid){if(rtid&&rtid.object){var pageObjId={browser:rtid.browser,page:rtid.page,frame:-1,object:null},pageAO=aoContainer.find(pageObjId);return pageAO?pageAO._contentID===rtid.frame:void logger.error("_ChromeToUftRtid::changeshouldRevertRtid: Page ",pageObjId," doesn't exist in container")}return!1}function revertRtid(rtid){shouldRevert(rtid)&&(logger.trace("_ChromeToUftRtid.revertRtid: reverting the rtid.frame of ",rtid),rtid.frame=-1,logger.trace("_ChromeToUftRtid.revertRtid: rtid reverted to  ",rtid))}var aoContainer=this._listeners.Message,logger=this._logger;if(msg){if(revertRtid(msg._to),RtIdUtils.IsRTIDTestingTool(msg._to)){var toVal=Array.isArray(msg._data.WEB_PN_ID)?msg._data.WEB_PN_ID[0]:msg._data.WEB_PN_ID;msg._to=Array.isArray(toVal)?toVal[0]:toVal,Util.assert(RtIdUtils.IsRuntimeId(msg._to),"_ChromeToUftRtid: failed to change the 'to' part of message: "+JSON.stringify(msg),this._logger)}if(msg._data){if(msg._data.WEB_PN_ID){(Array.isArray(msg._data.WEB_PN_ID)?msg._data.WEB_PN_ID:[msg._data.WEB_PN_ID]).forEach(function(id){revertRtid(id)})}msg._data.ancestor&&revertRtid(msg._data.ancestor)}}},_resetGlobalErrorHandler:function(){this._currentGlobalErrorHandler=null},_setGlobalErrorHandler:function(msg,resultCallback){this._currentGlobalErrorHandler=function(origMsg,error){origMsg.status="ERROR",origMsg.details=error?error.message:null,resultCallback(origMsg)}.bind(this,msg)}};var ext=null;!function(){function getCurrentApi(){if("undefined"!=typeof window){if(window.chrome&&window.chrome.extension&&"undefined"!=typeof InstallTrigger)return FirefoxWebExtensionsAPI;if(window._QTP&&window._QTP.WebDriverInfo)return WebDriverBrowserAPI;if(window.chrome&&window.chrome.extension)return ChromeAPI;if(window.safari&&window.safari.extension)return SafariAPI}return"undefined"!=typeof FirefoxAPI?FirefoxAPI:void 0!==MobileCenterBrowserAPI?MobileCenterBrowserAPI:"undefined"!=typeof WebDriverBrowserAPI?WebDriverBrowserAPI:"undefined"!=typeof JavaFXBrowserAPI?JavaFXBrowserAPI:"undefined"!=typeof LFTEmbeddedBrowserAPI?LFTEmbeddedBrowserAPI:void 0}if("undefined"==typeof window||window===window.top){var logger=new LoggerUtil("BackGroundExt");if(ext)return void logger.warn("Initializing extension more than once");ext={};var currentApi=getCurrentApi(),logSettingsObject=currentApi?currentApi.prototype.getLogSettingsObject():{};LoggerUtilSettings.setSettings(logSettingsObject),ext.bgLogger=logger,ext.bgLogger.trace("BackGround Was Loaded"),ext.app=function(){try{return currentApi?(ext.bgLogger.info("API found: "+currentApi.name),new currentApi):(ext.bgLogger.error("initApi(): No Browser API!"),null)}catch(e){ext.bgLogger.error("error when create app, e = "+e)}}(),ext.dispatcher=new ExtDispatcher,ext.agent=new Agent,ext.agent.UpdateKnownBrowsers(),ext.onUnload=function(){ext.dispatcher.onUnload()},"undefined"!=typeof exports&&(exports.ext=ext)}}(),ShadowDomUtil={_supportShadowDom:function(){return"undefined"!=typeof ShadowRoot},_filteredElementTagName:["lightning"],_belongToFilteredElement:function(elem){var tagName=elem.tagName.toLowerCase();return this._filteredElementTagName.some(function(value){return tagName.includes(value)})},makeArray:function(seq){if(Array.isArray(seq))return seq;for(var array=new Array(seq.length),i=0;i<seq.length;i++)array[i]=seq[i];return array},_getEmptyLogger:function(){function nop(){}return{trace:nop,prettyTrace:nop,debug:nop,prettyDebug:nop,warn:nop,info:nop,error:nop}},_arrayReduce:function(array,iterateFunc,startVal){if(!Array.isArray(array))return null;var startIndex=0,cumulator=array[0];startVal&&(cumulator=startVal,indexOffset=1);for(var i=startIndex;i<array.length;i++)cumulator=iterateFunc(cumulator,array[i],i,array);return cumulator},isOpenShadowRoot:function(elem){return!!elem&&!!elem.shadowRoot&&"open"==elem.shadowRoot.mode&&!this._belongToFilteredElement(elem)},_findAllNoNestedShadowRoots:function(elem){elem=elem||document;var output=[];this.isOpenShadowRoot(elem)&&output.push(elem.shadowRoot);var childlist=this.makeArray(elem.querySelectorAll("*"));return output=this._arrayReduce(childlist,function(targetAOs,childElem){return this.isOpenShadowRoot(childElem)&&targetAOs.push(childElem.shadowRoot),targetAOs}.bind(this),output)},findAllShadowRoots:function(elem,logger){if(logger=logger||this._getEmptyLogger(),logger.trace("findAllShadowRoots: start "),elem=elem||document,!this._supportShadowDom())return[];var output=[],firstLayerShadowRoots=[];for(firstLayerShadowRoots=this._findAllNoNestedShadowRoots(elem),output=output.concat(firstLayerShadowRoots);firstLayerShadowRoots.length;){var tempArray=firstLayerShadowRoots;firstLayerShadowRoots=this._arrayReduce(tempArray,function(targetAOs,childElem){return targetAOs.concat(this._findAllNoNestedShadowRoots(childElem))}.bind(this),[]),output=output.concat(firstLayerShadowRoots)}return logger.trace("findAllShadowRoots: find ",output.length,"shadowRoots"),output},getElemInShadowRootByPoint:function(elem,point,logger){logger=logger||this._getEmptyLogger(),elem=elem||document;var target;return this.isOpenShadowRoot(elem)&&point?(target=elem.shadowRoot.elementFromPoint(point.x,point.y),target?this.getElemInShadowRootByPoint(target,point,logger):(logger.trace("getElemInShadowRootByPoint: get element with tag name ",elem.tagName),elem)):(logger.trace("getElemInShadowRootByPoint: get element with tag name ",elem.tagName),elem)},getParentShadowRoot:function(elem,logger){return logger=logger||this._getEmptyLogger(),elem&&this._supportShadowDom()?elem.constructor==ShadowRoot?(logger.trace("getParentShadowRoot: we find a parent shadow root here "),elem):this.getParentShadowRoot(elem.parentNode,logger):(logger.trace("getParentShadowRoot: the Dom element is not within a shadow root "),null)}};var ContentUtils={findFrameElemByID:function(id,doc,logger){logger=logger||ContentUtils.getEmptyLogger(),logger.trace("findFrameElemByID: called to find frame with id ",id),Util.assert(doc,"findFrameElemByID: received empty document !",logger);for(var childs=this.querySelectorAll(doc,"IFRAME,FRAME"),i=0;i<childs.length;++i)if(ContentUtils.isInjectableFrame(childs[i],logger)){if(childs[i].__QTP__OBJ&&RtIdUtils.IsRTIDEqual(childs[i].__QTP__OBJ.comID,id))return logger.debug("findFrameElemByID: frame found"),childs[i];childs[i].__QTP__OBJ||logger.warn("findFrameElemByID: frame doesn't have __QTP__OBJ")}else{var contentDoc=childs[i].contentDocument;if(!contentDoc){logger.warn("findFrameElemByID: unable to receive content document of uninjectable frame");continue}var foundChild=ContentUtils.findFrameElemByID(id,contentDoc,logger);if(foundChild)return foundChild}return logger.warn("findFrameElemByID: couldn't find frame with id ",id," - returning NULL"),null},addLogicalNamesToIdentificationResult:function(parentId,resultCallback){return function(res){res._data.logicalNames=res._data.WEB_PN_ID.map(function(id){var elem=content.rtidManager.GetElementFromID(id.object);return content.kitsManager.createAO(elem,parentId).GetAttrSync("logical name")}),resultCallback(res)}},isInjectableFrame:function(frameElement,logger){return logger=logger||ContentUtils.getEmptyLogger(),logger.debug("isInjectableFrame: called"),frameElement.contentWindow?ContentUtils.isInjectable(frameElement.contentWindow,logger):(logger.debug("isInjectableFrame: chrome < 25. Result  -> "+!!frameElement.__QTP__OBJ),!Util.isNullOrUndefined(frameElement.__QTP__OBJ))},isInjectable:function(win,logger){if(logger=logger||ContentUtils.getEmptyLogger(),logger.trace("isInjectable: called"),BrowserServices.isSpecialUninjectablePage(logger))return logger.debug("isInjectable: BrowserServices says -> false"),!1;if(win===win.parent)return logger.debug("isInjectable: at page -> true"),!0;try{if(!win.frameElement)return logger.debug("isInjectable: XSS -> true"),!0}catch(err){return logger.debug("isInjectable: XSS -> true"),!0}if("OBJECT"===win.frameElement.tagName)return logger.info("isInjectable: This is not a frame, this is an object element (unsupported) -> false"),!1;var src=win.frameElement.src;return null==src?(logger.error("isInjectable: frameElement.src is undefined -> false"),!1):BrowserServices.isAboutBlankFrameInjectable?(logger.debug("isInjectable: -> true (isAboutBlankFrameInjectable); src:"+win.frameElement.src),!0):""===src?(logger.debug("isInjectable: -> true (source is an empty string)"),!0):src.match(/^about:/)||src.match(/^javascript:/)?(logger.debug("isInjectable: -> false ("+src+")"),!1):(logger.debug("isInjectable: -> true"),!0)},getEmptyLogger:function(){return{trace:function(msg){},prettyTrace:function(msg){},debug:function(msg){},prettyDebug:function(msg){},warn:function(msg){},info:function(msg){},error:function(msg){}}},isHTMLElement:function(elem,logger){return!Util.isNullOrUndefined(elem)&&elem instanceof HTMLElement},getElementClientRect:function(elem,logger){if(logger=logger||ContentUtils.getEmptyLogger(),logger.trace("getElementClientRect: called"),!ContentUtils.isHTMLElement(elem))return logger.error("getElementClientRect: Received invalid element. returning."),null;var rect=elem.getBoundingClientRect();return{top:Math.floor(rect.top),left:Math.floor(rect.left),right:Math.floor(rect.right),bottom:Math.floor(rect.bottom)}},getCenterPoint:function(elem){var rect=elem.getBoundingClientRect();return{x:Math.floor(rect.left+rect.width/2),y:Math.floor(rect.top+rect.height/2)}},ElementBorder:function(elem){this.overlay=document.createElement("div"),Util.extend(this.overlay.style,{backgroundColor:"transparent",border:"4px solid #444444",borderRadius:0,boxSizing:"content-box",display:"none",margin:"0px",padding:"0px",position:"absolute",zIndex:"9999"}),this.overlay.dir="ltr",document.body.appendChild(this.overlay),elem&&this.wrap(elem)},highlightElement:function(elem,resultCallback,msg){function drawRect(){if(++count>6)return border.remove(),void resultCallback(msg);count%2?border.show():border.hide(),Util.setTimeout(drawRect,150)}var border=new this.ElementBorder(elem),count=0;drawRect()},highlightElements:function(elems,resultCallback,msg){var borders=[];elems.forEach(function(elem){var border=new this.ElementBorder(elem);border.show(),borders.push(border)},this),Util.setTimeout(function(){borders.forEach(function(border){border.remove()}),resultCallback(msg)},3e3)},overrideJSDialogs:function(){var wasAccepted={alert:function(){return!0},prompt:function(result){return null!==result},confirm:function(result){return result}};Object.keys(wasAccepted).forEach(function(name){var orig=window[name];window[name]=function(msg,optional){var result=orig.call(this,msg,optional),data={type:name,accepted:wasAccepted[name](result)};return"string"==typeof result&&result&&(data.text=result),window.dispatchEvent(new CustomEvent("DialogHandled",{detail:data})),result},window[name].toString=function(){return orig.toString()}})},runOnDocSync:function(func,args,logger){if(args=args||[],logger=logger||ContentUtils.getEmptyLogger(),BrowserServices.isRunningInPageContext)return logger.trace("runOnDocSync: already in page context"),func.apply(null,args);var script="("+func.toString()+")("+args.map(JSON.stringify).join(",")+")";logger.trace("runOnDocSync: Started: "+script);var ev=document.createEvent("Events");ev.initEvent("_QTP_Run_Script_With_Attr",!0,!1),window.document.documentElement.setAttribute("_QTP_Script",script),window.document.documentElement.setAttribute("_QTP_Result",JSON.stringify({res:null,ex:null})),window.dispatchEvent(ev);var res=JSON.parse(window.document.documentElement.getAttribute("_QTP_Result"));return window.document.documentElement.removeAttribute("_QTP_Result"),window.document.documentElement.removeAttribute("_QTP_Script"),res.ex&&logger.error("runOnDocSync: got exception: "+res.ex),res.res},isTouchEnabled:function(){var sawTouchEvents=!1;window.addEventListener("touchstart",function detectTouchEvents(e){sawTouchEvents=!0,window.removeEventListener("touchstart",detectTouchEvents,!0)},!0);var sawMouseOver=!1;window.addEventListener("mouseover",function detectMouseOver(){sawMouseOver=!0,window.removeEventListener("mouseover",detectMouseOver,!0)},!0);var hasTouchListener="ontouchstart"in document&&"ontouchcancel"in window;return function(){return content.settings.isTouchEnabled&&!sawMouseOver||sawTouchEvents||hasTouchListener}}(),isWebRoleBasedKitEnabled:function(){return content.settings.enablewebrolebasedkit||BrowserServices.isWebRoleBasedKitEnabled},getDisabledWebKits:function(){var str=content.settings.disablewebkits;return str?str.split(";"):[]},getTargetElem:function(elem){return"LABEL"===elem.tagName&&elem.control?elem.control:elem},getLabelsFromControl:function(control){if(document.createElement("input").labels)ContentUtils.getLabelsFromControl=function(elem){return elem.labels};else{var labelable=Util.objectFromArray(["BUTTON","INPUT","KEYGEN","METER","OUTPUT","PROGRESS","SELECT","TEXTAREA"],!0);ContentUtils.getLabelsFromControl=function(elem){if(!labelable[elem.tagName])return[];var labels;if(elem.id){var allLabels=[],shadowRoot=ShadowDomUtil.getParentShadowRoot(elem);(allLabels=shadowRoot?Util.makeArray(shadowRoot.querySelectorAll("label")):Util.makeArray(document.querySelectorAll("label")))&&(labels=allLabels.filter(function(e){return e.htmlFor===elem.id}))}return elem.parentElement&&"LABEL"===elem.parentElement.tagName&&(labels&&0!=labels.length?-1===labels.indexOf(elem.parentElement)&&(labels=labels.concat(elem.parentElement)):labels=[elem.parentElement]),labels||[]}}return ContentUtils.getLabelsFromControl(control)},getAccNameFromControl:function(control){var id=control.getAttribute("aria-labelledby");id&&(id=id.split(" ")[0]);var elemById;if(id){var shadowRoot=ShadowDomUtil.getParentShadowRoot(control);elemById=shadowRoot?shadowRoot.getElementById(id):document.getElementById(id)}var text=elemById&&Util.cleanSpecialChars(elemById.textContent);return text||((text=Util.cleanSpecialChars(control.getAttribute("aria-label")))||"")},_noFormSubmitFireEvent:function(target){var needRemoveId=!1;target.id||(needRemoveId=!0,target.id="UFT_NO_FORM_SUBMIT_FIREEVENT_ID");var scriptContent='var submitEvent;                             var submitTarget = document.getElementById("';scriptContent+=target.id,scriptContent+='");                          var data = {key: String.fromCharCode(13)};                          ContentUtils.fireEvent(submitTarget, "keydown", data, _logger);',content.domSubscriber.startNamespace(),content.domSubscriber.addScript(scriptContent),content.domSubscriber.endNamespace(),needRemoveId&&(target.removeAttribute("id"),needRemoveId=!1)},fireEvent:function(target,event,data,logger,relatedTarget){switch(logger=logger||ContentUtils.getEmptyLogger(),logger.trace("fireEvent: fire event ",event," with data ",data),event){case"focus":target.focus();break;case"blur":target.blur();break;case"submit":if(!target.form&&"FORM"!==target.tagName)return logger.trace('Simulate an "Enter" key when there is no form parent'),void this._noFormSubmitFireEvent(target);var submitTarget=target;"FORM"!==target.tagName&&(submitTarget=target.form);var submitEvent=this._createEvent(event,submitTarget,data,logger,relatedTarget);return void(submitTarget.dispatchEvent(submitEvent)&&submitTarget.submit());case"click":if(!content.settings.replayonlyclick){if(ContentUtils.isTouchEnabled()){var point=this.pointRelativeToElem(target,this._positionFromData(data)),sim=new SimulateGesture,startCancelled=!sim.addTouch(target,point),endCancelled=!sim.removeTouches();if(startCancelled||endCancelled)return void logger.debug("fireEvent: touch event was cancelled. returning.")}this.fireEvent(target,"focus",data),this.fireEvent(target,"mousedown",data),this.fireEvent(target,"mouseup",data)}}var evt=this._createEvent(event,target,data,logger,relatedTarget);evt?(logger.trace("fireEvent: dispatch event "+evt.type+" on element "+target),target.dispatchEvent(evt)):logger.warn("fireEvent: no event was created for "+event)},_createEvent:function(event,target,data,logger,relatedTarget){var type=this._getEventType(event);if(!type)return logger.error("_createEvent: unknown event "+event),null;var evt=document.createEvent(type);switch(type){case"HTMLEvents":case"MutationEvents":case"UIEvents":return evt.initEvent(event,!0,!0),evt;case"MouseEvents":var button=this._getButton(data["event button"]),point=ContentUtils.pointRelativeToElem(target,this._positionFromData(data));return relatedTarget=relatedTarget||document.body,evt.initMouseEvent(event,!0,!0,null,null,null,null,point.x,point.y,!1,!1,!1,!1,button,relatedTarget),evt;case"KeyboardEvent":var key=data.key;if(key&&"function"==typeof evt.initKeyboardEvent){var keyCode=key.charCodeAt(0);""===evt.locale?evt.initKeyboardEvent(event,!0,!0,document.defaultView,key,0,data.modifiers||"",data.repeat||0,""):evt.initKeyboardEvent(event,!0,!0,document.defaultView,key,key,0,data.modifiers||"",data.repeat||0);try{delete evt.keyCode,Object.defineProperty(evt,"keyCode",{value:keyCode,writable:!0,enumerable:!0,configurable:!0}),delete evt.which,Object.defineProperty(evt,"which",{value:keyCode,writable:!0,enumerable:!0,configurable:!0})}catch(e){logger.warn("_createEvent: define 'keyCode' and 'which' property in keyboardEvent fails exception = "+e)}}else evt=document.createEvent("Events"),evt.initEvent(event,!0,!0),evt.which=keyCode,evt.keyCode=keyCode;return evt}return null},_positionFromData:function(data){if(data.pos)return data.pos;var pt={x:Constants.noCoordinate,y:Constants.noCoordinate};return"x"in data&&(pt.x=data.x),"y"in data&&(pt.y=data.y),pt},pointRelativeToElem:function(elem,pos){var rect=elem.getBoundingClientRect(),x=pos.x!==Constants.noCoordinate?pos.x:rect.width/2,y=pos.y!==Constants.noCoordinate?pos.y:rect.height/2;return{x:rect.left+x,y:rect.top+y}},_getButton:function(uftValue){switch(uftValue){case 2:return 1;case 1:return 2}return 0},_getEventType:function(eventName){switch(eventName){case"domfocusin":case"domfocusout":case"domactivate":return"UIEvents";case"click":case"dblclick":case"mouseenter":case"mouseleave":case"mousedown":case"mouseup":case"mouseover":case"mousemove":case"mouseout":case"contextmenu":case"pointerover":case"pointerout":return"MouseEvents";case"domsubtreemodified":case"domnodeinserted":case"domnoderemoved":case"domnoderemovedfromdocument":case"domnodeinsertedintodocument":case"domattrmodified":case"domcharacterdatamodified":return"MutationEvents";case"load":case"unload":case"abort":case"error":case"select":case"change":case"submit":case"reset":case"focus":case"blur":case"resize":case"scroll":case"input":return"HTMLEvents";case"keydown":case"keypress":case"keyup":return"KeyboardEvent"}},evalInDocument:function(exp,doc){doc=doc||document;var scriptText="function"==typeof exp?Util.functionStringify(exp):exp,node=doc.getElementsByTagName("head")[0]||doc.documentElement,script=doc.createElement("script");script.type="text/javascript",script.setAttribute("nonce","UftNonceMagicAllowInlineScript"),script.appendChild(doc.createTextNode(scriptText)),node.appendChild(script,node.firstChild),node.removeChild(script)},protectCallbackAgainstPrematureNavigation:function(callback,msg,logger,name){function callbackProtector(){logger&&logger.warn("protectCallbackAgainstPrematureNavigation: Before unload or unload recieved with uncalled callback: ",name),wasCalled||(wasCalled=!0,callback(msg))}var wasCalled=!1;return window.addEventListener("beforeunload",callbackProtector,!0),window.addEventListener("unload",callbackProtector,!0),function(message){wasCalled?logger&&logger.error("protectCallbackAgainstPrematureNavigation: callback was called after page unload: "+name):(window.removeEventListener("beforeunload",callbackProtector,!0),window.removeEventListener("unload",callbackProtector,!0),callback(message))}},createCrossOriginCustomEvent:function(eventType,eventDetail){if(BrowserServices.createCrossOriginCustomEvent)return BrowserServices.createCrossOriginCustomEvent(eventType,eventDetail);var event;if(CustomEvent)event=new CustomEvent(eventType,eventDetail);else{event=document.createEvent("CustomEvent"),eventDetail||(eventDetail={});var bubbles=eventDetail.bubbles||!1,cancelable=eventDetail.cancelable||!1;event.initCustomEvent(eventType,bubbles,cancelable,eventDetail.detail)}return event},getVisibleTextContent:function(elem){var dupElem=elem.cloneNode(!0);return Util.makeArray(dupElem.getElementsByTagName("script")).forEach(function(script){script.parentElement.removeChild(script)}),Util.cleanTextProperty(dupElem.textContent).trim()},getMobileWindowRect:function(platform){var screenWidth,screenHeight;switch(platform){case"ios":screenWidth=screen.availWidth,screenHeight=screen.availHeight-44;break;case"android":case"wp":screenWidth=window.innerWidth,screenHeight=window.innerHeight;break;default:return null}return{top:window.screenY,left:window.screenX,right:window.screenX+screenWidth,bottom:window.screenY+screenHeight}},getEventAdapter:function(ev){var cloneObj={};for(var key in ev)cloneObj[key]=ev[key];return cloneObj.__proto__=ev.__proto__,cloneObj},querySelectorAll:function(root,selector,logger){logger=logger||ContentUtils.getEmptyLogger(),root=root||document,targetElements=[],targetElements=Util.makeArray(root.querySelectorAll(selector));var shadowRoots=ShadowDomUtil.findAllShadowRoots(root,logger);return targetElements=Util.arrayReduce(shadowRoots,function(targetAOs,childElem){return targetAOs.concat(Util.makeArray(childElem.querySelectorAll(selector)))}.bind(this),targetElements),targetElements},getElementById:function(root,Id,logger){logger=logger||ContentUtils.getEmptyLogger(),root=root||document;var element=root.getElementById(Id);if(!element){return ShadowDomUtil.findAllShadowRoots(root,logger).some(function(childElem){var targetElem=childElem.getElementById(Id);if(targetElem)return element=targetElem,!0}),element||(logger.error("getElementById: can not find element with id ",Id),null)}return element},getElementsByName:function(root,name,logger){return logger=logger||ContentUtils.getEmptyLogger(),root=root||document,name=Util.formatString("[name = '{0}']",name),this.querySelectorAll(root,name,logger)}};ContentUtils.ElementBorder.prototype={overlay:null,elem:null,show:function(){this.overlay.style.display="block"},hide:function(){this.overlay.style.display="none"},wrap:function(elem){function pixels(n){return n+"px"}if(this.elem===elem)return!1;this.elem=elem;var rect,border=4;if("html"===elem.tagName.toLowerCase())rect={top:0,left:0,width:document.body.clientWidth,height:document.body.clientHeight};else if("area"===elem.tagName.toLowerCase()){var ao=content.kitsManager.createAO(elem,0);rect=ao.GetAttrSync("rect"),rect.width=rect.right-rect.left,rect.height=rect.bottom-rect.top}else"option"===elem.tagName.toLowerCase()&&(elem=elem.parentElement),rect=elem.getBoundingClientRect(),rect.width||rect.height||(rect=elem.parentElement.getBoundingClientRect());var top,left,width=rect.width-2*border,height=rect.height-2*border;if(elem===window.frameElement){top=0,left=0;var borderWidth=parseInt(getComputedStyle(elem).borderWidth.match(/(\d+)px/)[1],10);"number"==typeof borderWidth&&(width-=2*borderWidth,height-=2*borderWidth)}else top=rect.top+window.pageYOffset,left=rect.left+window.pageXOffset;return width=width>0?width:1,height=height>0?height:1,Util.extend(this.overlay.style,{top:pixels(top),left:pixels(left),width:pixels(width),height:pixels(height)}),this.overlay.style.borderStyle="solid",this.show(),!0},run:function(f){return f(this.overlay)},remove:function(){this.overlay&&(document.body.removeChild(this.overlay),this.elem=null,this.overlay=null)}},GestureDetector.prototype={_logger:null,_detectors:null,_listeners:null,fireEvent:function(event,info){var eventTarget;ShadowDomUtil.isOpenShadowRoot(event.target)&&(eventTarget=ShadowDomUtil.getElemInShadowRootByPoint(event.target,{x:info.clientX,y:info.clientY},this._logger)),eventTarget=eventTarget||event.target,this._listeners.forEach(function(listener){listener(eventTarget,info)}),this._detectors.forEach(function(d){d.discard()})},addListener:function(listener){-1===this._listeners.indexOf(listener)&&this._listeners.push(listener)},isSingleTouch:function(event){return event.touches&&1===event.touches.length},_addEvent:function(e){switch(e.type){case"touchstart":this._detectors.forEach(function(d){d.touchStart(e)});break;case"touchmove":this._detectors.forEach(function(d){d.touchMove(e)});break;case"touchend":this._detectors.forEach(function(d){d.touchEnd(e)});break;case"touchcancel":this._detectors.forEach(function(d){d.touchCancel(e)});break;default:this._logger.warn("addEvent: unexpected event type - "+e.type)}}},GestureDetector.prototype.SwipePanDetector=function(owner){this._owner=owner,this._logger=new LoggerUtil("Content.SwipePanDetector"),this._logger.trace("Created")},GestureDetector.prototype.SwipePanDetector.prototype={_owner:null,_logger:null,_info:null,_constants:{minDistance:50,maxOffsetRatio:.2,initialMaxOffset:30,maxDuration:1500,maxScroll:50},discard:function(){this._info=null},_deltaX:function(){return Math.abs(this._info.startX-this._info.x)},_deltaY:function(){return Math.abs(this._info.startY-this._info.y)},_rectArea:function(rect){return rect.width*rect.height},touchStart:function(e){if(this._owner.isSingleTouch(e)){this._info&&this._logger.warn("touchStart: Overwriting existing touch event");var touch=e.touches[0],rect=e.target.getBoundingClientRect();this._info={direction:null,target:e.target,start:e.timeStamp,startX:touch.pageX,startY:touch.pageY,startScrollPosition:{x:window.scrollX,y:window.scrollY},startPosition:{left:rect.left,top:rect.top}}}},touchMove:function(e){if(this._info){if(!this._owner.isSingleTouch(e))return this.discard();var duration=e.timeStamp-this._info.start;if(duration>this._constants.maxDuration)return this._logger.trace("touchMove: Timeout exceeded "+duration),this.discard();this._processTouch(e.touches[0])}},touchEnd:function(e){this._info&&e.changedTouches.length&&this._processTouch(e.changedTouches[0])&&this._shouldFire(e)?this._fireEvent(e):this.discard()},touchCancel:function(e){this.touchEnd(e)},_processTouch:function(touch){if(!this._info)return!1;switch(this._info.x=touch.pageX,this._info.y=touch.pageY,this._info.direction){case null:return this._deltaX()>this._constants.minDistance?this._deltaY()>this._getMaxOffset(this._deltaX())?(this._logger.trace("_processTouch: Not swipe, too much offset "+this._deltaY()+" - current distance: "+this._deltaX()),this._markAsDiagonal()):(this._logger.trace("_processTouch: Deducing Swipe direction to be horizontal"),this._info.direction="horizontal",!0):!(this._deltaY()>this._constants.minDistance)||(this._deltaX()>this._getMaxOffset(this._deltaY())?(this._logger.trace("_processTouch: Not swipe, too much offset "+this._deltaX()+" - current distance: "+this._deltaY()),this._markAsDiagonal()):(this._logger.trace("_processTouch: Deducing Swipe direction to be vertical"),this._info.direction="vertical",!0));case"vertical":return!(this._deltaX()>this._getMaxOffset(this._deltaY()))||(this._logger.trace("_processTouch: Not vertical swipe, too much offset "+this._deltaX()+" - current distance: "+this._deltaY()),this._markAsDiagonal());case"horizontal":return!(this._deltaY()>this._getMaxOffset(this._deltaX()))||(this._logger.trace("_processTouch: Not horizontal swipe, too much offset "+this._deltaY()+" - current distance: "+this._deltaX()),this._markAsDiagonal());case"diagonal":return!0;default:this._logger.error("_processTouch: unexpected direction: "+this._direction)}return!0},_markAsDiagonal:function(){return this._info.direction="diagonal",!0},_getMaxOffset:function(currentDistance){return Math.max(this._constants.initialMaxOffset,this._constants.maxOffsetRatio*currentDistance)},_updateDirectionFromElementMotion:function(e){if(e.target===this._info.target){var rect=e.target.getBoundingClientRect();if(this._info.startPosition.left!==rect.left&&this._info.startPosition.top===rect.top)return 0!==this._deltaX()&&(this._logger.trace("_updateDirectionFromElementMotion: direction is horizontal due to offset change of "+(this._info.startPosition.left-rect.left)),this._info.direction="horizontal",!0);if(this._info.startPosition.left===rect.left&&this._info.startPosition.top!==rect.top)return 0!==this._deltaY()&&(this._logger.trace("_updateDirectionFromElementMotion: direction is vertical due to offset change of "+(this._info.startPosition.top-rect.top)),this._info.direction="vertical",!0)}},_didScrollingOccur:function(e){var startScrollPosition=this._info.startScrollPosition,scrollX=startScrollPosition.x-window.scrollX;if(Math.abs(scrollX)>this._constants.maxScroll)return this._logger.debug("_didScrollingOccur: window has scrolled horizontaly by "+scrollX),!0;var scrollY=startScrollPosition.y-window.scrollY;return Math.abs(scrollY)>this._constants.maxScroll&&(this._logger.debug("_didScrollingOccur: window has scrolled vertically by "+scrollY),!0)},_shouldFire:function(e){if(!this._info)return!1;if(this._didScrollingOccur(e))return!1;if(!this._info.direction&&this._updateDirectionFromElementMotion(e))return!0;switch(this._info.direction){case"horizontal":return!(this._deltaX()<this._constants.minDistance)||(this._deltaY()>this._constants.minDistance?(this._logger.trace("_shouldFire: Changing from horizontal swipe to pan"),this._markAsDiagonal()):(this._logger.trace("_shouldFire: Not horizontal swipe, distance has shrunk"),!1));case"vertical":return!(this._deltaY()<this._constants.minDistance)||(this._deltaX()>this._constants.minDistance?(this._logger.trace("_shouldFire: Changing from vertical swipe to pan"),this._markAsDiagonal()):(this._logger.trace("_shouldFire: Not vertical swipe, distance has shrunk"),!1));case null:case"diagonal":return this._deltaX()>this._constants.minDistance||this._deltaY()>this._constants.minDistance?(this._logger.trace("_shouldFire: Pan over minDistance"),this._markAsDiagonal()):(this._logger.trace("_shouldFire: with direction "+this._info.direction+" still under minDistance"),!1);default:this._logger.error("_shouldFire: unexpected direction: "+this._info.direction)}return!1},_fireEvent:function(e){var direction,distance;switch(this._info.direction){case"horizontal":distance=this._info.x-this._info.startX,direction=distance>0?"Right":"Left";break;case"vertical":distance=this._info.y-this._info.startY,direction=distance>0?"Down":"Up";break;case"diagonal":var args={event:"pan",x:Math.round(this._info.startX-this._info.x),y:Math.round(this._info.startY-this._info.y),duration:e.timeStamp-this._info.start};return this._logger.trace("_fireEvent: Pan ",args),this._owner.fireEvent(e,args)}var absDistance=Math.round(Math.abs(distance)),args={event:"swipe",direction:"move"+direction,duration:e.timeStamp-this._info.start,distance:absDistance};this._logger.trace("_fireEvent: Swipe ",args),this._owner.fireEvent(e,args)}},GestureDetector.prototype.TapDetector=function(owner){this._owner=owner,this._logger=new LoggerUtil("Content.TapDetector"),this._logger.trace("Created")},GestureDetector.prototype.TapDetector.prototype={_owner:null,_logger:null,_info:null,_constants:{maxOffset:10,tapMaxTime:750},discard:function(){this._info=null},touchStart:function(e){if(!this._owner.isSingleTouch(e))return void this.discard();this._info&&this._logger.warn("touchStart: overwrting existing info");var touch=e.touches[0];this._info={x:touch.pageX,y:touch.pageY,start:e.timeStamp}},touchMove:function(e){if(this._info)return this._owner.isSingleTouch(e)?void this._processTouch(e.touches[0]):(this._logger.warn("touchMove: got irrelevant move, should have been discareded in touchStart"),this.discard())},touchEnd:function(e){if(this._info&&e.changedTouches.length&&this._processTouch(e.changedTouches[0]))return void this._fireEvent(e);this.discard()},touchCancel:function(e){
return this.touchEnd(e)},_processTouch:function(touch,timeStamp){return!(Math.abs(touch.pageX-this._info.x)>this._constants.maxOffset||Math.abs(touch.pageY-this._info.y)>this._constants.maxOffset)||(this._logger.trace("touchMove: discarded, too much offset or too little time"),this.discard(),!1)},_fireEvent:function(e){var duration=e.timeStamp-this._info.start,eventName=duration<this._constants.tapMaxTime?"tap":"longTap",args={event:eventName,duration:duration,clientX:this._info.x,clientY:this._info.y};this._logger.trace("_fireEvent: ",eventName," ",args),this._owner.fireEvent(e,args)}},GestureDetector.prototype.PinchDetector=function(owner){this._owner=owner,this._logger=new LoggerUtil("Content.PinchDetector"),this._logger.trace("Created")},GestureDetector.prototype.PinchDetector.prototype={_owner:null,_logger:null,_info:null,_constants:{maxOffset:100,minScaleDiff:.1},discard:function(){this._info=null},touchStart:function(e){switch(e.touches&&e.touches.length){case 1:this._info={start:e.timeStamp};break;case 2:this._info||(this._info={start:e.timeStamp}),this._info.pos=this._center(e.touches),this._info.initialDistance=this._distance(e.touches);break;default:this.discard()}},touchMove:function(e){if(!this._info||!this._info.pos)return!1;if(2!==e.touches.length)return this._logger.trace("touchMove: Discarding pinch, touch count is "+e.touches),this.discard();var pos=this._center(e.touches),moved=this._distance([pos,this._info.pos]);return moved>this._constants.maxOffset?(this._logger.trace("touchMove: discarding pinch, center point moved by "+moved),this.discard()):(this._info.currentDistance=this._distance(e.touches),!0)},touchEnd:function(e){if(!this._info||!this._info.pos)return!1;if(1!==e.touches.length)return this._logger.trace("touchEnd: discarding pinch, ended with touch count = "+e.touches.length),this.discard();var scale=this._info.currentDistance/this._info.initialDistance;if(scale&&Math.abs(1-scale)>this._constants.minScaleDiff){var args={event:"pinch",scale:scale,duration:e.timeStamp-this._info.start};this._logger.trace("touchEnd: recording pinch ",args),this._owner.fireEvent(e,args)}else this._logger.trace("touchEnd: not recording pinch, scale is ",scale)},touchCancel:function(e){return this._info&&this._logger.warn("Discarding pinch, got 'touchCancel' => event is treated by the browser not the web application."),this.discard()},_distance:function(points){function sq(x){return x*x}return 2!=points.length?0:Math.sqrt(sq(points[0].clientX-points[1].clientX)+sq(points[0].clientY-points[1].clientY))},_center:function(touches){if(2==touches.length)return{clientX:(touches[0].clientX+touches[1].clientX)/2,clientY:(touches[0].clientY+touches[1].clientY)/2}}},SimulateGesture.prototype={_logger:null,_touches:null,addTouch:function(elem,pos){var touch=this._touchInfo(elem,pos||ContentUtils.getCenterPoint(elem),Date.now());return this._touches.push(touch),this._dispatchTouch("touchstart",elem,this._touches,[touch])},move:function(positions){return positions.length!==this._touches.length?void Util.assert(!1,"mismatch between touch and positions count",this._logger):(positions.forEach(function(pos,i){this._touches[i].pos=pos},this),this._dispatchTouch("touchmove",this._touches[0].elem,this._touches,this._touches))},removeTouches:function(){for(var notCancled=!0;this._touches.length;){var touch=this._touches.pop(),curr=this._dispatchTouch("touchend",touch.elem,this._touches,[touch]);notCancled=notCancled&&curr}return notCancled},_touchInfo:function(element,pos,id){return{elem:element,pos:pos,id:id}},_dispatchTouch:function(type,elem,touches,changed){function ensureHasId(elem,hint){return(!elem.id||elem!==ContentUtils.getElementById(document,elem.id))&&(elem.id="__fakeIdForUFT#"+hint,!0)}function clearIdIfNeeded(t){t.definedId&&(t.elem.id=t.originalElemId,t.definedId=!1)}function serializableTouches(touches){return touches.map(function(t){return t.originalElemId=t.elem.id||"",t.definedId=ensureHasId(t.elem,t.id),{elemId:t.elem.id,touchId:t.id,pos:t.pos}})}function dispatchTouchEvent(type,elemId,safeTouches,safeChanged){function createTouchList(touches){var serialized=touches&&touches.map(function(t){return createTouch(ContentUtils.getElementById(document,t.elemId),t.pos.x,t.pos.y,t.touchId)});return document.createTouchList?serialized&&serialized.length?document.createTouchList.apply(document,serialized):document.createTouchList():Array.isArray(serialized)?serialized:[serialized]}function createTouch(element,x,y,touchId){var pageX=document.body.scrollLeft+x,pageY=document.body.scrollTop+y,touchInfo={view:window,target:element,identifier:touchId,pageX:pageX,pageY:pageY,clientX:x,clientY:y};return document.createTouch?document.createTouch(window,element,touchId,pageX,pageY,x,y):"function"==typeof Touch?new Touch(touchInfo):touchInfo}var element=ContentUtils.getElementById(document,elemId),event=document.createEvent("Event");return event.initEvent(type,!0,!0),event.touches=createTouchList(safeTouches),event.changedTouches=createTouchList(safeChanged),event.targetTouches=createTouchList(safeTouches),event.view=event.view||document.defaultView,element.dispatchEvent(event)}var originalElemId=elem.id||"",idWasCreated=ensureHasId(elem,"target");try{var safeTouches=serializableTouches(touches),safeChanged=serializableTouches(changed);return ContentUtils.runOnDocSync(dispatchTouchEvent,[type,elem.id,safeTouches,safeChanged])}finally{idWasCreated&&(elem.id=originalElemId),touches.forEach(clearIdIfNeeded),changed.forEach(clearIdIfNeeded)}}},Recorder.prototype={_logger:null,frame:null,isRecording:null,recordingEvents:null,_stopPropagation:!1,_waitForWebDriverMessagePullTimeout:500,_handlerFunc:function(ev){if(this.isRecording){if(ev.AlreadyHandledByUFT)return void this._logger.trace("_handlerFunc: got event already be handled. Event type: "+ev.type);if(!ev.target)return void this._logger.warn("_handlerFunc: got event without target. Event type: "+ev.type);if(ev.target===window||ev.target===document)return void this._logger.trace("_handlerFunc: got event on the Window object or Document Object. Ignoring. Event type: "+ev.type);var eventAdapter;ShadowDomUtil.isOpenShadowRoot(ev.target)&&(eventAdapter=ContentUtils.getEventAdapter(ev),eventAdapter.target=ev.composedPath&&ev.composedPath()[0]||ev.target,this._addListenerToShadowRoots(eventAdapter.target,this._handlerFunc.bind(this))),eventAdapter=eventAdapter||ev,this._logger.trace("_handlerFunc: got event of type: ",ev.type," for target: ",eventAdapter.target.tagName),this._updateAoInfo(eventAdapter.target),this._stopPropagation=!1,this._aoInfo.aoArray.some(function(ao){return ao.ReceiveEvent(this,eventAdapter),this._stopPropagation},this)}},_addListenerToShadowRoots:function(elem,handler){var wrapperShadowRoot=ShadowDomUtil.getParentShadowRoot(elem,this._logger);wrapperShadowRoot&&!wrapperShadowRoot.registerEventHandler&&(["change","play","pause","ended","submit"].forEach(function(eventName){elem.addEventListener(eventName,handler,!0)}),elem.registerShadowDomEventHandler=1)},_recordGesture:function(elem,info){this.isRecording&&(this._updateAoInfo(elem),this._stopPropagation=!1,this._aoInfo.aoArray.some(function(ao){return ao.ReceiveGesture(this,info,elem),this._stopPropagation},this))},_updateAoInfo:function(elem){var previousAoInfo=this._aoInfo;previousAoInfo&&previousAoInfo.element===elem||(this._aoInfo={aoArray:content.kitsManager.createRecordAOArray(elem,this.frame.id),element:elem},previousAoInfo&&previousAoInfo.aoArray.forEach(function(ao){ao.ReceiveEventEnded(this)},this),this._aoInfo.aoArray.forEach(function(ao){ao.ReceiveEventStarted(this)},this))},_EVENT_CONFIG_ENUM:{TYPES:{EVT_NEVER:0,EVT_ANYCASE:1,EVT_HANDLER:2,EVT_BEHAVIOR:4,EVT_BEHAVIOR_OR_HANDLER:6,EVS_DELETE:0,EVS_DISABLE:1,EVS_ENABLE:2,EVS_ON_NEXT_EVENT:4,EVS_ENABLE_ON_NEXT_EVENT:6,ERD_IGNORE:0,ERD_RECORD:1,ERD_CONTINUE:2},RESERVED_EVENTS:Util.objectFromArray(["ondragend","onkeyup","onselect","ontextInput"],!0)},_eventConfig:{"any web object":{onclick:{listen:2,record:2},oncontextmenu:{listen:2,record:2},ondragstart:{listen:2,record:2},ondrop:{listen:2,record:2},onkeydown:{listen:1,record:2},onmouseover:{listen:2,record:1},onmouseup:{listen:2,record:1}},image:{onclick:{listen:1,record:2},onmouseover:{listen:2,record:6}},link:{onclick:{listen:1,record:2}},webarea:{onclick:{listen:1,record:2},onmouseover:{listen:2,record:6}},webbutton:{onclick:{listen:1,record:2}},webcheckbox:{onclick:{listen:1,record:2}},webedit:{onblur:{listen:1,record:2},onchange:{listen:1,record:2},onfocus:{listen:1,record:2},onpropertychange:{listen:0,record:2},onsubmit:{listen:1,record:2}},webfile:{onblur:{listen:1,record:2},onfocus:{listen:1,record:2}},weblist:{onblur:{listen:1,record:2},onchange:{listen:1,record:2},onfocus:{listen:1,record:2}},webnumber:{onblur:{listen:1,record:2},onchange:{listen:1,record:2},onfocus:{listen:1,record:2}},webradiogroup:{onclick:{listen:1,record:2}},webtab:{onclick:{listen:1,record:2}},webtree:{onmousedown:{listen:1,record:2},onclick:{listen:1,record:2}},webmenu:{onclick:{listen:1,record:2}},webrange:{onchange:{listen:1,record:2}}},updateEventConfig:function(config){this._logger.trace("updateEventConfig() set event configuration with: "+config),config&&(this._eventConfig=config)},updateTagsToBreakInterestingAOLoop:function(tagsToBreakInterestingAOLoop){this._logger.trace("updateTagsToBreakInterestingAOLoop set with "+tagsToBreakInterestingAOLoop);var tags=[];tagsToBreakInterestingAOLoop&&(tags=tagsToBreakInterestingAOLoop.split(";")),content.kitsManager.updateTagsToBreakInterestingAOLoop(tags)},updateWaitForWebDriverMessagePullTimeout:function(msgPullTimeout){this._logger.trace("updateWaitForWebDriverMessagePullTimeout set with "+msgPullTimeout),"number"==typeof msgPullTimeout&&(this._waitForWebDriverMessagePullTimeout=msgPullTimeout,this._logger.info("_waitForWebDriverMessagePullTimeout is updated to"+this._waitForWebDriverMessagePullTimeout))},isEventAllowedByConfig:function(ao,ev){this._logger.trace("isEventAllowedByConfig() got event of type: "+ev.type);var isAllowed=!1,micclasses=ao._micclass,handlerName="on"+ev.type,_checkEach=function(micclass){if("form"===micclass.toLowerCase()&&"onsubmit"===handlerName&&(micclass="WebEdit"),micclass=micclass.toLowerCase(),!this._eventConfig[micclass])return!0;var micclassConfig=this._eventConfig[micclass];if(!micclassConfig[handlerName])return!0;var handlerConfig=micclassConfig[handlerName];switch(this._makeRecordDecision(handlerConfig,ao._hasDOMHandler(handlerName))){case this._EVENT_CONFIG_ENUM.TYPES.ERD_RECORD:return isAllowed=!0,!1;case this._EVENT_CONFIG_ENUM.TYPES.ERD_IGNORE:return!1;case this._EVENT_CONFIG_ENUM.TYPES.ERD_CONTINUE:return!0}return!0};return _checkEach.call(this,ao.GetAttrSync("html tag"))&&micclasses.every(_checkEach,this),!!this._EVENT_CONFIG_ENUM.RESERVED_EVENTS[handlerName]||isAllowed},_makeRecordDecision:function(handlerConfig,hasDOMHandler){var t=this._EVENT_CONFIG_ENUM.TYPES;switch(handlerConfig.listen){case t.EVT_NEVER:case t.EVT_BEHAVIOR:return t.ERD_IGNORE;case t.EVT_HANDLER:case t.EVT_BEHAVIOR_OR_HANDLER:if(!hasDOMHandler)return t.ERD_IGNORE;break;case t.EVT_ANYCASE:break;default:this._logger.warn("_makeRecordDecision: Unknown listening type:"+handlerConfig.listen)}switch(handlerConfig.record){case t.EVS_DISABLE:case t.EVS_DELETE:return t.ERD_IGNORE;case t.EVS_ON_NEXT_EVENT:case t.EVS_ENABLE_ON_NEXT_EVENT:case t.EVS_ENABLE:return t.ERD_RECORD;default:return this._logger.warn("_makeRecordDecision: Unknown recording type:"+handlerConfig.record),t.ERD_CONTINUE}},startRecord:function(){this.isRecording||(this._logger.info("startRecord: starting recording"),this.isRecording=!0,this._startMonitoringSynthesizedEvents(),this.sendBrowserRecordInfo())},stopRecord:function(){this.isRecording&&(this._logger.info("stopRecord: stopping recording"),this.isRecording=!1,this._stopMonitoringSynthesizedEvents())},sendRecordEvent:function(ao,event,params){if(this._logger.trace("sendRecordEvent: called: ",params),this._sendRecordEventHelper("EVENT_RECORD",ao,event,params),window._QTP&&window._QTP.WebDriverInfo&&"ChromeRemoteDebug"==window._QTP.WebDriverInfo.WebDriverType&&!event.AlreadyHandledByUFT&&this._waitForWebDriverMessagePullTimeout>0&&"click"==event.type){var new_event=new event.constructor(event.type,event);event.stopPropagation(),event.preventDefault();var t=event.target;setTimeout(function(){new_event.AlreadyHandledByUFT=!0,t.dispatchEvent(new_event)},this._waitForWebDriverMessagePullTimeout)}},queueRecordEvent:function(ao,event,params){this._logger.trace("queueRecordEvent: called"),this._sendRecordEventHelper("EVENT_INTERNAL_RECORD_QUEUE",ao,event,params)},sendRecordEventWithQueue:function(ao,event,params){this._logger.trace("sendRecordEventWithQueue: called"),this._sendRecordEventHelper("EVENT_INTERNAL_RECORD_DISPATCH_QUEUE",ao,event,params)},discardQueuedRecordEvents:function(){this._logger.trace("discardQueuedRecordEvents: called");var msg=new Msg("EVENT_INTERNAL_RECORD_QUEUE_CLEAR",this.frame.getID(),{});content.dispatcher.sendEvent(msg)},stopCurrentPropagation:function(){this._stopPropagation=!0},_createObjectDescription:function(ao,micclass){var objIdentificationProps=this.frame.getObjIdentificationProps(micclass);return this._shouldAddPositionInfo(micclass)&&(objIdentificationProps.additionalInfo=["abs_x","abs_y","height","width","view_x","view_y"]),Description.createRecordDescription(ao,objIdentificationProps)},_shouldAddPositionInfo:function(micclass){return!Util.isContainerMicclass(micclass)},_createRecordData:function(ao,event,params){this._logger.trace("_createRecordData: started");var micclass=Util.getMicClass(ao),description=this._createObjectDescription(ao,micclass);this._logger.trace("_createRecordData: AO Data: ",description.description);var recordData={WEB_PN_ID:[[ao.getID()]],micclass:[[micclass]],"recorded description":[[description]]};if(!Util.isNullOrUndefined(event)){var eventID=SpecialObject.CreateEventId(event,ao.getID());recordData["event id"]=[[eventID]]}return Util.extend(recordData,params),recordData},_sendRecordEventHelper:function(msgType,ao,event,params){if((!params||!params.force_record)&&this._isSynthesizedEvent())return void this._logger.info("sendRecordEvent: ignoring synthesized event");var recordData=this._createRecordData(ao,event,params),msg=new Msg(msgType,this.frame.getID(),recordData);content.dispatcher.sendEvent(msg)},sendRecordExtEvent:function(ao,methodName,params){var recordData=this._createRecordData(ao),msg=new Msg("EVENT_RECORD",this.frame.getID(),recordData);msg._data.WEBEXT_PN_METHOD_NAME=methodName,msg._data.WEBEXT_PN_PARAMETERS=params,content.dispatcher.sendEvent(msg)},sendBrowserRecordInfo:function(){if(this.isRecording){var micclass=Util.getMicClass(this.frame);if("Page"===micclass){var browserContentHelper=new BrowserContentHelper(this.frame);this._logger.trace("_sendBrowserRecordInfo: creating message to dispatch");var recordData=this._createRecordData(browserContentHelper,{type:"",clientX:0,clientY:0});recordData.pageDescription=this._createObjectDescription(this.frame,micclass);var msg=new Msg("EVENT_INTERNAL_RECORD_BROWSER_INFO",RtIdUtils.GetAgentRtid(),recordData);content.dispatcher.sendEvent(msg)}}},_startMonitoringSynthesizedEvents:function(){BrowserServices.shouldOverrideDispatchEvent&&(this._logger.debug("_startMonitoringSynthesizedEvents: Going to override CreateEvent function"),BrowserServices.isRunningInPageContext?this._wrapEventDispatchers():ContentUtils.evalInDocument(this._wrapEventDispatchers))},_stopMonitoringSynthesizedEvents:function(){BrowserServices.shouldOverrideDispatchEvent&&(this._logger.debug("_stopMonitoringSynthesizedEvents: Going to restore CreateEvent function"),BrowserServices.isRunningInPageContext?this._unwrapEventDispatchers():ContentUtils.evalInDocument(this._unwrapEventDispatchers))},_wrapEventDispatchers:function(){function wrap(obj,funcName){var orig=obj[funcName];obj[funcName]=function(){for(var argsArray=new Array(arguments.length),i=0;i<arguments.length;i++)argsArray[i]=arguments[i];return dispatcherHelper.call(this,orig,argsArray)},window._QTP.EventDispatchers.push({obj:obj,name:funcName,orig:orig})}function dispatcherHelper(origFunc,args){var result;window._QTP.synthesizedEventsCount++;try{result=origFunc.apply(this,args)}finally{window._QTP.synthesizedEventsCount--}return result}window._QTP||(window._QTP=void 0!==_QTP?_QTP:{}),Array.isArray(window._QTP.EventDispatchers)||(window._QTP.EventDispatchers=[],window._QTP.synthesizedEventsCount=window._QTP.synthesizedEventsCount||0,wrap(HTMLElement.prototype,"dispatchEvent"),wrap(HTMLElement.prototype,"click"),wrap(document,"dispatchEvent"),wrap(window,"dispatchEvent"))},_unwrapEventDispatchers:function(){window._QTP&&(Array.isArray(window._QTP.EventDispatchers)&&window._QTP.EventDispatchers.forEach(function(wrappedData){wrappedData.obj[wrappedData.name]=wrappedData.orig},this),delete window._QTP.EventDispatchers,window._QTP.synthesizedEventsCount=0)},_isSynthesizedEvent:function(){return!!BrowserServices.shouldOverrideDispatchEvent&&ContentUtils.runOnDocSync(function(){return window._QTP&&window._QTP.synthesizedEventsCount})}},FrameCommunicationChannel.prototype={_logger:null,id:null,_closestAncestorID:null,_parentId:null,_listeners:null,init:function(initInfo){this._logger.info("init: called with: ",initInfo),this.id=Util.shallowObjectClone(initInfo.frameID),FrameCommunicationChannelInHTMLContext._comID=Util.shallowObjectClone(initInfo.frameID),BrowserServices.isRunningInPageContext?(FrameCommunicationChannelInHTMLContext.setLogger(new LoggerUtil("FrameCommunicationChannelInHTMLContext")),window.addEventListener("message",FrameCommunicationChannelInHTMLContext.onMessageFromContent.bind(FrameCommunicationChannelInHTMLContext),!1)):(content.domSubscriber.startNamespace(),content.domSubscriber.addUtilityObject("ShadowDomUtil",ShadowDomUtil),content.domSubscriber.addUtilityObject("FrameCommunicationChannelInHTMLContext ",FrameCommunicationChannelInHTMLContext),content.domSubscriber.addScript("FrameCommunicationChannelInHTMLContext.setLogger(_logger);"),content.domSubscriber.endNamespace()),window.addEventListener("message",this.onMessage.bind(this))},_sendMessageHelper:function(eventType,msg,destinationId){this._logger.prettyTrace("_sendMessageHelper: send to: ",destinationId," - message: ",msg);var target;target=RtIdUtils.IsRTIDEqual(this._closestAncestorID,destinationId)?null:destinationId;var reqMsg={source:"FrameCommunicationChannel",msgType:eventType,target:target,data:msg};window.postMessage(reqMsg,"*")},sendMessage:function(msg,destinationId){this._logger.trace("sendMessage: called"),this._sendMessageHelper("request",msg,destinationId)},sendEvent:function(msg,destinationId){this._logger.trace("sendEvent: called"),this._sendMessageHelper("event",msg,destinationId)},addListener:function(eventName,listenerFunction){this._logger.trace("addListener: called"),this._listeners[eventName]||(this._listeners[eventName]=[]),this._listeners[eventName].push(listenerFunction)},removeListener:function(eventName,listenerFunction){if(this._logger.trace("addListener: called"),!this._listeners[eventName])return void this._logger.error("removeListener: Trying to remove listener that is not registered");this._listeners[eventName]=this._listeners[eventName].filter(function(listener){return listener!==listenerFunction})},dispatchEvent:function(eventName){this._logger.trace("dispatchEvent: called for event "+eventName);var args=Util.makeArray(arguments);if(args.splice(0,1),!this._listeners[eventName])return this._logger.warn("dispatchEvent: no listeners found for event: "+eventName),null;var res=null;return this._listeners[eventName].forEach(function(listener){res=listener.apply(this,args)}),res},onMessage:function(msgEventObj){var msg=Util.deepObjectClone(msgEventObj.data);if("object"==typeof msg&&"FrameCommunicationChannelInHTMLContext"===msg.source)try{switch(msg.msgType){case"contentUnsupoortedACK":this.unSupportedContentHandler();break;case"MarkDispatcherInfo":this.putDescendantInfoOnFrameElem(msg);break;case"frameBornAck":this.contentDispatcherAttachedEventHandler(msg);break;case"request":this.handleRequest(msg);break;case"response":this.handleResponse(msg);break;case"event":this._logger.trace("onMessage: Got the following 'event': ",msg),this.dispatchEvent("event",msg.data)}}catch(ex){this._logger.error("messageHandlerInContent: Got exception "+ex+"\nStack:"+ex.stack)}},handleRequest:function(msg){this._logger.prettyTrace("handleRequest: Received the following message: ",msg);var targetTo=msg.data._to;if(targetTo.frame!==this.id.frame)return void this._logger.trace("handleRequest: message is not the target of this frame current =",this.id," target =",targetTo);var logger=this._logger;try{this.dispatchEvent("message",msg.data,null,function(res){msg.data=res,msg.source="FrameCommunicationChannel",msg.msgType="response",logger.trace("handleRequest: Going to send the following response:",msg),window.postMessage(msg,"*")})}catch(e){logger.error("handleRequest: Exception occurred. Send error message back. Exception:"+e+"\nStack:"+e.stack),msg.data.status="ERROR",msg.data.details=e?e.message:null,msg.source="FrameCommunicationChannel",msg.msgType="response",window.postMessage(msg,"*")}},handleResponse:function(msg){this._logger.trace("handleResponse: Got the following response: ",msg),this.dispatchEvent("response",msg.data)},connect:function(connectionInfo){if(this._logger.trace("connect: Started with the following connection info ",connectionInfo),this._closestAncestorID={browser:-1,page:-1,frame:-1,object:null},connectionInfo.isPage)this.dispatchEvent("connected");else{var bornMsg={source:"FrameCommunicationChannel",msgType:"Notify_Dispatcher_Created",data:{comID:Util.shallowObjectClone(this.id)}};window.postMessage(bornMsg,"*")}},disconnect:function(){},contentDispatcherAttachedEventHandler:function(msg){this._logger.info("contentDispatcherAttachedEventHandler: Started"),this._closestAncestorID=msg.data.closestAncestorID,this.dispatchEvent("connected")},unSupportedContentHandler:function(){this._logger.error("unSupportedContentHandler: Unsupported Frame on "+document.location.href),this.dispatchEvent("connected")},putDescendantInfoOnFrameElem:function(msg){this._logger.trace("putDescendantInfoOnFrameElem: Started with the following message:",msg);var framePath=msg.data.framePath,frameElem=this.getFrameElemFromPath(document,framePath);if(!frameElem)return void this._logger.error("putDescendantInfoOnFrameElem: Failed to find frame element!!!!!");frameElem.__QTP__OBJ||(frameElem.__QTP__OBJ={});var qtpObj=frameElem.__QTP__OBJ,comID=msg.data.frameCOMID;"comID"in qtpObj&&qtpObj.comID!==comID?(this._logger.info("putDescendantInfoOnFrameElem: frame had another COM ID registered, setting previous value to = ",qtpObj.comID),qtpObj.previousComID=qtpObj.comID):qtpObj.comID===comID&&this._logger.info("putDescendantInfoOnFrameElem: frame already had this COM ID registered: ",qtpObj.comID),this._logger.debug("putDescendantInfoOnFrameElem: Updating frame element with comID:",comID),qtpObj.comID=comID},getFrameElemFromPath:function(doc,framePath){if(Util.assert(framePath.length>0,"getFrameElemFromPath: FrameElement not found!",this._logger),framePath.length<=0)return null;var child=framePath.pop(),frameElems=ContentUtils.querySelectorAll(doc,"IFRAME,FRAME",this._logger);return 0===framePath.length?frameElems[child]:this.getFrameElemFromPath(frameElems[child].contentDocument,framePath)}};var FrameCommunicationChannelInHTMLContext={_comID:-1,_logger:null,_frameNameMap:null,setLogger:function(logger){this._logger=logger},onMessageFromContent:function(msgEventObj){var msg=msgEventObj.data;if("object"==typeof msg&&("FrameCommunicationChannel"===msg.source||"FrameCommunicationChannelInHTMLContext"===msg.source))try{switch(msg.msgType){case"Notify_Dispatcher_Created":this._logger.info("onMessageFromContent: Received Notify_Dispatcher_Created"),this.sendBornMessageToParents(msg.data.comID);break;case"descendantBorn":this._logger.info("FrameCommunicationChannelInHTMLContext.onMessageFromContent: Received descendantBorn"),this.descendantBorn(msgEventObj.source,msg.data);break;case"contentUnsupoortedACK":this._logger.error("FrameCommunicationChannelInHTMLContext.onMessageFromContent: Received contentUnsupoortedACK"),window.clearTimeout(msg.data.timerID);break;case"frameBornAck":window.clearTimeout(msg.data.timerID),this.closestParentWindow=msgEventObj.source;break;case"response":case"request":case"event":this.dispatchMessage(msg)}}catch(ex){this._logger.error("FrameCommunicationChannelInHTMLContext.onMessageFromContent: Got Exception ",ex,"\n handling the message:",msg,"\nStack:",ex.stack)}},dispatchMessage:function(msg){if("FrameCommunicationChannel"===msg.source)if(this._logger.trace("dispatchMessage: Got a message the message:\n ",msg,"\n Dispatching it"),msg.source="FrameCommunicationChannelInHTMLContext",null===msg.target)msg.target=this._comID,this.closestParentWindow.postMessage(msg,"*");else{var childID=msg.target;msg.target=null;var childFrame=ContentUtils.findFrameElemByID(childID,document,this._logger);if(!childFrame)return void this._logger.error("dispatchMessage: Failed to find child frame !!!");childFrame.contentWindow.postMessage(msg,"*")}},sendBornMessageToParents:function(comID,retryNum){if(Util.assert(window.parent!==window,"We are page, how come we're here?",this._logger),retryNum=retryNum||0,this._logger.info("sendBornMessageToParents: sending to all ancestors "+(0!==retryNum?" (Retry num "+retryNum+")":"")),retryNum>=20){this._logger.error("sendBornMessageToParents: Frame ("+window.location.href+") Exceeds the number of retries (20) Send back unsupported frame");var ackMsg={msgType:"contentUnsupoortedACK",source:"FrameCommunicationChannelInHTMLContext",data:{timerID:null}};return void window.postMessage(ackMsg,"*")}for(var ackTimerId=Util.setTimeout(this.sendBornMessageToParents.bind(this,comID,retryNum+1),500),msg={msgType:"descendantBorn",source:"FrameCommunicationChannelInHTMLContext",data:{frameCOMID:comID,timerID:ackTimerId}},win=window,i=0;win!==win.parent;)win=win.parent,++i,msg.data.generation=i,this._logger.trace("sendBornMessageToParents: sending to ancestors #",i," The following message ",msg),msg.data.frameName=window.name,win.postMessage(msg,"*")},descendantBorn:function(source,childBornInfo){if(this._logger.trace("descendantBorn: Started"),!source)return void this._logger.info("FrameCommunicationChannelInHTMLContext.descendantBorn: Got born message from a child that dead.");for(var descendantId=childBornInfo.frameCOMID,win=source,p=win.parent;p!==window.self&&!ContentUtils.isInjectable(p,this._logger);)p=p.parent;if(p!==window.self)return void this._logger.debug("descendantBorn: This is not the closest injected ancsetor, do nothing");this._logger.debug("descendantBorn: This is the closest injected ancsetor");var curr=win,windowPath=[];for(childBornInfo.frameName&&"undefined"!=typeof Map&&(this._frameNameMap||(this._frameNameMap=new Map),this._frameNameMap.set(win,childBornInfo.frameName));curr!==window.self;)windowPath.push(curr),curr=curr.parent;var frameSearchRes=this.getFrameElemFromWindowPath(window.self,windowPath),frameElemPath=frameSearchRes.path,frameElem=frameSearchRes.elem;if(!frameElem){this._logger.error("descendantBorn: Recursive frame finding function failed");var unsupportedAckMsg={msgType:"contentUnsupoortedACK",source:"FrameCommunicationChannelInHTMLContext",data:{timerID:childBornInfo.timerID}};return void source.postMessage(unsupportedAckMsg,"*")}frameElem.__QTP__OBJ||(frameElem.__QTP__OBJ={});var qtpObj=frameElem.__QTP__OBJ,comID=descendantId;"comID"in qtpObj&&qtpObj.comID!==comID?(this._logger.info("descendantBorn: frame had another COM ID registered, previous value = ",qtpObj.comID),qtpObj.previousComID=qtpObj.comID):qtpObj.comID===comID&&this._logger.info("descendantBorn: frame already had this COM ID registered: ",qtpObj.comID),this._logger.info("descendantBorn: Updating frame element with comID:",descendantId),qtpObj.comID=descendantId,this._logger.debug("descendantBorn: Going to ask the content context to mark this frame");var markMsg={msgType:"MarkDispatcherInfo",source:"FrameCommunicationChannelInHTMLContext",data:{framePath:frameElemPath,frameCOMID:descendantId}};window.postMessage(markMsg,"*");var ackMsg={msgType:"frameBornAck",source:"FrameCommunicationChannelInHTMLContext",data:{closestAncestorID:this._comID,timerID:childBornInfo.timerID}};source.postMessage(ackMsg,"*")},getFrameElemFromWindowPath:function(parent,path){if(0===path.length)return Util.assert(!1,"getFrameElemFromWindowPath: FrameElement not found!",this._logger),{};for(var child=path.pop(),parentDoc=parent.document,frameElems=ContentUtils.querySelectorAll(parentDoc,"IFRAME,FRAME",this._logger),i=0;i<frameElems.length;++i)if(frameElems[i].contentWindow===child){if(0===path.length)return{path:[i],elem:frameElems[i]};var res=this.getFrameElemFromWindowPath(child,path);return{path:res.path?res.path.concat([i]):null,elem:res.elem}}for(var i=0;i<frameElems.length;++i)if(this._frameNameMap&&this._frameNameMap.get(child)===frameElems[i].name){if(0===path.length)return{path:[i],elem:frameElems[i]};var res=this.getFrameElemFromWindowPath(child,path);return{path:res.path?res.path.concat([i]):null,elem:res.elem}}return{}}};ElementInspector.prototype={_logger:null,_frameId:null,_handlers:null,_outliner:null,_spyOptions:null,_init:function(frameId){this._logger=new LoggerUtil("Content.ElementInspector"),this._frameId=frameId,this._handlers={},this._spyOptions={};var mouseEvents=["click","dblclick","mousedown","mouseup","mouseover"],defaultHandler=this._eventHandler.bind(this);mouseEvents.forEach(function(name){this._handlers[name]=defaultHandler},this),this._handlers.mousemove=this._mouseMove.bind(this),this._handlers.mouseout=this._mouseOut.bind(this),this._handlers.keydown=this._keyDown.bind(this),this._handlers.keyup=this._keyUp.bind(this),this._handlers.contextmenu=this._contextMenu.bind(this)},startSpy:function(msg,resultCallback){this._internalStartSpy(msg._data),resultCallback&&resultCallback(msg)},_internalStartSpy:function(spyOptions){this._logger.trace("startSpy: called with options",spyOptions),this._spyOptions=spyOptions||{},this._outliner=new ContentUtils.ElementBorder,this._outliner.run(function(elem){elem.style.cursor="pointer"}),Object.keys(this._handlers).forEach(function(h){document.addEventListener(h,this._handlers[h],!0)},this)},stopSpy:function(msg,resultCallback){this._internalStopSpy(),resultCallback(msg)},_internalStopSpy:function(){this._logger.trace("stopSpy: called"),this._spyOptions={},this._outliner&&(this._outliner.remove(),this._outliner=null),Object.keys(this._handlers).forEach(function(h){document.removeEventListener(h,this._handlers[h],!0)},this)},_shouldFilterEvent:function(ev){return ev.metaKey||ev.ctrlKey},_eventHandler:function(ev){if(this._logger.trace("_eventHandler: called"),this._shouldFilterEvent(ev))return void this._logger.trace("handler is paused, exiting");if(ev.stopPropagation(),ev.preventDefault(),"mouseup"===ev.type&&2===ev.button){this._logger.trace("keyDownHandler: Cancelling Spy");var inspectAutMsg=new Msg("EVENT_INSPECT_CANCEL",content.dispatcher.getParentDispatcherID(),{});return content.dispatcher.sendEvent(inspectAutMsg),!1}"click"===ev.type&&this._inspect(ev)},_addTitle:function(elem){var self=this;(this._titleBuilders[this._spyOptions.outlinerTitleMode]||this._titleBuilders.uft).call(this,elem,function(title){self._outliner.run(function(overlay){overlay.title=title})})},_titleBuilders:{uft:function(elem,callback){content.kitsManager.createAO(elem,this._frameId).GetAttr("micclass",null,function(micclasses){var micclass=Array.isArray(micclasses)?micclasses[0]:micclasses,title="Class Name: "+micclass+"\nhtml tag: "+elem.tagName;callback(title)})},leanft:function(elem,callback){
var ao=content.kitsManager.createAO(elem,this._frameId),self=this;ao.QUERY_ATTR({_data:{micclass:null,"logical name":null}},function(result){var data=result._data||{},micclasses=data.micclass,logicalName=data["logical name"]||"";logicalName=logicalName.substring(0,30);var micclass=Array.isArray(micclasses)?micclasses[0]:micclasses,classConfig=self._getClassConfig(micclass);if(!classConfig)return self._logger.debug("_titleBuilders.leanFT: class without config ",micclass),title=micclass+" : "+logicalName,void callback(title);self._logger.debug("_titleBuilders.leanFT: Using classConfig ",classConfig);var leanFtClass=classConfig.displayName||micclass,title=leanFtClass;logicalName&&(title=title+" : "+logicalName),title+="\n";var props={},propsConfig=classConfig.properties||{};Object.keys(propsConfig).forEach(function(propName){props[propName]=null});ao.QUERY_ATTR({_data:props},function(propsResult){Object.keys(propsResult._data).forEach(function(propName){var propVal=propsResult._data[propName];if(null!=propVal&&""!==propVal){var propTitle=propsConfig[propName].displayName||propName;propVal=propVal.toString();var MAX_PROP_VAL_LENGTH=50;propVal.length>MAX_PROP_VAL_LENGTH&&(propVal=propVal.substring(0,MAX_PROP_VAL_LENGTH-3)+"..."),title=title+"\n"+propTitle+": "+propVal}}),callback(title)})})}},_getClassConfig:function(micclass){return(this._spyOptions.classTranslation||{})[micclass.toLowerCase()]||{properties:{}}},_inspect:function(ev){this._outliner.hide();var point={x:ev.clientX,y:ev.clientY};this._getObjectFromClientPoint(point,function(resMsg){this._logger.trace("_inspect: QUERY_OBJ_CLIENT_POINT_TO_ID result: ",resMsg);var webIdsArr=resMsg._data.WEB_PN_ID;if(!Array.isArray(webIdsArr)||webIdsArr.length<1)return void this._logger.trace("_inspect: QUERY_OBJ_CLIENT_POINT_TO_ID didn't return any Runtime Ids");this._dispatchInspectMsg(webIdsArr.pop())}.bind(this))},_getObjectFromClientPoint:function(point,resultCallback){var queryClientPointMsg=new Msg("QUERY_OBJ_CLIENT_POINT_TO_ID",Util.shallowObjectClone(this._frameId),{pos:point});queryClientPointMsg.isCoordinatesRelativeToFrame=!0,content.dispatcher.sendMessage(queryClientPointMsg,null,null,resultCallback)},_mouseMove:function(ev){if(this._shouldFilterEvent(ev))return void this._outliner.hide();var elem=this._internalMouseMove(ev);elem&&(this._outliner.wrap(elem)&&this._addTitle(elem),this._outliner.show())},_internalMouseMove:function(ev){ev.stopPropagation(),ev.preventDefault(),this._outliner.hide();var elem=document.elementFromPoint(ev.clientX,ev.clientY);if("IFRAME"!==elem.tagName)return elem},_mouseOut:function(ev){ev.relatedTarget||this._outliner.hide()},_dispatchInspectMsg:function(rtid){this._logger.trace("_dispatchInspectMsg: called");var inspectAutMsg=new Msg("EVENT_INSPECT_ELEMENT",content.dispatcher.getParentDispatcherID(),{WEB_PN_ID:[rtid]});content.dispatcher.sendEvent(inspectAutMsg)},_keyDown:function(ev){if(27===ev.keyCode){this._logger.trace("_keyDown: Esc key - cancelling Spy");var inspectAutMsg=new Msg("EVENT_INSPECT_CANCEL",content.dispatcher.getParentDispatcherID(),{});return void content.dispatcher.sendEvent(inspectAutMsg)}this._shouldFilterEvent(ev)&&this._outliner.hide()},_keyUp:function(ev){this._shouldFilterEvent(ev)&&this._outliner.show()},_contextMenu:function(ev){if(this._logger.trace("_contextMenu: called"),this._shouldFilterEvent(ev))return this._logger.trace("handler is paused, exiting"),!0;this._logger.debug("_contextMenu: cnacelling context menu"),ev.stopPropagation(),ev.preventDefault()}};var BrowserServices={createComChannel:function(logger){return logger&&logger.trace("BrowserServices.createComChannel: started for EmbeddedBrowser"),new MessageChannelComChannel("content")},getLoadTime:function(logger){return logger&&logger.warn("BrowserServices.getLoadTime: started for EmbeddedBrowser - Currently Unsupported, returning 0"),0},isSpecialUninjectablePage:function(logger){return!1},isAboutBlankFrameInjectable:!0,shouldOverrideDispatchEvent:!0,isRunningInPageContext:!0,coordinatesAreRelativeToPage:!0,shouldSendWebExtReportWithResponse:!0,isFrameSupportXSS:!0};BrowserServices.isWebRoleBasedKitEnabled=!0,BrowserServices.isFrameSupportXSS=!0,BrowserServices.getWindowRect=function(){return ContentUtils.getMobileWindowRect(window.hpmcAgent)},ContentDispatcher.prototype={_chromeChannel:null,_responseCallbacks:null,_frameComChannel:null,_listeners:null,_nextMessageID:0,_initData:{},_currentGlobalErrorHandler:null,init:function(){},connect:function(initData){this._logger.info("connect: going to connect to extension"),this._chromeChannel.init(),this._initData=initData,this._chromeChannel.connect()},sendMessage:function(msg,target,forceCOMType,responseCallback){if(this._logger.trace("sendMessage: Going to send \n ",msg,"\nto:\n",target),target=target||msg._to,this._isRTIDInOurContent(target))return this._logger.trace("sendMessage: The target is located locally"),this._dispatchMessageLocally(msg,responseCallback);this._logger.trace("sendMessage: The target is external, looking for the right communication channel to it");var comChannel=this._getTargetCOMChannel(target,forceCOMType);Util.isUndefined(msg._ContentAsyncInfo)||this._logger.error("sendMessage : there is already asyncID on this message please handle it"),responseCallback&&(msg._ContentAsyncInfo={id:++ContentDispatcher.prototype._nextMessageID},this._responseCallbacks[msg._ContentAsyncInfo.id]={func:responseCallback,origMsg:msg,globalErrorHandler:this._currentGlobalErrorHandler}),comChannel.sendMessage(msg,target),this._logger.trace("sendMessage: Finished")},sendEvent:function(msg,target){if(this._logger.trace("sendEvent: Going to send \n ",msg,"\nto:\n",target),target=target||msg._to,this._isRTIDInOurContent(target))return this._logger.trace("sendEvent: The target is located locally"),this._dispatchMessageLocally(msg,Util.identity);this._logger.trace("sendEvent: The target is external, looking for the right communication channel to it");var comChannel=this._getTargetCOMChannel(target);Util.assert(comChannel,"sendEvent: failed to retrieve target communciation channel for: "+target,this._logger),comChannel.sendEvent(msg,target)},getContainingContextID:function(){return this._frameComChannel._closestAncestorID},getParentDispatcherID:function(){return RtIdUtils.GetExtensionRtId()},onComChannelConnected:function(){this._logger.trace("onComChannelConnected: Called"),this._resetGlobalErrorHandler(),this._sendFrameRegistrationMessage()},onComChannelConnectionFailed:function(reason){switch(this._logger.warn("onComChannelConnectionFailed: Called: ",reason),reason){case"timeout":this._logger.trace("onComChannelConnectionFailed: Timeout - Reconnecting"),this._chromeChannel.connect();break;default:this._logger.error("onComChannelConnectionFailed: Unknown Connection Failure Reason")}},onMessageTimedOut:function(timedOutMsg){switch(this._logger.warn("onResendTimer:\n",timedOutMsg,"\n Has Timed out!!!"),this._resetGlobalErrorHandler(),timedOutMsg._msgType){case MSG_TYPES.REGISTER_FRAME:if(this._registrationRetryNum=this._registrationRetryNum?++this._registrationRetryNum:1,this._registrationRetryNum>=60)return void this._logger.warn("onMessageTimedOut: The number of retries has exceed going to stop registration");this.connect(timedOutMsg._data);break;case"Frame Attached":this.sendMessage(timedOutMsg);break;default:this._logger.error("onResendTimer: Unsupported message type:",timedOutMsg._msgType)}this._logger.trace("onResendTimer: Finished")},onMessage:function(msg,sender,resultCallback){this._logger.trace("onMessage: Started with ",msg),this._setGlobalErrorHandler(msg,resultCallback);try{this._onMessageInternal(msg,sender,resultCallback)}finally{this._resetGlobalErrorHandler()}},onEvent:function(msg,sender){this._logger.trace("onMessage: Started with ",msg),this._onMessageInternal(msg,sender,Util.identity)},_onMessageInternal:function(msg,sender,resultCallback){switch(this._logger.trace("_onMessageInternal: Started with ",msg),msg._msgType){case"SRVC_SET_GLOBAL_VARIABLES_INTERNAL":this._setSettings(msg._data);default:this._dispatchMessageLocally(msg,resultCallback)}},onResponseMessage:function(msg){this._logger.prettyTrace("onResponseMessage: Started with the following message:\n",msg);var asyncInfo=msg._ContentAsyncInfo;if(delete msg._ContentAsyncInfo,!asyncInfo)return void this._logger.debug("onResponseMessage: The message has no async info");if(Util.isNullOrUndefined(asyncInfo.id))return void this._logger.error("onResponseMessage: asyncInfo does not contain a cookie id");if(!this._responseCallbacks[asyncInfo.id])return void this._logger.error("onResponseMessage: No call back info for message with async Cookie =",asyncInfo.id);if(delete this._responseCallbacks[asyncInfo.id].origMsg._ContentAsyncInfo,!this._responseCallbacks[asyncInfo.id].func)return void this._logger.debug("onResponseMessage: No call back for message with async Cookie =",asyncInfo.id);var func=this._responseCallbacks[asyncInfo.id].func;this._currentGlobalErrorHandler=this._responseCallbacks[asyncInfo.id].globalErrorHandler;try{func(msg)}catch(e){this._logger.error("onResponseMessage: Got exception, Call global error callback - Stack: ",e),this._currentGlobalErrorHandler?this._currentGlobalErrorHandler(e):this._logger.warn("onResponseMessage: global error callback is not set")}this._resetGlobalErrorHandler(),delete this._responseCallbacks[asyncInfo.id]},disconnect:function(){this._logger.trace("disconnect: Started"),this._chromeChannel.disconnect()},addListener:function(eventName,listenerObj){this._logger.info("addListener: called"),this._listeners[eventName]||(this._listeners[eventName]=[]),this._listeners[eventName].push(listenerObj)},removeListener:function(eventName,listenerObj){if(this._logger.info("removeListener: called"),!this._listeners[eventName])return void this._logger.error("removeListener: Trying to remove listener that is not registered");var listenerIdx=this._listeners[eventName].indexOf(listenerObj);if(-1===listenerIdx)return void this._logger.error("removeListener: Removing unknown listener");this._inMiddleOfEvent?this._listeners[eventName][listenerIdx].toBeDeleted=!0:this._listeners[eventName].splice(listenerIdx,1)},dispatchEvent:function(eventName){if(!this._listeners[eventName])return void this._logger.trace("dispatchEvent: no listeners found for event: ",eventName);var args=Util.makeArray(arguments);args.splice(0,1);var funcName="on"+eventName,listeners=this._listeners[eventName];this._inMiddleOfEvent=!0;for(var i=0;i<listeners.length;++i)listeners[i].toBeDeleted||listeners[i][funcName].apply(listeners[i],args);delete this._inMiddleOfEvent,this._listeners[eventName]=this._listeners[eventName].filter(function(listener){return!listener.toBeDeleted})},_getTargetCOMChannel:function(target,forceCOMType){switch(this._logger.trace("_getTargetCOMChannel: Started for target:",target," forceCOMType is:",forceCOMType),forceCOMType){case"chrome":return this._chromeChannel;case"frame":return this._frameComChannel}return this._isRTIDInOurContent(target)?(this._logger.error("_getTargetCOMChannel: The RTID is in our content no need for COM Channel"),null):RtIdUtils.IsRTIDExtension(target)?this._chromeChannel:RtIdUtils.IsRTIDFrame(target)||RtIdUtils.IsRTIDAO(target)?this._frameComChannel:RtIdUtils.IsRTIDPage(target)||RtIdUtils.IsRTIDBrowser(target)||RtIdUtils.IsRTIDAgent(target)?this._chromeChannel:void this._logger.error("_getTargetCOMChannel: no COMChannel has returned!!!")},_dispatchMessageLocally:function(msg,resultCallback){var ao=this._getTargetAOAccordingToRTID(msg._to);if(!ao)return this._logger.error("_dispatchMessageLocally: _getTargetAOAccordingToRTID  didn't find AO in container"),msg.status="TargetObjectNotFound",void(resultCallback&&resultCallback(msg));var extAsyncInfo=msg._extAsyncInfo,globalErrorHandler=this._currentGlobalErrorHandler,logger=this._logger;ao.onMessage(msg,function(resMsg){extAsyncInfo&&(resMsg._extAsyncInfo=extAsyncInfo);try{resultCallback&&resultCallback(resMsg)}catch(e){logger.error("_dispatchMessageLocally: Exception occurred in ao.onMessage's on response - call global error callback. ",e.stack),globalErrorHandler?globalErrorHandler(e):logger.warn("_dispatchMessageLocally: global error callback is not set")}})},_isRTIDInOurContent:function(id){if(!RtIdUtils.IsRTIDAO(id)&&!RtIdUtils.IsRTIDFrame(id))return!1;var ourFrameID=content.frame.getID();return ourFrameID.frame===id.frame&&((id.page===ourFrameID.page||-1===ourFrameID.page)&&(id.browser===ourFrameID.browser||-1===ourFrameID.browser))},_getTargetAOAccordingToRTID:function(targetRTID){if(this._logger.trace("_getTargetAOAccordingToRTID: Started for target RTID:",targetRTID),!this._isRTIDInOurContent(targetRTID))return this._logger.error("_getTargetAOAccordingToRTID: This RTID is not for us no AO will be returned"),null;if(null===targetRTID.object)return this._logger.trace("_getTargetAOAccordingToRTID: The target is Frame AO"),content.frame;this._logger.trace("_getTargetAOAccordingToRTID: The target is regular AO");var associatedElement=content.rtidManager.GetElementFromID(targetRTID.object);return null==associatedElement?(this._logger.warn("_getTargetAOAccordingToRTID: Ge associated element from rtid failed"),null):associatedElement instanceof DotObjJSProxy?associatedElement:associatedElement instanceof Range?content.kitsManager.createVirtualTextAO(associatedElement,content.frame.getID()):content.kitsManager.createAO(associatedElement,content.frame.getID())},_setSettings:function(newSettings){this._logger.trace("_setSettings: Started"),content.settings=content.settings||{};for(var p in newSettings)Object.defineProperty(content.settings,p,{value:newSettings[p],writable:!1,configurable:!0,enumerable:!0})},_onRegistrationResult:function(msg){this._logger.info("_onRegistrationResult: Started");var regResult=msg._data;if(this._logger.debug("_onRegistrationResult: Registration result for tabID is ",regResult.tabID),"pending"===regResult.status)return this._logger.debug("_onRegistrationResult: registration status is pending, Browser is not ready. Wait."),void Util.setTimeout(this._sendFrameRegistrationMessage.bind(this),500);LoggerUtilSettings.setSettings(regResult.logSettings),content.domSubscriber.initHTMLLogger(regResult.logSettings),this._setSettings(regResult._settings),this.dispatchEvent("RegistrationResult",regResult),this._frameComChannel.init({frameID:content.frame.getID()}),this._frameComChannel.connect({isPage:this._initData.isPage})},onFrameCOMChannelConnected:function(){this._logger.info("onFrameCOMChannelConnected: Started"),this._resetGlobalErrorHandler(),DotObjUtil.InstallDotObjectSupport();var frameAttachMessage=new Msg("Frame Attached",this.getParentDispatcherID(),{frameID:content.frame.getID()});this._logger.info("onFrameCOMChannelConnected: Dispatching Frame Attached Message: ",function(){return JSON.stringify(content.frame.getID())}),this.sendMessage(frameAttachMessage),void 0!==PageProxy&&PageProxy.install()},_resetGlobalErrorHandler:function(){this._currentGlobalErrorHandler=null},_setGlobalErrorHandler:function(msg,resultCallback){this._currentGlobalErrorHandler=function(origMsg,error){origMsg.status=error?error.message:"ERROR",origMsg.details=error?error.message:null,resultCallback(origMsg)}.bind(this,msg)},_sendFrameRegistrationMessage:function(){var registerFrameMsg=new Msg(MSG_TYPES.REGISTER_FRAME,this.getParentDispatcherID(),this._initData);this.sendMessage(registerFrameMsg,null,null,this._onRegistrationResult.bind(this))}},DotObjJSProxy.prototype={_logger:null,_obj:null,_id:null,type:"NPObjDispWrapper",_nextId:0,_callbackMap:{},onMessage:function(msg,resultCallback){if(this._logger.trace("onMessage: Started with message ",msg),!this[msg._msgType])return this._logger.error("onMessage: Unsupported message type: ",msg._msgType),msg.status="ERROR",void resultCallback(msg);this[msg._msgType](msg,resultCallback)},getID:function(){return Util.shallowObjectClone(this._id)},DOT_OBJ_BUILD_INFO:function(msg,resultCallback){this._logger.trace("DOT_OBJ_BUILD_INFO: started");var requestMsg=new Msg("DOT_OBJ_BUILD_INFO",{},{objToOperate:this._obj}),logger=this._logger;this._dispatchToHandlerInPage(requestMsg,function(resMsg){logger.trace("DOT_OBJ_BUILD_INFO: received result");var resObj=resMsg._data.result,resultName=Object.keys(resObj)||[],resultVal=[];resultName.forEach(function(key){resultVal.push(resObj[key])}),msg._data.name=[resultName],msg._data.value=[resultVal],msg.status=resMsg.status,resultCallback(msg)})},DOT_OBJ_GET_PROPERTY:function(msg,resultCallback){this._logger.trace("DOT_OBJ_GET_PROPERTY: started for property: "+msg._data.name);var requestMsg=new Msg("DOT_OBJ_GET_PROPERTY",{},{propName:msg._data.name,objToOperate:this._obj});this._dispatchToHandlerInPageAndHandleResponse(requestMsg,msg,resultCallback)},DOT_OBJ_PUT_PROPERTY:function(msg,resultCallback){this._logger.trace("PutProperty: Started for property:"+msg._data.name+" value:"+msg._data.data);var arg=this._unwrapDotObjIfNeeded(msg._data.data),requestMsg=new Msg("DOT_OBJ_PUT_PROPERTY",{},{propName:msg._data.name,objToOperate:this._obj,valToPut:arg});this._dispatchToHandlerInPageAndHandleResponse(requestMsg,msg,resultCallback)},DOT_OBJ_CALL_METHOD:function(msg,resultCallback){if("NativePropertyBatchQuery"===msg._data.name)this._nativeBatchQuery(msg,resultCallback);else{this._logger.trace("CallMethod: Started for: "+msg._data.name);var args=Array.isArray(msg._data.data)?msg._data.data:[msg._data.data];args=args.map(function(arg){return this._unwrapDotObjIfNeeded(arg)},this);var requestMsg=new Msg("DOT_OBJ_CALL_METHOD",{},{methodName:msg._data.name,objToOperate:this._obj,args:args});this._dispatchToHandlerInPageAndHandleResponse(requestMsg,msg,resultCallback)}},_dispatchToHandlerInPage:function(requestMsg,resultCallback){this._logger.trace("_dispatchToHandlerInPage: started");var callbackId=++DotObjJSProxy.prototype._nextId;this._callbackMap[callbackId]=resultCallback,requestMsg.dotObjAsyncId=callbackId;var ev=ContentUtils.createCrossOriginCustomEvent("_QTP_Dot_Object",{detail:requestMsg});window.dispatchEvent(ev)},_dispatchToHandlerInPageAndHandleResponse:function(requestMsg,originalMsg,resultCallback){this._logger.trace("_dispatchToHandlerInPageAndHandleResponse: started"),requestMsg._data.manageReturnValueIfNeeded=!0,this._dispatchToHandlerInPage(requestMsg,function(originalMsg,resMsg){this._logger.trace("_dispatchToHandlerInPageAndHandleResponse: returned");var result=resMsg._data.result;if("object"==typeof result){var proxy=new DotObjJSProxy(result,this.getID());result=SpecialObject.CreateDotObj(proxy.getID())}originalMsg.status=resMsg.status,originalMsg._data.value=result,resultCallback(originalMsg)}.bind(this,originalMsg))},_unwrapDotObjIfNeeded:function(arg){if(this._logger.trace("_unwrapDotObjIfNeeded: started"),RtIdUtils.IsRuntimeId(arg)){var dotObjProxy=content.rtidManager.GetElementFromID(arg.object);return Util.assert(dotObjProxy instanceof DotObjJSProxy,"_unwrapDotObjIfNeeded: trying to unwrap an object which is not a dotObj proxy",this._logger),dotObjProxy.getWrappedObject()}return arg},getWrappedObject:function(){return this._obj},ResultMsgHandler:function(resEvent){var resMsg=resEvent.detail;if("DOT_OBJ_RESULT"!==resMsg._msgType)return this._logger.error("ResultMsgHandler: Received unknown message type: "+resMsg._msgType),!0;var callback=this._callbackMap[resMsg.dotObjAsyncId];delete this._callbackMap[resMsg.dotObjAsyncId],callback&&callback(resMsg)},_nativeBatchQuery:function(msg,resultCallback){var args=msg._data.data[0],requestMsg=new Msg(msg._data.name,{},{objToOperate:this._obj,args:args});this._dispatchToHandlerInPage(requestMsg,function(resultMsg){msg._data.value=[[]],msg._data.value[0]=resultMsg._data.result.map(function(value){var dotObjectPropertyValue=value;if("object"==typeof value){var proxy=new DotObjJSProxy(value,this.getID());dotObjectPropertyValue=SpecialObject.CreateDotObj(proxy.getID())}return dotObjectPropertyValue},this),msg.status="OK",resultCallback(msg)}.bind(this))}};var DotObjUtil={_logger:null,_callbacks:{},_nextUID:-1,_nextAsyncID:0,WrapElement:function(element,parentId,resCallback){var markObjRequest=SpecialObject.CreateElementRequest(this._getElementUID(),++this._nextAsyncID);element.setAttribute("uft-uid",markObjRequest.objUID),this.sendToDotObjectManager(markObjRequest,function(dotObjManagerCookie){var proxy=new DotObjJSProxy(dotObjManagerCookie,parentId);resCallback(SpecialObject.CreateDotObj(proxy.getID()))})},WrapDocument:function(element,parentId,resCallback){var markObjRequest=SpecialObject.CreateDocumentRequest(++this._nextAsyncID);this.sendToDotObjectManager(markObjRequest,function(dotObjManagerCookie){var proxy=new DotObjJSProxy(dotObjManagerCookie,parentId);resCallback(SpecialObject.CreateDotObj(proxy.getID()))})},InstallDotObjectSupport:function(){this._logger=new LoggerUtil("Content.DotObjUtil"),this._logger.info("InstallDotObjectSupport: Started going to install the Dot Object manager into HTML context"),window.addEventListener("UFT_DOT_OBJ_MARK_RESULT",this.onDotObjectMarkResult.bind(this),!1),BrowserServices.isRunningInPageContext?(DotObjectManagerInHTMLContext.setLogger(new LoggerUtil("DotObjectManagerInHTMLContext")),window.addEventListener("_QTP_Dot_Object",DotObjectManagerInHTMLContext.onMessageFromDotObjectInstance.bind(DotObjectManagerInHTMLContext),!1),window.addEventListener("UFT_DOT_OBJ_ADD_TO_MANAGED_OBJ",DotObjectManagerInHTMLContext.onAddObjectToManage.bind(DotObjectManagerInHTMLContext),!1)):(content.domSubscriber.startNamespace(),content.domSubscriber.addUtilityObject("ShadowDomUtil",ShadowDomUtil),content.domSubscriber.addUtilityObject("DotObjectManagerInHTMLContext",DotObjectManagerInHTMLContext,{_QTP_Dot_Object:"onMessageFromDotObjectInstance",UFT_DOT_OBJ_ADD_TO_MANAGED_OBJ:"onAddObjectToManage"}),content.domSubscriber.addScript("DotObjectManagerInHTMLContext.setLogger(_logger);"),content.domSubscriber.endNamespace())},sendToDotObjectManager:function(dataToSend,resultCallback){this._logger.trace("sendToDotObjectManager: Goint to send the following info to the mager:",dataToSend),this._callbacks[dataToSend.dotUtilObjAsyncID]=resultCallback;var markEvent=ContentUtils.createCrossOriginCustomEvent("UFT_DOT_OBJ_ADD_TO_MANAGED_OBJ",{detail:dataToSend});window.dispatchEvent(markEvent)},onDotObjectMarkResult:function(eventObj){var markResultDetails=eventObj.detail;if(this._logger.trace("onDotObjectMarkResult: Got the following mark result from the manager:",markResultDetails),!this._callbacks[markResultDetails.dotUtilObjAsyncID])return void this._logger.error("onDotObjectMarkResult: Got result without any request!!!");var callback=this._callbacks[markResultDetails.dotUtilObjAsyncID];delete this._callbacks[markResultDetails.dotUtilObjAsyncID],delete markResultDetails.dotUtilObjAsyncID,callback(markResultDetails)},_getElementUID:function(){return"UFT_"+(new Date).UTC+ ++this._nextUID}},DotObjectManagerInHTMLContext={_managedObjs:[],_nextToken:0,_logger:null,setLogger:function(logger){this._logger=logger},NativePropertyBatchQuery:function(msg,obj){var props=msg._data.args,res=props.map(function(prop){var propValue=this._getDomPropertyValue(obj,prop);return"object"==typeof propValue||Util.isLegacyObject(propValue)?this._addObjectToBeManaged(SpecialObject.CreateReferenceRequest(propValue)):propValue},this);return msg._data.manageReturnValueIfNeeded=!1,res},_getDomPropertyValue:function(obj,prop){var propValue=obj[this.getCaseInsensitiveName(prop,obj)];return null===propValue&&(propValue=""),propValue},onMessageFromDotObjectInstance:function(msgEvent){this._logger.trace("onMessageFromDotObjectInstance: Started");var msg=msgEvent.detail;if(!this[msg._msgType])return void this._logger.error("onMessageFromDotObjectInstance: Goi Unknown type of message:"+msg._msgType);var resMsg={_msgType:"DOT_OBJ_RESULT",_to:Util.shallowObjectClone(msg._to),_data:msg._data};try{this._logger.trace("onMessageFromDotObjectInstance: Handling the following request:",msg);var obj=this._obtainObjectToOperateOn(msg),resultVal=this[msg._msgType](msg,obj);msg._data.manageReturnValueIfNeeded&&("object"==typeof resultVal||Util.isLegacyObject(resultVal))&&(this._logger.debug("DotObjJSProxy.DotObjectHandler: The return value is an object lets add it to managed objects"),resultVal=this._addObjectToBeManaged(SpecialObject.CreateReferenceRequest(resultVal))),resMsg._data.result=resultVal}catch(e){this._logger.error("DotObjJSProxy.DotObjectHandler: There was an exception - exception message: "+e.message+"\nStack:"+e.stack),resMsg.status=this._getStatusFromException(e),resMsg.ex=e.message}resMsg.dotObjAsyncId=msg.dotObjAsyncId;var ev=new CustomEvent("_DOT_OBJ_RESULT",{detail:resMsg});return window.dispatchEvent(ev),!1},onAddObjectToManage:function(msgEvent){var objToManageDetails=msgEvent.detail;this._logger.trace("onAddObjectToManage: Got the following object to mark:",objToManageDetails),Util.assert(objToManageDetails.specialObj,"onAddObjectToManage: Got Mark event on non special obj!",this._logger);var res=this._addObjectToBeManaged(objToManageDetails),resultEvent=objToManageDetails.resultEventName||"UFT_DOT_OBJ_MARK_RESULT";this._logger.trace("onAddObjectToManage: Going to send the following result: ",res," using the evnet ",resultEvent);var ev=new CustomEvent(resultEvent,{detail:res});window.dispatchEvent(ev)},getObjectToManage:function(objToManageDetails){switch(this._logger.trace("getObjectToManage: Started for object type:"+objToManageDetails.type),objToManageDetails.type){case"DotObjMarkerElementRequest":var elements=Util.makeArray(document.querySelectorAll('[uft-uid*="'+objToManageDetails.objUID+'"]'));if(0===elements.length){var shadowRoots=ShadowDomUtil.findAllShadowRoots(document,this._logger);if(elements=Util.arrayReduce(shadowRoots,function(targetAOs,childElem){return targetAOs.concat(Util.makeArray(childElem.querySelectorAll('[uft-uid*="'+objToManageDetails.objUID+'"]')))}.bind(this),[]),0===elements.length)return this._logger.error("onAddObjectToManage: Failed find element to manage"),null}elements.length>1&&this._logger.warn("getObjectToManage: there are more than one element with UID:"+objToManageDetails.objUID+" Their number is:"+elements.length);var element=elements[0];return element.removeAttribute("uft-uid"),element;case"DotObjMarkerDocumentRequest":return document;case"DotObjMarkerReferenceRequest":return objToManageDetails.objRef;default:return this._logger.error("getObjectToManage: Unsupported type of object to manage"),null}},getCaseInsensitiveName:function(name,obj){if(name in obj)return name;var uc=name.toUpperCase();for(var p in obj)if(uc===p.toUpperCase())return p;return name},handleCallMethod:function(obj,methodName,args){if(Array.isArray(obj))switch(methodName){case"item":if("number"==typeof args[0])return obj[args[0]]}if(!(methodName in obj))throw new Error("MethodNotFound");return args=args.map(function(arg){return this._getManagedObjectIfPresent(arg)},this),obj[methodName].apply(obj,args)},DOT_OBJ_BUILD_INFO:function(msg,obj){var res={};for(var prop in obj)try{if(Util.isLegacyObject(obj[prop]))continue;var type=typeof obj[prop];null===obj[prop]&&(type="string"),res[prop]=type}catch(ex){this._logger.warn("Faile on property:"+prop+" The error is:"+ex)}return res.toString="function",Array.isArray(obj)&&(res.item="function"),res},DOT_OBJ_GET_PROPERTY:function(msg,obj){return this._getDomPropertyValue(obj,msg._data.propName)},DOT_OBJ_PUT_PROPERTY:function(msg,obj){this._logger.trace("DotObjectHandler: Got message for DOT_OBJ_PUT_PROPERTY"),obj[this.getCaseInsensitiveName(msg._data.propName,obj)]=msg._data.valToPut,delete msg._data.valToPut},DOT_OBJ_CALL_METHOD:function(msg,obj){this._logger.trace("DotObjectHandler: Got message for DOT_OBJ_CALL_METHOD");var methodName=this.getCaseInsensitiveName(msg._data.methodName,obj);return this.handleCallMethod(obj,methodName,msg._data.args)},_obtainObjectToOperateOn:function(msg){var dotObjManagerToken=msg._data.objToOperate;return Util.assert(dotObjManagerToken.specialObj,"DotObjectManagerInHTMLContext._obtainObjectToOperateOn: Got object token which is not supported",this._logger),delete msg._data.objToOperate,this._managedObjs[dotObjManagerToken.cookie]},_addObjectToBeManaged:function(objToManageDetails){var objToManage=this.getObjectToManage(objToManageDetails),res=SpecialObject.CreateDotObjInHTML(++this._nextToken,objToManageDetails.dotUtilObjAsyncID);return this._logger.trace("DotObjectManagerInHTMLContext.onAddObjectToManage: Adding the object and returning the following info:",res),this._managedObjs[res.cookie]=objToManage,res},_getManagedObjectIfPresent:function(objToManageDetails){return objToManageDetails instanceof Object&&!0===objToManageDetails.specialObj&&objToManageDetails.hasOwnProperty("cookie")&&objToManageDetails.hasOwnProperty("type")?this._managedObjs[objToManageDetails.cookie]:objToManageDetails},_getStatusFromException:function(e){return"MethodNotFound"===e.message?e.message:"ERROR"}},HTMLConsoleAppender={append:function(level,logFunction,logMsg){var logFunc=console[logFunction]||console.log;logFunc&&logFunc.call(console,logMsg)}},HTMLWebSocketsAppender={_threshold:0,_logWebSocket:null,_enabled:!0,_buffer:"",port:0,_onOpen:function(){this.enabled=!0,this._logWebSocket.send(this._buffer),delete this._buffer},_onClose:function(){delete this._buffer,this.enabled=!1},_onError:function(){delete this._buffer,this.enabled=!1},_connect:function(){this._logWebSocket=new WebSocket("ws://127.0.0.1:"+this.port),this._logWebSocket.onopen=this._onOpen.bind(this),this._logWebSocket.onclose=this._onClose.bind(this),this._logWebSocket.onerror=this._onError.bind(this)},_getFormattedMessage:function(logMsg,level){return(new Date).getTime()+" # "+new Date+" ["+level+"] - "+logMsg},append:function(level,sLevel,logMsg){if(this._enabled)switch(this._logWebSocket||this._connect(),this._logWebSocket.readyState){case this._logWebSocket.CONNECTING:this._buffer+=this._getFormattedMessage(logMsg,sLevel)+"\n";break;case this._logWebSocket.OPEN:this._logWebSocket.send(this._getFormattedMessage(logMsg,sLevel));break;case this._logWebSocket.CLOSING:case this._logWebSocket.CLOSED:delete this._buffer,this.enabled=!1}}},HTMLLogger={_threshold:4e4,_appenderList:[],_initialized:!1,trace:function(msg){this._log(1e4,"log",msg)},prettyTrace:function(msg){this._log(1e4,"log",msg)},debug:function(msg){this._log(2e4,"log",msg)},prettyDebug:function(msg){this._log(2e4,"log",msg)},info:function(msg){this._log(3e4,"log",msg)},warn:function(msg){this._log(4e4,"warn",msg)},error:function(msg){this._log(5e4,"error",msg)},fatal:function(msg){this._log(6e4,"error",msg)},_addAppender:function(appender){appender&&this._appenderList.push(appender)},_init:function(){this._appenderList=[],this._addAppender(HTMLConsoleAppender),this.remoteLogging&&this.remoteLogging.enabled&&(HTMLWebSocketsAppender.port=this.remoteLogging.port,this._addAppender(HTMLWebSocketsAppender)),this._initialized=!0},_log:function(level,logFunction,logMsg){level<this._threshold||(this._initialized||this._init(),this._appenderList.forEach(function(appender){appender.append(level,logFunction,logMsg)}))}};DomRequestSubscriber.prototype={_namespaceScript:"",_htmlLogger:null,addDOMSideEventHandler:function(eventName,func,contextObj,contextObjName){contextObjName=contextObjName||"contextObj",this.handlers+="window.addEventListener('"+eventName+"', (function("+contextObjName+") { return "+func.toString()+";})("+JSON.stringify(contextObj)+"));"},addMessageHandler:function(func,contextObj,contextObjName){this.addDOMSideEventHandler("message",func,contextObj,contextObjName)},injectHandlers:function(){ContentUtils.evalInDocument(this.handlers),this.handlers=""},startNamespace:function(){this._namespaceScript="( function(){",this.addUtilityObject("Util",Util),this.addUtilityObject("SpecialObject",SpecialObject),this.addUtilityObject("HTMLConsoleAppender",HTMLConsoleAppender),
this.addUtilityObject("HTMLWebSocketsAppender",HTMLWebSocketsAppender),this.addUtilityObject("_logger",this._htmlLogger),this.addUtilityObject("RtIdUtils",RtIdUtils),this.addUtilityObject("ContentUtils",ContentUtils),this.addUtilityObject("BrowserServices",BrowserServices)},addUtilityObject:function(name,obj,eventHandlers){var objData=JSON.stringify(obj);this._namespaceScript+="var "+name+"="+objData,this._namespaceScript=this._namespaceScript.substring(0,this._namespaceScript.length-1),"{}"!==objData&&(this._namespaceScript+=","),this._addFunctionsFromObj(obj),this._namespaceScript=this._namespaceScript.substring(0,this._namespaceScript.length-1),this._namespaceScript+="};";var eventHandlersToInject=eventHandlers||{};obj.onMessageFromContent&&(eventHandlersToInject.message="onMessageFromContent"),this.addObjectEventHandlers(name,eventHandlersToInject)},addObjectEventHandlers:function(objName,eventHandlers){Object.keys(eventHandlers).forEach(function(eventName){this._namespaceScript+="window.addEventListener('"+eventName+"',"+objName+"."+eventHandlers[eventName]+".bind("+objName+"),false);"}.bind(this))},addFunction:function(func){this._namespaceScript+=func.toString()+";"},addScript:function(script){this._namespaceScript+=script},endNamespace:function(){this._namespaceScript+="})();",ContentUtils.evalInDocument(this._namespaceScript)},initHTMLLogger:function(logSettings){this._htmlLogger=HTMLLogger;var defaultLoggingLevel=logSettings["log:defaultLevel"]||LoggerUtilSettings.DEFAULT_LOG_LEVEL;this._htmlLogger._threshold=log4javascript.Level[defaultLoggingLevel].level,this._htmlLogger.remoteLogging=logSettings.remoteLogging},_addFunctionsFromObj:function(obj){for(var key in obj)"function"==typeof obj[key]&&(this._namespaceScript+=key+":"+obj[key].toString()+",")}},BrowserContentHelper.prototype={_logger:null,_frameAo:null,_attrs:{micclass:function(){return["Browser"]},abs_x:function(){return this._frameAo.GetAttrSync("window_rect").left},abs_y:function(){return this._frameAo.GetAttrSync("window_rect").top}},_attrsFromFrame:{title:"title",url:"url","logical name":"logical name",name:"title",height:"height",width:"width"},getID:function(){return{browser:this._frameAo.getID().browser,page:-1,frame:-1,object:null}},GetAttrSync:function(property){this._logger.trace("GetAttrSync: query property "+property);var func=this._attrs[property];return func?func.call(this):this._attrsFromFrame[property]?this._frameAo.GetAttrSync(this._attrsFromFrame[property]):(this._logger.trace("GetAttrSync: returning partial value for Browser property: "+property),AttrPartialValueUtil.WrapValue(property,null,null))},QueryAttributesSync:function(attrsObj){this._logger.trace("QueryAttributesSync: called for attributes: ",attrsObj);var attrsObjRes={};return Object.keys(attrsObj).forEach(function(attr){attrsObjRes[attr]=this.GetAttrSync(attr)},this),attrsObjRes}};var FrameInHTMLContext={_id:{},_logger:null,_currentGlobalErrorHandler:null,_callbacks:{},_nextCallbackID:-1,setLogger:function(logger){this._logger=logger},onMessageFromContent:function(msgEventObj){var requestMsg=msgEventObj.data;if("object"==typeof requestMsg&&("Frame"===requestMsg.source||"FrameInHTMLContext"===requestMsg.source))switch(requestMsg.msgType){case"request":this.handleRequest(msgEventObj.source,requestMsg);break;case"response":this.handleResponse(requestMsg)}},RunOnDocEventHandler:function(msgEvent){var msg=msgEvent.detail;try{var result=this._embedRunScriptHelper(msg._data.script);if(Util.isFunction(result)||Util.isLegacyObject(result)||result&&(Util.isObject(result)||Array.isArray(result))){this._logger.debug("FrameInHTMLContext.RunOnDocEventHandler: The result is object lets notify the .Object manager");var request=SpecialObject.CreateReferenceRequest(result);return void this.sendRequestToDotObjectManager(request,function(dotObjToken){this._logger.trace("FrameInHTMLContext.RunOnDocEventHandler: Going to send back the following result:"+Util.jsonStringify(dotObjToken,this._logger)),msg._data.result=dotObjToken;var ev=new CustomEvent("_QTP_RUN_SCRIPT_RESULT",{detail:msg});window.dispatchEvent(ev)}.bind(this))}msg._data.result=result}catch(e){msg._data.ex=e}this._logger.trace("FrameInHTMLContext.RunOnDocEventHandler: Going to send back the following result:"+Util.jsonStringify(msg._data.result,this._logger));var ev=new CustomEvent("_QTP_RUN_SCRIPT_RESULT",{detail:msg});window.dispatchEvent(ev)},RunOnDocWithAttrEventHandler:function(){var result={};try{var script=window.document.documentElement.getAttribute("_QTP_Script");result.res=this._embedRunScriptHelper(script)}catch(e){result.ex="[Exception message]:"+e.message+"\n"+e.stack}window.document.documentElement.setAttribute("_QTP_Result",JSON.stringify(result))},_embedRunScriptHelper:function(script){function theUftRunScriptHelper(){window._uft_run_script_helper=function(Util,ContentUtils,ShadowDomUtil){return"#TheScript#"}}var wrappedScript=Util.functionStringify(theUftRunScriptHelper);wrappedScript=Util.safeReplace(wrappedScript,'"#TheScript#"',script),ContentUtils.evalInDocument(wrappedScript);try{return window._uft_run_script_helper(Util,ContentUtils,ShadowDomUtil)}finally{delete window._uft_run_script_helper}},onMarkObjectResult:function(eventObj){var dotObjMarkResult=eventObj.detail;if(this._logger.trace("FrameInHTMLContext.onMarkObjectResult: started for response info: "+Util.jsonStringify(dotObjMarkResult,this._logger)),!Util.isUndefined(dotObjMarkResult.dotUtilObjAsyncID)){if(!this._callbacks[dotObjMarkResult.dotUtilObjAsyncID])return void this._logger.error("FrameInHTMLContext.onMarkObjectResult:: There is a callback id ("+dotObjMarkResult.dotUtilObjAsyncID+") that has no callback");var handlerID=dotObjMarkResult.dotUtilObjAsyncID;delete dotObjMarkResult.dotUtilObjAsyncID;try{delete dotObjMarkResult.resultEventName,this._callbacks[handlerID].handler(dotObjMarkResult)}catch(e){this._logger.error("FrameInHTMLContext.onMarkObjectResult: Exception occurred when calling the callback."+e)}finally{delete this._callbacks[handlerID]}}},handleRequest:function(source,requestMsg){this._logger.debug("FrameInHTMLContext.handleRequest: started for request message: ",requestMsg);var msg=requestMsg.data;if(msg._msgType&&this[msg._msgType]){this._setGlobalErrorHandler(requestMsg,source);try{this[msg._msgType](msg,function(resMsg){this._logger.trace("FrameInHTMLContext.handleRequest: the result is:\n",resMsg),requestMsg.msgType="response",requestMsg.source="FrameInHTMLContext",requestMsg.data=resMsg,this._logger.trace("FrameInHTMLContext.handleRequest: Going to send the following result:\n",requestMsg),source.postMessage(requestMsg,"*")}.bind(this))}catch(e){this._logger.error("FrameInHTMLContext.handleRequest: Error occurred:\n"+e),this._currentGlobalErrorHandler(e)}finally{this._resetGlobalErrorHandler()}}},handleResponse:function(responsetMsg){if(!Util.isUndefined(responsetMsg.frameInHTHMLCallbackID)){if(this._logger.prettyTrace("FrameInHTMLContext.handleResponse: started for response message: ",responsetMsg),!this._callbacks[responsetMsg.frameInHTHMLCallbackID])return void this._logger.error("FrameInHTMLContext.handleResponse: There is a callback id ("+responsetMsg.frameInHTHMLCallbackID+") that has no callback");this._currentGlobalErrorHandler=this._callbacks[responsetMsg.frameInHTHMLCallbackID].globalErrorHandler;try{this._callbacks[responsetMsg.frameInHTHMLCallbackID].handler(responsetMsg.data)}catch(e){this._logger.error("FrameInHTMLContext.handleResponse: Exception occurred when calling the callback. Call global error handler. Exception:"+e),this._currentGlobalErrorHandler?this._currentGlobalErrorHandler(e):this._logger.warn("FrameInHTMLContext.handleResponse: global error handler not set")}finally{this._resetGlobalErrorHandler(),delete this._callbacks[responsetMsg.frameInHTHMLCallbackID]}}},sendMessage:function(targetWin,msg,callback){this._logger.trace("FrameInHTMLContext.sendMessage: started");var request={frameInHTHMLCallbackID:++this._nextCallbackID,msgType:"request",source:"FrameInHTMLContext",data:msg};this._callbacks[request.frameInHTHMLCallbackID]={handler:callback,globalErrorHandler:this._currentGlobalErrorHandler},targetWin.postMessage(request,"*")},sendRequestToDotObjectManager:function(dataToSend,resCallback){this._logger.trace("FrameInHTMLContext.sendRequestToDotObjectManager: Started"),dataToSend.dotUtilObjAsyncID=++this._nextCallbackID,dataToSend.resultEventName="UFT_DOT_OBJ_MARK_FOR_RUNSCRIPT_RESULT",this._callbacks[dataToSend.dotUtilObjAsyncID]={handler:resCallback,globalErrorHandler:null};var dotObjManagerMarkRequestEvent=new CustomEvent("UFT_DOT_OBJ_ADD_TO_MANAGED_OBJ",{detail:dataToSend});window.dispatchEvent(dotObjManagerMarkRequestEvent)},buildLayoutTree:function(msg,callback,win){this._logger.debug("FrameInHTMLContext.buildLayoutTree: started for frame with id:"+Util.jsonStringify(this._id,this._logger));var comID=null;Util.isUndefined(win)&&(win=window,comID=this._id);var node={id:comID,children:[]},excludRtidsArr=msg._data.exclude?msg._data.exclude:[],includeVisibleFramesOnly=!!msg._data.visibleFramesOnly,rootElem=win.document,frameElemList=ContentUtils.querySelectorAll(rootElem,"IFRAME,FRAME");frameElemList=frameElemList.filter(function(frame){return msg._data.isFrameSupportXSS||Util.isFrameXSS(frame,win)});var framesToProcess=frameElemList.length;if(0===framesToProcess)return this._logger.trace("FrameInHTMLContext.buildLayoutTree: There are no frames to process returning the a single node"),msg._data=node,void callback(msg);var logger=this._logger;frameElemList.forEach(function(frameElem,i){function checkIfGotAllResponses(){--framesToProcess>0||(logger.debug("FrameInHTMLContext.buildLayoutTree: Finished processing the frames calling our callback"),msg._data=node,callback(msg),window&&window._hpmcBridge&&(window._hpmcBridge.readyState=!0))}function isFrameExcluded(excludedRtIdsArr,currentComId,previousComId){return excludedRtIdsArr.some(function(rtid2Exclude){return RtIdUtils.IsRTIDEqual(currentComId,rtid2Exclude)||RtIdUtils.IsRTIDEqual(previousComId,rtid2Exclude)})}var request={_msgType:msg._msgType,_data:msg._data};if(logger.debug("FrameInHTMLContext.buildLayoutTree: Procesing frame "+(i+1)+" out of "+frameElemList.length),frameElem.__QTP__OBJ&&frameElem.__QTP__OBJ.comID){if(isFrameExcluded(excludRtidsArr,frameElem.__QTP__OBJ.comID,frameElem.__QTP__OBJ.previousComID))return logger.trace("FrameInHTMLContext.buildLayoutTree: adding current frame to tree but excluding subtree, frame id: ",Util.jsonStringify(frameElem.__QTP__OBJ.comID,logger)," - previous frame id: ",Util.jsonStringify(frameElem.__QTP__OBJ.previousComID,logger)),node.children[i]={id:frameElem.__QTP__OBJ.comID,previousId:frameElem.__QTP__OBJ.previousComID,children:[],isExcluded:!0},void checkIfGotAllResponses();if(includeVisibleFramesOnly&&"none"===window.getComputedStyle(frameElem,null).getPropertyValue("display"))return logger.trace("FrameInHTMLContext.buildLayoutTree: do nothing to invisible frame, frame id: ",Util.jsonStringify(frameElem.__QTP__OBJ.comID,logger)),void checkIfGotAllResponses();var gotResponse=!1,timeoutTriggered=!1;logger.debug("FrameInHTMLContext.buildLayoutTree: Sending message to: "+Util.jsonStringify(frameElem.__QTP__OBJ.comID)),this.sendMessage(frameElem.contentWindow,request,function(response){logger.trace("FrameInHTMLContext.buildLayoutTree: "),gotResponse=!0,node.children[i]=response._data,timeoutTriggered||checkIfGotAllResponses()}),Util.setTimeout(function(){gotResponse||(logger.warn("FrameInHTMLContext.buildLayoutTree: Send message to frame got no response, src="+frameElem.src),timeoutTriggered=!0,node.children[i]={id:null,children:[]},checkIfGotAllResponses())},1e3)}else{logger.debug("FrameInHTMLContext.buildLayoutTree: Uninjectable frame, need to handle it ourself: "+frameElem.src),frameElem.__QTP__OBJ&&logger.warn("buildLayoutTree: Got known frame with no COM ID");try{if(!frameElem.contentWindow)return logger.debug("FrameInHTMLContext.buildLayoutTree: [DEBUG] - Got empty frame, ignoring this frame"),node.children[i]={id:null,children:[]},void checkIfGotAllResponses();if(!frameElem.contentWindow.frameElement)return logger.error("FrameInHTMLContext.buildLayoutTree: [ERROR] - XSS"),node.children[i]={id:null,children:[]},void checkIfGotAllResponses()}catch(e){return logger.error("FrameInHTMLContext.buildLayoutTree: [ERROR] - XSS page that we're not injected to: "+frameElem.src),node.children[i]={id:null,children:[]},void checkIfGotAllResponses()}this.buildLayoutTree(request,function(response){logger.trace("FrameInHTMLContext.buildLayoutTree: Got resoponse "+Util.jsonStringify(response,logger)),node.children[i]=response._data,checkIfGotAllResponses()},frameElem.contentWindow)}},this)},FRAME_FROM_POINT:function(msg,callback){var point=msg._data.point;this._logger.trace("FRAME_FRON_POINT: Started with point {"+point.x+", "+point.y+"}");var e=null;if(msg._data.isUseMouseEventForSpyElement?e=window.__uft_mouseover_elem:(e=document.elementFromPoint(point.x,point.y),ShadowDomUtil.isOpenShadowRoot(e)&&(e=ShadowDomUtil.getElemInShadowRootByPoint(e,point,this._logger))),null===e)return this._logger.error("element from point returned null for point {"+point.x+", "+point.y+"}"),msg.status="ERROR",void callback(msg);switch(this._logger.debug("FRAME_FROM_POINT: Got the following element from point:"+e),e.tagName){case"FRAME":case"IFRAME":var childInfo=this._getChildFrameInfo(e,msg._data.point);return this._logger.debug("FRAME_FROM_POINT: Child info for frame: comID->"+Util.jsonStringify(childInfo.comID,this._logger)+", point->"+Util.jsonStringify(childInfo.point,this._logger)+", elem->"+childInfo.elem),null===childInfo.comID?(this._logger.debug("FRAME_FROM_POINT: comID is NULL - return"),void callback(msg)):(msg._to=Util.shallowObjectClone(childInfo.comID),msg._data.point=childInfo.point,void this.sendMessage(e.contentWindow,msg,callback));default:return msg._data.WEB_PN_ID=this._id,void callback(msg)}},_getChildFrameInfo:function(f,point){var res={comID:null,point:point};if(Util.assert(f,"FRAME_FROM_POINT: Abnormal termination of recursion",this._logger),!f)return res;var frameClientRect=f.getBoundingClientRect(),style=getComputedStyle(f);if(res.point.y-=frameClientRect.top+parseInt(style.paddingTop,10),res.point.x-=frameClientRect.left+parseInt(style.paddingLeft,10),f.__QTP__OBJ)return res.comID=f.__QTP__OBJ.comID,res;var innerFrameElem=f.contentWindow.document.elementFromPoint(res.point.x,res.point.y);return!innerFrameElem||"IFRAME"!==innerFrameElem.tagName&&"FRAME"!==innerFrameElem.tagName?(this._logger.error("FRAME_FROM_POINT: The lowest frame is not injectable"),res):this._getChildFrameInfo(innerFrameElem,res.point)},_resetGlobalErrorHandler:function(){this._currentGlobalErrorHandler=null},_setGlobalErrorHandler:function(requestMsg,src){this._currentGlobalErrorHandler=function(origMsg,error){origMsg.status="ERROR",origMsg.details=error?error.message:null,requestMsg.data=origMsg,requestMsg.msgType="response",requestMsg.source="FrameInHTMLContext",src.postMessage(requestMsg,"*")}.bind(this,requestMsg.data)}},FrameBehavior={_attrs:{"client rect":function(){return{top:Math.floor(this._elem.clientTop),left:Math.floor(this._elem.clientLeft),width:Math.floor(this._elem.clientWidth),height:Math.floor(this._elem.clientHeight)}}},_methods:{"calculate relative rect":function(msg,resultCallback){msg._data.continuePropogation=!0;var width,height,rect=this.GetAttrSync("rect"),clientRect=this.GetAttrSync("client rect"),style=getComputedStyle(this._elem);0===msg._data.rect.bottom&&0===msg._data.rect.right?(width=clientRect.width,height=clientRect.height):(width=msg._data.rect.right-msg._data.rect.left,height=msg._data.rect.bottom-msg._data.rect.top),msg._data.rect.top+=rect.top+clientRect.top+parseInt(style.paddingTop,10),msg._data.rect.left+=rect.left+clientRect.left+parseInt(style.paddingLeft,10),msg._data.rect.bottom=msg._data.rect.top+height<rect.bottom?msg._data.rect.top+height:rect.bottom,msg._data.rect.right=msg._data.rect.left+width<rect.right?msg._data.rect.left+width:rect.right,resultCallback(msg)}}},PageBehavior={_attrs:{},_methods:{"calculate relative rect":function(msg,resultCallback){var logger=this._logger;if(logger.trace("PageBehavior: on command 'calculate relative rect' with ",msg),!msg._data.screen_coord)return msg._data.rect.bottom=Math.max(msg._data.rect.bottom,document.documentElement.getBoundingClientRect().bottom),msg._data.rect.right=Math.max(msg._data.rect.right,document.documentElement.getBoundingClientRect().right),void resultCallback(msg);var pageMsg=new Msg("QUERY_ATTR",msg._data.pageId,{screen_rect:null});content.dispatcher.sendMessage(pageMsg,null,"chrome",function(resMsg){var rect=resMsg._data.screen_rect;logger.trace("PageBehavior: command 'calculate relative rect' got screen_rect from the page: ",rect),msg._data.rect.left+=rect.left,msg._data.rect.top+=rect.top,0===msg._data.rect.right?msg._data.rect.right=rect.right:msg._data.rect.right+=rect.left,0===msg._data.rect.bottom?msg._data.rect.bottom=rect.bottom:msg._data.rect.bottom+=rect.top,logger.trace("PageBehavior: command 'calculate relative rect' calculated result rect: ",msg._data.rect),resultCallback(msg)})},MAKE_VISIBLE:function(msg,resultCallback){resultCallback(msg)}}};Frame.prototype={_isPage:!1,_recorder:null,id:null,_callbacks:{},_nextCallbackID:-1,_parentPageId:null,_runOnDocCallbackMap:[],_elementInspector:null,_objIdentificationProps:null,_ignoreBrowserDescription:!1,_isUseMouseEventForSpyElement:!1,init:function(){this._logger.trace("Init: Starting frame initialization.");var registrationData={isPage:this._isPage};this.id={browser:-1,page:-1,frame:-1,object:null},content.dispatcher.addListener("RegistrationResult",this),this._isPage?(registrationData.title=this.GetAttrSync("title"),registrationData.url=this.GetAttrSync("url"),registrationData.window_rect=this.GetAttrSync("window_rect"),content.dispatcher.connect(registrationData)):content.dispatcher.connect(registrationData)},buildLayoutTree:function(msg,callback){if(!this._isPage)return this._logger.error("buildLayoutTree: Method should start from page!!"),void callback(msg);msg._data.isFrameSupportXSS=BrowserServices.isFrameSupportXSS?1:0,this.sendRequestToHTMLContext(msg,callback)},onMessage:function(msg,resultCallback){this._logger.trace("onMessage: Started with the following msg:",msg),this[msg._msgType]||(this._logger.trace("onMessage Unhandled msg: "+msg._msgType),ErrorReporter.ThrowNotImplemented("Frame."+msg._msgType)),this[msg._msgType](msg,resultCallback)},DISPATCH_TO_FRAME_ELEM:function(msg,resCallback){this._logger.trace("DISPATCH_TO_FRAME_ELEM: Started");var ao;if(msg._data.targetIsPage)this._logger.debug("DISPATCH_TO_FRAME_ELEM: Message meant for page"),ao=content.kitsManager.createPageAO(this.getID());else{this._logger.debug("DISPATCH_TO_FRAME_ELEM: Message meant for Frame element");var associatedElement=ContentUtils.findFrameElemByID(msg._data.frameElemComID,document,this._logger);Util.assert(associatedElement,"DISPATCH_TO_FRAME_ELEM: Couldn't find associated frame element",this._logger),ao=content.kitsManager.createAO(associatedElement,this.getID())}ao.onMessage(msg._data.frameElemMsg,function(resMsg){if(msg._data.frameElemMsg=resMsg,msg._data.frameElemMsg._data.continuePropogation)if(delete msg._data.frameElemMsg._data.continuePropogation,this._isPage){this._logger.debug("DISPATCH_TO_FRAME_ELEM: Propogating to page AO");var ao1=content.kitsManager.createPageAO(this.getID());ao1.onMessage(msg._data.frameElemMsg,function(resMsg2){msg._data.frameElemMsg=resMsg2,resCallback(msg)})}else{this._logger.debug("DISPATCH_TO_FRAME_ELEM: Continue propogation of the message to our parent frame");var parentRequestMsg=new Msg(msg._msgType,content.dispatcher.getContainingContextID(),{});parentRequestMsg._data.frameElemMsg=msg._data.frameElemMsg,parentRequestMsg._data.frameElemComID=this.getID(),content.dispatcher.sendMessage(parentRequestMsg,null,null,function(resMsg){msg._data.frameElemMsg=resMsg._data.frameElemMsg,resCallback(msg)})}else resCallback(msg)}.bind(this))},buildNestedMessage:function(msg){this._logger.debug("buildNestedMessage: Creating message for querying our frame element");var ret=new Msg(MSG_TYPES.DISPATCH_TO_FRAME_ELEM,Util.shallowObjectClone(msg._to),{});return ret._data.frameElemMsg=new Msg(msg._msgType,msg._to,msg._data||{}),ret._to=content.dispatcher.getContainingContextID(),ret._to.frame<0&&(ret._to=this.getID(),ret._data.targetIsPage=!0),ret._data.frameElemComID=this.getID(),ret},getAttrFromParent:function(name,msg,resultCallback){if(this._isPage)return void resultCallback(null);var reqData={};"attribute"===name||"style"===name?reqData=msg._data:reqData[name]=null;var reqMsg=new Msg("QUERY_ATTR",msg._to,reqData),frameElemMsg=this.buildNestedMessage(reqMsg);this._logger.debug("getAttrFromParent: Need to send query for our frame element for: "+name),content.dispatcher.sendMessage(frameElemMsg,null,null,function(resMsg){resultCallback(resMsg._data.frameElemMsg._data[name])})},getElementAttribute:function(prop,origMsg,resCallback){if(this._logger.trace("getElementAttribute: Started for property: "+prop),this._isPage){var ao=content.kitsManager.createPageAO(this.getID()),queyMsg=new Msg("QUERY_ATTR",ao.getID(),{});queyMsg._data[prop]=origMsg._data[prop],ao.onMessage(queyMsg,resCallback)}else this.getAttrFromParent(prop,origMsg,resCallback)},QUERY_ATTR:function(msg,resultCallback){this._logger.trace("QUERY_ATTR: Started");var attrs=Object.keys(msg._data);if(attrs.length<1)return this._logger.warn("QUERY_ATTR: Called with no attributes"),void resultCallback(msg);var multiResponses=new MultipleResponses(attrs.length);attrs.forEach(function(valName){this.GetAttr(valName,msg,multiResponses.callback(function(isDone,val){val=Util.cleanSpecialChars(val),this._logger.trace("QUERY_ATTR:",valName,"=",val),msg._data[valName]=val,isDone&&(this._logger.debug("QUERY_ATTR: Finished querying all the requested attributes"),resultCallback(msg))}.bind(this)))}.bind(this))},INTERNAL_BATCH_QUERYATTR:function(msg,resCallback){if(this._logger.trace("INTERNAL_BATCH_QUERYATTR: Started"),msg._data.msgs.length<1)return this._logger.error("INTERNAL_BATCH_QUERYATTR: Got Batch Query fro no object ?!?!"),void resCallback(msg);var logger=this._logger,waitForAllMessages=new MultipleResponses(msg._data.msgs.length);msg._data.msgs.forEach(function(objMsg,index){content.dispatcher.sendMessage(objMsg,null,null,waitForAllMessages.callback(function(isDone,resMsg){msg._data.msgs[index]=resMsg,isDone&&(logger.debug("INTERNAL_BATCH_QUERYATTR: Finished with all object, let wrap it up"),resCallback(msg))}))},this)},CMD_BROWSER_BACK:function(msg,resultCallback){this._logger.trace("CMD_BROWSER_BACK"),msg.delay=!0,resultCallback(msg),Util.setTimeout(function(){window.history.back()},12)},CMD_BROWSER_FORWARD:function(msg,resultCallback){this._logger.trace("CMD_BROWSER_FORWARD"),msg.delay=!0,resultCallback(msg),Util.setTimeout(function(){window.history.forward()},12)},CMD_BROWSER_REFRESH:function(msg,resultCallback){this._logger.trace("CMD_BROWSER_REFRESH"),msg.delay=!0,resultCallback(msg),window.location.reload()},CMD_BROWSER_NAVIGATE:function(msg,resultCallback){this._logger.trace("CMD_BROWSER_NAVIGATE: started");var url=msg._data.url;msg.delay=!0,resultCallback(msg),window.location.href=url},FRAME_FROM_POINT:function(msg,resultCallback){this._logger.trace("FRAME_FROM_POINT: started"),this._isUseMouseEventForSpyElement&&(msg._data.isUseMouseEventForSpyElement=this._isUseMouseEventForSpyElement),this.sendRequestToHTMLContext(msg,resultCallback)},_initInspectionMode:function(mode,inspectionOptions){switch(this._logger.trace("_handleInspectionMode: started with mode: "+mode),this._elementInspector||(BrowserServices.getElementInspector?this._elementInspector=BrowserServices.getElementInspector(this.getID()):this._elementInspector=new ElementInspector(this.getID())),mode){case"spy":this._logger.info("_handleInspectionMode: Starting spy"),this._elementInspector.startSpy({_data:inspectionOptions});break;case"record":this._logger.info("_handleInspectionMode: Starting record"),this._startRecord()}},SRVC_SET_GLOBAL_VARIABLES_INTERNAL:function(msg,resultCallback){this._logger.trace("SRVC_SET_GLOBAL_VARIABLES_INTERNAL: Started"),msg._data.objectidentificationproperties&&(this._objIdentificationProps=JSON.parse(msg._data.objectidentificationproperties),this._logger.debug("frame.SRVC_SET_GLOBAL_VARIABLES_INTERNAL - setting OIP")),null!=msg._data.WebActivityState&&this._handleWebActivityStateSetting(msg._data.WebActivityState),null!=msg._data.tagstobreakinterestingaoloop&&this._recorder&&this._recorder.updateTagsToBreakInterestingAOLoop(msg._data.tagstobreakinterestingaoloop),null!=msg._data.waitforwebdrivermessagepulltimeout&&this._recorder&&this._recorder.updateWaitForWebDriverMessagePullTimeout(msg._data.waitforwebdrivermessagepulltimeout),null!=msg._data.browsersusingmouseeventforspyelement&&this._initSpyElemMode(msg._data.browsersusingmouseeventforspyelement.split(";")),resultCallback(msg)},SRVC_SET_EVENT_CONFIGURATION_INTERNAL:function(msg,resultCallback){this._logger.trace("SRVC_SET_EVENT_CONFIGURATION: Started"),this._recorder.updateEventConfig(msg._data.config),resultCallback(msg)},_handleWebActivityStateSetting:function(webActivityState){this._logger.trace("_handleWebActivityState: Started"),1===webActivityState?(this._logger.trace("_handleWebActivityState: starting record"),this._startRecord()):2===webActivityState?(this._logger.trace("_handleWebActivityState: starting replay"),BrowserServices.runStarted&&BrowserServices.runStarted()):(this._logger.trace("_handleWebActivityState: stopping record/replay"),this._stopRecord(),BrowserServices.runEnded&&BrowserServices.runEnded())},_startRecord:function(){this._recorder.startRecord()},_stopRecord:function(){this._recorder.stopRecord()},_initSpyElemMode:function(browsers){this._logger.trace("_initSpyElemMode: started with browsers using mouse event for spy element: "+browsers);var browser=window._QTP&&window._QTP.WebDriverInfo&&window._QTP.WebDriverInfo.WebDriverType;if(!browser){var browserTypeVersion=Util.browserApplicationVersion();browser=browserTypeVersion.slice(0,browserTypeVersion.lastIndexOf(" "))}for(var i=0;i<browsers.length;++i)if(browser==browsers[i])return void(this._isUseMouseEventForSpyElement=!0)},_internalSpyStart:function(msg,resultCallback){this._elementInspector?this._elementInspector.startSpy(msg,resultCallback):(this._logger.error("_internalSpyStart: no element inspector found"),resultCallback(msg))},_internalSpyEnd:function(msg,resultCallback){this._elementInspector?this._elementInspector.stopSpy(msg,resultCallback):(this._logger.warn("_internalSpyEnd: no element inspector found"),resultCallback(msg))},CMD_SPY_START:function(msg,resultCallback){this._logger.trace("CMD_SPY_START: Started"),Util.assert(this._elementInspector,"CMD_SPY_START: element inspector is null",this._logger),this._internalSpyStart(msg,resultCallback)},CMD_SPY_END:function(msg,resultCallback){this._logger.trace("CMD_SPY_END: Started"),Util.assert(this._elementInspector,"CMD_SPY_END: element inspector is null",this._logger),this._internalSpyEnd(msg,resultCallback)},CMD_MONITOR_MOUSE_START:function(msg,resultCallback){if(!BrowserServices.isSupportMonitorMouseMove)return resultCallback(msg);this._logger.trace("CMD_MONITOR_MOUSE_START: called"),this._internalSpyStart(msg,resultCallback)},CMD_MONITOR_MOUSE_END:function(msg,resultCallback){if(!BrowserServices.isSupportMonitorMouseMove)return resultCallback(msg);this._logger.trace("CMD_MONITOR_MOUSE_END: called"),this._internalSpyEnd(msg,resultCallback)},SRVC_LOAD_KIT:function(msg,resultCallback){var progid=msg._data.progid;this._logger.trace("SRVC_LOAD_KIT: started on "+progid),"Mercury.WebExtKit"===progid?this._loadExtToolkits(msg._data.toolkits):this.warnUnimplemented("Browser.SRVC_LOAD_KIT: "+progid),resultCallback(msg)},QUERY_OBJ_POINT_TO_ID:function(msg,resultCallback){this._logger.trace("QUERY_OBJ_POINT_TO_ID: Started"),this._calcRelativeRect(msg,!0,function(frameAbsRect){msg._data.pos.x-=frameAbsRect.left,msg._data.pos.y-=frameAbsRect.top,this._logger.trace("QUERY_OBJ_POINT_TO_ID: After converting to frame coordinates pos={"+msg._data.pos.x+" ,"+msg._data.pos.y+"}"),this.getObjsFromClientPoint(msg),this._logger.trace("QUERY_OBJ_POINT_TO_ID: return msg=",msg),resultCallback(msg)}.bind(this))},QUERY_OBJ_CLIENT_POINT_TO_ID:function(msg,resultCallback){var options=msg._data.options||{};if(this._isPage||msg.isCoordinatesRelativeToFrame)return this._logger.trace("QUERY_OBJ_CLIENT_POINT_TO_ID: No need transform coordinates. Point= ",msg._data.pos),this.getObjsFromClientPoint(msg),void(options.spyPropsSettings?(this._logger.trace("QUERY_OBJ_CLIENT_POINT_TO_ID: add spy properties before we return"),this._addSpyPropsToResultAndCallCallback(msg,options.spyPropsSettings,resultCallback)):(this._logger.trace("QUERY_OBJ_CLIENT_POINT_TO_ID: return msg=",msg),resultCallback(msg)));this._logger.trace("QUERY_OBJ_CLIENT_POINT_TO_ID: Need transform to frame coordinates. Point= ",msg._data.pos);var queryAttrMsg=new Msg("QUERY_ATTR",this.getID(),{view_x:null,view_y:null});this.onMessage(queryAttrMsg,function(queryAttrResMsg){msg._data.pos.x-=queryAttrResMsg._data.view_x,msg._data.pos.y-=queryAttrResMsg._data.view_y,this._logger.trace("QUERY_OBJ_CLIENT_POINT_TO_ID: After converting to frame coordinates pos={"+msg._data.pos.x+" ,"+msg._data.pos.y+"}"),this.getObjsFromClientPoint(msg),this._logger.trace("QUERY_OBJ_CLIENT_POINT_TO_ID: return msg=",msg),options.spyPropsSettings?(this._logger.trace("QUERY_OBJ_CLIENT_POINT_TO_ID: add spy properties before we return"),this._addSpyPropsToResultAndCallCallback(msg,options.spyPropsSettings,resultCallback)):(this._logger.trace("QUERY_OBJ_CLIENT_POINT_TO_ID: return msg=",msg),resultCallback(msg))}.bind(this))},SRVC_GET_OBJ_DESCRIPTION:function(msg,resultCallback){this._logger.trace("Frame: SRVC_GET_OBJ_DESCRIPTION msg=",msg);var objIdentificationProps,micclass=Util.getMicClass(this);if(msg._data.objectidentificationproperties){this._logger.trace("Frame: SRVC_GET_OBJ_DESCRIPTION got object configuration in message");objIdentificationProps=JSON.parse(msg._data.objectidentificationproperties)[micclass.toLowerCase()]}null==objIdentificationProps&&(this._logger.trace("Frame: SRVC_GET_OBJ_DESCRIPTION using object configuration from frame"),objIdentificationProps=this.getObjIdentificationProps(micclass));Description.createTestObjectDescription(this,objIdentificationProps,function(specialDescription){this._logger.trace("Description.createTestObjectDescription return specialDescription=",specialDescription),msg._data.objDescription=specialDescription,resultCallback(msg)}.bind(this))},SRVC_GET_BROWSER_DESCRIPTION_INTERNAL:function(msg,resultCallback){this._logger.trace("Frame: SRVC_GET_BROWSER_DESCRIPTION_INTERNAL msg=",msg);var objIdentificationProps,browserContentHelper=new BrowserContentHelper(this),micclass=Util.getMicClass(browserContentHelper);if(msg._data.objectidentificationproperties){this._logger.trace("Frame: SRVC_GET_BROWSER_DESCRIPTION_INTERNAL got object configuration in message");objIdentificationProps=JSON.parse(msg._data.objectidentificationproperties)[micclass.toLowerCase()]}null==objIdentificationProps&&(this._logger.trace("Frame: SRVC_GET_BROWSER_DESCRIPTION_INTERNAL using object configuration from frame"),objIdentificationProps=this.getObjIdentificationProps(micclass)),Description.createTestObjectDescription(browserContentHelper,objIdentificationProps,function(specialDescription){this._logger.trace("Description.createTestObjectDescription return specialDescription=",specialDescription),msg._data.objDescription=specialDescription,resultCallback(msg)}.bind(this))},SRVC_FIX_FRAME_DESCRIPTION:function(msg,resultCallback){
var description=msg._data.description,objIdentificationProps=msg._data.objIdentificationProps,pageMsg=new Msg(msg._msgType,this._getParentPageID(),{frameRtid:this.getID(),description:description,objIdentificationProps:objIdentificationProps});content.dispatcher.sendMessage(pageMsg,null,"chrome",function(resMsg){msg._data.description=resMsg._data.description,resultCallback(msg)}.bind(this))},getObjsFromClientPoint:function(msg){var aos=this._getAOFromClientPoint(msg._data.pos);if(0!=aos.length){var ids=aos.map(function(ao){return ao.getID()}),micclass=aos.map(function(ao){return Util.getMicClass(ao)}),containers=this._getContainers(),containerIds=containers.map(function(container){return container.id}),containerMicclass=containers.map(function(container){return container.micclass});msg._data.WEB_PN_ID=containerIds.concat(ids),msg._data.micclass=containerMicclass.concat(micclass)}},_addSpyPropsToResultAndCallCallback:function(msg,spyPropsSettings,resultCallback){var ids=msg._data.WEB_PN_ID,micclasses=msg._data.micclass,objsProps=[],multiResponses=new MultipleResponses(ids.length);ids.forEach(function(id,index){var currentMicclass=micclasses[index],queryMsg=new Msg("QUERY_ATTR",id,this._prepareMicclassSpyProps(spyPropsSettings[currentMicclass]));content.dispatcher.sendMessage(queryMsg,null,"chrome",multiResponses.callback(function(isDone,objProps){objsProps[index]=SpecialObject.CreatePropertyBag(objProps._data),isDone&&(msg._data.spiedProps=objsProps,this._logger.trace("_addSpyPropsToResultAndCallCallback: return msg=",msg),resultCallback(msg))}.bind(this)))}.bind(this))},_prepareMicclassSpyProps:function(micclassSpyProps){var spyPropsObj={};return(micclassSpyProps||[]).forEach(function(spyProp){spyPropsObj[spyProp]=null},this),spyPropsObj},_getAOFromClientPoint:function(point){this._logger.debug("_getAOFromClientPoint: called with point=",point);var e=null;if(this._isUseMouseEventForSpyElement?e=window.__uft_mouseover_elem:(e=document.elementFromPoint(point.x,point.y),ShadowDomUtil.isOpenShadowRoot(e)&&(e=ShadowDomUtil.getElemInShadowRootByPoint(e,point,this._logger)),e||(e=this._elementFromPointForSelectElement(point))),!e)return this._logger.error("Element from point failed for point: ",point),[];if(e&&"IMG"===e.tagName){var WebAreaElem=this._elementFromPointForWebArea(e,point);Util.isNullOrUndefined(WebAreaElem)||(e=WebAreaElem)}for(var ao=content.kitsManager.createAO(e,this.getID()),aoLists=[];!Util.isNullOrUndefined(ao);)ao.isObjSpyable()&&aoLists.push(ao),ao=ao.getParent();return aoLists.reverse(),aoLists},_elementFromPointForWebArea:function(imgElem,point){var mapName=imgElem.useMap;if(Util.isNullOrUndefined(mapName))return null;0==mapName.indexOf("#")&&(mapName=mapName.substring(1));var elemMap=ContentUtils.getElementById(document,mapName);if(Util.isNullOrUndefined(elemMap)){var nodelist=ContentUtils.getElementsByName(document,mapName);nodelist&&nodelist.length>0&&(elemMap=nodelist[0])}if(Util.isNullOrUndefined(elemMap)||Util.isNullOrUndefined(elemMap.children))return null;var rectImg=ContentUtils.getElementClientRect(imgElem,this._logger);if(!rectImg)return null;var p={x:point.x,y:point.y};p.y-=rectImg.top,p.x-=rectImg.left;var i=0,elemCount=elemMap.children.length;for(i=0;i<elemCount;++i){var elemArea=elemMap.children[i];if("AREA"===elemArea.tagName&&!Util.isNullOrUndefined(elemArea.coords)){var coords=elemArea.coords.split(",");switch(Util.isNullOrUndefined(elemArea.shape)?"":elemArea.shape.toLowerCase()){case"rect":case"rectangle":if(4!=coords.length)continue;var rect={left:Math.floor(coords[0]),top:Math.floor(coords[1]),right:Math.floor(coords[2]),bottom:Math.floor(coords[3])};if(Util.isPointInRect(p,rect,this._logger))return elemArea;break;case"circ":case"circle":if(3!=coords.length)continue;var circle={x:Math.floor(coords[0]),y:Math.floor(coords[1]),radius:Math.floor(coords[2])};if(Util.isPointInCircle(p,circle,this._logger))return elemArea;break;case"poly":case"polygon":if(Util.isPointInPoly(p,coords,this._logger))return elemArea}}}return null},_getContainers:function(){var containers=[{id:this.getID(),micclass:Util.getMicClass(this)}];if(!this._isPage){var page={id:this._parentPageId,micclass:"Page"};containers.push(page)}if(!this._ignoreBrowserDescription){var browserId={browser:this.getID().browser,page:-1,frame:-1,object:null},browser={id:browserId,micclass:"Browser"};containers.push(browser)}return containers.reverse(),containers},_elementFromPointForSelectElement:function(point){this._logger.warn("_elementFromPointForSelectElement: Started");var selectItems=ContentUtils.querySelectorAll(document,"select",this._logger),resultArr=[];switch(selectItems.forEach(function(selectElement){var rect=ContentUtils.getElementClientRect(selectElement,this._logger);rect&&Util.isPointInRect(point,rect,this._logger)&&resultArr.push(selectElement)},this),resultArr.length){case 0:return this._logger.error("_elementFromPointForSelectElement: Found 0 Select elements that contain the point: ",point),null;case 1:return this._logger.trace("_elementFromPointForSelectElement: Found a good candidate select element - returning it"),resultArr[0];default:return this._logger.error("_elementFromPointForSelectElement: Found more than 1 candidate element - returning null. Number of elements found: "+resultArr.length),null}},_attrs:{title:function(){return"string"==typeof window.document.title?window.document.title:""},url:function(){return window.document.location.href.replace(/\/$/,"")},state:function(){return ReadyState2Status[document.readyState]},micclass:function(){return this._isPage?["Page"]:["Frame"]},name:function(){return window.name},text:function(){return document.body.textContent},outerhtml:function(){return this._getFrameSource().html},outer_html:function(){return this._attrs.outerhtml.call(this)},innertext:function(){return ContentUtils.getVisibleTextContent(document.body)},outertext:function(){var outerText=document.body.outerText;return outerText?Util.cleanTextProperty(outerText):this.GetAttrSync("innertext")},"load time":function(){return Math.round(BrowserServices.getLoadTime(this._logger))},"logical name":function(){return this._isPage?this._attrs.title.call(this):this._attrs.name.call(this)},innerheight:function(){return window.innerHeight},height:function(){return this._attrs.innerheight.call(this)},innerwidth:function(){return window.innerWidth},width:function(){return this._attrs.innerwidth.call(this)},outerheight:function(){return window.outerHeight},outerwidth:function(){return window.outerWidth},"url without form data":function(){var url=this._attrs.url.call(this),pos=url.indexOf("?");return-1!==pos?url.substring(0,pos):url},html_info:function(){var ret=this._getFrameSource();return{MMF_HANDLE:SpecialObject.CreateMMFile(ret.html),FRAME_BASE_URL:ret.baseUrl}},"all text items":function(){return Util.getTextNodesValue(document.body).join(";")},window_rect:function(){return(BrowserServices.getWindowRect?BrowserServices.getWindowRect():null)||{top:window.screenY,left:window.screenX,right:window.screenX+window.outerWidth||window.innerWidth,bottom:window.screenY+window.outerHeight||window.innerHeight}},"text selection obj":function(){var selection=window.getSelection();if(selection.type&&"range"!==selection.type.toLowerCase())return"";if(0===selection.rangeCount)return"";var range=selection.getRangeAt(0);return 0===range.toString().length?"":content.kitsManager.createVirtualTextAO(range,this.getID()).getID()},"user-input in post data":function(){return""},"non user-input in post data":function(){return""},"user input in get data":function(){return""},"non user-input in get data":function(){return""},"all data in get method":function(){return""},"document size":function(){return null},ssvtype:function(){return null},"frame recursive index":function(){return null}},_attrsAsync:{"html tag":function(msg,resCallback){this.getAttrFromParent("html tag",msg,resCallback)},"html id":function(msg,resCallback){this.getAttrFromParent("html id",msg,resCallback)},visible:function(msg,resCallback){Util.assert(!this._isPage,"_attrsAsync['visible']: unsupported for Page objects",this._logger),this.getAttrFromParent("visible",msg,resCallback)},style:function(msg,resCallback){this.getElementAttribute("style",msg,resCallback)},attribute:function(msg,resCallback){this.getElementAttribute("attribute",msg,resCallback)},rect:function(msg,resCallback){this._calcRelativeRect(msg,!0,resCallback)},x:function(msg,resCallback){this._attrsAsync.abs_x.call(this,msg,resCallback)},abs_x:function(msg,resCallback){this._calcRelativeRect(msg,!0,function(res){resCallback(res.left)})},y:function(msg,resCallback){this._attrsAsync.abs_y.call(this,msg,resCallback)},abs_y:function(msg,resCallback){this._calcRelativeRect(msg,!0,function(res){resCallback(res.top)})},view_x:function(msg,resCallback){this._calcRelativeRect(msg,!1,function(res){resCallback(res.left)})},view_y:function(msg,resCallback){this._calcRelativeRect(msg,!1,function(res){resCallback(res.top)})},elementinterface:function(msg,resCallback){DotObjUtil.WrapDocument(window.document,this.getID(),resCallback)},"text obj from point":function(msg,resCallback){var point=msg._data["text obj from point"],useScreenCoords=!BrowserServices.coordinatesAreRelativeToPage;this._calcRelativeRect(msg,useScreenCoords,function(frameAbsRect){var virtualTxt=this._createVirtualTextAOFromPoint(point.x-frameAbsRect.left,point.y-frameAbsRect.top);virtualTxt?resCallback(virtualTxt.getID()):(this._logger.warn("text obj from point: can not create virtualTxt"),resCallback())}.bind(this))},"all attributes":function(msg,resCallback){Util.assert(!this._isPage,"_attrsAsync['all attributes']: unsupported for Page objects",this._logger),this.getAttrFromParent("all attributes",msg,resCallback)},"all styles":function(msg,resCallback){Util.assert(!this._isPage,"_attrsAsync['all styles']: unsupported for Page objects",this._logger),this.getAttrFromParent("all styles",msg,resCallback)}},QueryAttributesSync:function(attrsObj){this._logger.trace("QueryAttributesSync: called for attributes: ",attrsObj);var attrsObjRes={};return Object.keys(attrsObj).forEach(function(attr){attrsObjRes[attr]=this.GetAttrSync(attr)},this),attrsObjRes},_getTabRect:function(){this._logger.trace("_getTabRect: called"),Util.assert(this._isPage,"_getTabRect: unsupported for frame objects",this._logger);var pageDimensions=this.QueryAttributesSync({innerHeight:null,outerHeight:null,innerWidth:null,outerWidth:null,window_rect:null});return Util.calculateTabRect(pageDimensions,this._logger)},_getPartialPixelsVal:function(property,wrappedVal){this._logger.trace("_getPartialPixelsVal: called");var rectProp,axis;switch(property){case"abs_x":case"view_x":axis="x",rectProp="left";break;case"abs_y":case"view_y":axis="y",rectProp="top";break;default:this._logger.error("_getPartialPixelsVal: unsupported axis value: "+axis)}var val=0,frameRuntimeId=null;AttrPartialValueUtil.IsPartialValue(wrappedVal)&&(val=AttrPartialValueUtil.GetValue(wrappedVal,this._logger),frameRuntimeId=AttrPartialValueUtil.GetAttachedData(wrappedVal,this._logger));var axisPixels=0;if(RtIdUtils.IsRuntimeId(frameRuntimeId)){var frameElem=ContentUtils.findFrameElemByID(frameRuntimeId,document,this._logger);axisPixels=content.kitsManager.createAO(frameElem,this.getID()).GetAttrSync(axis)}var newVal=val+axisPixels;return this._isPage?"view_x"==property||"view_y"==property?newVal:newVal+this._getTabRect()[rectProp]:AttrPartialValueUtil.WrapValue(property,newVal,this.getID())},_getPartialAttrValFromParent:function(property,wrappedVal){if(this._logger.trace("_getPartialAttrValFromParent: called"),null===wrappedVal)return this._logger.trace("_getPartialAttrValFromParent: returning partial attr for property: "+property),AttrPartialValueUtil.WrapValue(property,null,this.getID());Util.assert(AttrPartialValueUtil.IsPartialValue(wrappedVal),"_getPartialAttrValFromParent: received a value which is not a partial value",this._logger);var frameRtid=AttrPartialValueUtil.GetAttachedData(wrappedVal);Util.assert(RtIdUtils.IsRTIDFrame(frameRtid),"_getPartialAttrValFromParent: received a runtime id whihc is not for frame",this._logger);var frameElem=ContentUtils.findFrameElemByID(frameRtid,document,this._logger);return Util.assert(frameElem,"_getPartialAttrValFromParent: couldn't find a frame with rtid: "+JSON.stringify(frameRtid),this._logger),content.kitsManager.createAO(frameElem,this.getID()).GetAttrSync(property)},_getPartialElementAttributeVal:function(property,wrappedVal){this._logger.trace("_getPartialElementAttributeVal: called");var agentObject=null;if(AttrPartialValueUtil.IsPartialValue(wrappedVal)){var frameRtid=AttrPartialValueUtil.GetAttachedData(wrappedVal),frameElem=ContentUtils.findFrameElemByID(frameRtid,document,this._logger);agentObject=content.kitsManager.createAO(frameElem,this.getID())}else{if(!this._isPage)return AttrPartialValueUtil.WrapValue(property,null,this.getID());agentObject=content.kitsManager.createPageAO(this.getID())}var propInfo=Description.getAttributeInfo(property),queryMsg=new Msg("QUERY_ATTR",agentObject.getID(),{});return queryMsg._data[propInfo.name]=propInfo.data,agentObject.GetAttrSync(propInfo.name,queryMsg)},_getAttrPartialValue:function(property,wrappedVal){switch(Description.getAttributeInfo(property).name){case"abs_x":case"abs_y":case"view_x":case"view_y":return this._getPartialPixelsVal(property,wrappedVal);case"html tag":case"html id":return this._getPartialAttrValFromParent(property,wrappedVal);case"attribute":case"style":return this._getPartialElementAttributeVal(property,wrappedVal);default:this._logger.error("_getAttrPartialValue: unhandled attribute: "+property)}return currentVal},GetAttrSync:function(property){this._logger.trace("GetAttrSync: query property "+property);var propInfo=Description.getAttributeInfo(property),func=this._attrs[propInfo.name];return func?func.call(this):this._attrsAsync[propInfo.name]?this._getAttrPartialValue(property,null):(this._logger.error("GetAttrSync: attribute "+propInfo.name+" is unsupported"),null)},GetAttr:function(property,msg,resCallback){this._logger.trace("GetAttr: query property "+property);var propInfo=Description.getAttributeInfo(property);propInfo.data&&(msg=msg||new Msg(MSG_TYPES.QUERY,this.getID(),{}),msg._data[propInfo.name]=propInfo.data);var syncAttrFunc=this._attrs[propInfo.name];if(syncAttrFunc)return void resCallback(syncAttrFunc.call(this));var asyncAttrFunc=this._attrsAsync[propInfo.name];if(asyncAttrFunc)return void asyncAttrFunc.call(this,msg,resCallback);this._logger.error("GetAttr: Unsupported attribute:"+propInfo.name),resCallback(null)},_getParentPageID:function(){return Util.shallowObjectClone(this._parentPageId)},_calcRelativeRect:function(msg,screen_coord,resultCallback){this._logger.trace("_calcRelativeRect started");var reqData={rect:{top:0,left:0,bottom:0,right:0},pageId:this._getParentPageID(),screen_coord:screen_coord,AN_METHOD_NAME:"calculate relative rect"},reqMsg=new Msg(MSG_TYPES.SRVC_INVOKE_METHOD,msg._to,reqData),msgToFrame=this.buildNestedMessage(reqMsg);content.dispatcher.sendMessage(msgToFrame,null,null,function(resMsg){var rect=resMsg._data.frameElemMsg._data.rect;resultCallback(rect)})},_runOnDoc:function(script,resultCallback){this._logger.trace("_runOnDoc: started");var requestMsg=new Msg("EXECUTE_IN_PAGE",this.getID(),{script:script}),callbackId=++Frame.prototype._nextCallbackID;this._runOnDocCallbackMap[callbackId]=resultCallback,requestMsg.callbackId=callbackId;var ev=ContentUtils.createCrossOriginCustomEvent("_QTP_Run_Script",{detail:requestMsg});window.dispatchEvent(ev)},_runOnDocResult:function(resEvent){this._logger.trace("_runOnDocResult: started");var resMsg=resEvent.detail;if(this._logger.trace("_runOnDocResult received response: ",resMsg),"EXECUTE_IN_PAGE"!==resMsg._msgType)return!0;var callback=this._runOnDocCallbackMap[resMsg.callbackId];delete this._runOnDocCallbackMap[resMsg.callbackId],callback?(this._logger.trace("_runOnDocResult: Callback found - returning result"),callback(resMsg._data)):this._logger.error("_runOnDocResult: No Callback found.")},_runFuncOnDoc:function(f){var res=this._runOnDoc("("+f.toString()+")();");if(Util.isUndefined(res)&&ErrorReporter.ThrowGeneralError(),res.ex)throw res.ex;return res.res},invokeMethods:{GET_ID_FROM_SOURCE_INDEX:function(msg,resultCallback){this._logger.warn("GET_ID_FROM_SOURCE_INDEX is not implemented"),resultCallback(msg)},DOC_EXECUTE_SCRIPT:function(msg,resultCallback){this._logger.trace("DOC_EXECUTE_SCRIPT: Started");var logger=this._logger,rtid=this.getID();this._runOnDoc(msg._data.text,function(resultData){if(logger.debug("DOC_EXECUTE_SCRIPT: Got result for script "+resultData.script),resultData.ex&&(logger.debug("DOC_EXECUTE_SCRIPT: Got Excepion in script:"+resultData.ex),msg._data["JScript Exception"]=resultData.ex.toString()),resultData.result&&(Util.isObject(resultData.result)||Array.isArray(resultData.result))){logger.debug("DOC_EXECUTE_SCRIPT: The result of this script is an object, wrapping it with DotObject proxy object");var proxy=new DotObjJSProxy(resultData.result,rtid);msg._data.value=SpecialObject.CreateDotObj(proxy.getID()),msg._data.activex_interface=!0}else msg._data.value=resultData.result;resultCallback(msg)})},SAVE_FRAME_SOURCE_NOT_RECURSIVE:function(msg,resultCallback){this._logger.trace("SAVE_FRAME_SOURCE_NOT_RECURSIVE: started");var path=msg._data.WEB_N_SSV_PATH,base=msg._data.WEB_N_SSV_FRAME_BASE_NAME,fullPath=path+"\\"+base+".html",frameSource=this._getFrameSource().html;msg._data.result=SpecialObject.CreateFrameSource(fullPath,frameSource),resultCallback(msg)}},SRVC_INVOKE_METHOD:function(msg,resultCallback){this._logger.trace("SRVC_INVOKE_METHOD: started");var name=msg._data.AN_METHOD_NAME,func=this.invokeMethods[name];func||ErrorReporter.ThrowNotImplemented("Frame.invokeMethod: "+name),func.call(this,msg,resultCallback)},getID:function(){return{browser:this.id.browser,page:this.id.page,frame:this.id.frame,object:null}},CMD_BROWSER_EMBED_SCRIPT:function(msg,resultCallback){this._logger.trace("CMD_BROWSER_EMBED_SCRIPT: Started"),ContentUtils.evalInDocument(msg._data.text),resultCallback(msg)},onRegistrationResult:function(registrationData){this._logger.trace("onRegistrationResult: Started with ",registrationData);var scriptArray=registrationData.scriptsToEmbed;if(this._parentPageId=Util.shallowObjectClone(registrationData._parentPageId),this.id=Util.shallowObjectClone(registrationData._frameId),Util.assert(scriptArray,"onRegistrationResult: Frame registration process failed.",this._logger),scriptArray.length){var script=scriptArray.join("\n");this._logger.debug("registerFrameResult: Going to embed the following script:"+script),ContentUtils.evalInDocument(script)}BrowserServices.isDialogHandlingSupported&&(this._logger.debug("registerFrameResult: Going to override JavaScript dialog functions"),ContentUtils.evalInDocument("("+ContentUtils.overrideJSDialogs.toString()+")();"));var settings=registrationData._settings;settings&&2===settings.WebActivityState&&BrowserServices.runStarted&&BrowserServices.runStarted(),this._loadExtToolkits(registrationData.extToolkits),this._logger.info("onRegistrationResult: Injecting our HTML component"),FrameInHTMLContext._id=this.id;var eventAndHandlers={_QTP_Run_Script:"RunOnDocEventHandler",UFT_DOT_OBJ_MARK_FOR_RUNSCRIPT_RESULT:"onMarkObjectResult",_QTP_Run_Script_With_Attr:"RunOnDocWithAttrEventHandler"};if(BrowserServices.isRunningInPageContext){FrameInHTMLContext.setLogger(new LoggerUtil("FrameInHTMLContext")),window.addEventListener("message",FrameInHTMLContext.onMessageFromContent.bind(FrameInHTMLContext),!1);Object.keys(eventAndHandlers).forEach(function(eventName){var handlerName=eventAndHandlers[eventName];window.addEventListener(eventName,FrameInHTMLContext[handlerName].bind(FrameInHTMLContext),!1)})}else content.domSubscriber.startNamespace(),content.domSubscriber.addUtilityObject("ShadowDomUtil",ShadowDomUtil),content.domSubscriber.addUtilityObject("FrameInHTMLContext",FrameInHTMLContext,eventAndHandlers),content.domSubscriber.addScript("FrameInHTMLContext.setLogger(_logger);"),content.domSubscriber.endNamespace();var objIdentificationProps=registrationData._settings&&registrationData._settings.objectidentificationproperties;objIdentificationProps&&(this._objIdentificationProps=JSON.parse(objIdentificationProps),this._logger.debug("onRegistrationResult - setting OIP")),registrationData.ignoreBrowserDescription&&(this._ignoreBrowserDescription=!0),this._recorder&&registrationData.eventConfig&&this._recorder.updateEventConfig(registrationData.eventConfig),this._initInspectionMode(registrationData.inspectionMode,registrationData.inspectionOptions)},_loadExtToolkits:function(extToolkits){!extToolkits||extToolkits.length<=0||(Util.isNullOrUndefined(content.webExtKit)?(content.webExtKit=new WebExtKit(extToolkits),content.kitsManager.LoadKit(content.webExtKit)):content.webExtKit.loadToolkits(extToolkits))},MATCH_DESC_TO_ID:function(msg,resultCallback){this._logger.trace("MATCH_DESC_TO_ID started on",this._isPage?" page with ":" frame with ",msg);var logger=this._logger,internalCallback=function(match){logger.debug("MATCH_DESC_TO_ID - in result callback: matched ",match.length),match.length>0&&(msg._data.logicalNames=msg._data.logicalNames||[],match.forEach(function(m){msg._data.WEB_PN_ID.push(m.getID()),msg._data.logicalNames.push(m.GetAttrSync("logical name"))})),resultCallback(msg)},filterFrameProperties={};for(var key in msg._data)"logicalNames"!==key&&"WEB_PN_ID"!==key&&(filterFrameProperties[key]=msg._data[key]);if(msg._data.micclass&&"Frame"===msg._data.micclass)this._isPage?internalCallback([]):Description.filterAOList([this],filterFrameProperties,internalCallback);else{var additonalParams={extraAOs:this._isPage?null:[this]};Description.findObjId(filterFrameProperties,Description.GetCandidateAOsForContent.bind(Description,this.getID(),null),additonalParams,internalCallback)}},QUERY_REPOSITORY_DESC2ID:function(msg,resultCallback){this._logger.trace("QUERY_REPOSITORY_DESC2ID: Started");var additonalParams={filter:function(ao){return ao&&(ao.isLearnable()||content.settings.shouldlearnwebelement)},learn:!0};this._internalQueryDescToId(msg,additonalParams,resultCallback)},QUERY_DESC_TO_ID:function(msg,resultCallback){this._logger.trace("QUERY_DESC_TO_ID: Started"),this._internalQueryDescToId(msg,null,ContentUtils.addLogicalNamesToIdentificationResult(this.id,resultCallback))},_internalQueryDescToId:function(msg,optionalParamsObj,resultCallback){this._logger.trace("_internalQueryDescToId: Started"),resultCallback||this._logger.error("_internalQueryDescToId: Called without callback! ",msg),Description.GetIDsByDescription(msg._data,Description.GetCandidateAOsForContent.bind(Description,this.getID(),null),optionalParamsObj,function(filteredAOs){resultCallback(Description.buildReturnMsg(msg._msgType,msg._to,filteredAOs,this._logger))}.bind(this))},_getFrameSource:function(){var _html="",children=document.childNodes,len=children.length,_baseUrl="",bases=document.getElementsByTagName("BASE");bases[0]&&(_baseUrl=bases[0].href);for(var i=0;i<len;i++)if(children[i].nodeType===Node.ELEMENT_NODE)_html+=children[i].outerHTML,_html=_html.replace(/<BASE /g,"<"),_html=_html.replace(/<embed type="application\/x-hp-chrome-agent"[^>]+>/,"");else if(children[i].nodeType===Node.COMMENT_NODE)_html+="\x3c!-- --\x3e";else if(children[i].nodeType===Node.DOCUMENT_TYPE_NODE){var doctype=document.doctype;_html+="<!DOCTYPE "+doctype.name+(doctype.publicId?' PUBLIC "'+doctype.publicId+'"':"")+(doctype.systemId?' "'+doctype.systemId+'"':"")+">"}return{html:_html,baseUrl:_baseUrl}},SRVC_TAKE_SCREENSHOT:function(msg,callback){this._logger.trace("SRVC_TAKE_SCREENSHOT: Started");var queryAttrMsg=new Msg("QUERY_ATTR",this.getID(),{view_x:null,view_y:null,width:null,height:null});this.onMessage(queryAttrMsg,function(queryAttrResMsg){var rect={left:queryAttrResMsg._data.view_x,top:queryAttrResMsg._data.view_y,right:queryAttrResMsg._data.view_x+queryAttrResMsg._data.width,bottom:queryAttrResMsg._data.view_y+queryAttrResMsg._data.height},browserId={browser:msg._to.browser,page:-1,frame:-1,object:null},browserMsg=Util.deepObjectClone(msg);browserMsg._to=browserId;var imageType=msg._data&&msg._data.type?msg._data.type:"undefined";browserMsg._data={rect:rect,type:imageType},content.dispatcher.sendMessage(browserMsg,null,null,function(resMsg){if(msg._data.data=resMsg._data.data,!BrowserServices.cropedScreenshot){var img=document.createElement("img");img.src="data:image/(png|jpeg);base64,"+resMsg._data.data;var canvas=document.createElement("canvas"),width=canvas.width=rect.right-rect.left,height=canvas.height=rect.bottom-rect.top;canvas.getContext("2d").drawImage(img,rect.left,rect.top,width,height,0,0,width,height),msg._data.data=canvas.toDataURL().replace(/^data:image\/png;base64,/,"")}callback(msg)})})},SRVC_MAKE_OBJ_VISIBLE:function(msg,resultCallback){var msgToFrame=this.buildNestedMessage(msg);content.dispatcher.sendMessage(msgToFrame,null,null,function(resMsg){resultCallback(msg)})},SRVC_GET_TEXT:function(msg,resultCallback){this._logger.trace("SRVC_GET_TEXT: started");var allRange=document.createRange();allRange.setStartBefore(document.body),allRange.setEndAfter(document.body.lastChild);var allTxt=Util.cleanSpecialChars(allRange.toString());allTxt=Util.cleanMultipleSpaces(allTxt);var beforeText=msg._data["text before"]||"",afterText=msg._data["text after"]||"",startPos=0;if(""!==beforeText){var beforeIndex=msg._data.indexoftextbefore||0;if(-1===(startPos=Util.stringNthPosition(allTxt,beforeText,beforeIndex)))return msg._data.text="",void resultCallback(msg);startPos+=beforeText.length}var endPos=allTxt.length;if(""!==afterText&&-1===(endPos=allTxt.indexOf(afterText,startPos)))return msg._data.text="",void resultCallback(msg);var text,txtLength=endPos-startPos,MAX_TEXT_SIZE=65e3;txtLength<MAX_TEXT_SIZE?text=allTxt.substr(startPos,txtLength):(text=allTxt.substr(startPos,MAX_TEXT_SIZE-3),text+="..."),msg._data.text=text,resultCallback(msg)},SRVC_GET_SCREEN_RECT:function(msg,resultCallback){this._calcRelativeRect(msg,!0,function(res){msg._data.rect=res,resultCallback(msg)})},SRVC_HIGHLIGHT_OBJECT:function(msg,resultCallback){this._logger.trace("SRVC_HIGHLIGHT_OBJECT: Called");var frameElem=window.frameElement;if(frameElem&&"FRAME"===frameElem.tagName)ContentUtils.highlightElement(frameElem),resultCallback(msg);else{var msgToFrame=this.buildNestedMessage(msg);content.dispatcher.sendMessage(msgToFrame,null,null,function(resMsg){resultCallback(msg)})}},SRVC_HIGHLIGHT_MATCHES:function(msg,resultCallback){this._logger.trace("SRVC_HIGHLIGHT_MATCHES: Called");var data=msg._data||{},aoToHighlight=data.WEB_PN_ID||[];if(aoToHighlight=aoToHighlight.filter(function(rtid){return rtid.frame===this.id.frame&&RtIdUtils.IsRTIDAO(rtid)},this),aoToHighlight.length>0){var elems=aoToHighlight.map(function(id){return content.rtidManager.GetElementFromID(id.object)});return void ContentUtils.highlightElements(elems,resultCallback,msg)}this._logger.debug("SRVC_HIGHLIGHT_MATCHES: Going to highlight the frame element");var msgToFrame=this.buildNestedMessage(msg);content.dispatcher.sendMessage(msgToFrame,null,null,function(resMsg){resultCallback(msg)})},_calculatePartialProperties:function(propsObj){Object.keys(propsObj).forEach(function(prop){var val=propsObj[prop];AttrPartialValueUtil.IsPartialValue(val)&&(propsObj[prop]=this._getAttrPartialValue(prop,val))},this)},_calculatePartialAttributes:function(msg){this._logger.trace("_calculatePartialAttributes: Called"),msg._data["recorded description"][0].forEach(function(specialDescriptionObj){var description=specialDescriptionObj.description;this._calculatePartialProperties(description.properties),this._calculatePartialProperties(description["smart identification properties"]),this._calculatePartialProperties(description.additionalInfo)},this)},_isAgentObjectInThisContext:function(aoRtid){var aoRtidCopy=Util.shallowObjectClone(aoRtid);return aoRtidCopy.object=null,RtIdUtils.IsRTIDEqual(this.getID(),aoRtidCopy)},EVENT_RECORD:function(msg){this._logger.trace("EVENT_RECORD: Called"),this._handleRecordEvent(msg)},EVENT_INTERNAL_RECORD_QUEUE:function(msg){this._logger.trace("EVENT_INTERNAL_RECORD_QUEUE: Called"),this._handleRecordEvent(msg)},EVENT_INTERNAL_RECORD_DISPATCH_QUEUE:function(msg){this._logger.trace("EVENT_INTERNAL_RECORD_DISPATCH_QUEUE: Called"),this._handleRecordEvent(msg)},EVENT_INTERNAL_RECORD_QUEUE_CLEAR:function(msg){this._logger.trace("EVENT_INTERNAL_RECORD_QUEUE_CLEAR: Called"),msg._to=this._isPage?this._getParentPageID():content.dispatcher.getContainingContextID(),content.dispatcher.sendEvent(msg)},EVENT_INTERNAL_SEND_BROWSER_INFO:function(msg){this._logger.trace("EVENT_INTERNAL_SEND_BROWSER_INFO: Called"),this._recorder.sendBrowserRecordInfo()},_handleRecordEvent:function(msg){this._logger.trace("_handleRecordEvent: Called. IsPage? "+this._isPage),msg._to=this._isPage?this._getParentPageID():content.dispatcher.getContainingContextID(),this._calculatePartialAttributes(msg);var micclass,objIdentificationProps,objDesc,recordedDescriptionArr=msg._data["recorded description"][0],recordedMicclassArr=msg._data.micclass[0],runtimeIdsArr=msg._data.WEB_PN_ID[0],agentObjectRtid=runtimeIdsArr[0];if(this._isAgentObjectInThisContext(agentObjectRtid))for(var recordedElem=content.rtidManager.GetElementFromID(agentObjectRtid.object),parentElem=recordedElem.parentElement;!Util.isNullOrUndefined(parentElem);){var parentAO=content.kitsManager.createAO(parentElem,this.id,!0);parentAO&&parentAO.GetAttrSync("is_container")&&(this._logger.trace("_handleRecordEvent: parent container found, adding its record description"),micclass=Util.getMicClass(parentAO),objIdentificationProps=this.getObjIdentificationProps(micclass),objDesc=Description.createRecordDescription(parentAO,objIdentificationProps),recordedDescriptionArr.push(objDesc),recordedMicclassArr.push(micclass),runtimeIdsArr.push(parentAO.getID())),parentElem=parentElem.parentElement}(this._isPage||this._isAgentObjectInThisContext(agentObjectRtid))&&(this._logger.trace("_handleRecordEvent: Interesting Frame/Page for record. Adding it's data. IsPage? "+this._isPage),micclass=Util.getMicClass(this),objIdentificationProps=this.getObjIdentificationProps(micclass),objDesc=Description.createRecordDescription(this,objIdentificationProps),recordedDescriptionArr.push(objDesc),recordedMicclassArr.push(micclass),runtimeIdsArr.push(this.getID())),this._isPage&&!this._ignoreBrowserDescription&&this._addBrowserRecordData(msg),content.dispatcher.sendEvent(msg)},_addBrowserRecordData:function(msg){var browserContentHelper=new BrowserContentHelper(this),micclass=Util.getMicClass(browserContentHelper),objIdentificationProps=this.getObjIdentificationProps(micclass),objDesc=Description.createRecordDescription(browserContentHelper,objIdentificationProps);msg._data["recorded description"][0].push(objDesc),msg._data.micclass[0].push(micclass),msg._data.WEB_PN_ID[0].push(browserContentHelper.getID())},WEBEXT_RECORD_EVENT:function(msg){if(this._recorder.isRecording){this._logger.trace("WEBEXT_RECORD_EVENT: Started");var ao=content.kitsManager.createAO(content.rtidManager.GetElementFromID(msg._data.WEB_PN_ID.object),this.id,!1);Util.isNullOrUndefined(ao)||this._recorder.sendRecordExtEvent(ao,msg._data.methodName,msg._data.parameters)}},getObjIdentificationProps:function(micclass){return micclass=micclass.toLowerCase(),Util.assert(this._objIdentificationProps,"getObjIdentificationProps: Object identification properties object is empty !",this._logger),this._objIdentificationProps[micclass]},sendRequestToHTMLContext:function(msg,callback){this._logger.trace("sendRequestToHTMLContext: Started");var requestMsg={callbackID:++Frame.prototype._nextCallbackID,msgType:"request",source:"Frame",data:msg};this._callbacks[requestMsg.callbackID]=callback,
this._logger.trace("sendRequestToHTMLContext: Going to send to HTML the following request: ",requestMsg),window.postMessage(requestMsg,"*")},_recordDialogHandled:function(event){if(!this._recorder.isRecording)return void this._logger.trace("_recordDialogHandled: Not recording, ignore "+event.detail.type);if(this._logger.trace("_recordDialogHandled: Recording handeling of "+event.detail.type),!this._isPage)return void Util.setTimeout(function(){window.top.dispatchEvent(event)},200);var button=event.detail.accepted?"micOK":"micCancel",commandText="HandleDialog "+button+(event.detail.text?",":""),data={text:commandText,AN_ITEM_TEXT:event.detail.text,"recorded description":[[]],micclass:[[]],WEB_PN_ID:[[]]},msg=new Msg("EVENT_RECORD",this._getParentPageID(),data);this._addBrowserRecordData(msg),content.dispatcher.sendEvent(msg)},responseFromHTMLHandler:function(msgEventObj){var responsetMsg=msgEventObj.data;if("object"==typeof responsetMsg&&"response"===responsetMsg.msgType&&("Frame"===responsetMsg.source||"FrameInHTMLContext"===responsetMsg.source)&&!Util.isUndefined(responsetMsg.callbackID)){if(!this._callbacks[responsetMsg.callbackID])return void this._logger.error("responseHandler: No callback for the given response!");try{this._callbacks[responsetMsg.callbackID](Util.deepObjectClone(responsetMsg.data))}catch(ex){this._logger.error("responseHandler: callback has exception ex ="+ex.message)}finally{delete this._callbacks[responsetMsg.callbackID]}}},_createVirtualTextAOFromPoint:function(x,y){var elem=document.elementFromPoint(x,y),range=new Range;return range.setStartBefore(elem),range.setEndAfter(elem),content.kitsManager.createVirtualTextAO(range,this.getID())}},KitsManager.prototype={_allKits:[],_logger:new LoggerUtil("Content.KitsManager"),LoadKit:function(kit){this._logger.trace("LoadKit: loading kit "+kit.name),KitsManager.prototype._allKits.push(kit)},_kits:null,_initKits:function(){this._kits&&this._kits.allCount===this._allKits.length||(this._kits?this._logger.debug("_initKits: Re-loading kits due to count change, was: "+this._kits.allCount+" now: "+this._allKits.length):this._logger.trace("_initKits: Loading kits, count: "+this._allKits.length),this._kits=this._allKits.filter(function(kit){return kit.relevant()}).sort(function(a,b){return b.priority-a.priority}),this._logger.trace("_initKits: Relevant kits count: "+this._kits.length),this._kits.allCount=this._allKits.length)},createAO:function(element,parentID,noDefault,micclass){this._logger.trace("createAO: creating AO for element ",element.tagName),element||(this._logger.error("createAO: null element, AO not created"),ErrorReporter.ThrowInvalidArg()),this._initKits();for(var i=0;i<this._kits.length;i++){var ao=this._kits[i].createAO(element,parentID,noDefault,micclass);if(ao)return ao}return this._logger.debug("createAO: create AO failed for element ",element.tagName),null},createRecordAOArray:function(element,parentID){this._logger.trace("createRecordAOArray: creating AO for element "+element),element||(this._logger.error("createRecordAOArray: null element, AO not created"),ErrorReporter.ThrowInvalidArg()),this._initKits();for(var i=0;i<this._kits.length;++i)if(this._kits[i].createRecordAOArray){var aoArr=this._kits[i].createRecordAOArray(element,parentID);if(aoArr&&aoArr.length>0)return aoArr}return this._logger.error("createRecordAOArray: create AO failed for element "+element),null},createPageAO:function(parentID){return this._logger.trace("createPageAO: Started"),WebKit.createPageAO(parentID)},createVirtualTextAO:function(range,parentID){return this._logger.trace("createVirtualTextAO: Started"),WebKit.createVirtualTextAO(range,parentID)},getNeededKits:function(webCore){return this._allKits.filter(function(kit){return kit.relevant()&&(webCore?kit.webCore():!kit.webCore)}).sort(function(a,b){return b.priority-a.priority})},updateTagsToBreakInterestingAOLoop:function(tagsToBreakInterestingAOLoop){this._initKits();for(var i=0;i<this._kits.length;++i)this._kits[i].updateTagsToBreakInterestingAOLoop&&this._kits[i].updateTagsToBreakInterestingAOLoop(tagsToBreakInterestingAOLoop)}},ObjectRTIDManager.prototype={_logger:void 0,_nextEntry:-1,_frameCockie:-1,_knownElements:[],onRegistrationResult:function(registrationResData){this._logger.info("onRegistrationResult: Started for frame cookie "+registrationResData.frameCount),this._frameCockie=registrationResData.frameCount},GetIDForElement:function(element){return this._logger.trace(function(){return"GetIDForElement: Started for "+element.tagName}),element.objRTID?(this._logger.debug("GetIDForElement: No need to create new ID element already known"),element.objRTID):(element.objRTID={entry:++this._nextEntry,frameCockie:this._frameCockie},this._knownElements[element.objRTID.entry]=element,element.objRTID)},GetElementFromID:function(id){return id.frameCockie!==this._frameCockie?(this._logger.error("GetElementFromID: Got ID from a different frame generation!",id),null):id.entry<0||id.entry>this._nextEntry?(this._logger.error("GetElementFromID: Got unknown entry ! id = ",id),null):this._knownElements[id.entry]}},AO.prototype={_parentID:null,_elem:null,_id:null,_attrs:null,_methods:null,_behaviors:null,_micclass:null,_logger:null,_outerAO:null,mergeBehavior:function(behavior){var self=this;this._logger.trace(function(){return"mergeBehavior: merging behavior to AO "+self._elem.tagName}),behavior._micclass&&(this._micclass=behavior._micclass.concat(this._micclass)),this._behaviors.push(behavior);var funcs=behavior._helpers;for(var f in funcs)this[f]=funcs[f]},isLearnable:Util.alwaysFalse,_lazyInit:function(subObj,name){if(!(name in this[subObj]))for(var i=this._behaviors.length-1;i>=0;--i){var b=this._behaviors[i];if(b[subObj]&&name in b[subObj]){this[subObj][name]=b[subObj][name];break}}},_isAttrAsync:function(attrName){switch(attrName){case"screen_rect":case"abs_x":case"abs_y":case"view_x":case"view_y":case"elementinterface":return!0;default:return!1}},_getAttrPartialValue:function(property){Util.assert(this._isAttrAsync(property),"_getAttrPartialValue: called for sync attribute: "+property,this._logger);var val=null;switch(property){case"abs_x":case"view_x":val=this.GetAttrSync("rect").left;break;case"abs_y":case"view_y":val=this.GetAttrSync("rect").top;break;default:return this._logger.error("_getAttrPartialValue: unhandled attribute: "+property),null}return AttrPartialValueUtil.WrapValue(property,val)},GetAttr:function(property,msg,resultCallback){this._logger.trace("GetAttr: query property ",property);var attrInfo=Description.getAttributeInfo(property),propertyName=attrInfo.name;if(attrInfo.data&&(msg=msg||new Msg(MSG_TYPES.QUERY,this.getID(),{}),msg._data[propertyName]=attrInfo.data),this._lazyInit("_attrs",propertyName),!this._attrs[propertyName])return this._logger.debug("GetAttr: unknown attribute ",propertyName),void resultCallback(null);if(this._isAttrAsync(propertyName))this._attrs[propertyName].call(this,msg,function(result){resultCallback(Util.cleanSpecialChars(result))});else{var val=this._attrs[propertyName].call(this,msg);val="value"===propertyName&&"WebEdit"===Util.getMicClass(this)?val:Util.cleanSpecialChars(val),resultCallback(val)}},_hasDOMHandler:function(name){return Util.findAncestor(this._elem,function(e){return!Util.isNullOrUndefined(e.getAttribute(name))})},_quirkyButton:function(button){return[1,4,2][button]},ReceiveEvent:function(recorder,ev){if(!this.UseEventConfiguration(ev)||recorder.isEventAllowedByConfig(this,ev)){Util.isExtEventRegistered(ev.target,ev.type)||this._behaviors.slice().reverse().some(function(behavior){return behavior._eventHandler&&behavior._eventHandler.call(this.getRecordAO(),recorder,ev)},this)}},_warnIfNoTouch:function(msg){ContentUtils.isTouchEnabled()||(msg.status="OkButNotHandled",msg._data.value="NotTouchEnabled")},ReceiveGesture:function(recorder,info,elem){this._behaviors.slice().reverse().some(function(behavior){return behavior._gestureHandler&&behavior._gestureHandler.call(this.getRecordAO(),recorder,info,elem)},this)},ReceiveEventStarted:function(recorder){this._behaviors.slice().reverse().some(function(behavior){return behavior._eventTargetStarted&&behavior._eventTargetStarted.call(this.getRecordAO(),recorder)},this)},ReceiveEventEnded:function(recorder){this._behaviors.slice().reverse().some(function(behavior){return behavior._eventTargetEnded&&behavior._eventTargetEnded.call(this.getRecordAO(),recorder)},this)},GetAttrSync:function(property,msg){this._logger.trace("GetAttrSync: query property "+property);var attrInfo=Description.getAttributeInfo(property),propertyName=attrInfo.name;if(attrInfo.data&&(msg=msg||new Msg(MSG_TYPES.QUERY,this.getID(),{}),msg._data[propertyName]=attrInfo.data),this._lazyInit("_attrs",propertyName),this._attrs[propertyName]){if(this._isAttrAsync(propertyName)){var partialVal=this._getAttrPartialValue(propertyName,msg);return partialVal.value=Util.cleanSpecialChars(AttrPartialValueUtil.GetValue(partialVal)),partialVal}return Util.cleanSpecialChars(this._attrs[propertyName].call(this,msg))}return this._logger.debug("GetAttrSync: unknown attribute "+propertyName),null},QueryAttributesSync:function(attrsObj){this._logger.trace("QueryAttributesSync: called for attributes: ",attrsObj);var attrsObjRes={};return Object.keys(attrsObj).forEach(function(attr){attrsObjRes[attr]=this.GetAttrSync("WEB_PN_ID"===attr?"id":attr)},this),attrsObjRes},QUERY_ATTR:function(msg,resultCallback){this._logger.trace("QUERY_ATTR: called for attributes: ",msg._data);var attrs=Object.keys(msg._data);if(attrs.length<1)return this._logger.warn("QUERY_ATTR: Called with no attributes"),void resultCallback(msg);var multiResponses=new MultipleResponses(attrs.length);attrs.forEach(function(prop){this._logger.debug("QUERY_ATTR: call GetAttr for '"+prop+"' property"),this.GetAttr("WEB_PN_ID"===prop?"id":prop,msg,multiResponses.callback(function(isDone,val){msg._data[prop]=val,this._logger.debug("QUERY_ATTR: (GetAttr callback) "+prop+"="+val),isDone&&(this._logger.debug("QUERY_ATTR: Finished querying all the requested attributes"),resultCallback(msg))}.bind(this)))}.bind(this))},InvokeMethod:function(method,msg,resultCallback){if(this._logger.trace("InvokeMethod: invoking method ",method," for msg ",msg),this._lazyInit("_methods",method),!this._methods[method])return this._logger.warn("InvokeMethod: unknown method "+method),void ErrorReporter.ThrowGeneralError();this._methods[method].call(this,msg,resultCallback)},QUERY_DESC_TO_ID:function(msg,resultCallback){this._logger.trace("QUERY_DESC_TO_ID: Started");var additionalParams={filter:function(childAO){return childAO._elem!=this._elem}.bind(this)};this._internalQueryDescToId(msg,additionalParams,ContentUtils.addLogicalNamesToIdentificationResult(this._id,resultCallback))},QUERY_REPOSITORY_DESC2ID:function(msg,resultCallback){this._logger.trace("QUERY_REPOSITORY_DESC2ID: Started");var additonalParams={filter:Util.alwaysFalse,learn:!0};this._internalQueryDescToId(msg,additonalParams,resultCallback)},_internalQueryDescToId:function(msg,optionalParamsObj,resultCallback){this._logger.trace("_internalQueryDescToId: Started"),Description.GetIDsByDescription(msg._data,Description.GetCandidateAOsForContent.bind(Description,this._parentID,this._elem),optionalParamsObj,function(filteredAOs){resultCallback(Description.buildReturnMsg(msg._msgType,msg._to,filteredAOs,this._logger))}.bind(this))},getID:function(){if(this._logger.trace("getID: getting runtime id for element ",function(){return this._elem}.bind(this)),!this._id){this._logger.trace("getID: objID not cached, create it from rtidManager");var elem=this._elem;this._radios&&this._radios.length>0&&(elem=this._radios[0]);var obj_id=content.rtidManager.GetIDForElement(elem);this._id=Util.shallowObjectClone(this._parentID),this._id.object=obj_id}return Util.shallowObjectClone(this._id)},SRVC_TAKE_SCREENSHOT:function(msg,callback){this._logger.trace("SRVC_TAKE_SCREENSHOT: Started"),this.QUERY_ATTR({_data:{view_x:null,view_y:null,width:null,height:null},_to:msg._to},function(res){var rect={left:res._data.view_x,right:res._data.view_x+res._data.width,top:res._data.view_y,bottom:res._data.view_y+res._data.height},browserId={browser:msg._to.browser,page:-1,frame:-1,object:null};msg._to=browserId;var imageType=msg._data&&msg._data.type?msg._data.type:null;msg._data={rect:rect,type:imageType},content.dispatcher.sendMessage(msg,null,null,function(resMsg){if(BrowserServices.cropedScreenshot)callback(resMsg);else{var img=new Image;img.onload=function(){var canvas=document.createElement("canvas"),width=canvas.width=rect.right-rect.left,height=canvas.height=rect.bottom-rect.top;canvas.getContext("2d").drawImage(img,rect.left,rect.top,width,height,0,0,width,height),resMsg._data.data=canvas.toDataURL().replace(/^data:image\/(png|jpeg);base64,/,""),callback(resMsg)},img.src="data:image/png;base64,"+resMsg._data.data}})})},SRVC_MAKE_OBJ_VISIBLE:function(msg,callback){var browserRtid=RtIdUtils.GetBrowserRtid(msg._to);if(RtIdUtils.IsRTIDBrowser(browserRtid)){var msgToBrowser=new Msg("SRVC_MAKE_OBJ_VISIBLE",browserRtid,{"disable browser popup":msg._data["disable browser popup"]});content.dispatcher.sendMessage(msgToBrowser,browserRtid,"chrome",function(){})}this.InvokeMethod("MAKE_VISIBLE",msg,callback)},SRVC_HIGHLIGHT_OBJECT:function(msg,callback){this.InvokeMethod("HIGHLIGHT_OBJECT",msg,callback)},SRVC_HIGHLIGHT_MATCHES:function(msg,callback){this.InvokeMethod("HIGHLIGHT_MATCHES",msg,callback)},SRVC_CALL_OBJ_EVENT:function(msg,callback){msg.delay=!0;var callEventMsg=Util.deepObjectClone(msg);ContentUtils.protectCallbackAgainstPrematureNavigation(callback,msg,this._logger,"SRVC_CALL_OBJ_EVENT")(msg),this.InvokeMethod("CALL_EVENT",callEventMsg,Util.identity)},SRVC_EDIT_SET:function(msg,callback){this.InvokeMethod("SET_VALUE",msg,callback)},SRVC_GET_FORM:function(msg,callback){this.InvokeMethod("WEB_GETFORMA",msg,callback)},CMD_LIST_SELECT:function(msg,callback){this.InvokeMethod("LIST_SELECT",msg,callback)},CMD_LIST_DESELECT:function(msg,callback){this.InvokeMethod("LIST_DESELECT",msg,callback)},CMD_LIST_EXTEND_SELECT:function(msg,callback){this.InvokeMethod("LIST_EXTEND_SELECT",msg,callback)},SRVC_GET_SCREEN_RECT:function(msg,callback){this.InvokeMethod("GET_SCREEN_RECT",msg,callback)},QUERY_GET_TABLE_DATA:function(msg,callback){this.InvokeMethod("GET_TABLE_DATA",msg,callback)},SRVC_INVOKE_METHOD:function(msg,callback){this.InvokeMethod(msg._data.AN_METHOD_NAME,msg,callback)},QUERY_OBJ_PARENTS_FROM_ID:function(msg,callback){this._logger.trace("onMessage: Started with: ",msg),msg._data={};var ids=[],aoParentIterator=this;do{ids.push(aoParentIterator.getID()),aoParentIterator=aoParentIterator.getParent()}while(aoParentIterator);msg._data.WEB_PN_ID=ids.reverse(),callback(msg)},SRVC_GET_OBJ_DESCRIPTION:function(msg,resultCallback){this._logger.trace("CommonBehavior: SRVC_GET_OBJ_DESCRIPTION msg=",msg);var objIdentificationProps,micclass=Util.getMicClass(this);if(msg._data.objectidentificationproperties){this._logger.debug("CommonBehavior: SRVC_GET_OBJ_DESCRIPTION got object configuration in message");objIdentificationProps=JSON.parse(msg._data.objectidentificationproperties)[micclass.toLowerCase()]}null==objIdentificationProps&&(this._logger.debug("CommonBehavior: SRVC_GET_OBJ_DESCRIPTION using object configuration from frame"),objIdentificationProps=content.frame.getObjIdentificationProps(micclass));Description.createTestObjectDescription(this,objIdentificationProps,function(specialDescription){this._logger.trace("Description.createTestObjectDescription return specialDescription=",specialDescription),msg._data.objDescription=specialDescription,resultCallback(msg)}.bind(this))},onMessage:function(msg,resultCallback){this._logger.trace("onMessage: Started with: ",msg),this[msg._msgType]||(this._logger.error("onMessage: Unhandled msg: ",msg._msgType),ErrorReporter.ThrowNotImplemented("AO."+msg._msgType)),this[msg._msgType](msg,resultCallback)},_getTagsTree:function(str_array,element,level){str_array.push(level+" "+element.tagName);for(var children=element.children,i=0;i<children.length;i++)this._getTagsTree(str_array,children[i],level+1)},_fireEvent:function(target,event,data,relatedTarget){return ContentUtils.fireEvent(target,event,data,this._logger,relatedTarget)},_isRealLink:function(){var href,elem=this._elem;try{href=elem.href}catch(ex){this._logger.warn("_isRealLink: throw exception when get elem.href. ex = ",ex),href=elem.getAttribute("href")}if(!href)return!1;if(this._hasDirectTextChild(elem))return!0;if(this._hasBackgroundImage(elem))return!0;for(var all_children=this._elem.getElementsByTagName("*"),i=0;i<all_children.length;i++){if(this._hasDirectTextChild(all_children[i]))return!0;if(this._hasBackgroundImage(all_children[i]))return!0}return!1},_hasDirectTextChild:function(elem){for(var nodes=elem.childNodes,i=0;i<nodes.length;i++)if(3===nodes[i].nodeType){var text=nodes[i].data;if(text=text.trim(),text.length>0)return!0}return!1},_hasBackgroundImage:function(elem){var backgroundImg=getComputedStyle(elem,null).backgroundImage;return backgroundImg.length>0&&"none"!==backgroundImg},_getAttributes:function(elem,msg){var attrs=msg._data.attribute;return Util.map(attrs,function(attr){var value=elem.getAttribute(attr);return value||(value="tagName"==attr?elem.tagName||"":""),value},this)},_getCSSValues:function(elem,msg){var style=getComputedStyle(elem,null),attrs=msg._data.style;return Util.map(attrs,style.getPropertyValue.bind(style))},_getImageParentAnchor:function(){for(var parent=this._elem.parentNode,tagsAllowedInPath=["FONT","B","I","STRONG","DIV","NOBR","EM","DD","CENTER","SPAN"];parent;){if("A"===parent.tagName)return parent;if(-1===tagsAllowedInPath.indexOf(parent.tagName))break;parent=parent.parentNode}return null},_getParentAO:function(elem){for(var parent=elem.parentElement;parent;parent=parent.parentElement){var pao=content.kitsManager.createAO(parent,this._parentID,!0);if(pao)return pao}return null},_pointRelativeToElem:function(pos){return ContentUtils.pointRelativeToElem(this._elem,pos)},_pan:function(start,delta,interval,steps,msg,callback){function helper(step){var scale=step/steps,pos={x:point.x+delta.x*scale,y:point.y+delta.y*scale};sim.move([pos]),step===steps?(sim.removeTouches(),wrappedCallback(msg)):Util.setTimeout(helper,interval,step+1)}this._logger.trace("_pan ",[start,delta,interval,steps]);var point=this._pointRelativeToElem(start),sim=new SimulateGesture;sim.addTouch(this._elem,point);var wrappedCallback=ContentUtils.protectCallbackAgainstPrematureNavigation(callback,msg,this._logger,"Pan");helper(0)},getParent:function(){return this._getParentAO(this._elem)},isObjSpyable:function(){return!0},getControlLearnType:function(){return ControlLearnType.Yes},getChildrenLearnType:function(){return ChildrenLearnType.Yes},UseEventConfiguration:function(event){return!0},setOuterAO:function(ao){this._outerAO=ao},getRecordAO:function(){return this._outerAO||this}};var AreaBehavior={_micclass:["WebArea"],_attrs:{"logical name":function(){if(this._elem.alt)return this._elem.alt;var img=this._getImageElement();return img?img.src:"WebArea"},"image type":function(){return"Client Side ImageMap"},alt:function(){return this._elem.alt},url:function(){return this._elem.href},href:function(){return this.GetAttrSync("url")},src:function(){var img=this._getImageElement();return img?img.src:""},rect:function(){var img=this._getImageElement(),rect={left:0,top:0,right:0,bottom:0};if(!img)return rect;var img_rect=img.getBoundingClientRect(),coords=this._elem.coords.split(/\s*,\s*/);switch(coords=coords.map(function(e){return parseInt(e,10)}),this._elem.shape.toLowerCase()){case"rect":4===coords.length&&(rect.left=coords[0],rect.top=coords[1],rect.right=coords[2],rect.bottom=coords[3]);break;case"circle":if(3===coords.length){var x=coords[0],y=coords[1],radius=coords[2];if(radius<0)break;rect.left=x-radius,rect.top=y-radius,rect.right=x+radius,rect.bottom=y+radius}break;case"poly":case"polygon":if(coords.length>=2){var x1,x2,y1,y2;x1=x2=coords[0],y1=y2=coords[1];for(var i=2;i<coords.length;i+=2)x1=x1<coords[i]?x1:coords[i],x2=x2>coords[i]?x2:coords[i],y1=y1<coords[i+1]?y1:coords[i+1],y2=y2>coords[i+1]?y2:coords[i+1];rect.left=x1,rect.top=y1,rect.right=x2,rect.bottom=y2}}return{left:Math.round(img_rect.left+rect.left),top:Math.round(img_rect.top+rect.top),right:Math.round(img_rect.left+rect.right),bottom:Math.round(img_rect.top+rect.bottom)}},width:function(){var rect=this.GetAttrSync("rect");return rect.right-rect.left},height:function(){var rect=this.GetAttrSync("rect");return rect.bottom-rect.top},"map name":function(){for(var parent=this._elem;parent&&"MAP"!==parent.tagName;)parent=parent.parentNode;if(parent)return parent.name},coords:function(){return this._elem.coords},coordinates:function(){return this.GetAttrSync("coords")},visible:function(){return!0}},_helpers:{_getImageElement:function(){for(var parent=this._elem;parent&&"MAP"!==parent.tagName;)parent=parent.parentNode;if(parent){var name=parent.name,images=[],shadowRoot=ShadowDomUtil.getParentShadowRoot(this._elem,this._logger);images=shadowRoot?Util.makeArray(shadowRoot.querySelectorAll("IMG")):Util.makeArray(document.images);for(var i=0;i<images.length;i++)if(images[i].useMap.substring(1)===name)return images[i]}},getParent:function(){var img=this._getImageElement();return content.kitsManager.createAO(img,this._parentID)},isLearnable:Util.alwaysTrue},_eventHandler:function(recorder,ev){if(this._logger.trace("WebArea.eventHandler: Received recordable event on "+this._elem.tagName+": "+ev.type),"click"===ev.type)return recorder.sendRecordEvent(this,ev,{event:"onclick","event point":{x:ev.clientX,y:ev.clientY}}),!0}},AudioBehavior={_micclass:["WebAudio"],_attrs:{name:function(){return"WebAudio"}},_helpers:{isLearnable:Util.alwaysTrue}},ButtonBehavior={_micclass:["WebButton","StdObject"],_attrs:{name:function(){if("INPUT"!==this._elem.tagName)return this._elem.textContent||this._elem.name;if(this._elem.value)return this._elem.value;if(!this._elem.hasAttribute("value"))switch(this._elem.type){case"submit":return"Submit Query";case"reset":return"Reset"}return this._elem.name?this._elem.name:void 0},value:function(){return this._elem.value||this._elem.textContent},disabled:function(){return this._elem.disabled?1:0},type:function(){return this._elem.type||""}},_helpers:{isLearnable:Util.alwaysTrue},_handlerFunc:function(recorder,ev){if("click"===ev.type)return recorder.sendRecordEvent(this,ev,{event:"onclick","event point":{x:ev.clientX,y:ev.clientY}}),!0},_eventHandler:function(recorder,ev){return this._logger.trace("Button.eventHandler: Received recordable event on "+this._elem.tagName+": "+ev.type),ContentUtils.isTouchEnabled()?ButtonBehavior._eventHandlerTouchEnabled.call(this,recorder,ev):ButtonBehavior._handlerFunc.call(this,recorder,ev)},_eventHandlerTouchEnabled:function(recorder,ev){return this._logger.trace("Button._eventHandlerTouchEnabled: Received recordable event: "+ev.type),ButtonBehavior._handlerFunc.call(this,recorder,ev)},_gestureHandler:function(recorder,gestureInfo){return this._logger.trace("Button._gestureHandler: Received gesture: "+gestureInfo.event),this._elem.disabled?(this._logger.trace("Button._gestureHandler: element is disabled, ignore"),!0):"tap"===gestureInfo.event}},CheckBoxBehavior={_micclass:["WebCheckBox","HtmlToggle"],_attrs:{"logical name":function(){var res=this._getLogicalName();if(res)return res;var text=this.GetAttrSync("acc_name");if(text)return text;if(text=this.GetAttrSync("name"))return text;if(text=this.GetAttrSync("innertext"))return text;var nextSibling=this._elem.nextSibling;return nextSibling&&3===nextSibling.nodeType?nextSibling.textContent:""},part_value:function(){return this._elem.checked?"ON":"OFF"},data:function(){return this.GetAttrSync("part_value")},value:function(){return this._elem.value||"ON"},checked:function(){return this._elem.checked?1:0}},_methods:{SET_DATA:function(msg,resultCallback){this._logger.trace("CheckBoxBehavior: on command SET_DATA");var value=msg._data.data;"string"==typeof value&&(value=value.toUpperCase()),this.GetAttrSync("part_value")!==value&&this._fireEvent(this._elem,"click",{}),resultCallback(msg)},SET_VALUE_EX:function(msg,resultCallback){1===this.GetAttrSync("disabled")&&ErrorReporter.ThrowObjectDisabled();var value=msg._data.value;if("string"==typeof value&&(value=value.toUpperCase()),this.GetAttrSync("part_value")!==value){var visibleMsg=new Msg(MSG_TYPES.SRVC_MAKE_OBJ_VISIBLE,Util.shallowObjectClone(this._parentID),{"disable browser popup":msg._data["disable browser popup"]});this.SRVC_MAKE_OBJ_VISIBLE(visibleMsg,function(){this._fireEvent(this._elem,"click",{}),resultCallback(msg)}.bind(this))}else resultCallback(msg)}},_eventHandler:function(recorder,ev){return this._logger.trace("CheckBox.eventHandler: Received recordable event: "+ev.type),ContentUtils.isTouchEnabled()?CheckBoxBehavior._eventHandlerTouchEnabled.call(this,recorder,ev):"click"===ev.type?(this._elem===ev.target&&recorder.sendRecordEvent(this,ev,{event:"onclick",part_value:this._elem.checked?"ON":"OFF"}),!0):void 0},_eventHandlerTouchEnabled:function(recorder,ev){switch(this._logger.trace("CheckBox._eventHandlerTouchEnabled: Received recordable event: "+ev.type),ev.type){case"click":return recorder.sendRecordEvent(this,ev,{event:"onclick",part_value:this._elem.checked?"ON":"OFF",force_record:!0}),!0}},_gestureHandler:function(recorder,gestureInfo){return this._logger.trace("CheckBox._gestureHandler: Received gesture: "+gestureInfo.event),"tap"===gestureInfo.event},_helpers:{_getLogicalName:function(){},isLearnable:Util.alwaysTrue}},CommonBehavior={_micclass:["WebElement","Any Web Object"],_attrs:{"logical name":function(){return this.GetAttrSync("acc_name")||this.GetAttrSync("name")||this.GetAttrSync("html id")||this.GetAttrSync("innertext")},"html tag":function(){return this._elem.tagName},"tags tree":function(){var arr=[];return this._getTagsTree(arr,this._elem,0),[[arr]]},rect:function(){var client_rect=this._elem.getBoundingClientRect();return{left:Math.floor(client_rect.left),top:Math.floor(client_rect.top),right:Math.floor(client_rect.right),bottom:Math.floor(client_rect.bottom)}},pos:function(){var rect=this.GetAttrSync("rect");return{x:rect.left,y:rect.top}},x:function(){return this.GetAttrSync("rect").left},y:function(){return this.GetAttrSync("rect").top},width:function(){return Util.isUndefined(this._elem.tagName)||"svg"!==this._elem.tagName&&"path"!==this._elem.tagName&&"rect"!==this._elem.tagName?this._elem.offsetWidth:Math.round(this._elem.getBoundingClientRect().width)},height:function(){return Util.isUndefined(this._elem.tagName)||"svg"!==this._elem.tagName&&"path"!==this._elem.tagName&&"rect"!==this._elem.tagName?this._elem.offsetHeight:Math.round(this._elem.getBoundingClientRect().height)},view_x:function(msg,resultCallback){var frameReqMsg=new Msg(MSG_TYPES.QUERY,Util.shallowObjectClone(this._parentID),{view_x:null});content.dispatcher.sendMessage(frameReqMsg,null,null,function(resMsg){var frm_x=resMsg._data.view_x;this.GetAttr("x",msg,function(obj_x){msg._to.object=this.getID().object,resultCallback(obj_x+frm_x)}.bind(this))}.bind(this))},view_y:function(msg,resultCallback){var frameReqMsg=new Msg(MSG_TYPES.QUERY,Util.shallowObjectClone(this._parentID),{view_y:null});content.dispatcher.sendMessage(frameReqMsg,null,null,function(resMsg){var frm_y=resMsg._data.view_y;this.GetAttr("y",msg,function(obj_y){msg._to.object=this.getID().object,resultCallback(obj_y+frm_y)}.bind(this))}.bind(this))},parent:function(){for(var ao,elem=this._elem;;){if(!(elem=elem.parentElement))break;if(ao=content.kitsManager.createAO(elem,this._parentID))return ao.getID()}return Util.shallowObjectClone(this._parentID)},abs_x:function(msg,resultCallback){this.GetAttr("screen_rect",msg,function(result){resultCallback(result.left)})},abs_y:function(msg,resultCallback){this.GetAttr("screen_rect",msg,function(result){resultCallback(result.top)})},screen_rect:function(msg,resultCallback){var frameReqMsg=new Msg(MSG_TYPES.QUERY,Util.shallowObjectClone(this._parentID),{rect:null});content.dispatcher.sendMessage(frameReqMsg,null,null,function(resMsg){var frm_rect=resMsg._data.rect,frm_abs_x=frm_rect.left,frm_abs_y=frm_rect.top;(this._outerAO?this._outerAO:this).GetAttr("rect",msg,function(rect){rect.left+=frm_abs_x,rect.top+=frm_abs_y,rect.right+=frm_abs_x,rect.bottom+=frm_abs_y,msg._to.object=this.getID().object,resultCallback(rect)}.bind(this))}.bind(this))},class:function(){return"svg"===this._elem.tagName||"path"===this._elem.tagName||"rect"===this._elem.tagName?this._elem.getAttribute("class"):this._elem.className},class_name:function(){return this.GetAttrSync("class")},innertext:function(){return Util.cleanTextProperty(this._elem.textContent)},inner_text:function(){return this.GetAttrSync("innertext")},outertext:function(){return Util.cleanTextProperty(this._elem.outerText||this.GetAttrSync("innertext"))},outer_text:function(){return this.GetAttrSync("outertext")},innerhtml:function(){return this._elem.innerHTML},inner_html:function(){return this.GetAttrSync("innerhtml")},outerhtml:function(){return this._elem.outerHTML},outer_html:function(){return this.GetAttrSync("outerhtml")},"html id":function(){return this._elem.id},title:function(){return this._elem.title},version:function(){return Util.browserApplicationVersion()},visible:function(){var rect=this._elem.getBoundingClientRect();if(0===rect.width&&0===rect.height)return!1;var style=getComputedStyle(this._elem,null);return"none"!==style.display&&"hidden"!==style.visibility},focus:function(){return this._elem.ownerDocument.activeElement===this._elem},focused:function(){return this.GetAttrSync("focus")},attribute:function(msg){return this._getAttributes(this._elem,msg)},"all attributes":function(){var res=[];return Util.makeArray(this._elem.attributes).forEach(function(attr){"_uft_ext_events_hooked"!=attr.name&&(res.push(attr.name),res.push(attr.value))}),res.join(";;")},"all styles":function(){var style=window.getComputedStyle(this._elem,null),res=[];return Util.makeArray(style).forEach(function(styleName){res.push(styleName),res.push(style.getPropertyValue(styleName))}),res.join(";;")},style:function(msg){return this._getCSSValues(this._elem,msg)},value:function(){return this._elem.value},xpath:function(){return _QTP.AutoXpathRecorder(this._elem)},_xpath:function(){return _QTP.AutoXpathRecorder(this._elem)},css:function(){return _QTP.CSSGenerator(this._elem)},disabled:function(){return this._elem.disabled?1:0},type:function(){return this._elem.type},name:function(){return this._elem.name},text:function(){return content.settings.useinnertextfortextcollection?this._elem.textContent.replace(/\xA0/g," "):ContentUtils.getVisibleTextContent(this._elem)},acc_name:function(){return ContentUtils.getAccNameFromControl(this._elem)},elementinterface:function(msg,resultCallback){return DotObjUtil.WrapElement(this._elem,this.getID(),resultCallback)},is_container:function(){return!1},ancestor:function(){for(var parent=this.getParent();parent;parent=parent.getParent())if(parent.GetAttrSync("is_container"))return parent.getID()},source_index:function(){var allElems=Util.makeArray(document.getElementsByTagName("*")),ret=allElems.indexOf(this._elem);if(ret>=0)return ret},"all text items":function(){return Util.getTextNodesValue(this._elem).join(";")},role:function(){return this._elem.getAttribute("role")||""}},_methods:{WEB_GETFORMA:function(msg,resultCallback){if(this._logger.trace("CommonBehavior: on commnad WEB_GETFORMA"),msg._data=msg._data||{},msg._data.WEB_PN_ID=msg._to,this._elem.form){var form_ao=content.kitsManager.createAO(this._elem.form,this._parentID);msg._data.WEB_PN_ID.object=form_ao.getID().object}else msg._data.WEB_PN_ID=null;resultCallback(msg)},MAKE_VISIBLE:function(msg,resultCallback){this._logger.trace("CommonBehavior: on command MAKE_VISIBLE")
;for(var elem=this._elem,data=msg._data,container=elem,elem_rect=this.GetAttrSync("rect"),scroll_to_center=data.WEB_PN_SCROLL_TO_CENTER,pt=data.pos?{x:data.pos.x,y:data.pos.y}:{x:0,y:0};;){if(!(container=container.parentNode))break;if("DIV"===container.tagName){var con_rect=content.kitsManager.createAO(container,this._parentID).GetAttrSync("rect");if(!Util.isRectEmpty(con_rect)){(scroll_to_center||!Util.isVisible(elem_rect,con_rect))&&(scroll_to_center?(container.scrollLeft+=elem_rect.left-Util.getCenterPoint(con_rect).x+pt.x,container.scrollTop+=elem_rect.top-Util.getCenterPoint(con_rect).y+pt.y):(container.scrollLeft+=elem_rect.left-con_rect.left+pt.x,container.scrollTop+=elem_rect.top-con_rect.top+pt.y),elem_rect=this.GetAttrSync("rect"))}}}var frame_rect={left:0,top:0,right:window.innerWidth,bottom:window.innerHeight},containerRectHeight=frame_rect.bottom-frame_rect.top,containerRectWidth=frame_rect.right-frame_rect.left,elemRectHeight=elem_rect.bottom-elem_rect.top,elemRectWidth=elem_rect.right-elem_rect.left,needToScroll=!Util.isVisible(elem_rect,frame_rect)||!Util.isRectFullyInRect(elem_rect,frame_rect)&&containerRectHeight>=elemRectHeight&&containerRectWidth>=elemRectWidth;if(scroll_to_center||needToScroll)if(scroll_to_center){var elemRectCenterPoint=Util.getCenterPoint(elem_rect),frameRectCenterXPoint=Util.getCenterPoint(frame_rect);window.scrollTo(elemRectCenterPoint.x-frameRectCenterXPoint.x+pt.x+window.scrollX,elemRectCenterPoint.y-frameRectCenterXPoint.y+pt.y+window.scrollY)}else window.scrollTo(elem_rect.left+pt.x+window.scrollX,elem_rect.top+pt.y+window.scrollY);var req_data={pos:{x:data.pos?pt.x+elem_rect.left:elem_rect.left,y:data.pos?pt.y+elem_rect.top:elem_rect.top},WEB_PN_SCROLL_TO_CENTER:data.WEB_PN_SCROLL_TO_CENTER,"disable browser popup":msg._data["disable browser popup"]},reqMsg=new Msg(MSG_TYPES.SRVC_MAKE_OBJ_VISIBLE,Util.shallowObjectClone(this._parentID),req_data);content.dispatcher.sendMessage(reqMsg,null,null,function(){this._logger.trace("CommonBehavior: MAKE_VISIBLE: on callback from parent's SRVC_MAKE_OBJ_VISIBLE. Get 'screen_rect' attribute"),this.GetAttr("screen_rect",msg,function(rect){this._logger.trace("CommonBehavior: MAKE_VISIBLE: on callback from 'screen_rect' attribute. Value: ",rect),msg._data.rect=rect,msg._data.pos={x:rect.left+pt.x,y:rect.top+pt.y},msg._data.rectInDocument=this.GetAttrSync("rect"),msg._data.hwnd=-1,resultCallback(msg)}.bind(this))}.bind(this))},GET_SCREEN_RECT:function(msg,resultCallback){this._logger.trace("CommonBehavior: on commnad GET_SCREEN_RECT"),this.GetAttr("screen_rect",msg,function(result){msg._data.rect=result,resultCallback(msg)})},CONTAINS_TEXT:function(msg,resultCallback){this._logger.trace("CommonBehavior: on commnad CONTAINS_TEXT");var str=msg._data,regex=new RegExp(str);!!regex.test(this.GetAttrSync("text"))||this.GetAttrSync("text").indexOf(str),resultCallback(msg)},CALL_EVENT:function(msg,resultCallback){this._logger.trace("CommonBehavior: on commnad CALL_EVENT");var event=msg._data.event;event=event.toLowerCase().replace(/^on/,""),this._fireEvent(this._elem,event,msg._data),resultCallback(msg)},WEB_CLICK_EX:function(msg,resultCallback){1===this.GetAttrSync("disabled")&&ErrorReporter.ThrowObjectDisabled(),msg.delay=!0;var clickMsg=Util.deepObjectClone(msg);ContentUtils.protectCallbackAgainstPrematureNavigation(resultCallback,msg,this._logger,"WEB_CLICK_EX")(msg);var msgMakeVisible=new Msg(MSG_TYPES.SRVC_MAKE_OBJ_VISIBLE,Util.shallowObjectClone(this._parentID),{"disable browser popup":msg._data["disable browser popup"]});this.SRVC_MAKE_OBJ_VISIBLE(msgMakeVisible,function(){this._fireEvent(this._elem,"click",clickMsg._data)}.bind(this))},HIGHLIGHT_OBJECT:function(msg,resultCallback){this._logger.trace("CommonBehavior: on command HIGHLIGHT_OBJECT"),ContentUtils.highlightElement(this._elem,resultCallback,msg)},HIGHLIGHT_MATCHES:function(msg,resultCallback){this._logger.trace("CommonBehavior: on command HIGHLIGHT_OBJECT");var elems=msg._data.WEB_PN_ID.map(function(id){return content.rtidManager.GetElementFromID(id.object)});ContentUtils.highlightElements(elems,resultCallback,msg)},TOUCH_SWIPE:function(msg,callback){function computeDelta(direction,distance){switch(direction){case 0:return{x:-distance,y:0};case 1:return{x:distance,y:0};case 2:return{x:0,y:-distance};case 3:return{x:0,y:distance}}throw Error("Unexpeced direction: "+direction)}this._logger.trace("CommonBehavior: Swipe(",msg._data,")");var delta=computeDelta(msg._data.direction,msg._data.distance),interval=50,steps=Math.max(Math.floor(msg._data.duration/interval),1);this._warnIfNoTouch(msg),this._pan(msg._data.pos,delta,interval,steps,msg,callback)},TOUCH_LONG_TAP:function(msg,callback){this._logger.trace("CommonBehavior: LongTap(",msg._data,")");var point=this._pointRelativeToElem(msg._data.pos),duration=msg._data.duration,element=this._elem;this._warnIfNoTouch(msg);var wrappedCallback=ContentUtils.protectCallbackAgainstPrematureNavigation(callback,msg,this._logger,"LongTap"),sim=new SimulateGesture;sim.addTouch(element,point),Util.setTimeout(function(){sim.removeTouches(),wrappedCallback(msg)},duration)},TOUCH_PINCH:function(msg,callback){function moveTouch(step){var ratio=(1-scale)*step/totalSteps,positions=[{x:first.x+deltaX*ratio,y:first.y+deltaY*ratio},{x:second.x-deltaX*ratio,y:second.y-deltaY*ratio}];pinch.move(positions),step===totalSteps?Util.setTimeout(function(){pinch.removeTouches(),wrappedCallback(msg)},interval):Util.setTimeout(moveTouch,interval,step+1)}this._logger.trace("CommonBehavior: Pinch(",msg._data,")");var scale=msg._data.scale,duration=msg._data.duration,point=this._pointRelativeToElem(msg._data.pos),element=this._elem,interval=50,totalSteps=Math.max(Math.floor(duration/interval)-2,1);this._warnIfNoTouch(msg);var wrappedCallback=ContentUtils.protectCallbackAgainstPrematureNavigation(callback,msg,this._logger,"Pinch"),rect=element.getBoundingClientRect(),defaultDelta=35,deltaX=Math.min(defaultDelta,Math.abs(point.x-rect.left),Math.abs(rect.right-point.x)),deltaY=Math.min(defaultDelta,Math.abs(point.y-rect.top),Math.abs(rect.bottom-point.y)),first={x:point.x-deltaX,y:point.y-deltaY},second={x:point.x+deltaY,y:point.y+deltaY},pinch=new SimulateGesture;pinch.addTouch(element,first),Util.setTimeout(function(){pinch.addTouch(element,second),Util.setTimeout(moveTouch,interval,0)},interval)},WEB_DOUBLE_CLICK:function(msg,callback){this._logger.trace("CommonBehavior: DoubleClick(",msg._data,")");var duration=msg._data.duration,wrappedCallback=ContentUtils.protectCallbackAgainstPrematureNavigation(callback,msg,this._logger,"DblClick");this._fireEvent(this._elem,"click",msg._data),Util.setTimeout(function(self){self._fireEvent(self._elem,"click",msg._data),self._fireEvent(self._elem,"dblclick",msg._data),wrappedCallback(msg)},duration,this)},WEB_HOVER_TAP:function(msg,callback){ContentUtils.isTouchEnabled()?(this._logger.trace("CommonBehavior: Tapping for HoverTap(",msg._data,")"),this._fireEvent(this._elem,"click",msg._data)):(this._logger.trace("CommonBehavior: Hovering for HoverTap(",msg._data,")"),["mouseover","mouseenter","mousemove"].forEach(function(event){this._fireEvent(this._elem,event,msg._data)},this)),callback(msg)},TOUCH_PAN:function(msg,callback){this._logger.trace("CommonBehavior: Pan(",msg._data,")");var interval=50,steps=Math.max(Math.floor(msg._data.duration/interval),1);this._warnIfNoTouch(msg),this._pan(msg._data.pos,msg._data.distance,interval,steps,msg,callback)},IS_MOUSE_REPLAY_REQUIRED:function(msg,resultCallback){this._logger.trace("CommonBehavior: on commnad IS_MOUSE_REPLAY_REQUIRED"),resultCallback(msg)}},_eventHandler:function(recorder,ev){if(this._logger.trace("Common.eventHandler: Received recordable event on "+this._elem.tagName+": "+ev.type),ContentUtils.isTouchEnabled())return!1;var data=null;switch(ev.type){case"click":data={event:"onclick"};break;case"dblclick":data={event:"ondblclick"};break;case"mouseup":data={event:"onmouseup","event button":this._quirkyButton(ev.button)};break;case"mousedown":data={event:"onmousedown","event button":this._quirkyButton(ev.button)};break;case"mouseover":data={event:"onmouseover"};break;case"mouseout":data={event:"onmouseout"};break;case"contextmenu":data={event:"oncontextmenu"};break;case"dragstart":return recorder.queueRecordEvent(this,ev,{event:"ondragstart","event point":{x:ev.clientX,y:ev.clientY}}),!0;case"dragend":return recorder.discardQueuedRecordEvents(),!0;case"drop":return recorder.sendRecordEventWithQueue(this,ev,{event:"ondrop","event point":{x:ev.clientX,y:ev.clientY}}),!0}return data?(recorder.sendRecordEvent(this,ev,Util.extend(data,{"event point":{x:ev.clientX,y:ev.clientY}})),!0):void 0},_gestureHandler:function(recorder,gestureInfo){return this._logger.trace("Common._gestureHandler: Received gesture: "+gestureInfo.event),"tap"===gestureInfo.event?(recorder.sendRecordEvent(this,null,{event:"onclick","event point":{x:gestureInfo.clientX,y:gestureInfo.clientY}}),!0):(recorder.sendRecordEvent(this,null,gestureInfo),!0)}},ContentEditableBehavior={_micclass:["WebEdit"],_attrs:{value:function(){return this._elem.innerHTML?this._elem.innerHTML.replace("\n","\r\n"):""},name:function(){return this._elem.getAttribute("name")||""},kind:function(){return"other"},readonly:function(){return 0},disabled:function(){return 0},type:function(){return""},"max length":function(){return parseInt(this._elem.getAttribute("maxlength"))||-1},data:function(){return this._elem.innerHTML?this._elem.innerHTML.replace("\n","\r\n"):""}},_methods:{SET_VALUE:function(msg,resultCallback){this._logger.trace("ContentEditableBehavior: on command SET_VALUE"),Util.isNullOrUndefined(msg._data.value)&&ErrorReporter.ThrowInvalidArg(),this._elem.innerHTML=msg._data.value,this._fireEvent(this._elem,"input",{}),resultCallback(msg)},SET_VALUE_EX:function(msg,resultCallback){this._logger.trace("ContentEditableBehavior: on command SET_VALUE_EX");var msgMakeVisible=new Msg(MSG_TYPES.SRVC_MAKE_OBJ_VISIBLE,Util.shallowObjectClone(this._parentID),{"disable browser popup":msg._data["disable browser popup"]});this.SRVC_MAKE_OBJ_VISIBLE(msgMakeVisible,function(){this._fireEvent(this._elem,"focus"),this.InvokeMethod("SET_VALUE",msg,resultCallback)}.bind(this))},SET_DATA:function(msg,resultCallback){this._logger.trace("ContentEditableBehavior: on command SET_DATA"),msg._data.value=msg._data.data,this.InvokeMethod("SET_VALUE",msg,resultCallback)}},_helpers:{isLearnable:Util.alwaysTrue},_eventHandler:function(recorder,ev){switch(this._logger.trace("ContentEditable.eventHandler: Received recordable event: "+ev.type),ev.type){case"click":return!0;case"focus":return this._elem._beforeChangeTxtValue=this._elem.textContent||"",!0;case"blur":return this._elem.textContent!==this._elem._beforeChangeTxtValue&&recorder.sendRecordEvent(this,ev,{event:"onchange",value:this._elem.textContent,type:this._elem.type,force_record:!0}),!0}}},EditBehavior={_micclass:["WebEdit","StdObject"],_attrs:{name:function(){return this._elem.name||Util.getMicClass(this)},"logical name":function(){var text=this.GetAttrSync("acc_name");return text||((text=this._elem.name)?text:(text=this.GetAttrSync("placeholder"))||"")},value:function(){return this._elem.value||""},"default value":function(){return this._elem.defaultValue},cols:function(){return this._elem.size||this._elem.cols},"width in characters":function(){return this.GetAttrSync("cols")},rows:function(){return this._elem.rows||0},kind:function(){return"INPUT"===this._elem.tagName?"singleline":"TEXTAREA"===this._elem.tagName?"multiline":void 0},type:function(){var inputTypes=["text","password","submit","radio","checkbox","button","color","date","datetime","datetime-local","email","month","number","range","search","tel","time","url","week"],type=this._elem.getAttribute("type");return null!=type&&-1!=inputTypes.indexOf(type)||(type=this._elem.type),type},disabled:function(){return this._elem.disabled?1:0},readonly:function(){return this._elem.readOnly?1:0},"max length":function(){var maxLength=this._elem.maxLength;return"INPUT"===this._elem.tagName?-1==maxLength||2147483647==maxLength?524288:maxLength:"TEXTAREA"===this._elem.tagName&&(524288==maxLength||2147483647==maxLength)?-1:maxLength},data:function(){return this.GetAttrSync("value")},innertext:function(){return"TEXTAREA"===this._elem.tagName?Util.cleanTextProperty(this.GetAttrSync("value")):""},placeholder:function(){return this._elem.placeholder||""},pattern:function(){return this._elem.pattern||""},required:function(){return this._elem.required||this._elem.getAttribute("aria-required")||!1}},_methods:{SET_VALUE:function(msg,resultCallback){this._logger.trace("EditBehavior: on command SET_VALUE"),Util.isNullOrUndefined(msg._data.value)&&ErrorReporter.ThrowInvalidArg();var value=msg._data.value,performCommit=msg._data.perform_commit;if(Util.assert("string"==typeof value),"string"==typeof value){var newText=msg._data.value;this._elem.value=newText.substring(0,newText.length-1);var lastKey=msg._data.value.charAt(msg._data.value.length-1);this._fireEvent(this._elem,"keydown",{key:lastKey}),this._fireEvent(this._elem,"keypress",{key:lastKey}),this._elem.value=msg._data.value,this._fireEvent(this._elem,"input",{key:lastKey}),this._fireEvent(this._elem,"keyup",{key:lastKey})}else this._elem.value=value,this._fireEvent(this._elem,"input",{});performCommit&&(this._fireEvent(this._elem,"change"),this._fireEvent(this._elem,"blur")),resultCallback(msg)},SET_VALUE_EX:function(msg,resultCallback){var isDisabled=this.GetAttrSync("disabled"),isReadonly=this.GetAttrSync("readonly");(isDisabled||isReadonly)&&ErrorReporter.ThrowObjectDisabled();var maxLength=this.GetAttrSync("max length");Util.isNullOrUndefined(maxLength)&&(maxLength=-1);var text=msg._data.value||"";-1!=maxLength&&text.length>maxLength&&ErrorReporter.ThrowInvalidArg();var msgMakeVisible=new Msg(MSG_TYPES.SRVC_MAKE_OBJ_VISIBLE,Util.shallowObjectClone(this._parentID),{"disable browser popup":msg._data["disable browser popup"]});this.SRVC_MAKE_OBJ_VISIBLE(msgMakeVisible,function(){this._fireEvent(this._elem,"focus"),this.InvokeMethod("SET_VALUE",msg,resultCallback)}.bind(this))},SET_DATA:function(msg,resultCallback){this._logger.trace("EditBehavior: on command SET_DATA"),msg._data.value=msg._data.data,this.InvokeMethod("SET_VALUE",msg,resultCallback)}},_eventHandler:function(recorder,ev){switch(this._logger.trace("Edit._eventHandler: Received recordable event: "+ev.type),ev.type){case"click":return!0;case"focus":return!!this._elem._recordInfo||(this._elem._recordInfo={initialValue:this._elem.value,latestValue:this._elem.value},!0);case"keydown":return this._elem._recordInfo||(this._elem._recordInfo={initialValue:this._elem.value,latestValue:this._elem.value}),!0;case"keyup":case"input":case"textInput":if(!this._elem._recordInfo)return!1;return"keyup"===ev.type&&13===ev.which&&"INPUT"===this._elem.tagName?this._sendSetRecordEvent(recorder,ev,this._elem._recordInfo):(this._elem._recordInfo.latestValue=this._elem.value,!0);case"blur":var recordInfo=this._elem._recordInfo;return delete this._elem._recordInfo,this._sendSetRecordEvent(recorder,ev,recordInfo);case"change":return this._sendSetRecordEvent(recorder,ev,this._elem._recordInfo)}},_gestureHandler:function(recorder,gestureInfo){return this._logger.trace("Edit._gestureHandler: Received gesture: "+gestureInfo.event),"tap"===gestureInfo.event},_eventTargetStarted:function(recorder){return!!ContentUtils.isTouchEnabled()&&(!!this._elem._recordInfo||(this._elem._recordInfo={initialValue:this._elem.value,latestValue:this._elem.value},!0))},_eventTargetEnded:function(recorder){if(!ContentUtils.isTouchEnabled())return!1;var recordInfo=this._elem._recordInfo;return!!recordInfo&&(delete this._elem._recordInfo,recordInfo.latestValue!==recordInfo.initialValue&&(recorder.sendRecordEvent(this,null,{event:"onchange",value:recordInfo.latestValue,type:this._elem.type,force_record:!0}),!0))},_helpers:{isLearnable:Util.alwaysTrue,_sendSetRecordEvent:function(recorder,ev,recordInfo){return!!recordInfo&&(recordInfo.latestValue=this._elem.value,recordInfo.latestValue!==recordInfo.initialValue&&(recorder.sendRecordEvent(this,ev,{event:"onchange",value:recordInfo.latestValue,type:this._elem.type,force_record:!0}),recordInfo.initialValue=recordInfo.latestValue,!0))}}},FileInputBehavior={_micclass:["WebFile","WebEdit","WebButton","StdObject"],_attrs:{name:function(){return this._elem.name||"WebFile"},readonly:function(){return this._elem.readOnly?1:0},"width in characters":function(){return this._elem.size},value:function(){return this._getFilesText()},required:function(){return this._elem.required||!1}},_helpers:{isLearnable:Util.alwaysTrue,_getFilesText:function(){for(var files=[],i=0;i<this._elem.files.length;++i)files.push(this._elem.files[i]);return files.map(function(file){return file.name}).join(", ")}},_eventHandler:function(recorder,ev){switch(this._logger.trace("WebFile.eventHandler: Received recordable event on "+this._elem.tagName+": "+ev.type),ev.type){case"click":return!0;case"focus":return recorder.sendRecordEvent(this,ev,{event:"onfocus"}),this._elem._beforeChangeFilesValue=this._getFilesText(),!0;case"change":return!0;case"blur":var filesText=this._getFilesText();return filesText!==this._elem._beforeChangeFilesValue&&recorder.sendRecordEvent(this,ev,{event:"onchange",value:filesText,type:this._elem.type,force_record:!0}),!0;default:return!1}}},FormBehavior={_eventHandler:function(recorder,ev){switch(this._logger.trace("FormBehavior.eventHandler: Received recordable event on "+this._elem.tagName+": "+ev.type),ev.type){case"keydown":return 13===ev.which&&(this._elem._submitTargetElem=ev.target),!0;case"click":if(this._elem._submitTargetElem){var ao=content.kitsManager.createAO(ev.target,this._parentID);recorder.sendRecordEvent(ao,ev,{event:"onclick","event point":{x:ev.clientX,y:ev.clientY}}),recorder.stopCurrentPropagation()}return this._elem._submitTargetElem=null,!0;case"keyup":return this._elem._submitTargetElem&&"INPUT"===this._elem._submitTargetElem.tagName&&13===ev.which?Util.setTimeout(function(){this._sendSubmitRecordEvent(recorder,ev)}.bind(this),50):this._elem._submitTargetElem=null,!0;case"submit":return!this._elem._submitTargetElem||(this._sendSubmitRecordEvent(recorder,ev),!0)}},_gestureHandler:function(recorder,gestureInfo){return this._logger.trace("FormBehavior._gestureHandler: Received gesture: "+gestureInfo.event),"tap"===gestureInfo.event&&(this._elem._submitTargetElem=null,!0)},_helpers:{_sendSubmitRecordEvent:function(recorder,ev){var ao=content.kitsManager.createAO(this._elem._submitTargetElem,this._parentID);recorder.sendRecordEvent(ao,ev,{force_record:!0,event:"onsubmit"}),this._elem._submitTargetElem=null,recorder.stopCurrentPropagation()}}},ImageBehavior={_micclass:["Image"],_attrs:{"logical name":function(){switch(this._elem.tagName){case"IMG":return this._getNiceName(this._elem.alt)||this._getNiceName(this._elem.src);case"INPUT":return this._getNiceName(this._elem.alt)||this._getNiceName(this._elem.name)||this._getNiceName(this._elem.src);case"AREA":return this._getNiceName(this._elem.alt)||this._getNiceName(this._elem.href)}},name:function(){return this._getNiceName(this._elem.name)||"Image"},alt:function(){return this._elem.alt||""},src:function(){return this._elem.src||""},"file name":function(){var src=this.GetAttrSync("src");return 0===src.indexOf("data:")?"":src.replace(/.*\//,"")},"image type":function(){return this._getImageTypeName()}},_helpers:{_getNiceName:function(name){if(!name)return name;var nice_name=name;return nice_name=nice_name.replace(/.*\\/,""),nice_name=nice_name.replace(/.*\//,""),nice_name=nice_name.replace(/\.[^.]*$/,"")},_getImageTypeName:function(){if("INPUT"===this._elem.tagName)return"Image Button";var isMap=this._elem.isMap,useMap=this._elem.useMap||"";return isMap&&useMap.length>0?"Client & Server Side ImageMap":isMap?"Server Side ImageMap":useMap.length>0?"Client Side ImageMap":"Plain Image"},isLearnable:Util.alwaysTrue},_eventHandler:function(recorder,ev){if(this._logger.trace("Image.eventHandler: Received recordable event on "+this._elem.tagName+": "+ev.type),ContentUtils.isTouchEnabled())return!1;switch(ev.type){case"click":return recorder.sendRecordEvent(this,ev,{event:"onclick","event point":{x:ev.offsetX,y:ev.offsetY},"image type":this.GetAttrSync("image type")}),!0;default:return!1}}},ImageLinkBehavior={_micclass:["Image","Hyperlink"],_attrs:{href:function(){var parentAnchor;return(parentAnchor=this._getImageParentAnchor())?parentAnchor.href:""},url:function(){return this.GetAttrSync("href")},target:function(){var parentAnchor;return(parentAnchor=this._getImageParentAnchor())?parentAnchor.target:""},"image type":function(){var type=this._getImageTypeName();return"Server Side ImageMap"!==type&&(type="Image Link"),type},attribute:function(msg){var attrVal=this._getAttributes(this._elem,msg);if(attrVal)return attrVal;var parentAnchorElem=this._getImageParentAnchor();return parentAnchorElem?this._getAttributes(parentAnchorElem,msg)||"":""}},override:{getParent:function(){var anchor=this._getImageParentAnchor();return this._getParentAO(anchor)}}},LinkBehavior={_micclass:["Link","Hyperlink","Text"],_attrs:{href:function(){return this._elem.href||""},url:function(){return this.GetAttrSync("href")},target:function(){return this._elem.target||""},color:function(){return getComputedStyle(this._elem,null).color},"background color":function(){return getComputedStyle(this._elem,null).backgroundColor},font:function(){var fontFamily=getComputedStyle(this._elem,null).fontFamily;return fontFamily="''"===fontFamily?"":fontFamily},innertext:function(){return Util.cleanTextProperty(this._elem.textContent)},data:function(){return this.GetAttrSync("text")},name:function(){return Util.cleanTextProperty(this._elem.textContent||"")},text:function(){return this.GetAttrSync("name")}},_handlerFunc:function(recorder,ev){if("click"===ev.type)return recorder.sendRecordEvent(this,ev,{event:"onclick","event point":{x:ev.clientX,y:ev.clientY}}),!0},_eventHandler:function(recorder,ev){return this._logger.trace("Link.eventHandler: Received recordable event on "+this._elem.tagName+": "+ev.type),ContentUtils.isTouchEnabled()?LinkBehavior._eventHandlerTouchEnabled.call(this,recorder,ev):LinkBehavior._handlerFunc.call(this,recorder,ev)},_eventHandlerTouchEnabled:function(recorder,ev){return this._logger.trace("Link._eventHandlerTouchEnabled: Received recordable event: "+ev.type),LinkBehavior._handlerFunc.call(this,recorder,ev)},_gestureHandler:function(recorder,gestureInfo){return this._logger.trace("Link._gestureHandler: Received gesture: "+gestureInfo.event),"tap"===gestureInfo.event},_helpers:{isLearnable:Util.alwaysTrue}},ListBehavior={_micclass:["WebList","StdObject"],_attrs:{name:function(){return this._elem.name||"select"},"select type":function(){return this._elem.multiple?"Extended Selection":this._elem.size>1?"Single Selection":"ComboBox Select"},"multiple value":function(){return this.GetAttrSync("selection")},selection:function(){return this._getOptionTextWithPred(this._selectedPred)},value:function(){return this.GetAttrSync("selection")},"default value":function(){return this._getOptionTextWithPred(function(option){return option.defaultSelected})},"all items":function(){return Util.makeArray(this._elem.options).map(function(e){return e.text}).join(";")},"items count":function(){return this._elem.options.length},"selected item index":function(){if(this._elem.multiple){for(var indexes=[],i=0;i<this._elem.options.length;i++)this._elem.options[i].selected&&indexes.push(i);return indexes.join(";")}var val=this._elem.selectedIndex;return null!=val&&-1!==val?val.toString():""},"selected items count":function(){if(this._elem.multiple)return Util.makeArray(this._elem.options).filter(this._selectedPred).length;var selectedIndex=this._elem.selectedIndex;return null!=selectedIndex&&-1!==selectedIndex?1:0},"visible items":function(){var threshold,elem=this._elem;if(elem.size>0){threshold=elem.size;var javaFXPattern=/JavaFX\/([\d.]*)/i,matchResult=javaFXPattern.exec(navigator.userAgent);if(matchResult){parseFloat(matchResult[1])<=8&&elem.size<4&&(threshold=elem.multiple||1!=elem.size?4:1)}}else threshold=elem.multiple?4:1;return Math.min(elem.length,threshold)},multiple:function(){return this._elem.multiple},hwnd:function(){},data:function(){return this.GetAttrSync("value")},innertext:function(){var all_items=this.GetAttrSync("all items");return all_items=all_items.replace(/;/g," "),all_items=" "+all_items,all_items=all_items.replace(/\xA0/g," "),all_items=all_items.replace(/\r|\n/g,"")}},_methods:{ITEM_TO_NUM:function(msg,resultCallback){this._logger.trace("ListBehavior: on command ITEM_TO_NUM");for(var item=msg._data.AN_ITEM_TEXT,i=0;i<this._elem.options.length;++i)if(this._elem.options[i].value===item)return msg._data.item_index=i,void resultCallback(msg);ErrorReporter.ThrowItemNotFound()},NUM_TO_ITEM:function(msg,resultCallback){this._logger.trace("ListBehavior: on command NUM_TO_ITEM");var index=msg._data.item_index;(index<0||index>=this._elem.options.length)&&ErrorReporter.ThrowItemNotFound(),msg._data.AN_ITEM_TEXT=this._elem.options[index].text,resultCallback(msg)},LIST_SELECT:function(msg,resultCallback){this._logger.trace("ListBehavior: on command LIST_SELECT");var rtn=this._getOptionItemToSelect(msg._data.value);this._elem.selectedIndex=rtn.index,resultCallback(msg)},LIST_EXTEND_SELECT:function(msg,resultCallback){this._logger.trace("ListBehavior: on command LIST_EXTEND_SELECT"),this._getOptionItemToSelect(msg._data.value).option.selected=!0,resultCallback(msg)},LIST_DESELECT:function(msg,resultCallback){this._logger.trace("ListBehavior: on command LIST_DESELECT"),this._getOptionItemToSelect(msg._data.value).option.selected=!1,resultCallback(msg)},LIST_SELECT_EX:function(msg,resultCallback){this._logger.trace("ListBehavior: on command LIST_SELECT_EX"),this._listOperationEx(msg,"LIST_SELECT",resultCallback)},LIST_EXTEND_SELECT_EX:function(msg,resultCallback){this._logger.trace("ListBehavior: on command LIST_EXTEND_SELECT_EX"),this._listOperationEx(msg,"LIST_EXTEND_SELECT",resultCallback)},LIST_DESELECT_EX:function(msg,resultCallback){this._logger.trace("ListBehavior: on command LIST_DESELECT_EX"),this._listOperationEx(msg,"LIST_DESELECT",resultCallback)},SET_DATA:function(data,resultCallback){ErrorReporter.ThrowNotImplemented("AO->ListBehavior._methods.SET_DATA"),this._logger.trace("ListBehavior: on command SET_DATA"),data=data.data;var matches=data.match(/^#(\d+)$/);data.value=matches?parseInt(matches[1],10):data,this.InvokeMethod("LIST_SELECT",data,resultCallback)}},_eventHandler:function(recorder,ev){switch(this._logger.trace("List.eventHandler: Received recordable event: "+ev.type),ev.type){case"click":return!0;case"mousedown":return ev.target===this._elem&&this._updatePreviousSelection(),!1;case"change":var selection=this._elem.multiple?[this._getOptionsWithPred(this._selectedPred)]:this.GetAttrSync("selection");return recorder.sendRecordEvent(this,ev,{event:"onchange",value:selection,previous_selection:[this._elem.previousSelection]}),this._updatePreviousSelection(),!0}},_gestureHandler:function(recorder,gestureInfo){return this._logger.trace("ListBehavior._gestureHandler: Received gesture: "+gestureInfo.event),"tap"===gestureInfo.event},_helpers:{_listOperationEx:function(msg,opMethod,resultCallback){var msgMakeVisible=new Msg(MSG_TYPES.SRVC_MAKE_OBJ_VISIBLE,Util.shallowObjectClone(this._parentID),{"disable browser popup":msg._data["disable browser popup"]});this.SRVC_MAKE_OBJ_VISIBLE(msgMakeVisible,function(){this._fireEvent(this._elem,"focus"),this.InvokeMethod(opMethod,msg,function(resMsg){this._fireEvent(this._elem,"change"),this._fireEvent(this._elem,"blur"),resultCallback(resMsg)}.bind(this))}.bind(this))},_getOptionItemToSelect:function(item){var rtnVal={};if("number"==typeof item)item>=0&&item<this._elem.options.length&&(rtnVal.index=item,rtnVal.option=this._elem.options[item]);else for(var i=0;i<this._elem.options.length;++i)if(this._elem.options[i].text.replace(/\u00a0/g," ")===item.replace(/\u00a0/g," ")){rtnVal.index=i,rtnVal.option=this._elem.options[i];break}return void 0===rtnVal.index&&ErrorReporter.ThrowItemNotFound(),rtnVal},_getUniqueValue:function(opt,i){return opt&&1===Util.makeArray(this._elem.options).filter(function(curr){return opt===curr.text}).length?opt:"#"+i},_getOptionsWithPred:function(pred){var arr=[];return Util.makeArray(this._elem.options).forEach(function(option,i){pred(option)&&arr.push(this._getUniqueValue(option.text,i))},this),arr},_getOptionTextWithPred:function(pred){return this._getOptionsWithPred(pred).join(";")},_selectedPred:function(e){return e.selected},_updatePreviousSelection:function(){this._elem.previousSelection=this._getOptionsWithPred(this._selectedPred)},isLearnable:Util.alwaysTrue,UseEventConfiguration:function(event){return"mousedown"!==event.type}}},MediaBaseBehavior={_attrs:{src:function(){return this._elem.src},"current source":function(){return this._elem.currentSrc},sources:function(){return Util.makeArray(this._elem.getElementsByTagName("source")).map(function(e){return e.src}).join(";")},duration:function(){var d=this._elem.duration||0;return Math.round(1e3*d)},"current time":function(){var d=this._elem.currentTime||0;return Math.round(1e3*d)},autoplay:function(){return this._elem.autoplay},loop:function(){return this._elem.loop},controls:function(){return this._elem.controls},muted:function(){return this._elem.muted},playing:function(){return!(this._elem.paused||this._elem.ended)},volume:function(){return this._elem.volume.toFixed(2)},"playback rate":function(){return this._elem.playbackRate.toFixed(2)}},_methods:{MEDIA_PLAY:function(msg,resultCallback){this._logger.trace("MediaBaseBehavior.MEDIA_PLAY: Started");var status="NotImplemented";this._elem.addEventListener("play",function(){status="OK"},!1);var play_promise=this._elem.play();if(void 0!==play_promise&&play_promise.catch(function(error){status="IllegalOperation"}),navigator.userAgent.match(/iPhone|iPad|iPod/i)){(document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen)&&(document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullscreen?document.mozCancelFullscreen():document.exitFullscreen?document.exitFullscreen():this._elem.webkitExitFullScreen())}if(ContentUtils.isTouchEnabled())return void Util.setTimeout(function(){msg.status=status,resultCallback(msg)},100);resultCallback(msg)},MEDIA_PAUSE:function(msg,resultCallback){this._logger.trace("MediaBaseBehavior.MEDIA_PAUSE: Started"),this._elem.pause(),resultCallback(msg)},MEDIA_LOAD:function(msg,resultCallback){this._logger.trace("MediaBaseBehavior.MEDIA_LOAD: Started"),this._elem.load(),resultCallback(msg)}},_helpers:{UseEventConfiguration:function(ev){switch(ev.type){case"play":case"pause":return!1}return!0}},_eventHandler:function(recorder,ev){this._logger.trace("MediaBaseBehavior._eventHandler: Received recordable event: "+ev.type);var mediaElem=ev.target;if(!mediaElem.controls)return!0;switch(ev.type){case"click":return!0;case"play":return!(!mediaElem.autoplay||mediaElem.hasPaused)||(recorder.sendRecordEvent(this,ev,{event:"on"+ev.type}),!0);case"pause":mediaElem.hasPaused=!0;var self=this;return Util.setTimeout(function(){mediaElem.hasEnded||recorder.sendRecordEvent(self,ev,{event:"on"+ev.type}),mediaElem.hasEnded=!1},50),!0;case"ended":return mediaElem.hasEnded=!0,!0}},_gestureHandler:function(recorder,gestureInfo){switch(this._logger.trace("MediaBaseBehavior._eventHandler: Received gesture event: "+gestureInfo.event),gestureInfo.event){case"tap":case"swipe":return!0}return!1}},NumberBehavior={_micclass:["WebNumber"],_helpers:{isLearnable:Util.alwaysTrue}},PluginBehavior={_attrs:{qtp_slv_cookie:function(){var ret=this._elem.getAttribute("qtp_slv_cookie");return this._logger.trace("Asked for qtp_slv_cookie returning: "+ret),ret||""}},_helpers:{isLearnable:Util.alwaysTrue
}},RadioGroupBehavior={_micclass:["WebRadioGroup","HtmlToggle"],_attrs:{checked:function(){return this._radios[this._activeRadioIndex].checked?1:0},value:function(){return this._calculateRadioButtonValue(this._elem)},"all items":function(){return this._radios.map(function(elem){return this._radioButtonInitialValue(elem)||"on"},this).join(";")},"selected item index":function(){return this._activeRadioIndex+1},"items count":function(){return this._radios.length},data:function(){return this.GetAttrSync("value")}},_methods:{SET_ACTIVE_RADIO_BY_VALUE:function(msg,resultCallback){this._logger.trace("RadioGroupBehavior: on command SET_ACTIVE_RADIO_BY_VALUE");var val=msg._data.value;if(!val)return void resultCallback(msg);this._setActiveElemByValue(val),resultCallback(msg)},CALL_EVENT:function(msg,resultCallback){this._logger.trace("RadioGroupBehavior: on command CALL_EVENT"),this.InvokeMethod("SET_ACTIVE_RADIO_BY_VALUE",msg,function(resMsg){var event=resMsg._data.event;event=event.replace(/^on/,""),this._fireEvent(this._elem,event,resMsg._data),resultCallback(resMsg)}.bind(this))},MAKE_VISIBLE:function(msg,resultCallback){this._logger.trace("RadioGroupBehavior: on command MAKE_VISIBLE"),this.InvokeMethod("SET_ACTIVE_RADIO_BY_VALUE",msg,function(){CommonBehavior._methods.MAKE_VISIBLE.call(this,msg,resultCallback)}.bind(this))},SET_ACTIVE_RADIO_BY_ELEMENT:function(){this._logger.trace("RadioGroupBehavior: on command SET_ACTIVE_RADIO_BY_ELEMENT"),ErrorReporter.ThrowNotImplemented("SET_ACTIVE_RADIO_BY_ELEMENT")},SET_DATA:function(msg,resultCallback){this._logger.trace("RadioGroupBehavior: on command SET_DATA"),msg._data.value=msg._data.data,this.InvokeMethod("SET_ACTIVE_RADIO_BY_VALUE",msg,resultCallback)},SET_VALUE_EX:function(msg,resultCallback){this._logger.trace("RadioGroupBehavior: on command SET_VALUE"),this._setActiveElemByValue(msg._data.value);var visibleMsg=new Msg(MSG_TYPES.SRVC_MAKE_OBJ_VISIBLE,Util.shallowObjectClone(this._parentID),{"disable browser popup":msg._data["disable browser popup"]});this.SRVC_MAKE_OBJ_VISIBLE(visibleMsg,function(){this._fireEvent(this._elem,"click",{}),resultCallback(msg)}.bind(this))}},_handlerFunc:function(recorder,ev){switch(ev.type){case"click":return"input"!==ev.target.tagName.toLowerCase()||(this.refreshRadioGroup(),recorder.sendRecordEvent(this,ev,{event:"onclick",value:this.GetAttrSync("value")}),!0)}},_eventHandler:function(recorder,ev){return this._logger.trace("RadioGroup.eventHandler: Received recordable event: "+ev.type),ContentUtils.isTouchEnabled()?RadioGroupBehavior._eventHandlerTouchEnabled.call(this,recorder,ev):RadioGroupBehavior._handlerFunc.call(this,recorder,ev)},_eventHandlerTouchEnabled:function(recorder,ev){return this._logger.trace("RadioGroup._eventHandlerTouchEnabled: Received recordable event: "+ev.type),RadioGroupBehavior._handlerFunc.call(this,recorder,ev)},_gestureHandler:function(recorder,gestureInfo){return this._logger.trace("RadioGroupBehavior._gestureHandler: Received gesture: "+gestureInfo.event),"tap"===gestureInfo.event},_helpers:{isLearnable:Util.alwaysTrue,refreshRadioGroup:function(triggeringElem){this._logger.trace("RadioGroupBehavior.refreshRadioGroup: started"),triggeringElem&&(this._triggeringElem=triggeringElem);var allRadiosInGroup=[];if(""!==this._elem.name){var radioGroupName=this._elem.name,allRadios=[],shadowRoot=ShadowDomUtil.getParentShadowRoot(this._elem,this._logger);allRadios=shadowRoot?Util.makeArray(shadowRoot.querySelectorAll("input[type=radio]")):Util.makeArray(document.querySelectorAll("input[type=radio]")),allRadiosInGroup=allRadios.filter(function(elem){return elem.name===radioGroupName})}else allRadiosInGroup=[this._elem];this._radios=allRadiosInGroup,this._activeRadioIndex=Util.arrayFindIndex(this._radios,function(radio){return radio.checked}.bind(this)),-1===this._activeRadioIndex&&(this._activeRadioIndex=0),this._elem=this._radios[this._activeRadioIndex]},_radioButtonInitialValue:function(elem){var labelText="";if(content.settings.uselabelforradiobuttonvalue){var labels=ContentUtils.getLabelsFromControl(elem);if(labels&&labels.length){labelText=labels[0].textContent.trim()}}return labelText||elem.value||""},_calculateRadioButtonValue:function(radioElem){this._logger.trace("RadioGroupBehavior._calculateRadioButtonValue: started");var val=this._radioButtonInitialValue(radioElem),radioElemIndex=-1,not_unique=this._radios.filter(function(elem,i){return elem===radioElem&&(radioElemIndex=i),this._radioButtonInitialValue(elem)===val},this).length>1;return-1===radioElemIndex?(this._logger.error("RadioGroupBehavior._calculateRadioButtonValue: could not find radio element in radio array"),val):""===val||"on"===val||not_unique?"#"+radioElemIndex:val},_setActiveElemByValue:function(val){var elem,activeRadioIndex=-1,matches=val.match(/^#(\d+)$/);if(matches){var index=parseInt(matches[1],10);index>=0&&index<this._radios.length&&(elem=this._radios[index],activeRadioIndex=index)}else{var valUpperCase=val.toUpperCase();this._radios.some(function(radio,index){return this._radioButtonInitialValue(radio).toUpperCase()===valUpperCase&&(elem=radio,activeRadioIndex=index,!0)}.bind(this))}-1==activeRadioIndex&&ErrorReporter.ThrowItemNotFound(),this.GetAttrSync("disabled")&&ErrorReporter.ThrowObjectDisabled(),this._elem=elem,this._activeRadioIndex=activeRadioIndex}}},RangeBaseBehavior={_attrs:{min:function(){return this._elem.min},max:function(){return this._elem.max},step:function(){return this._elem.step}}},RangeBehavior={_micclass:["WebRange"],_attrs:{"require web replay":Util.alwaysTrue},_helpers:{isLearnable:Util.alwaysTrue}},TableBehavior={_micclass:["WebTable"],_attrs:{name:function(){if(this._elem.name)return this._elem.name;for(var children=this._elem.getElementsByTagName("*"),i=0;i<children.length;i++)if(-1===["TH","TR","TD"].indexOf(children[i].tagName)){var ao=content.kitsManager.createAO(children[i],this._parentID);if("WebElement"!==Util.getMicClass(ao)){var name=ao.GetAttrSync("name");if(name&&""!==name.trim())return name}}return"WebTable"},border:function(){return this._elem.border},rows:function(){return this._getRows().length},cols:function(msg){var rowId=0,rows=this._getRows();return null!=msg._data.cols&&"number"==typeof msg._data.cols&&((msg._data.cols<1||msg._data.cols>rows.length)&&ErrorReporter.ThrowOutOfRange(),rowId=msg._data.cols-1),0===rows.length?0:this._getCells(rows[rowId]).length},"column names":function(){function text(e){return content.settings.useinnertextfortextcollection?e.textContent:ContentUtils.getVisibleTextContent(e)}for(var rows=this._getRows(),i=0;i<rows.length;i++){if(""!==text(rows[i]).trim()){var cells=this._getCells(rows[i]);return Util.makeArray(cells).map(text).join(";")}}},"logical name":function(){var caption=this.GetAttrSync("table caption");if(caption)return caption;for(var rows=this._getRows(),i=0;i<rows.length;i++)for(var cells=this._getCells(rows[i]),j=0;j<cells.length;j++){for(var children=cells[j].children,k=0;k<children.length;k++){var rtnVal,ao=content.kitsManager.createAO(children[k],this._parentID);if((rtnVal="TABLE"===children[k].tagName?ao.GetAttrSync("logical name"):ao.GetAttrSync("innertext"))&&""!==rtnVal.trim())return rtnVal}var text=cells[j].textContent;if(""!==text.trim())return text}},"cell id":function(msg){var row=msg._data["cell id"][0][0],col=msg._data["cell id"][0][1],id=msg._to;if(0===row&&0===col)return id;--row,--col;var rows=this._getRows();if(!(row<0||row>=rows.length)){if(-1===col)return id.object=content.kitsManager.createAO(rows[row],this._parentID).getID().object,id;var cells=this._getCells(rows[row]);if(!(col<0||col>=cells.length))return id.object=content.kitsManager.createAO(cells[col],this._parentID).getID().object,id}},"table caption":function(){return this._elem.caption?this._elem.caption.textContent:""}},_methods:{GET_TABLE_DATA:function(msg,resultCallback){this._logger.trace("TableBehavior: on command GET_TABLE_DATA");for(var rows=this._getRows(),maxcol=0,i=0;i<rows.length;i++){for(var cells=this._getCells(rows[i]),rowText=[[]],j=0;j<cells.length;j++){var ao=content.kitsManager.createAO(cells[j],this._parentID);rowText[0].push(ao.GetAttrSync("text"))}cells.length>maxcol&&(maxcol=cells.length),msg._data["WEB_PN_ROW_DATA"+(i+1)]=rowText}msg._data.row=rows.length,msg._data.WEB_AN_MAX_COLUMN=maxcol,resultCallback(msg)},GET_TABLE_COLUMN:function(msg,resultCallback){this._logger.trace("TableBehavior: on command GET_TABLE_COLUMN"),"number"!=typeof msg._data.row&&ErrorReporter.ThrowInvalidArg();var rows=this._getRows();(msg._data.row<1||msg._data.row>rows.length)&&ErrorReporter.ThrowOutOfRange();var cells=this._getCells(rows[msg._data.row-1]);msg._data.col=cells.length,resultCallback(msg)},GET_TABLE_CELL_DATA:function(msg,resultCallback){this._logger.trace("TableBehavior: on command GET_TABLE_CELL_DATA"),"number"==typeof msg._data.row&&"number"==typeof msg._data.col||ErrorReporter.ThrowInvalidArg();var rows=this._getRows();(msg._data.row<1||msg._data.row>rows.length)&&ErrorReporter.ThrowOutOfRange();var cells=this._getCells(rows[msg._data.row-1]);(msg._data.col<1||msg._data.col>cells.length)&&ErrorReporter.ThrowOutOfRange();var ao=content.kitsManager.createAO(cells[msg._data.col-1],this._parentID);msg._data.text=ao.GetAttrSync("text"),resultCallback(msg)},GET_ROW_WITH_CELLTEXT:function(msg,resultCallback){this._logger.trace("TableBehavior: on command GET_ROW_WITH_CELLTEXT");var start_row=msg._data.row,column=msg._data.col,text=msg._data.text;"number"==typeof start_row&&"number"==typeof column||ErrorReporter.ThrowInvalidArg();var rows=this._getRows();start_row>rows.length&&ErrorReporter.ThrowOutOfRange();var cells=this._getCells(rows[start_row>0?start_row-1:0]);if(column>cells.length&&ErrorReporter.ThrowOutOfRange(),msg._data={},msg._attr_names=["row"],msg._data.row=-1,-1===this.GetAttrSync("text").indexOf(text))return void resultCallback(msg);for(var i=start_row>0?start_row-1:0;i<rows.length;i++)if(cells=this._getCells(rows[i]),column>0){if(column-1<cells.length){var row_text=content.kitsManager.createAO(cells[column-1],this._parentID).GetAttrSync("text");if(-1!==row_text.indexOf(text))return msg._data.row=i+1,void resultCallback(msg)}}else for(var j=0;j<cells.length;j++){var cell_text=content.kitsManager.createAO(cells[j],this._parentID).GetAttrSync("text");if(-1!==cell_text.indexOf(text))return msg._data.row=i+1,void resultCallback(msg)}resultCallback(msg)}},_helpers:{isLearnable:Util.alwaysTrue,_getRows:function(){return this._elem.rows},_getCells:function(row){return row.cells}}},VideoBehavior={_micclass:["WebVideo"],_attrs:{name:function(){return"WebVideo"}},_helpers:{isLearnable:Util.alwaysTrue}},TabBehavior={_micclass:["WebTabStrip","StdObject"],_attrs:{name:function(){return this._elem.name||Util.getMicClass(this)},"logical name":function(){return this.GetAttrSync("acc_name")||this.GetAttrSync("name")||this.GetAttrSync("id")},disabled:function(){return this._elem.disabled?1:0},readonly:function(){return this._elem.readOnly?1:0},type:function(){return this._elem.type}},_helpers:{isLearnable:Util.alwaysTrue}},TreeBehavior={_micclass:["WebTree"],_helpers:{isLearnable:Util.alwaysTrue}},VirtualTextBehavior={MIN_CHARS_IN_TEXT:10,_attrs:{micclass:function(){return""},"text before":function(){return this._getTextBeforeData().text},"text after":function(){var selectedRange=this._elem,afterTxtRange=new Range;afterTxtRange.setStart(selectedRange.endContainer,selectedRange.endOffset),afterTxtRange.setEndAfter(document.body.lastChild);var allAfterTxt=Util.cleanSpecialChars(Util.stringTrimLeft(afterTxtRange.toString()));if(allAfterTxt=Util.cleanMultipleSpaces(allAfterTxt),allAfterTxt.length<=VirtualTextBehavior.MIN_CHARS_IN_TEXT)return allAfterTxt;var lastSpaceIndex=allAfterTxt.indexOf(" ",VirtualTextBehavior.MIN_CHARS_IN_TEXT);return-1===lastSpaceIndex?allAfterTxt:allAfterTxt.substr(0,lastSpaceIndex)},newindexoftextafter:function(){return 1},indexoftextbefore:function(){return this._getTextBeforeData().index},"frame name":function(){return""},"is input text":function(){switch(this._elem.commonAncestorContainer.nodeName.toLowerCase()){case"input":case"textarea":return!0}return!1}},_helpers:{isLearnable:Util.alwaysFalse,_getTextBeforeData:function(){if(this._txtBeforeData)return this._txtBeforeData;var selectedRange=this._elem,beforeTxtRange=new Range;beforeTxtRange.setStart(document.body,0),beforeTxtRange.setEnd(selectedRange.startContainer,selectedRange.startOffset);var allBeforeText=Util.cleanSpecialChars(beforeTxtRange.toString().trimRight());if(allBeforeText=Util.cleanMultipleSpaces(allBeforeText),allBeforeText.length<=VirtualTextBehavior.MIN_CHARS_IN_TEXT)return allBeforeText;var lastSpaceIndex=allBeforeText.lastIndexOf(" ",allBeforeText.length-VirtualTextBehavior.MIN_CHARS_IN_TEXT);if(-1===lastSpaceIndex)this._txtBeforeData={text:allBeforeText,index:1};else{var beforeTxt=allBeforeText.substr(lastSpaceIndex+1);this._txtBeforeData={},this._txtBeforeData.text=beforeTxt,this._txtBeforeData.index=Util.stringCount(allBeforeText,beforeTxt)}return this._txtBeforeData}}},WebKit={_logger:new LoggerUtil("Content.WebKit"),_tagsToBreakInterestingAOLoop:[],name:"WebKit",priority:0,createAO:function(element,parentID,noDefault){this._logger.trace(function(){return"createAO: creating AO for element "+element.tagName});var tagName=element.tagName;Util.isNullOrUndefined(tagName)&&(tagName=""),"OPTION"===(tagName=tagName.toUpperCase())&&(element=element.parentNode,tagName=element.tagName.toUpperCase());var ao=new AO(element,parentID);switch(this._logger.trace("createAO: merging common behavior"),ao.mergeBehavior(CommonBehavior),tagName){case"A":if(ao._isRealLink())ao.mergeBehavior(LinkBehavior);else if(noDefault)return null;break;case"IMG":ao.mergeBehavior(ImageBehavior),ao._getImageParentAnchor()&&ao.mergeBehavior(ImageLinkBehavior);break;case"BUTTON":ao.mergeBehavior(ButtonBehavior);break;case"INPUT":switch(element.type){case"button":case"submit":case"reset":ao.mergeBehavior(ButtonBehavior);break;case"text":ao.mergeBehavior(EditBehavior);break;case"image":ao.mergeBehavior(ImageBehavior);break;case"checkbox":ao.mergeBehavior(CheckBoxBehavior);break;case"radio":ao.mergeBehavior(RadioGroupBehavior),ao.refreshRadioGroup(ao._elem);break;case"file":ao.mergeBehavior(FileInputBehavior);break;case"hidden":if(noDefault)return null;break;case"range":ao.mergeBehavior(EditBehavior),ao.mergeBehavior(RangeBaseBehavior),ao.mergeBehavior(RangeBehavior);break;case"number":ao.mergeBehavior(EditBehavior),ao.mergeBehavior(RangeBaseBehavior),ao.mergeBehavior(NumberBehavior);break;default:ao.mergeBehavior(EditBehavior)}break;case"TEXTAREA":ao.mergeBehavior(EditBehavior);break;case"SELECT":ao.mergeBehavior(ListBehavior);break;case"AREA":ao.mergeBehavior(AreaBehavior);break;case"TABLE":ao.mergeBehavior(TableBehavior);break;case"IFRAME":case"FRAME":ao.mergeBehavior(FrameBehavior);break;case"VIDEO":ao.mergeBehavior(MediaBaseBehavior),ao.mergeBehavior(VideoBehavior);break;case"AUDIO":ao.mergeBehavior(MediaBaseBehavior),ao.mergeBehavior(AudioBehavior);break;case"FORM":if(noDefault)return null;ao.mergeBehavior(FormBehavior);break;case"OBJECT":if(noDefault)return null;ao.mergeBehavior(PluginBehavior);break;case"SPAN":case"DIV":if(!element.isContentEditable)return noDefault?null:ao;this._logger.debug("createAO: This is a content editable element"),ao.mergeBehavior(ContentEditableBehavior);break;default:if(noDefault)return null}return ao},createPageAO:function(parentID){var ao=this.createAO(document.documentElement,parentID);return ao.mergeBehavior(FrameBehavior),ao.mergeBehavior(PageBehavior),ao},createVirtualTextAO:function(range,parentID){var ao=new AO(range,parentID);return ao.mergeBehavior(VirtualTextBehavior),ao},_getFactory:function(useOnlyWebKit){return useOnlyWebKit?this:content.kitsManager},_uninterestingMicClasses:Util.objectFromArray(["WebElement","WebTable"],!0),_getInterestingAOHierarchy:function(ao,element,parentID,useOnlyWebKit){var res=[];if(element.form){var formAO=this._getFactory(useOnlyWebKit).createAO(element.form,parentID);res.push(formAO)}return res.push(ao),res},_getInterestingAO:function(element,parentID,useOnlyWebKit){for(var curr=element;curr&&!(curr.tagName&&this._tagsToBreakInterestingAOLoop.indexOf(curr.tagName)>-1);curr=curr.parentElement){curr=ContentUtils.getTargetElem(curr);var ao;if(useOnlyWebKit){var kitArr=content.kitsManager.getNeededKits(useOnlyWebKit);kitArr.length>0&&kitArr.some(function(kit){return!!(ao=kit.createAO(curr,parentID,!0))})}else ao=content.kitsManager.createAO(curr,parentID,!0);if(ao){var micClass=Util.getMicClass(ao);if(!this._uninterestingMicClasses[micClass])return ao}}return this.createAO(element,parentID,!1)},createRecordAOArray:function(element,parentID,useOnlyWebKit){var ao=this._getInterestingAO(element,parentID,useOnlyWebKit);return this._getInterestingAOHierarchy(ao,element,parentID,useOnlyWebKit)},updateTagsToBreakInterestingAOLoop:function(tagsToBreakInterestingAOLoop){this._tagsToBreakInterestingAOLoop=tagsToBreakInterestingAOLoop},relevant:Util.alwaysTrue,webCore:Util.alwaysTrue};KitsManager.prototype.LoadKit(WebKit);var KitUtil={CreateKit:function(name,relevantFunc){var factories=[];return{_logger:new LoggerUtil("Content."+name),name:name,priority:1,registerFactory:function(factory){factories.push(factory)},isDisabled:function(){return!!this.name&&ContentUtils.getDisabledWebKits().some(function(kitName){var kitName=kitName+"kit";return this.name.toLowerCase()===kitName.toLowerCase()}.bind(this))},createAO:function(element,parentId,noDefault,micclass){if(this.isDisabled())return null;var ret=null,candidates=factories;if(element.hasAttribute("role")||(candidates=factories.filter(function(factory){return!factory.isRoleBased})),candidates.some(function(factory){return ret=factory.createAO(element,parentId)}),micclass&&ret){var actualMicClass=Util.getMicClass(ret);if(micclass.isRegExp)var matched=Util.valMatchReg(actualMicClass,micclass.regExQuery);else var matched=actualMicClass===micclass;ret=matched?ret:null}return ret},relevant:function(){var shouldLoad=relevantFunc();return this._logger.trace(this.name+" relevant: should load "+shouldLoad),shouldLoad},webCore:Util.alwaysTrue}},createAO:function(elem,parentId,behaviors){var ao=new AO(elem,parentId);return ao.mergeBehavior(CommonBehavior),behaviors.forEach(function(b){ao.mergeBehavior(b)}),ao}},RoleWebKit=KitUtil.CreateKit("RoleWebKit",ContentUtils.isWebRoleBasedKitEnabled),RoleWebUtil={createAO:function(elem,parentId,behaviors){return KitUtil.createAO(elem,parentId,behaviors)},getRole:function(elem){return elem.getAttribute("role")},getName:function(elem){return elem.getAttribute("name")},getLogicalName:function(elem){return ContentUtils.getAccNameFromControl(elem)||elem.getAttribute("name")||elem.getAttribute("id")||Util.cleanTextProperty(elem.textContent)},getText:function(elem){return Util.cleanTextProperty((elem.textContent||"").trimRight())}};KitsManager.prototype.LoadKit(RoleWebKit);var RoleWebMenu={isRoleBased:!1,_MenuPathManager:function(){this._logger=WebKit._logger,this._menuPathSet=[],this._activeRootMenu=null},_menuPathManager:null,_util:{_lastItem:function(arr){return arr.length?arr[arr.length-1]:void 0},_isDisabled:function(elem){return!(!elem.hasAttribute("aria-disabled")||!elem["aria-disabled"])||!(!elem.hasAttribute("disabled")||!elem.disabled)},intersectDirection:{vert:"vert",horiz:"horiz",both:"both"},_getMenuLayout:function(menu){var menuitems=RoleWebMenu._util.getMenuItems(menu),intersectDirection=RoleWebMenu._util.intersectDirection;if(menuitems.length<=1)return intersectDirection.both;var firstItem=menuitems[0],lastItem=menuitems[menuitems.length-1],rectFirst=firstItem.getBoundingClientRect(),rectLast=lastItem.getBoundingClientRect();return Math.abs(rectFirst.left-rectLast.left)>Math.abs(rectFirst.top-rectLast.top)?intersectDirection.horiz:intersectDirection.vert},_reverseDirection:function(direction){var intersectDirection=RoleWebMenu._util.intersectDirection;return direction===intersectDirection.horiz?intersectDirection.vert:direction===intersectDirection.vert?intersectDirection.horiz:intersectDirection.both},_isMenuItemAdjacentToMenu:function(menuitem,menu2,tolerance){var menu1=RoleWebMenu._util._getSurroundingMenus(menuitem)[0],direction=RoleWebMenu._util._getMenuLayout(menu1);direction=RoleWebMenu._util._reverseDirection(direction);var rect1=menuitem.getBoundingClientRect();rect1=Util.shallowObjectClone(rect1);var rect2=menu2.getBoundingClientRect();return rect2=Util.shallowObjectClone(rect2),RoleWebMenu._util._isRectIntersecInDirection(rect1,rect2,tolerance,direction)},_isRectIntersecInDirection:function(rect1,rect2,tolerance,direction){var intersectDirection=RoleWebMenu._util.intersectDirection;direction!==intersectDirection.both&&direction!==intersectDirection.horiz||(rect1.left-=tolerance,rect1.right+=tolerance,rect1.width=rect1.right-rect1.left),direction!==intersectDirection.both&&direction!==intersectDirection.vert||(rect1.top-=tolerance,rect1.bottom+=tolerance,rect1.height=rect1.bottom-rect1.top);var intersection=Util.intersectRect(rect1,rect2);return!Util.isRectEmpty(intersection)},_findAdjacentMenuNearMenuItem:function(menuItem,menus,tolerance){var curMenu=RoleWebMenu._util._getSurroundingMenus(menuItem)[0];return Util.arrayFind(menus,function(menu){return menu!=curMenu&&RoleWebMenu._util._isMenuItemAdjacentToMenu(menuItem,menu,tolerance)})},_simulateMouseOverOnMenuItem:function(ao,targetMenuItem,data,relatedTarget){ao._fireEvent(targetMenuItem,"mouseover",data,relatedTarget),"undefined"!=typeof PointerEvent&&ao._fireEvent(targetMenuItem,"pointerover",data,relatedTarget),ao._fireEvent(targetMenuItem,"mouseenter",data,relatedTarget),ao._fireEvent(targetMenuItem,"mousemove",data)},_isRoleMenu:function(elem){var role=RoleWebUtil.getRole(elem);return"menu"===role||"menubar"===role},_hasAttrRoleMenuItem:function(elem){var role=RoleWebUtil.getRole(elem);return"menuitem"===role||"menuitemradio"===role||"menuitemcheckbox"===role||"menuitemcheckable"===role},_isRoleMenuItem:function(elem){var type=elem.getAttribute("type");if(RoleWebMenu._util._hasAttrRoleMenuItem(elem))return"separator"!==type;if("LI"!==elem.nodeName)return!1;var parentListElem=Util.findAncestor(elem.parentElement,function(e){return"OL"===e.nodeName||"UL"===e.nodeName});if(!parentListElem)return!1;if(RoleWebMenu._util._isRoleMenu(parentListElem)){return!RoleWebMenu._util._traverseChildrenBreadth(parentListElem,function(elem){return"LI"===elem.nodeName&&(RoleWebMenu._util._hasAttrRoleMenuItem(elem)||Util.makeArray(elem.childNodes).some(function(item){return 1===item.nodeType&&RoleWebMenu._util._hasAttrRoleMenuItem(item)}))},function(elem){return"LI"!==elem.nodeName})}return!1},_getVisibleMenuSet:function(elem){var menus=Util.makeArray(elem.querySelectorAll("[role=menu],[role=menubar]"));return menus=menus.filter(function(menu){return!!RoleWebMenu._util._isVisible(menu)&&1===RoleWebMenu._util._getSurroundingMenus(menu).length}),menus.filter(RoleWebMenu._util._isVisible)},_minusArray:function(source,toRemove){return source.filter(function(item){return toRemove.indexOf(item)<0})},_isVisible:function(elem){if(!elem.offsetWidth||!elem.offsetHeight)return!1;var boundRect=Util.shallowObjectClone(elem.getBoundingClientRect());boundRect.left+=window.pageXOffset,boundRect.right+=window.pageXOffset,boundRect.top+=window.pageYOffset,boundRect.bottom+=window.pageYOffset;var maxDocWidth=Math.max(document.documentElement.offsetWidth,window.innerWidth),maxDocHeight=Math.max(document.documentElement.offsetHeight,window.innerHeight),windowRect={left:0,top:0,right:maxDocWidth,bottom:maxDocHeight},intersectRect=Util.intersectRect(windowRect,boundRect);if(Util.isRectEmpty(intersectRect))return!1;var style=getComputedStyle(elem,null);return"none"!==style.display&&"hidden"!==style.visibility},_isVisibleIgnoreScroll:function(elem,isLeaf){var style=getComputedStyle(elem,null);return!!(!isLeaf&&"hidden"!==style.overflow||elem.offsetWidth&&elem.offsetHeight)&&("none"!==style.display&&"hidden"!==style.visibility)},_getMenuItemText:function(elem){function getItemTextUtil(node,textArr){Util.makeArray(node.childNodes).forEach(function(node){node.nodeType===Node.TEXT_NODE?textArr.push(node.textContent||""):node.nodeType===Node.ELEMENT_NODE&&(RoleWebMenu._util._isRoleMenu(node)||RoleWebMenu._util._isRoleMenuItem(node)||!RoleWebMenu._util._isVisibleIgnoreScroll(node,!1)||getItemTextUtil(node,textArr))})}var textArr=[];getItemTextUtil(elem,textArr);var text=textArr.join("");return Util.cleanTextProperty(text).trim()},_getDirectParentMenu:function(elem){var ret=null,haveMeetMenuItem=!1;return Util.findAncestor(elem,function(elemInner){return RoleWebMenu._util._isRoleMenuItem(elemInner)?!!haveMeetMenuItem||(haveMeetMenuItem=!0,!1):!!RoleWebMenu._util._isRoleMenu(elemInner)&&(ret=elemInner,!0)}),ret},_getSurroundingMenus:function(elem){var ret=[],directMenu=RoleWebMenu._util._getDirectParentMenu(elem);if(!directMenu)return ret;ret.push(directMenu);var directMenuRect=directMenu.getBoundingClientRect();return Util.findAncestor(directMenu.parentElement,function(elem){if(RoleWebMenu._util._isRoleMenuItem(elem))return!0;if(RoleWebMenu._util._isRoleMenu(elem)){var elemRect=elem.getBoundingClientRect(),rectIntersect=Util.intersectRect(elemRect,directMenuRect);if(!Util.isEqualRects(rectIntersect,directMenuRect))return!0;ret.push(elem)}return!1}),ret.reverse(),ret},_getOwnerMenus:function(elem){var menu,menuItem,ret=[],func=function(elemInner){return RoleWebMenu._util._isRoleMenu(elemInner)?(menu||(menu=elemInner),!0):!!RoleWebMenu._util._isRoleMenuItem(elemInner)&&(!!menuItem||(menuItem=elemInner,!1))};return Util.findAncestor(elem,func),menu&&(elem===menu||menuItem)&&(ret=RoleWebMenu._util._getSurroundingMenus(menu)),ret},_getOwnerMenuItem:function(elem){return elem?Util.findAncestor(elem,function(elem){return RoleWebMenu._util._isRoleMenuItem(elem)}):null},_elemRectSame:function(elem,rect){if(!elem||!rect)return!1;var curRect=elem.getBoundingClientRect();return Util.isEqualRects(curRect,rect,1)},_doReplay:function(msg,resultCallback,ao,textArr){function callRecursiveTrigger(timeout,level,resetElapsed){Util.setTimeout(recursiveTriggerSubMenu,timeout,level),resetElapsed?timeElapsed=timeout:timeElapsed+=timeout}function triggerSubMenu(currentLevel){var currentMenu,targetMenuItem,visibleMenuSetCur,matchNumber=textArr[currentLevel].match(/^\s*#(\d+)\s*$/);if(0===currentLevel)currentMenu=ao._elem;else{if(activeChildMenu){if(currentMenu=activeChildMenu,timeElapsed<timeoutForMenuExpanding){if(!RoleWebMenu._util._isVisible(currentMenu))return timeElapsed>timeoutForMouseOver&&!haveClickIntermediateMenuItem&&(ao._fireEvent(previousMenuItem,"click",msg._data),haveClickIntermediateMenuItem=!0),void callRecursiveTrigger(checkInterval,currentLevel,!1);if(!RoleWebMenu._util._elemRectSame(currentMenu,lastBoundingRectOfMenu))return lastBoundingRectOfMenu=currentMenu.getBoundingClientRect(),void callRecursiveTrigger(checkInterval,currentLevel,!1)}}else{visibleMenuSetCur=RoleWebMenu._util._getVisibleMenuSet(document.body);var diffMenuSet=RoleWebMenu._util._minusArray(visibleMenuSetCur,visibleMenuSetPreviousGlobal);if(0===diffMenuSet.length)if(timeElapsed<timeoutForMenuExpanding){if(timeElapsed>timeoutForMouseOver&&!haveClickIntermediateMenuItem){var menusToDetect=RoleWebMenu._util._minusArray(visibleMenuSetCur,ancestorMenus);currentMenu=RoleWebMenu._util._findAdjacentMenuNearMenuItem(previousMenuItem,menusToDetect,10),currentMenu||ao._fireEvent(previousMenuItem,"click",msg._data),haveClickIntermediateMenuItem=!0}if(!currentMenu)return void callRecursiveTrigger(checkInterval,currentLevel,!1)}else{var menusToDetect=RoleWebMenu._util._minusArray(visibleMenuSetCur,ancestorMenus);currentMenu=RoleWebMenu._util._findAdjacentMenuNearMenuItem(previousMenuItem,menusToDetect,10)}else currentMenu=diffMenuSet[0],ancestorMenus=ancestorMenus.concat(diffMenuSet)}if(currentMenu||ErrorReporter.ThrowItemNotFound(),!lastBoundingRectOfMenu)return activeChildMenu=currentMenu,lastBoundingRectOfMenu=currentMenu.getBoundingClientRect(),void callRecursiveTrigger(checkInterval,currentLevel,!1)}if(targetMenuItem=RoleWebMenu._util.getMenuItemToSelect(currentMenu,matchNumber?matchNumber[1]:textArr[currentLevel],!!matchNumber),targetMenuItem||ErrorReporter.ThrowItemNotFound(),targetMenuItem.scrollIntoView&&targetMenuItem.scrollIntoView(),ancestorMenus.indexOf(currentMenu)<0&&ancestorMenus.push(currentMenu),currentLevel!==textArr.length-1)activeChildMenu=RoleWebMenu._util._traverseChildrenBreadth(targetMenuItem,function(elem){return RoleWebMenu._util._isVisible(elem)&&RoleWebMenu._util._isRoleMenu(elem)}),activeChildMenu||(visibleMenuSetPreviousGlobal=visibleMenuSetCur||RoleWebMenu._util._getVisibleMenuSet(document.body)),RoleWebMenu._util._simulateMouseOverOnMenuItem(ao,targetMenuItem,msg._data,previousMenuItem),lastBoundingRectOfMenu=void 0,haveClickIntermediateMenuItem=!1,timeoutForMenuExpanding=targetMenuItem&&targetMenuItem.hasAttribute("aria-haspopup")?2e3:1e3,callRecursiveTrigger(checkInterval,currentLevel+1,!0);else{RoleWebMenu._util._simulateMouseOverOnMenuItem(ao,targetMenuItem,msg._data);var rect=targetMenuItem.getBoundingClientRect(),elemTopMost=document.elementFromPoint((rect.left+rect.right)/2,(rect.top+rect.bottom)/2);ao._fireEvent(elemTopMost,"click",msg._data),resultCallback(msg)}previousMenuItem=targetMenuItem}function recursiveTriggerSubMenu(currentLevel){try{triggerSubMenu(currentLevel)}catch(e){var logger=new LoggerUtil("RoleWebMenu");logger.warn("recursiveTriggerSubMenu: Got Exception:"+e+" Details: "+(e.Details||"")+" - CallStack: "+e.stack),msg.status=e.message||"ERROR",resultCallback(msg)}}var visibleMenuSetPreviousGlobal,previousMenuItem,activeChildMenu,haveClickIntermediateMenuItem,lastBoundingRectOfMenu,timeoutForMenuExpanding=1e3,timeoutForMouseOver=600,checkInterval=200,timeElapsed=0,ancestorMenus=[];recursiveTriggerSubMenu(0)},getMenuItems:function(elem){function getMenuItemUtil(elem,result){if(elem.children){Util.makeArray(elem.children).forEach(function(elem){if(RoleWebMenu._util._isVisibleIgnoreScroll(elem,!1))if(RoleWebMenu._util._isRoleMenuItem(elem))RoleWebMenu._util._isVisibleIgnoreScroll(elem,!0)&&result.push(elem);else{var surroundingMenusInner=RoleWebMenu._util._getSurroundingMenus(elem);surroundingMenusInner.length&&surroundingMenus.length&&surroundingMenusInner[0]==surroundingMenus[0]&&getMenuItemUtil(elem,result)}})}}var surroundingMenus=RoleWebMenu._util._getSurroundingMenus(elem),arr=[];return getMenuItemUtil(elem,arr),arr},indexOfMenuItems:function(menu,menuitem){return RoleWebMenu._util.getMenuItems(menu).indexOf(menuitem)},getMenuItemToSelect:function(elem,text,isNumber){var items=RoleWebMenu._util.getMenuItems(elem);return isNumber?items[text]:(text=text.trim(),Util.arrayFind(items,function(item){return RoleWebMenu._util._getMenuItemText(item)===text}))},getLogicalName:function(elem){return ContentUtils.getAccNameFromControl(elem)||elem.getAttribute("name")||elem.getAttribute("id")||RoleWebMenu._util.getMenuItems(elem).map(function(e){return RoleWebMenu._util._getMenuItemText(e)}).join(" ")},_traverseChildrenBreadth:function(elem,predFound,predTraverseChildren){var unVisited=[];for(unVisited=unVisited.concat(Util.makeArray(elem.children));unVisited.length;){var elemIterate=unVisited.splice(0,1)[0];if(predFound(elemIterate))return elemIterate;predTraverseChildren&&!predTraverseChildren(elemIterate)||(unVisited=unVisited.concat(Util.makeArray(elemIterate.children)))}return null}},createAO:function(elem,parentId){if(1===content.settings.WebActivityState){var ownerMenus=RoleWebMenu._util._getOwnerMenus(elem);if(ownerMenus.length){var newAo=RoleWebUtil.createAO(ownerMenus[0],parentId,[this._behavior]);return newAo}}else if(RoleWebMenu._util._isRoleMenu(elem)){var newAo=RoleWebUtil.createAO(elem,parentId,[this._behavior]);return newAo}return null},_behavior:{_micclass:["WebMenu","StdObject"],
name:"RoleWebMenuBehavior",_helpers:{UseEventConfiguration:function(event){return"mouseover"!==event.type&&"mousedown"!==event.type&&"mouseup"!==event.type}},_attrs:{name:function(){return RoleWebUtil.getName(this._elem)},"logical name":function(){return RoleWebMenu._util.getLogicalName(this._elem)},"top level items":function(){return RoleWebMenu._util.getMenuItems(this._elem).map(function(elem){return RoleWebMenu._util._getMenuItemText(elem)}).join(";")},"top level items count":function(){return RoleWebMenu._util.getMenuItems(this._elem).length},"first item":function(){var items=RoleWebMenu._util.getMenuItems(this._elem);return items.length>0?RoleWebMenu._util._getMenuItemText(items[0]):null}},_methods:{LIST_SELECT:function(msg,resultCallback){this._logger.trace("RoleWebMenuBehavior: on command LIST_SELECT");var str=msg._data.value,arr=str.split&&str.split(";");arr||ErrorReporter.ThrowInvalidArg();var wrappedCallback=ContentUtils.protectCallbackAgainstPrematureNavigation(resultCallback,msg,this._logger,"click");RoleWebMenu._util._doReplay(msg,wrappedCallback,this,arr)}},_eventHandler:function(recorder,ev){if(ContentUtils.isTouchEnabled())return!0;switch(this._logger.trace("RoleWebMenu._eventHandler: Received recordable event: ",ev.type),ev.type){case"mousedown":var selectedMenuItem=RoleWebMenu._util._getOwnerMenuItem(ev.target);if(selectedMenuItem&&!RoleWebMenu._util._isDisabled(selectedMenuItem)){this._elem=RoleWebMenu._menuPathManager.getActiveRootMenu();var pathText=RoleWebMenu._menuPathManager.getRecordPathText(selectedMenuItem);recorder.sendRecordEvent(this,ev,{event:"onchange",value:pathText})}return!0;case"click":case"mouseup":return!0;case"mouseover":var selectedMenuItem=RoleWebMenu._util._getOwnerMenuItem(ev.target);return!(selectedMenuItem&&!RoleWebMenu._util._isDisabled(selectedMenuItem))||(RoleWebMenu._menuPathManager.validate(),RoleWebMenu._menuPathManager.enterMenuItem(selectedMenuItem),!0)}return!0},_gestureHandler:function(recorder,gestureInfo,targetElement){if(this._logger.trace("RoleWebMenuBehavior._gestureHandler: Received gesture: ",gestureInfo.event),"tap"===gestureInfo.event||"longTap"===gestureInfo.event){var selectedMenuItem=RoleWebMenu._util._getOwnerMenuItem(targetElement);if(selectedMenuItem&&!RoleWebMenu._util._isDisabled(selectedMenuItem)){RoleWebMenu._menuPathManager.validate(),RoleWebMenu._menuPathManager.enterMenuItem(selectedMenuItem),this._elem=RoleWebMenu._menuPathManager.getActiveRootMenu();var pathText=RoleWebMenu._menuPathManager.getRecordPathText(selectedMenuItem);recorder.sendRecordEvent(this,null,{event:"onchange",value:pathText,force_record:!0})}}return!0}}};RoleWebMenu._MenuPathManager.prototype={_logger:null,_menuPathSet:null,_activeRootMenu:null,validate:function(){if(this._menuPathSet.forEach(function(menuPath){menuPath.forEach(function(pathItem){pathItem.menu.compareDocumentPosition(pathItem.selectedMenuItem)&Node.DOCUMENT_POSITION_CONTAINED_BY||(pathItem.selectedMenuItem=RoleWebMenu._util.getMenuItems(pathItem.menu)[pathItem.selectedMenuItemIndex])});var menuArr=menuPath.map(function(item){return item.menu}),nRemoveIndex=Util.arrayFindIndex(menuArr,function(item){return!RoleWebMenu._util._isVisible(item)});nRemoveIndex>=0&&menuPath.splice(nRemoveIndex);for(var i=0;i<menuPath.length-1;i++){var fatherObj=menuPath[i],childObj=menuPath[i+1];if(!RoleWebMenu._util._isMenuItemAdjacentToMenu(fatherObj.selectedMenuItem,childObj.menu,10)){menuPath.splice(i+1);break}}}),this._menuPathSet=this._menuPathSet.filter(function(item){return item.length}),this._activeRootMenu&&!RoleWebMenu._util._isVisible(this._activeRootMenu)&&(this._activeRootMenu=null),this._activeRootMenu){0===this.indexPairArrByMenu(this._activeRootMenu).length&&(this._activeRootMenu=null)}},indexPairArrByMenu:function(menuToSearch){var ret=[];return this._menuPathSet.forEach(function(menuPath,outerIndex){menuPath.forEach(function(pathItem,innerIndex){pathItem.menu==menuToSearch&&ret.push({outerIndex:outerIndex,innerIndex:innerIndex})})}),ret},pathItemByMenu:function(menuPath,menu){return Util.arrayFind(menuPath,function(pathItem){return pathItem.menu==menu})},eraseFollowingSubPath:function(menuPath,remainedPathItem){var indexRemained=menuPath.indexOf(remainedPathItem);indexRemained>=0&&indexRemained+1<menuPath.length&&menuPath.splice(indexRemained+1)},enterMenuItem:function(menuItemToEnter){var menuToEnter=RoleWebMenu._util._getSurroundingMenus(menuItemToEnter)[0],menuItemIndex=RoleWebMenu._util.indexOfMenuItems(menuToEnter,menuItemToEnter);if(0===this._menuPathSet.length)this.appendNewPath(menuToEnter,menuItemToEnter,menuItemIndex,menuToEnter);else{var activePath=this.getActiveMenuPath();if(activePath){var locatedPathItem=this.pathItemByMenu(activePath,menuToEnter);if(locatedPathItem)locatedPathItem.selectedMenuItem!=menuItemToEnter&&(this.eraseFollowingSubPath(activePath,locatedPathItem),locatedPathItem.selectedMenuItem=menuItemToEnter,locatedPathItem.selectedMenuItemIndex=menuItemIndex);else{var lastPathItem=RoleWebMenu._util._lastItem(activePath);RoleWebMenu._util._isMenuItemAdjacentToMenu(lastPathItem.selectedMenuItem,menuToEnter,10)?this.appendPathItem(activePath,menuToEnter,menuItemToEnter,menuItemIndex):this.appendNewPath(menuToEnter,menuItemToEnter,menuItemIndex,menuToEnter)}}else{var locatedPathIndexPairArr=this.indexPairArrByMenu(menuToEnter);if(0===locatedPathIndexPairArr.length)this.appendNewPath(menuToEnter,menuItemToEnter,menuItemIndex,menuToEnter);else{activePath=this._menuPathSet[locatedPathIndexPairArr[0].outerIndex],this._activeRootMenu=activePath[0].menu;var locatedPathItem=this._menuPathSet[locatedPathIndexPairArr[0].outerIndex][locatedPathIndexPairArr[0].innerIndex];locatedPathItem.selectedMenuItem!=menuItemToEnter&&(activePath.splice(locatedPathIndexPairArr[0].innerIndex+1),locatedPathItem.selectedMenuItem=menuItemToEnter,locatedPathItem.selectedMenuItemIndex=menuItemIndex)}}}},appendNewPath:function(menu,menuItem,menuItemIndex,activeRootMenu){this._menuPathSet.push([{menu:menu,selectedMenuItem:menuItem,selectedMenuItemIndex:menuItemIndex}]),this._activeRootMenu=activeRootMenu},appendPathItem:function(menuPath,menuToAppend,menuItemToAppend,menuItemIndex){menuPath.push({menu:menuToAppend,selectedMenuItem:menuItemToAppend,selectedMenuItemIndex:menuItemIndex})},getActiveRootMenu:function(){return this._activeRootMenu},getRecordPathText:function(menuItem){var activePath=this.getActiveMenuPath();if(!activePath)return"";var arrText=[];return activePath.some(function(pathItem){return arrText.push(RoleWebMenu._util._getMenuItemText(pathItem.selectedMenuItem)),pathItem.selectedMenuItem==menuItem}),arrText.join(";")},clearActiveRootMenu:function(){this._activeRootMenu=null},getActiveMenuPath:function(){var activeRootIndexArr=this.indexPairArrByMenu(this._activeRootMenu);return activeRootIndexArr.length?(activeRootIndexArr=activeRootIndexArr.filter(function(item){return 0===item.innerIndex}),activeRootIndexArr.length>1&&this._logger.warn("RoleWebMenu._MenuPathManager.getActiveMenuPath active menu count larger than 1, it is: ",activeRootIndexArr.length),this._menuPathSet[activeRootIndexArr[0].outerIndex]):null}},RoleWebMenu._menuPathManager=new RoleWebMenu._MenuPathManager,RoleWebKit.registerFactory(RoleWebMenu);var RoleWebButton={isRoleBased:!0,_util:{isButton:function(elem){return"button"===RoleWebUtil.getRole(elem)}},createAO:function(elem,parentId){return RoleWebButton._util.isButton(elem)?RoleWebUtil.createAO(elem,parentId,[ButtonBehavior,this._behavior]):null},_behavior:{name:"RoleWebButton",_attrs:{"logical name":function(){return RoleWebUtil.getLogicalName(this._elem)}},_methods:{CALL_EVENT:function(msg,resultCallback){this._logger.trace("RoleWebButton: on commnad CALL_EVENT");var event=msg._data.event;if(event=event.toLowerCase().replace(/^on/,""),this._elem.children.length>0){var elemRec=this._elem.getBoundingClientRect();this._elem=document.elementFromPoint(elemRec.left+elemRec.width/2,elemRec.top+elemRec.height/2)}this._fireEvent(this._elem,event,msg._data),resultCallback(msg)}}}};RoleWebKit.registerFactory(RoleWebButton);var RoleWebCheckbox={isRoleBased:!0,_util:{isCheckbox:function(elem){return"checkbox"===RoleWebUtil.getRole(elem)}},createAO:function(elem,parentId){return RoleWebCheckbox._util.isCheckbox(elem)?RoleWebUtil.createAO(elem,parentId,[CheckBoxBehavior,this._behavior]):null},_behavior:{name:"RoleWebCheckbox",_attrs:{"logical name":function(){return RoleWebUtil.getLogicalName(this._elem)},checked:function(){return"true"===this._elem.getAttribute("aria-checked")?1:0},value:function(){return this._elem.value},part_value:function(){return"true"===this._elem.getAttribute("aria-checked")?"ON":"OFF"}},_eventHandler:function(recorder,ev){return!!ContentUtils.isTouchEnabled()||(this._logger.trace("RoleWebCheckbox.eventHandler: Received recordable event: ",ev.type),"click"===ev.type?(recorder.sendRecordEvent(this,ev,{event:"onclick",part_value:"false"===this._elem.getAttribute("aria-checked")?"ON":"OFF"}),!0):void 0)}}};RoleWebKit.registerFactory(RoleWebCheckbox);var RoleWebRadioGroup={isRoleBased:!0,_util:{isRadioGroup:function(elem){return"radio"===RoleWebUtil.getRole(elem)}},createAO:function(elem,parentId){if(RoleWebRadioGroup._util.isRadioGroup(elem)){var ao=RoleWebUtil.createAO(elem,parentId,[RadioGroupBehavior,this._behavior]);return ao.refreshRadioGroup(ao._elem),ao}return null},_behavior:{name:"RoleWebRadioGroup",_attrs:{"logical name":function(){return RoleWebUtil.getLogicalName(this._elem)},checked:function(){return"true"===this._elem.getAttribute("aria-checked")?1:0}},_eventHandler:function(recorder,ev){if(this._logger.trace("RoleWebRadioGroup.eventHandler: Received recordable event: ",ev.type),ContentUtils.isTouchEnabled())return!0;switch(ev.type){case"click":var radioElem=Util.findAncestor(ev.target,function(e){return e.matches&&e.matches("[role=radio]")});return radioElem&&recorder.sendRecordEvent(this,ev,{event:"onclick",value:this._calculateRadioButtonValue(radioElem)}),!0}},_helpers:{_getSiblingRadios:function(elem){for(var radios=[],currentNode=elem.parentNode.firstElementChild;currentNode;currentNode=currentNode.nextElementSibling){var role=RoleWebUtil.getRole(currentNode);1===currentNode.nodeType&&"radio"===role&&radios.push(currentNode)}return radios},refreshRadioGroup:function(triggeringElem){this._logger.trace("RoleWebRadioGroup.refreshRadioGroup: started"),triggeringElem&&(this._triggeringElem=triggeringElem);var radioGroup=Util.findAncestor(this._elem,function(item){return item.matches&&item.matches("[role=radiogroup]")});this._radios=radioGroup?Util.makeArray(radioGroup.querySelectorAll("[role=radio]")):this._getSiblingRadios(triggeringElem),this._activeRadioIndex=Util.arrayFindIndex(this._radios,function(radio){return"true"===radio.getAttribute("aria-checked")}.bind(this)),-1===this._activeRadioIndex&&(this._activeRadioIndex=0),this._elem=this._radios[this._activeRadioIndex]},_radioButtonInitialValue:function(elem){return RoleWebUtil.getText(elem)||RoleWebUtil.getText(elem.parentElement)}}}};RoleWebKit.registerFactory(RoleWebRadioGroup);var RoleWebList={isRoleBased:!1,_util:{isList:function(elem){if("INPUT"===elem.tagName||"SELECT"===elem.tagName)return!1;var role=RoleWebUtil.getRole(elem);return"list"===role||"listbox"===role||!(role||!RoleWebList._util.isULhavingLIsWithOptionRole(elem))},isULhavingLIsWithOptionRole:function(elem){return"UL"===elem.tagName&&(0===elem.querySelectorAll("ul").length&&elem.querySelectorAll("li[role=option]").length>0)},getListItems:function(elem){return Util.makeArray(elem.querySelectorAll("[role=option], [role=listitem]"))},getSelectedItem:function(items){return Util.arrayFind(items,function(item){return"true"===item.getAttribute("aria-selected")})},getItemToSelect:function(elem,value){var items=RoleWebList._util.getListItems(elem);return"number"!=typeof value?Util.arrayFind(items,function(item){return RoleWebUtil.getText(item)===value}):value>=0&&value<items.length?items[value]:null}},createAO:function(elem,parentId){return RoleWebList._util.isList(elem)?RoleWebUtil.createAO(elem,parentId,[ListBehavior,this._behavior]):null},_behavior:{name:"RoleWebListBehavior",_attrs:{"logical name":function(){return RoleWebUtil.getLogicalName(this._elem)},"default value":function(){return null},selection:function(){var items=RoleWebList._util.getListItems(this._elem),arr=[];return items.forEach(function(item){"true"===item.getAttribute("aria-selected")&&arr.push(RoleWebUtil.getText(item))}),arr.join(";")},"all items":function(){var containerElem,ariaOwns=this._elem.getAttribute("aria-owns");ariaOwns&&(containerElem=document.getElementById(ariaOwns)),containerElem||(containerElem=this._elem);var items=RoleWebList._util.getListItems(containerElem);return Util.makeArray(items).map(RoleWebUtil.getText).join(";")},"items count":function(){return RoleWebList._util.getListItems(this._elem).length},"selected item index":function(){for(var items=RoleWebList._util.getListItems(this._elem),indexes=[],i=0;i<items.length;i++)"true"===items[i].getAttribute("aria-selected")&&indexes.push(i);return indexes.join(";")},"selected items count":function(){return RoleWebList._util.getListItems(this._elem).filter(function(item){return"true"===item.getAttribute("aria-selected")}).length},"visible items":function(){return this._getVisibleItems().length},"first item":function(){var items=RoleWebList._util.getListItems(this._elem);return items.length>0?RoleWebUtil.getText(items[0]):null},is_role_based:function(){return!0}},_methods:{NUM_TO_ITEM:function(msg,resultCallback){this._logger.trace("RoleWebListBehavior: on command NUM_TO_ITEM");var items=RoleWebList._util.getListItems(this._elem),index=msg._data.item_index;(index<0||index>=items.length)&&ErrorReporter.ThrowItemNotFound(),msg._data.AN_ITEM_TEXT=RoleWebUtil.getText(items[index]),resultCallback(msg)},LIST_SELECT:function(msg,resultCallback){function onComplete(){var target=RoleWebList._util.getItemToSelect(self._elem,msg._data.value);target?(ContentUtils.isTouchEnabled()&&(msg._data.pos=ContentUtils.pointRelativeToElem(target,{x:Constants.noCoordinate,y:Constants.noCoordinate}),target=document.elementFromPoint(msg._data.pos.x,msg._data.pos.y)),self._fireEvent(target,"click",msg._data)):msg.status="ItemNotFound",resultCallback(msg)}this._logger.trace("RoleWebListBehavior: on command LIST_SELECT");var self=this;this._makeItemVisible(msg,onComplete)},MAKE_ITEM_VISIBLE:function(msg,resultCallback){this._logger.trace("RoleWebListBehavior: on command MAKE_ITEM_VISIBLE"),this._scrollByXPath(msg,resultCallback)}},_eventHandler:function(recorder,ev){if(ContentUtils.isTouchEnabled())return!0;switch(this._logger.trace("RoleWebList._eventHandler: Received recordable event: ",ev.type),ev.type){case"click":return!0;case"mousedown":var selectedItem=Util.findAncestor(ev.target,function(e){return e.matches&&e.matches("[role=option], [role=listitem]")});if(selectedItem)recorder.sendRecordEvent(this,ev,{event:"onchange",value:RoleWebUtil.getText(selectedItem)});else{0===RoleWebList._util.getListItems(this._elem).length&&recorder.sendRecordEvent(this,ev,{event:"onclick","event point":{x:ev.clientX,y:ev.clientY}})}return!0}},_gestureHandler:function(recorder,ev,targetElement){if(this._logger.trace("RoleWebList._gestureHandler: Received gesture: ",ev.event),"tap"==ev.event||"longtap"==ev.event){var selectedItem=Util.findAncestor(targetElement,function(e){return e.matches&&e.matches("[role=option], [role=listitem]")});if(!selectedItem){var elements=document.elementsFromPoint(ev.clientX,ev.clientY);selectedItem=Util.arrayFind(elements,function(elem){var role=RoleWebUtil.getRole(elem);return"option"===role||"listitem"===role})}if(selectedItem)recorder.sendRecordEvent(this,null,{event:"onchange",value:RoleWebUtil.getText(selectedItem),force_record:!0});else{0===RoleWebList._util.getListItems(this._elem).length&&recorder.sendRecordEvent(this,null,{event:"onclick","event point":{x:ev.clientX,y:ev.clientY},force_record:!0})}return!0}},_helpers:{_scrollDirection:{ScrollUp:0,ScrollDown:1},_retryCounter:0,_axix:{min:0,max:9999},_makeItemVisible:function(msg,onComplete){var self=this;Util.setTimeout(function(){var value=msg._data.value;self._isItemVisible(value)?onComplete&&onComplete():(self._scrollByDirection(self._scrollDirection.ScrollUp,value,onComplete),self._isItemVisible(value)||self._scrollByDirection(self._scrollDirection.ScrollDown,value,onComplete))},500)},_getClickableElementByDirection:function(direction){switch(direction){case this._scrollDirection.ScrollUp:return this._getTopRightClickableElement();case this._scrollDirection.ScrollDown:return this._getBottomRightClickableElement()}},_getTopRightClickableElement:function(){var elemRec=this._elem.getBoundingClientRect();Util.isRectEmpty(elemRec)&&(elemRec=this._elem.parentElement.getBoundingClientRect());var topRightPosition={x:elemRec.left+elemRec.width-10,y:elemRec.top+10};return document.elementFromPoint(topRightPosition.x,topRightPosition.y)},_getBottomRightClickableElement:function(){var elemRec=this._elem.getBoundingClientRect();Util.isRectEmpty(elemRec)&&(elemRec=this._elem.parentElement.getBoundingClientRect());var bottomRightPosition={x:elemRec.left+elemRec.width-10,y:elemRec.bottom-10};return document.elementFromPoint(bottomRightPosition.x,bottomRightPosition.y)},_getClickPosition:function(direction,clickableElement){var clickableElementRec=clickableElement.getBoundingClientRect(),position={x:clickableElementRec.width-10,y:clickableElementRec.height-10};return"IMG"===clickableElement.tagName&&(clickableElement=clickableElement.parentElement,clickableElementRec=clickableElement.getBoundingClientRect(),position={x:clickableElementRec.width-10,y:clickableElementRec.height-10},direction==this._scrollDirection.ScrollUp&&(position.y=10)),position},_getElementByXPath:function(xpath){var elements=[];return xpath&&(elements=Description.getElementsByXpath(xpath,this._elem)),0===elements.length&&ErrorReporter.ThrowItemNotFound(),elements.length>1&&ErrorReporter.ThrowItemNotUnique(),elements[0]},_areTwoVisibleItemListEqual:function(listOne,listTwo){var areEqual=!0;listOne.length!==listTwo.length&&(areEqual=!1);for(var i=0;i<listOne.length;i++)if(listOne[i]!==listTwo[i]){areEqual=!1;break}return this._retryCounter=areEqual?this._retryCounter+1:0,areEqual},_scrollByDirection:function(direction,value,onComplete){var clickableElement=this._getClickableElementByDirection(direction);if(clickableElement){this._retryCounter=0;for(var position=this._getClickPosition(direction,clickableElement),isVisible=this._isItemVisible(value);!isVisible;){var originalVisibleItems=this._getVisibleItems();if(this._fireEvent(clickableElement,"click",{pos:position}),(isVisible=this._isItemVisible(value))&&onComplete){onComplete();break}if(this._areTwoVisibleItemListEqual(originalVisibleItems,this._getVisibleItems())&&this._retryCounter>5){direction==this._scrollDirection.ScrollDown&&onComplete&&onComplete();break}}}},_scrollByXPath:function(msg,resultCallback){function scroll(value,position,expire){self._isItemVisible(value)?resultCallback(msg):(new Date).getTime()>expire?(msg.status="ERROR",resultCallback(msg)):(self._fireEvent(elementByXPath,"click",{pos:position}),Util.setTimeout(scroll,100,value,position,expire))}var timeout=msg._data.timeout,value=msg._data.value,xpath=msg._data.xpath;if(timeout<0)return void ErrorReporter.ThrowInvalidArg();var elementByXPath=this._getElementByXPath(xpath),position=this._getClickPosition(null,elementByXPath),expire=(new Date).getTime()+timeout,self=this;scroll(value,position,expire)},_getVisibleItems:function(){var items=RoleWebList._util.getListItems(this._elem),visibleItems=[];return items.forEach(function(item){this._isItemVisible(RoleWebUtil.getText(item))&&visibleItems.push(item)},this),visibleItems},_isItemVisible:function(value){var item=RoleWebList._util.getItemToSelect(this._elem,value);if(!item)return!1;var topRightArea=this._getTopRightClickableElement(),bottomRightArea=this._getBottomRightClickableElement(),top=topRightArea?topRightArea.getBoundingClientRect().top:this._axix.min,bottom=bottomRightArea?bottomRightArea.getBoundingClientRect().bottom:this._axix.max,itemRec=item.getBoundingClientRect();return itemRec.bottom<=bottom+itemRec.height/2&&itemRec.top+itemRec.height/2>=top}}}},RoleWebComboBox={isRoleBased:!0,_util:{isComboxBox:function(elem){return"INPUT"!==elem.tagName&&"combobox"===RoleWebUtil.getRole(elem)}},createAO:function(elem,parentId){return RoleWebComboBox._util.isComboxBox(elem)?RoleWebUtil.createAO(elem,parentId,[ListBehavior,this._behavior]):null},_behavior:{name:"RoleWebComboBoxBehavior",_attrs:{"logical name":function(){return RoleWebUtil.getLogicalName(this._elem)},"default value":function(){return null},selection:function(){var items=Util.makeArray(RoleWebList._util.getListItems(this._elem)),arr=[];return items.forEach(function(item){"true"===item.getAttribute("aria-selected")&&arr.push(RoleWebUtil.getText(item))}),arr.join(";")},"all items":function(){var items=RoleWebList._util.getListItems(this._elem);return Util.makeArray(items).map(RoleWebUtil.getText).join(";")},"items count":function(){return 0},is_role_based:function(){return!0}},_methods:{CALL_EVENT:function(msg,resultCallback){this._logger.trace("RoleWebComboBox: on commnad CALL_EVENT");var self=this;Util.setTimeout(function(){var elemRec=self._elem.getBoundingClientRect(),propPos={x:elemRec.right-5,y:elemRec.top+elemRec.height/2},elementFromPoint=document.elementFromPoint(propPos.x,propPos.y);self._fireEvent(elementFromPoint,"mousedown",msg._data),self._fireEvent(elementFromPoint,"mouseup",msg._data),resultCallback(msg)},500)}},_eventHandler:function(recorder,ev){switch(this._logger.trace("RoleWebComboBox._eventHandler: Received recordable event: ",ev.type),ev.type){case"mousedown":return recorder.sendRecordEvent(this,ev,{event:"onclick","event point":{x:ev.clientX,y:ev.clientY}}),!0}return!1}}};RoleWebKit.registerFactory(RoleWebList),RoleWebKit.registerFactory(RoleWebComboBox);var RoleWebTab={isRoleBased:!0,_util:{isWebTab:function(elem){return"tablist"===RoleWebUtil.getRole(elem)&&0!==RoleWebTab._util.getTabItems(elem).length},getTabItems:function(elem){return elem.querySelectorAll("[role=tab]")},getItemToSelect:function(elem,value){var items=RoleWebTab._util.getTabItems(elem);return"number"!=typeof value?Util.arrayFind(items,function(item){return RoleWebUtil.getText(item)===value}):value>=0&&value<items.length?items[value]:null},getClickableItem:function(elem){return elem.firstChild&&"A"===elem.firstChild.tagName?elem.firstChild:elem},getSelectedItem:function(elem){var selectedItem;return RoleWebTab._util.getTabItems(elem).forEach(function(tabItem){"true"===tabItem.getAttribute("aria-selected")&&(selectedItem=tabItem)}),selectedItem||(selectedItem=elem.querySelector("#"+elem.getAttribute("aria-activedescendant"))),selectedItem}},createAO:function(elem,parentId){return RoleWebTab._util.isWebTab(elem)?RoleWebUtil.createAO(elem,parentId,[TabBehavior,this._behavior]):null},_behavior:{name:"RoleWebTabBehavior",_attrs:{name:function(){return RoleWebUtil.getName(this._elem)},"logical name":function(){return RoleWebUtil.getLogicalName(this._elem)},"all items":function(){var items=RoleWebTab._util.getTabItems(this._elem);return Util.makeArray(items).map(RoleWebUtil.getText).join(";")},"items count":function(){return RoleWebTab._util.getTabItems(this._elem).length},"first item":function(){var items=RoleWebTab._util.getTabItems(this._elem);return items.length>0?RoleWebUtil.getText(items[0]):null},value:function(){var item=RoleWebTab._util.getSelectedItem(this._elem);return item?item.getAttribute("value"):""},"selected item":function(){var selectedItem=RoleWebTab._util.getSelectedItem(this._elem);return selectedItem?RoleWebUtil.getText(selectedItem):""}},_methods:{LIST_SELECT:function(msg,resultCallback){this._logger.trace("RoleWebTabBehavior: on command LIST_SELECT");var targetTab=RoleWebTab._util.getItemToSelect(this._elem,msg._data.value);targetTab?(this._elem=RoleWebTab._util.getClickableItem(targetTab),this._fireEvent(this._elem,"click",msg._data)):ErrorReporter.ThrowItemNotFound(),resultCallback(msg)}},_eventHandler:function(recorder,ev){if(ContentUtils.isTouchEnabled())return!0;switch(this._logger.trace("RoleWebTab._eventHandler: Received recordable event: ",ev.type),ev.type){case"click":var tabItem=Util.findAncestor(ev.target,function(e){return e.matches&&e.matches("[role=tab]")});return tabItem=tabItem||ev.target.querySelector("[role=tab]"),tabItem&&recorder.sendRecordEvent(this,ev,{event:"onchange",value:RoleWebUtil.getText(tabItem)}),!0}return!1},_gestureHandler:function(recorder,ev,targetElement){if(this._logger.trace("RoleWebTabBehavior._gestureHandler: Received gesture: ",ev.event),"tap"==ev.event||"longtap"==ev.event){var tabItem=Util.findAncestor(targetElement,function(e){return e.matches&&e.matches("[role=tab]")});return tabItem=tabItem||targetElement.querySelector("[role=tab]"),tabItem&&recorder.sendRecordEvent(this,null,{event:"onchange",value:RoleWebUtil.getText(tabItem),force_record:!0}),!0}}}},RoleWebTabLink={isRoleBased:!0,_util:{isWebTabLink:function(elem){if("A"!==elem.tagName)return!1;var role=RoleWebUtil.getRole(elem),parentRole=RoleWebUtil.getRole(elem.parentElement);return"tab"===role||"tab"===parentRole}},createAO:function(elem,parentId){return RoleWebTabLink._util.isWebTabLink(elem)?RoleWebUtil.createAO(elem,parentId,[this._behavior]):null},_behavior:{_eventHandler:function(recorder,ev){this._logger.trace("RoleWebTabLink._eventHandler: Received recordable event: ",ev.type)}}};RoleWebKit.registerFactory(RoleWebTab),RoleWebKit.registerFactory(RoleWebTabLink);var RoleWebLink={isRoleBased:!0,_util:{isWebLink:function(elem){return"link"===RoleWebUtil.getRole(elem)}},createAO:function(elem,parentId){return RoleWebLink._util.isWebLink(elem)?RoleWebUtil.createAO(elem,parentId,[LinkBehavior]):null}};RoleWebKit.registerFactory(RoleWebLink);var RoleWebTree={isRoleBased:!0,_util:{isTree:function(elem){return"tree"===RoleWebUtil.getRole(elem)},_getTreeItems:function(elem){return Util.makeArray(elem.querySelectorAll("[role=treeitem]"))},getSelectedItem:function(elem){return elem.querySelector("[aria-selected=true]")},isItemExpanded:function(elem){if(elem=RoleWebTree._helpers._getTreeItem(elem),"true"===elem.getAttribute("aria-expanded"))return!0;if("false"===elem.getAttribute("aria-expanded"))return!1;var child=elem.querySelector("[role=treeitem]");if(child){var display=child.parentNode.style.getPropertyValue("display");if("block"===display)return!0;if("none"===display)return!1}return!0},isItemCollapsed:function(elem){return!RoleWebTree._util.isItemExpanded(elem)},isTreeItem:function(elem){return!(!elem||!elem.nodeName)&&(elem.nodeType!==Node.TEXT_NODE&&elem.nodeType!==Node.COMMENT_NODE&&"treeitem"==elem.getAttribute("role"))},getTextContent:function(elem){if(RoleWebTree._util.isTreeItem(elem))for(;elem.hasChildNodes();){var child=Util.arrayFind(elem.childNodes,function(e){return Util.cleanTextProperty(e.textContent)&&"#comment"!=e.nodeName});if(!child.hasChildNodes())break;elem=child}return Util.cleanTextProperty(elem.textContent)}},createAO:function(elem,parentId){return RoleWebTree._util.isTree(elem)?RoleWebUtil.createAO(elem,parentId,[TreeBehavior,this._behavior]):null},_behavior:{name:"RoleWebTreeBehavior",_attrs:{name:function(){return RoleWebUtil.getName(this._elem)||RoleWebUtil.getLogicalName(this._elem)},"logical name":function(){return RoleWebUtil.getLogicalName(this._elem)},"all items":function(){var allItems=RoleWebTree._util._getTreeItems(this._elem);return Util.makeArray(allItems).map(RoleWebTree._util.getTextContent).join(";")},"items count":function(){return RoleWebTree._util._getTreeItems(this._elem).length},selection:function(){var selection=RoleWebTree._util.getSelectedItem(this._elem);return RoleWebTree._helpers._getPathFromElem(selection)},"first item":function(){var firstRoot=RoleWebTree._util._getTreeItems(this._elem)[0];return firstRoot?RoleWebTree._util.getTextContent(firstRoot):null}},_eventHandler:function(recorder,ev){if(ContentUtils.isTouchEnabled())return!0;switch(ev.type){case"click":var operation,elem=Util.findAncestor(ev.target,function(e){return e.matches&&e.matches("[role=treeitem]")}),path=RoleWebTree._helpers._getPathFromElem(elem),nodes=path.split(";"),text=nodes[nodes.length-1];return operation=RoleWebTree._helpers._isLeaf(elem)||RoleWebTree._helpers._isClickOnItem(elem,text,ev.target)?RoleWebTree._helpers._actionType.select:RoleWebTree._util.isItemExpanded(elem)?RoleWebTree._helpers._actionType.collapse:RoleWebTree._helpers._actionType.expand,recorder.sendRecordEvent(this,ev,{event:"onclick",name:operation,value:path}),!0}},_gestureHandler:function(recorder,ev,targetElement){if("tap"==ev.event||"longtap"==ev.event){var operation,elem=Util.findAncestor(targetElement,function(e){return e.matches&&e.matches("[role=treeitem]")}),path=RoleWebTree._helpers._getPathFromElem(elem),nodes=path.split(";"),text=nodes[nodes.length-1];return operation=RoleWebTree._helpers._isLeaf(elem)||RoleWebTree._helpers._isClickOnItem(elem,text,targetElement)?RoleWebTree._helpers._actionType.select:RoleWebTree._util.isItemExpanded(elem)?RoleWebTree._helpers._actionType.collapse:RoleWebTree._helpers._actionType.expand,recorder.sendRecordEvent(this,null,{event:"onclick",name:operation,value:path,force_record:!0}),!0}},_methods:{LIST_SELECT:function(msg,resultCallback){RoleWebTree._helpers._makeSelection(msg,this,RoleWebTree._helpers._actionType.select,resultCallback)},WEB_TREE_EXPAND:function(msg,resultCallback){RoleWebTree._helpers._makeSelection(msg,this,RoleWebTree._helpers._actionType.expand,resultCallback)},WEB_TREE_COLLAPSE:function(msg,resultCallback){RoleWebTree._helpers._makeSelection(msg,this,RoleWebTree._helpers._actionType.collapse,resultCallback)}}},_helpers:{_actionType:{select:"Select",expand:"Expand",collapse:"Collapse"},_getPathFromElem:function(elem){if(0==arguments.length)return"";for(var path=[],e=elem;e;e=this._getParentNode(e))RoleWebTree._util.isTreeItem(e)&&path.push(RoleWebTree._util.getTextContent(e));return path=path.reverse().join(";")},_getItemFromPath:function(path,tree){if(0==arguments.length)return null;for(var item=tree||this._elem,nodes=path.split(";"),i=0;i<nodes.length;i++){var children=this._getDirectChildrenItems(item),node=nodes[i],tryIndex=this._tryGetItemByIndex(node,children);item=tryIndex||Util.arrayFind(children,function(child){return node==RoleWebTree._util.getTextContent(child)})}return item||ErrorReporter.ThrowItemNotFound(),item},_tryGetItemByIndex:function(indexStr,items){if(0==indexStr.indexOf("#")){var index=Number(indexStr.substr(1));if(index<items.length)return items[index];ErrorReporter.ThrowItemNotFound()}},_makeSelection:function(msg,current,type,resultCallback){if(current){var xpathForSelector=msg._data.xpath,xpathForOpener=msg._data._xpath,nodes="string"==typeof msg._data.value?[msg._data.value]:msg._data.value[0],path=nodes.join(";");switch(type){case this._actionType.select:this._expandParent(current._elem,msg,current,path,xpathForOpener,function(){var item=RoleWebTree._helpers._getItemFromPath(path,current._elem);RoleWebTree._helpers._clickItem(item,msg,current,RoleWebTree._util.getTextContent(item),xpathForSelector),resultCallback(msg)});break;case this._actionType.expand:this._expandParent(current._elem,msg,current,path,xpathForOpener,function(){var item=RoleWebTree._helpers._getItemFromPath(path,current._elem);RoleWebTree._util.isItemCollapsed(item)?RoleWebTree._helpers._clickOpener(item,msg,current,xpathForOpener,function(){resultCallback(msg)}):resultCallback(msg)});break;case this._actionType.collapse:var item=this._getItemFromPath(path,current._elem);RoleWebTree._util.isItemExpanded(item)?this._clickOpener(item,msg,current,xpathForOpener,function(){resultCallback(msg)}):resultCallback(msg)}}},_redirectByXpathAsPriority:function(item,xpath){
var elements=[];return xpath&&(elements=Description.getElementsByXpath(xpath,item)),0===elements.length&&ErrorReporter.ThrowItemNotFound(),item=elements[0]},_clickItem:function(item,msg,current,text,xpath){var target=xpath?RoleWebTree._helpers._redirectByXpathAsPriority(item,xpath):RoleWebTree._helpers._findItem(item,text);current._fireEvent(target,"click",msg._data)},_clickOpener:function(item,msg,current,xpath,onComplete){var target=xpath?RoleWebTree._helpers._redirectByXpathAsPriority(item,xpath):RoleWebTree._helpers._findOpener(item),status=RoleWebTree._util.isItemExpanded(item);current._fireEvent(target,"mouseover",msg._data),status==RoleWebTree._util.isItemExpanded(item)&&current._fireEvent(target,"click",msg._data),Util.setTimeout(function(){status==RoleWebTree._util.isItemExpanded(item)&&current._fireEvent(target,"dblclick",msg._data),onComplete&&onComplete()},2e3)},_findItem:function(item,text){if(RoleWebTree._util.isTreeItem(item))for(;item.hasChildNodes();){var child=Util.arrayFind(item.childNodes,function(itemChild){return RoleWebTree._util.getTextContent(itemChild)==text});if(!child||!child.hasChildNodes())return item;item=child}return item},_findOpener:function(item){if(RoleWebTree._util.isTreeItem(item))for(;item.childElementCount;)item=Util.arrayFind(item.children,function(itemChild){return!RoleWebTree._helpers._isZeroSize(itemChild)})||item.firstElementChild;return item||ErrorReporter.ThrowItemNotFound(),item},_isZeroSize:function(elem){return 0==elem.offsetWidth||0==elem.offsetHeight},_isLeaf:function(elem){return!elem.hasAttribute("aria-expanded")&&0===elem.querySelectorAll("[role=treeitem]").length},_isClickOnItem:function(elem,text,target){return RoleWebTree._helpers._findItem(elem,text).contains(target)},_expandParent:function(item,msg,current,path,xpath,onComplete){for(var parent=this._getTreeRoot(item),nodes=path.split(";"),onCompleteCalled=!1,i=0;i<nodes.length-1;i++){var children=this._getDirectChildrenItems(parent),node=nodes[i],tryIndex=this._tryGetItemByIndex(node,children);parent=tryIndex||Util.arrayFind(children,function(child){return node==RoleWebTree._util.getTextContent(child)}),RoleWebTree._util.isItemCollapsed(parent)&&(this._clickOpener(parent,msg,current,xpath,onComplete),onCompleteCalled=!0)}!onCompleteCalled&&onComplete&&onComplete()},_getParentNode:function(elem){return this._getLogicalParentFromLevel(elem)||this._getLogicalParentFromAriaOwns(elem)||this._getParentFromDom(elem)},_getDirectChildrenItems:function(elem){var children=this._getLogicalChildrenFromLevel(elem)||this._getLogicalChildrenFromAriaOwns(elem)||this._getChildrenFromDom(elem);return Util.makeArray(children)},_getParentFromDom:function(elem){return Util.findAncestor(elem.parentElement,function(parent){return parent.matches("[role=treeitem]")||parent.matches("[role=tree]")})},_getChildrenFromDom:function(elem){var children=Util.makeArray(RoleWebTree._util._getTreeItems(elem));return children=RoleWebTree._util.isTree(elem)?children.filter(function(child){return-1==RoleWebTree._helpers._getPathFromElem(child).indexOf(";")}):children.filter(function(child){return elem==RoleWebTree._helpers._getParentFromDom(child)})},_getLogicalChildrenFromAriaOwns:function(elem){var aria_owns=elem.getAttribute("aria-owns");if(aria_owns){var ids=aria_owns.split(/\s+/).filter(function(id){return""!=id}),children=ids.map(function(id){var item=ContentUtils.getElementById(document,id);if(item)return Util.makeArray(item.querySelectorAll("[role=treeitem]"))}).reduce(function(a,b){return a.concat(b)},[]).filter(function(child){return child}),currentLevel=this._calculateLevelFromPath(elem);return children.filter(function(child){return RoleWebTree._helpers._calculateLevelFromPath(child)==currentLevel+1})}},_calculateLevelFromPath:function(elem){return RoleWebTree._helpers._getPathFromElem(elem).split(";").length},_getLogicalParentFromAriaOwns:function(elem){var tree=this._getTreeRoot(elem);if(0!=tree.querySelectorAll("[role='treeitem'][aria-owns]").length)for(var iterator=elem;iterator!=tree;iterator=iterator.parentNode){var id=iterator.id;if(id){"number"==typeof id&&(id="'"+id+"'");var selector="[aria-owns~="+id+"]",searchResult=tree.querySelector(selector);if(searchResult)return searchResult}}},_getLogicalChildrenFromLevel:function(elem){var level=this._getLevel(elem);if(level){for(var items=RoleWebTree._util._getTreeItems(this._getTreeRoot(elem)),index=Util.arrayFindIndex(items,function(itemChild){return itemChild==elem}),children=[],i=index+1;i<items.length;i++){var item=items[i],itemLevel=this._getLevel(item);if(itemLevel<=level)break;itemLevel==level+1&&(children=children.concat(item))}if(0!=children.length)return children}},_getLogicalParentFromLevel:function(elem){var level=this._getLevel(elem);if(level)for(var items=RoleWebTree._util._getTreeItems(this._getTreeRoot(elem)),index=Util.arrayFindIndex(items,function(item){return item==elem}),i=index-1;i>=0;i--){var item=items[i];if(this._getLevel(item)==level-1)return item}},_getLevel:function(elem){if(RoleWebTree._util.isTreeItem(elem))return Number(elem.getAttribute("aria-level"))},_getTreeItem:function(elem){return RoleWebTree._util.isTreeItem(elem)||(elem=Util.findAncestor(elem,function(item){return item.matches&&item.matches("[role=treeitem]")})),elem},_getTreeRoot:function(elem){return RoleWebTree._util.isTree(elem)||(elem=Util.findAncestor(elem,function(item){return item.matches&&item.matches("[role=tree]")})),elem}}};RoleWebKit.registerFactory(RoleWebTree);var RoleWebTable={isRoleBased:!0,_util:{isWebTable:function(elem){return"TABLE"!==elem.tagName&&"grid"===RoleWebUtil.getRole(elem)}},createAO:function(elem,parentId){return RoleWebTable._util.isWebTable(elem)?RoleWebUtil.createAO(elem,parentId,[TableBehavior,this._behavior]):null},_behavior:{name:"RoleWebTableBehavior",_attrs:{"logical name":function(){return RoleWebUtil.getLogicalName(this._elem)},cols:function(msg){var columnHeaders=this._getColumnHeaders();if(columnHeaders.length>0)return columnHeaders.length;var rows=this._getRows();return 0===rows.length?0:this._getCells(rows[0]).length},"column names":function(){var columnHeaders=this._getColumnHeaders();return Util.makeArray(columnHeaders).map(function(col){return col.textContent}).join(";")}},_helpers:{_filteredByContainer:function(items){return Util.makeArray(items).filter(function(item){return this._elem===Util.findAncestor(item,function(e){return e.matches&&e.matches("[role=grid]")})},this)},_getRows:function(){var rows=this._elem.querySelectorAll("[role=row]");return this._filteredByContainer(rows)},_getCells:function(row){var cells=row.querySelectorAll("[role=gridcell]");return this._filteredByContainer(cells)},_getColumnHeaders:function(){var headers=this._elem.querySelectorAll("[role=columnheader]");return this._filteredByContainer(headers)}}}};RoleWebKit.registerFactory(RoleWebTable);var JQMKit=KitUtil.CreateKit("jQmKit",function(){return ContentUtils.runOnDocSync(function(){return!("undefined"==typeof $||!$.mobile)})}),JQMUtil={matchControl:function(elem,matchingLabelClasses,controlCriteria){if("LABEL"===elem.tagName&&this._hasExpectedClass(elem,matchingLabelClasses)){var control=this._getControlFromLabel(elem,controlCriteria);if(control)return{control:control,label:elem}}else if(controlCriteria(elem)){var label=this.getLabelFromControl(elem,matchingLabelClasses);if(label)return{control:elem,label:label}}return null},_hasExpectedClass:function(elem,classNames){return classNames.some(function(name){return Util.elemHasClass(elem,name)})},_getControlFromLabel:function(label,controlCriteria){var candidate=label.control||label.nextElementSibling;return candidate&&controlCriteria(candidate)?candidate:null},getLabelFromControl:function(elem,classNames){var labels=ContentUtils.getLabelsFromControl(elem);if(labels&&labels.length)return Util.makeArray(labels).filter(function(label){return this._hasExpectedClass(label,classNames)},this)[0];var prev=elem.previousElementSibling;return prev&&"LABEL"===prev.tagName&&!prev.control&&this._hasExpectedClass(prev,classNames)?prev:void 0}},JQMButton={createAO:function(elem,parentId){return Util.elemHasClass(elem,"ui-btn")&&elem.offsetWidth?KitUtil.createAO(elem,parentId,[ButtonBehavior,this._behavior]):null},_behavior:{name:"JQMButtonBehavior",_eventHandler:function(recorder,ev){return this._logger.trace("JQMButton._eventHandler: Received recordable event: "+ev.type),!!ContentUtils.isTouchEnabled()&&(this._logger.trace("JQMButton._eventHandler: ignoring event in touch mode"),!0)}}},JQMCheckBox={createAO:function(elem,parentId){var match=JQMUtil.matchControl(elem,this._matchingClasses,this._isCheckBox);if(match){var ret=KitUtil.createAO(match.control,parentId,[CheckBoxBehavior,this._behavior]);return ret._label=match.label,ret}return null},_matchingClasses:["ui-checkbox-off","ui-checkbox-on"],_isCheckBox:function(elem){return"INPUT"===elem.tagName&&"checkbox"===elem.type},_behavior:{name:"JQMCheckBoxBehavior",_helpers:{_getLogicalName:function(){return this._label&&this._label.textContent},_label:null},_methods:{CALL_EVENT:function(msg,resultCallback){this._logger.trace("JQMCheckBox: on commnad CALL_EVENT");var event=msg._data.event;event=event.toLowerCase().replace(/^on/,""),this._fireEvent(this._label,event,msg._data),resultCallback(msg)},SET_VALUE_EX:function(msg,resultCallback){if(this._logger.trace("JQMCheckBox: on command SET_VALUE_EX"),1===this.GetAttrSync("disabled")&&ErrorReporter.ThrowObjectDisabled(),this.GetAttrSync("part_value")!==msg._data.value){var visibleMsg=new Msg(MSG_TYPES.SRVC_MAKE_OBJ_VISIBLE,Util.shallowObjectClone(this._parentID),{"disable browser popup":msg._data["disable browser popup"]});this.SRVC_MAKE_OBJ_VISIBLE(visibleMsg,function(){document.body.click(),this._elem.click(),resultCallback(msg)}.bind(this))}else resultCallback(msg)}},_eventHandler:function(recorder,ev){return this._logger.trace("JQMCheckBox._eventHandler: Received recordable event: "+ev.type),ContentUtils.isTouchEnabled()?(this._logger.trace("JQMCheckBox._eventHandler: ignoring event in touch mode"),!0):"click"===ev.type&&(recorder.sendRecordEvent(this,ev,{event:"onclick",part_value:this._elem.checked?"OFF":"ON"}),!0)},_gestureHandler:function(recorder,gestureInfo){"tap"===gestureInfo.event&&recorder.sendRecordEvent(this,null,{event:"onclick",part_value:this._elem.checked?"OFF":"ON",force_record:!0})}}},JQMRadioGroup={createAO:function(elem,parentId){var match=JQMUtil.matchControl(elem,this.matchingClasses,this._isRadio);if(match){var ao=KitUtil.createAO(match.control,parentId,[RadioGroupBehavior,this._behavior]);return ao.refreshRadioGroup(ao._elem),ao}return null},matchingClasses:["ui-radio-off","ui-radio-on"],_isRadio:function(elem){return"INPUT"===elem.tagName&&"radio"===elem.type},_behavior:{name:"JQMRadioGroup",_methods:{CALL_EVENT:function(msg,resultCallback){this._logger.trace("JQMRadioGroup: on command CALL_EVENT"),this.InvokeMethod("SET_ACTIVE_RADIO_BY_VALUE",msg,function(resMsg){var event=resMsg._data.event;event=event.replace(/^on/,"");var label=JQMUtil.getLabelFromControl(this._elem,JQMRadioGroup.matchingClasses);this._fireEvent(label||this._elem,event,resMsg._data),resultCallback(resMsg)}.bind(this))},SET_VALUE_EX:function(msg,resultCallback){this._logger.trace("JQMRadioGroup: on command SET_VALUE_EX"),this._setActiveElemByValue(msg._data.value);var visibleMsg=new Msg(MSG_TYPES.SRVC_MAKE_OBJ_VISIBLE,Util.shallowObjectClone(this._parentID),{"disable browser popup":msg._data["disable browser popup"]});this.SRVC_MAKE_OBJ_VISIBLE(visibleMsg,function(){document.body.click(),this._elem.click(),resultCallback(msg)}.bind(this))}},_eventHandler:function(recorder,ev){if(this._logger.trace("JQMRadioGroup._eventHandler: Received recordable event: "+ev.type),"click"===ev.type)return this.refreshRadioGroup(),recorder.sendRecordEvent(this,ev,{event:"onclick",value:this._calculateRadioButtonValue(this._triggeringElem||this._elem)}),!0},_helpers:{_radioButtonInitialValue:function(elem){var label=JQMUtil.getLabelFromControl(elem,JQMRadioGroup.matchingClasses);return label&&label.textContent?label.textContent.trim():elem.value||""}}}};JQMKit.registerFactory(JQMCheckBox),JQMKit.registerFactory(JQMRadioGroup),JQMKit.registerFactory(JQMButton),KitsManager.prototype.LoadKit(JQMKit);var SenchaKit=KitUtil.CreateKit("SenchaKit",function(){return ContentUtils.runOnDocSync(function(){return!(!window.Ext||!window.Ext.version)})}),SenchaButton={createAO:function(elem,parentId){return Util.elemHasClass(elem,"x-button")?KitUtil.createAO(elem,parentId,[ButtonBehavior]):null}};SenchaKit.registerFactory(SenchaButton),KitsManager.prototype.LoadKit(SenchaKit);var BootstrapKit=KitUtil.CreateKit("BootstrapKit",function(){return ContentUtils.runOnDocSync(function(){return!!(window.angular||window.getAllAngularRootElements||"undefined"!=typeof $&&$.fn&&$.fn.tooltip&&$.fn.tooltip.Constructor&&$.fn.tooltip.Constructor.VERSION)})}),BootstrapUtil={matchControl:function(elem,matchingLabelClasses,controlCriteria){return controlCriteria(elem)?this._getLabelFromControl(elem,matchingLabelClasses):null},_getLabelFromControl:function(elem,classNames){var labels=ContentUtils.getLabelsFromControl(elem);if(labels&&labels.length)return Util.makeArray(labels).filter(function(label){return this.hasExpectedClass(label,classNames)},this)[0]},hasExpectedClass:function(elem,classRegNames){return classRegNames.some(function(regName){return!!elem.className&&regName.test(elem.className)})}},BootstrapButton={createAO:function(elem,parentId){if(BootstrapUtil.hasExpectedClass(elem,this._matchingRegClasses))return KitUtil.createAO(elem,parentId,[ButtonBehavior]);var label=BootstrapUtil.matchControl(elem,this._matchingRegClasses,this._isCheckBoxOrRadio);return label?KitUtil.createAO(label,parentId,[ButtonBehavior]):null},_matchingRegClasses:[/\bbtn-(outline-)?(primary|secondary|success|info|warning|danger|link)\b/i],_isCheckBoxOrRadio:function(elem){return"INPUT"===elem.tagName&&("checkbox"===elem.type||"radio"===elem.type)}};BootstrapKit.registerFactory(BootstrapButton),KitsManager.prototype.LoadKit(BootstrapKit);var _QTP;!function(){if(!this._QTP||!this._QTP.wnd){var qtpProps={};qtpProps.wnd=this.window,qtpProps.window={},qtpProps.window.document={},qtpProps.window.undefined=void 0,qtpProps.wnd&&qtpProps.wnd.XPathResult&&(qtpProps.window.XPathResult=qtpProps.wnd.XPathResult);var document=null,window=qtpProps.window,navigator=null;"undefined"!=typeof _qtp_inject_xpath&&1!=_qtp_inject_xpath||(qtpProps.XPathInjector=function(){var undefined=void 0,defaultConfig={targetFrame:undefined,exportInstaller:!1,useNative:!0,useInnerText:!0},config={};for(var n in defaultConfig)n in config||(config[n]=defaultConfig[n]);if(config.hasNative=!!(document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null)),!config.hasNative||!config.useNative||config.exportInstaller){var BinaryExpr,FilterExpr,FunctionCall,Literal,NameTest,NodeSet,NodeType,NodeUtil,Number,PathExpr,Step,UnaryExpr,UnionExpr,VariableReference,uai=new function(){var ua=navigator.userAgent;if(RegExp==undefined)ua.indexOf("Opera")>=0?this.opera=!0:ua.indexOf("Netscape")>=0?this.netscape=!0:0==ua.indexOf("Mozilla/")?this.mozilla=!0:this.unknown=!0,ua.indexOf("Gecko/")>=0&&(this.gecko=!0),ua.indexOf("Win")>=0?this.windows=!0:ua.indexOf("Mac")>=0?this.mac=!0:ua.indexOf("Linux")>=0?this.linux=!0:ua.indexOf("BSD")>=0?this.bsd=!0:ua.indexOf("SunOS")>=0&&(this.sunos=!0);else if(/AppleWebKit\/(\d+(?:\.\d+)*)/.test(ua)?(this.applewebkit=RegExp.$1,4==RegExp.$1.charAt(0)?this.applewebkit2=!0:this.applewebkit3=!0):"object"==typeof Components&&(/Gecko\/(\d{8})/.test(ua)||"Gecko"==navigator.product&&/^(\d{8})$/.test(navigator.productSub))&&(this.gecko=RegExp.$1),"object"==typeof opera&&"function"==typeof opera.version?(this.opera=opera.version(),this["opera"+this.opera[0]+this.opera[2]]=!0):"object"==typeof opera&&/Opera[\/ ](\d+\.\d+)/.test(ua)?this.opera=RegExp.$1:this.ie||(/Safari\/(\d+(?:\.\d+)*)/.test(ua)?this.safari=RegExp.$1:/NetFront\/(\d+(?:\.\d+)*)/.test(ua)?this.netfront=RegExp.$1:/Konqueror\/(\d+(?:\.\d+)*)/.test(ua)?this.konqueror=RegExp.$1:ua.indexOf("(compatible;")<0&&/^Mozilla\/(\d+\.\d+)/.test(ua)?(this.mozilla=RegExp.$1,/\([^(]*rv:(\d+(?:\.\d+)*).*?\)/.test(ua)&&(this.mozillarv=RegExp.$1),/Firefox\/(\d+(?:\.\d+)*)/.test(ua)?this.firefox=RegExp.$1:/Netscape\d?\/(\d+(?:\.\d+)*)/.test(ua)&&(this.netscape=RegExp.$1)):this.unknown=!0),ua.indexOf("Win 9x 4.90")>=0)this.windows="ME";else if(/Win(?:dows)? ?(NT ?(\d+\.\d+)?|\d+|ME|Vista|XP)/.test(ua))if(this.windows=RegExp.$1,RegExp.$2)this.winnt=RegExp.$2;else switch(RegExp.$1){case"2000":this.winnt="5.0";break;case"XP":this.winnt="5.1";break;case"Vista":this.winnt="6.0"}else ua.indexOf("Mac")>=0?this.mac=!0:ua.indexOf("Linux")>=0?this.linux=!0:/(\w*BSD)/.test(ua)?this.bsd=RegExp.$1:ua.indexOf("SunOS")>=0&&(this.sunos=!0)},Lexer=function(source){for(var proto=Lexer.prototype,tokens=source.match(proto.regs.token),i=0,l=tokens.length;i<l;i++)proto.regs.strip.test(tokens[i])&&tokens.splice(i,1);for(var n in proto)tokens[n]=proto[n];return tokens.index=0,tokens};Lexer.prototype.regs={token:/\$?(?:(?![0-9-])[\w-]+:)?(?![0-9-])[\w-]+|\/\/|\.\.|::|\d+(?:\.\d*)?|\.\d+|"[^"]*"|'[^']*'|[!<>]=|(?![0-9-])[\w-]+:\*|\s+|./g,strip:/^\s/},Lexer.prototype.peek=function(i){return this[this.index+(i||0)]},Lexer.prototype.next=function(){return this[this.index++]},Lexer.prototype.back=function(){this.index--},Lexer.prototype.empty=function(){return this.length<=this.index};var Ctx=function(node,position,last){this.node=node,this.position=position||1,this.last=last||1},BaseExpr=function(){};BaseExpr.prototype.number=function(ctx){var exrs=this.evaluate(ctx);return exrs.isNodeSet?exrs.number():+exrs},BaseExpr.prototype.string=function(ctx){var exrs=this.evaluate(ctx);return exrs.isNodeSet?exrs.string():""+exrs},BaseExpr.prototype.bool=function(ctx){var exrs=this.evaluate(ctx);return exrs.isNodeSet?exrs.bool():!!exrs};var BaseExprHasPredicates=function(){};BaseExprHasPredicates.parsePredicates=function(lexer,expr){for(;"["==lexer.peek();){if(lexer.next(),lexer.empty())throw Error("missing predicate expr");var predicate=BinaryExpr.parse(lexer);if(expr.predicate(predicate),lexer.empty())throw Error("unclosed predicate expr");if("]"!=lexer.next())throw lexer.back(),Error("bad token: "+lexer.next())}},BaseExprHasPredicates.prototype=new BaseExpr,BaseExprHasPredicates.prototype.evaluatePredicates=function(nodeset,start){var predicates,predicate,nodes,nodeset,position,reverse;reverse=this.reverse,predicates=this.predicates,nodeset.sort();for(var i=start||0,l0=predicates.length;i<l0;i++){predicate=predicates[i];for(var deleteIndexes=[],nodes=nodeset.list(),j=0,l1=nodes.length;j<l1;j++){switch(position=reverse?l1-j:j+1,exrs=predicate.evaluate(new Ctx(nodes[j],position,l1)),typeof exrs){case"number":exrs=position==exrs;break;case"string":exrs=!!exrs;break;case"object":exrs=exrs.bool()}exrs||deleteIndexes.push(j)}for(var j=deleteIndexes.length-1,l1=0;j>=l1;j--)nodeset.del(deleteIndexes[j])}return nodeset},!window.BinaryExpr&&window.defaultConfig&&(window.BinaryExpr=null),BinaryExpr=function(op,left,right,datatype){this.op=op,this.left=left,this.right=right,this.datatype=BinaryExpr.ops[op][2],this.needContextPosition=left.needContextPosition||right.needContextPosition,this.needContextNode=left.needContextNode||right.needContextNode,"="==this.op&&(right.needContextNode||right.needContextPosition||"nodeset"==right.datatype||"void"==right.datatype||!left.quickAttr?left.needContextNode||left.needContextPosition||"nodeset"==left.datatype||"void"==left.datatype||!right.quickAttr||(this.quickAttr=!0,this.attrName=right.attrName,this.attrValueExpr=left):(this.quickAttr=!0,this.attrName=left.attrName,this.attrValueExpr=right))},BinaryExpr.compare=function(op,comp,left,right,ctx){var type,lnodes,rnodes,nodes,nodeset,primitive;if(left=left.evaluate(ctx),right=right.evaluate(ctx),left.isNodeSet&&right.isNodeSet){lnodes=left.list(),rnodes=right.list();for(var i=0,l0=lnodes.length;i<l0;i++)for(var j=0,l1=rnodes.length;j<l1;j++)if(comp(NodeUtil.to("string",lnodes[i]),NodeUtil.to("string",rnodes[j])))return!0;return!1}if(left.isNodeSet||right.isNodeSet){left.isNodeSet?(nodeset=left,primitive=right):(nodeset=right,primitive=left),nodes=nodeset.list(),type=typeof primitive;for(var i=0,l=nodes.length;i<l;i++)if(comp(NodeUtil.to(type,nodes[i]),primitive))return!0;return!1}return"="==op||"!="==op?"boolean"==typeof left||"boolean"==typeof right?comp(!!left,!!right):"number"==typeof left||"number"==typeof right?comp(+left,+right):comp(left,right):comp(+left,+right)},BinaryExpr.ops={div:[6,function(left,right,ctx){return left.number(ctx)/right.number(ctx)},"number"],mod:[6,function(left,right,ctx){return left.number(ctx)%right.number(ctx)},"number"],"*":[6,function(left,right,ctx){return left.number(ctx)*right.number(ctx)},"number"],"+":[5,function(left,right,ctx){return left.number(ctx)+right.number(ctx)},"number"],"-":[5,function(left,right,ctx){return left.number(ctx)-right.number(ctx)},"number"],"<":[4,function(left,right,ctx){return BinaryExpr.compare("<",function(a,b){return a<b},left,right,ctx)},"boolean"],">":[4,function(left,right,ctx){return BinaryExpr.compare(">",function(a,b){return a>b},left,right,ctx)},"boolean"],"<=":[4,function(left,right,ctx){return BinaryExpr.compare("<=",function(a,b){return a<=b},left,right,ctx)},"boolean"],">=":[4,function(left,right,ctx){return BinaryExpr.compare(">=",function(a,b){return a>=b},left,right,ctx)},"boolean"],"=":[3,function(left,right,ctx){return BinaryExpr.compare("=",function(a,b){return a==b},left,right,ctx)},"boolean"],"!=":[3,function(left,right,ctx){return BinaryExpr.compare("!=",function(a,b){return a!=b},left,right,ctx)},"boolean"],and:[2,function(left,right,ctx){return left.bool(ctx)&&right.bool(ctx)},"boolean"],or:[1,function(left,right,ctx){return left.bool(ctx)||right.bool(ctx)},"boolean"]},BinaryExpr.parse=function(lexer){var op,precedence,info,expr,stack=[];for(lexer.index;;){if(lexer.empty())throw Error("missing right expression");if(expr=UnaryExpr.parse(lexer),!(op=lexer.next()))break;if(info=this.ops[op],!(precedence=info&&info[0])){lexer.back();break}for(;stack.length&&precedence<=this.ops[stack[stack.length-1]][0];)expr=new BinaryExpr(stack.pop(),stack.pop(),expr);stack.push(expr,op)}for(;stack.length;)expr=new BinaryExpr(stack.pop(),stack.pop(),expr);return expr},BinaryExpr.prototype=new BaseExpr,BinaryExpr.prototype.evaluate=function(ctx){return BinaryExpr.ops[this.op][1](this.left,this.right,ctx)},BinaryExpr.prototype.show=function(indent){indent=indent||"";var t="";return t+=indent+"binary: "+this.op+"\n",indent+="    ",t+=this.left.show(indent),t+=this.right.show(indent)},!window.UnaryExpr&&window.defaultConfig&&(window.UnaryExpr=null),UnaryExpr=function(op,expr){this.op=op,this.expr=expr,this.needContextPosition=expr.needContextPosition,this.needContextNode=expr.needContextNode},UnaryExpr.ops={"-":1},UnaryExpr.parse=function(lexer){return this.ops[lexer.peek()]?new UnaryExpr(lexer.next(),UnaryExpr.parse(lexer)):UnionExpr.parse(lexer)},UnaryExpr.prototype=new BaseExpr,UnaryExpr.prototype.datatype="number",UnaryExpr.prototype.evaluate=function(ctx){return-this.expr.number(ctx)},UnaryExpr.prototype.show=function(indent){indent=indent||"";var t="";return t+=indent+"unary: "+this.op+"\n",indent+="    ",t+=this.expr.show(indent)},!window.UnionExpr&&window.defaultConfig&&(window.UnionExpr=null),UnionExpr=function(){this.paths=[]},UnionExpr.ops={"|":1},UnionExpr.parse=function(lexer){var union,expr;if(expr=PathExpr.parse(lexer),!this.ops[lexer.peek()])return expr;for(union=new UnionExpr,union.path(expr);;){if(!this.ops[lexer.next()])break;if(lexer.empty())throw Error("missing next union location path");union.path(PathExpr.parse(lexer))}return lexer.back(),union},UnionExpr.prototype=new BaseExpr,UnionExpr.prototype.datatype="nodeset",UnionExpr.prototype.evaluate=function(ctx){for(var paths=this.paths,nodeset=new NodeSet,i=0,l=paths.length;i<l;i++){var exrs=paths[i].evaluate(ctx);if(!exrs.isNodeSet)throw Error("PathExpr must be nodeset");nodeset.merge(exrs)}return nodeset},UnionExpr.prototype.path=function(path){this.paths.push(path),path.needContextPosition&&(this.needContextPosition=!0),path.needContextNode&&(this.needContextNode=!0)},UnionExpr.prototype.show=function(indent){indent=indent||"";var t="";t+=indent+"union:\n",indent+="    ";for(var i=0;i<this.paths.length;i++)t+=this.paths[i].show(indent);return t},!window.PathExpr&&window.defaultConfig&&(window.PathExpr=null),PathExpr=function(filter){this.filter=filter,this.steps=[],this.datatype=filter.datatype,this.needContextPosition=filter.needContextPosition,this.needContextNode=filter.needContextNode},PathExpr.ops={"//":1,"/":1},PathExpr.parse=function(lexer){var op,expr,path,token;if(this.ops[lexer.peek()]){if(op=lexer.next(),token=lexer.peek(),"/"==op&&(lexer.empty()||"."!=token&&".."!=token&&"@"!=token&&"*"!=token&&!/(?![0-9])[\w]/.test(token)))return FilterExpr.root();if(path=new PathExpr(FilterExpr.root()),lexer.empty())throw Error("missing next location step");expr=Step.parse(lexer),path.step(op,expr)}else if(expr=FilterExpr.parse(lexer)){if(!this.ops[lexer.peek()])return expr;path=new PathExpr(expr)}else expr=Step.parse(lexer),path=new PathExpr(FilterExpr.context()),path.step("/",expr);for(;;){if(!this.ops[lexer.peek()])break;if(op=lexer.next(),lexer.empty())throw Error("missing next location step");path.step(op,Step.parse(lexer))}return path},PathExpr.prototype=new BaseExpr,PathExpr.prototype.evaluate=function(ctx){var nodeset=this.filter.evaluate(ctx);if(!nodeset.isNodeSet)throw Exception("Filter nodeset must be nodeset type");for(var steps=this.steps,i=0,l0=steps.length;i<l0&&nodeset.length;i++){var step=steps[i][1],reverse=step.reverse,iter=nodeset.iterator(reverse),prevNodeset=nodeset;nodeset=null;var node,next;if(step.needContextPosition||"following"!=step.axis)if(step.needContextPosition||"preceding"!=step.axis){node=iter();var j=0;for(nodeset=step.evaluate(new Ctx(node),!1,prevNodeset,j);node=iter();)j++,nodeset.merge(step.evaluate(new Ctx(node),!1,prevNodeset,j))}else node=iter(),nodeset=step.evaluate(new Ctx(node));else{for(node=iter();next=iter();node=next)if(uai.applewebkit2){var contains=!1,ancestor=next;do{if(ancestor==node){contains=!0;break}}while(ancestor=ancestor.parentNode);if(!contains)break}else try{if(!node.contains(next))break}catch(e){if(!(8&next.compareDocumentPosition(node)))break}nodeset=step.evaluate(new Ctx(node))}}return nodeset},PathExpr.prototype.step=function(op,step){if(step.op=op,this.steps.push([op,step]),this.quickAttr=!1,1==this.steps.length&&"/"==op&&"attribute"==step.axis){var test=step.test;test.notOnlyElement||"*"==test.name||(this.quickAttr=!0,this.attrName=test.name)}},PathExpr.prototype.show=function(indent){indent=indent||"";var t="";if(t+=indent+"path:\n",indent+="    ",t+=indent+"filter:\n",t+=this.filter.show(indent+"    "),this.steps.length){t+=indent+"steps:\n",indent+="    ";for(var i=0;i<this.steps.length;i++){var step=this.steps[i];t+=indent+"operator: "+step[0]+"\n",t+=step[1].show(indent)}}return t},!window.FilterExpr&&window.defaultConfig&&(window.FilterExpr=null),FilterExpr=function(primary){this.primary=primary,this.predicates=[],this.datatype=primary.datatype,this.needContextPosition=primary.needContextPosition,this.needContextNode=primary.needContextNode},FilterExpr.parse=function(lexer){var expr,filter,token,ch;switch(token=lexer.peek(),ch=token.charAt(0)){case"$":expr=VariableReference.parse(lexer);break;case"(":if(lexer.next(),expr=BinaryExpr.parse(lexer),lexer.empty())throw Error('unclosed "("');if(")"!=lexer.next())throw lexer.back(),Error("bad token: "+lexer.next());break;case'"':case"'":expr=Literal.parse(lexer);break;default:if(isNaN(+token)){if(NodeType.types[token])return null;if(!/(?![0-9])[\w]/.test(ch)||"("!=lexer.peek(1))return null;expr=FunctionCall.parse(lexer)}else expr=Number.parse(lexer)}return"["!=lexer.peek()?expr:(filter=new FilterExpr(expr),BaseExprHasPredicates.parsePredicates(lexer,filter),filter)},FilterExpr.root=function(){return new FunctionCall("root-node")},FilterExpr.context=function(){return new FunctionCall("context-node")},FilterExpr.prototype=new BaseExprHasPredicates,FilterExpr.prototype.evaluate=function(ctx){var nodeset=this.primary.evaluate(ctx);if(!nodeset.isNodeSet){if(this.predicates.length)throw Error("Primary result must be nodeset type if filter have predicate expression");return nodeset}return this.evaluatePredicates(nodeset)},FilterExpr.prototype.predicate=function(predicate){this.predicates.push(predicate)},FilterExpr.prototype.show=function(indent){indent=indent||"";var t="";if(t+=indent+"filter: \n",indent+="    ",t+=this.primary.show(indent),this.predicates.length){t+=indent+"predicates: \n",indent+="    ";for(var i=0;i<this.predicates.length;i++)t+=this.predicates[i].show(indent)}return t},!window.NodeUtil&&window.defaultConfig&&(window.NodeUtil=null),NodeUtil={to:function(valueType,node){var t,type=node.nodeType;if(1==type&&config.useInnerText&&!uai.applewebkit2&&(t=node.textContent,t=t==undefined||null==t?node.innerText:t,t=t==undefined||null==t?"":t),"string"!=typeof t)if(9==type||1==type)for(node=9==type?node.documentElement:node.firstChild,t="",stack=[],i=0;node;){do{1!=node.nodeType&&(t+=node.nodeValue),stack[i++]=node}while(node=node.firstChild);for(;i&&!(node=stack[--i].nextSibling););}else t=node.nodeValue;switch(valueType){case"number":return+t;case"boolean":return!!t;default:return t}},attrPropMap:{name:"name",class:"className",dir:"dir",id:"id",name:"name",title:"title"},attrMatch:function(node,attrName,attrValue){return!!(!attrName||null==attrValue&&node.hasAttribute&&node.hasAttribute(attrName)||null!=attrValue&&node.getAttribute&&node.getAttribute(attrName)==attrValue)},getDescendantNodes:function(test,node,nodeset,attrName,attrValue,prevNodeset,prevIndex){if(prevNodeset&&prevNodeset.delDescendant(node,prevIndex),attrValue&&"id"==attrName&&node.getElementById)(node=node.getElementById(attrValue))&&test.match(node)&&nodeset.push(node);else if(attrValue&&"name"==attrName&&node.getElementsByName)for(var nodes=node.getElementsByName(attrValue),i=0,l=nodes.length;i<l;i++)node=nodes[i],(uai.opera?node.name==attrValue&&test.match(node):test.match(node))&&nodeset.push(node);else if(attrValue&&"class"==attrName&&node.getElementsByClassName)for(var nodes=node.getElementsByClassName(attrValue),i=0,l=nodes.length;i<l;i++)node=nodes[i],node.className==attrValue&&test.match(node)&&nodeset.push(node);else if(test.notOnlyElement)!function(parent){for(var f=arguments.callee,node=parent.firstChild;node;node=node.nextSibling)NodeUtil.attrMatch(node,attrName,attrValue)&&test.match(node.nodeType)&&nodeset.push(node),f(node)}(node);else{var name=test.name;if(node.getElementsByTagName){var nodes=node.getElementsByTagName(name);if(nodes)for(var i=0;node=nodes[i++];)NodeUtil.attrMatch(node,attrName,attrValue)&&nodeset.push(node)}}return nodeset},getChildNodes:function(test,node,nodeset,attrName,attrValue){for(var node=node.firstChild;node;node=node.nextSibling)NodeUtil.attrMatch(node,attrName,attrValue)&&test.match(node)&&nodeset.push(node);return nodeset}},!window.Step&&window.defaultConfig&&(window.Step=null),Step=function(axis,test){this.axis=axis,this.reverse=Step.axises[axis][0],this.func=Step.axises[axis][1],this.test=test,this.predicates=[],this._quickAttr=Step.axises[axis][2]},Step.axises={ancestor:[!0,function(test,node,nodeset,_,__,prevNodeset,prevIndex){for(;node=node.parentNode;)prevNodeset&&1==node.nodeType&&prevNodeset.reserveDelByNode(node,prevIndex,!0),test.match(node)&&nodeset.unshift(node);return nodeset}],"ancestor-or-self":[!0,function(test,node,nodeset,_,__,prevNodeset,prevIndex){do{prevNodeset&&1==node.nodeType&&prevNodeset.reserveDelByNode(node,prevIndex,!0),test.match(node)&&nodeset.unshift(node)
}while(node=node.parentNode);return nodeset}],attribute:[!1,function(test,node,nodeset){var attrs=node.attributes;if(attrs)if(test.notOnlyElement&&0==test.type||"*"==test.name)for(var attr,i=0;attr=attrs[i];i++)nodeset.push(attr);else{var attr=attrs.getNamedItem(test.name);attr&&nodeset.push(attr)}return nodeset}],child:[!1,NodeUtil.getChildNodes,!0],descendant:[!1,NodeUtil.getDescendantNodes,!0],"descendant-or-self":[!1,function(test,node,nodeset,attrName,attrValue,prevNodeset,prevIndex){return NodeUtil.attrMatch(node,attrName,attrValue)&&test.match(node)&&nodeset.push(node),NodeUtil.getDescendantNodes(test,node,nodeset,attrName,attrValue,prevNodeset,prevIndex)},!0],following:[!1,function(test,node,nodeset,attrName,attrValue){do{for(var child=node;child=child.nextSibling;)NodeUtil.attrMatch(child,attrName,attrValue)&&test.match(child)&&nodeset.push(child),nodeset=NodeUtil.getDescendantNodes(test,child,nodeset,attrName,attrValue)}while(node=node.parentNode);return nodeset},!0],"following-sibling":[!1,function(test,node,nodeset,_,__,prevNodeset,prevIndex){for(;node=node.nextSibling;)prevNodeset&&1==node.nodeType&&prevNodeset.reserveDelByNode(node,prevIndex),test.match(node)&&nodeset.push(node);return nodeset}],namespace:[!1,function(test,node,nodeset){return nodeset}],parent:[!1,function(test,node,nodeset){if(9==node.nodeType)return nodeset;if(2==node.nodeType)return nodeset.push(node.ownerElement),nodeset;var node=node.parentNode;return test.match(node)&&nodeset.push(node),nodeset}],preceding:[!0,function(test,node,nodeset,attrName,attrValue){var parents=[];do{parents.unshift(node)}while(node=node.parentNode);for(var i=1,l0=parents.length;i<l0;i++){var siblings=[];for(node=parents[i];node=node.previousSibling;)siblings.unshift(node);for(var j=0,l1=siblings.length;j<l1;j++)node=siblings[j],NodeUtil.attrMatch(node,attrName,attrValue)&&test.match(node)&&nodeset.push(node),nodeset=NodeUtil.getDescendantNodes(test,node,nodeset,attrName,attrValue)}return nodeset},!0],"preceding-sibling":[!0,function(test,node,nodeset,_,__,prevNodeset,prevIndex){for(;node=node.previousSibling;)prevNodeset&&1==node.nodeType&&prevNodeset.reserveDelByNode(node,prevIndex,!0),test.match(node)&&nodeset.unshift(node);return nodeset}],self:[!1,function(test,node,nodeset){return test.match(node)&&nodeset.push(node),nodeset}]},Step.parse=function(lexer){var axis,test,step,token;if("."==lexer.peek())step=this.self(),lexer.next();else if(".."==lexer.peek())step=this.parent(),lexer.next();else{if("@"==lexer.peek()){if(axis="attribute",lexer.next(),lexer.empty())throw Error("missing attribute name")}else if("::"==lexer.peek(1)){if(!/(?![0-9])[\w]/.test(lexer.peek().charAt(0)))throw Error("bad token: "+lexer.next());if(axis=lexer.next(),lexer.next(),!this.axises[axis])throw Error("invalid axis: "+axis);if(lexer.empty())throw Error("missing node name")}else axis="child";if(token=lexer.peek(),/(?![0-9])[\w]/.test(token.charAt(0)))if("("==lexer.peek(1)){if(!NodeType.types[token])throw Error("invalid node type: "+token);test=NodeType.parse(lexer)}else test=NameTest.parse(lexer);else{if("*"!=token)throw Error("bad token: "+lexer.next());test=NameTest.parse(lexer)}step=new Step(axis,test)}return BaseExprHasPredicates.parsePredicates(lexer,step),step},Step.self=function(){return new Step("self",new NodeType("node"))},Step.parent=function(){return new Step("parent",new NodeType("node"))},Step.prototype=new BaseExprHasPredicates,Step.prototype.evaluate=function(ctx,special,prevNodeset,prevIndex){var node=ctx.node;if(special||"//"!=this.op){if(this.needContextPosition&&(prevNodeset=null,prevIndex=null),this.quickAttr){var attrValue=this.attrValueExpr?this.attrValueExpr.string(ctx):null,nodeset=this.func(this.test,node,new NodeSet,this.attrName,attrValue,prevNodeset,prevIndex);nodeset=this.evaluatePredicates(nodeset,1)}else{var nodeset=this.func(this.test,node,new NodeSet,null,null,prevNodeset,prevIndex);nodeset=this.evaluatePredicates(nodeset)}prevNodeset&&prevNodeset.doDel()}else if(this.needContextPosition||"child"!=this.axis){var step=new Step("descendant-or-self",new NodeType("node")),nodes=step.evaluate(ctx,!1,prevNodeset,prevIndex).list(),nodeset=null;step.op="/";for(var i=0,l=nodes.length;i<l;i++)nodeset?nodeset.merge(this.evaluate(new Ctx(nodes[i]),!0)):nodeset=this.evaluate(new Ctx(nodes[i]),!0);nodeset=nodeset||new NodeSet}else if(this.quickAttr){var attrValue=this.attrValueExpr?this.attrValueExpr.string(ctx):null,nodeset=NodeUtil.getDescendantNodes(this.test,node,new NodeSet,this.attrName,attrValue,prevNodeset,prevIndex);nodeset=this.evaluatePredicates(nodeset,1)}else{var nodeset=NodeUtil.getDescendantNodes(this.test,node,new NodeSet,null,null,prevNodeset,prevIndex);nodeset=this.evaluatePredicates(nodeset)}return nodeset},Step.prototype.predicate=function(predicate){if(this.predicates.push(predicate),(predicate.needContextPosition||"number"==predicate.datatype||"void"==predicate.datatype)&&(this.needContextPosition=!0),this._quickAttr&&1==this.predicates.length&&predicate.quickAttr){var attrName=predicate.attrName;this.attrName=attrName,this.attrValueExpr=predicate.attrValueExpr,this.quickAttr=!0}},Step.prototype.show=function(indent){indent=indent||"";var t="";if(t+=indent+"step: \n",indent+="    ",this.axis&&(t+=indent+"axis: "+this.axis+"\n"),t+=this.test.show(indent),this.predicates.length){t+=indent+"predicates: \n",indent+="    ";for(var i=0;i<this.predicates.length;i++)t+=this.predicates[i].show(indent)}return t},!window.NodeType&&window.defaultConfig&&(window.NodeType=null),NodeType=function(name,literal){switch(this.name=name,this.literal=literal,name){case"comment":this.type=8;break;case"text":this.type=3;break;case"processing-instruction":this.type=7;break;case"node":this.type=0}},NodeType.types={comment:1,text:1,"processing-instruction":1,node:1},NodeType.parse=function(lexer){var type,literal,ch;if(type=lexer.next(),lexer.next(),lexer.empty())throw Error("bad nodetype");if(ch=lexer.peek().charAt(0),'"'!=ch&&"'"!=ch||(literal=Literal.parse(lexer)),lexer.empty())throw Error("bad nodetype");if(")"!=lexer.next())throw lexer.back(),Error("bad token "+lexer.next());return new NodeType(type,literal)},NodeType.prototype=new BaseExpr,NodeType.prototype.notOnlyElement=!0,NodeType.prototype.match=function(node){return!this.type||this.type==node.nodeType},NodeType.prototype.show=function(indent){indent=indent||"";var t="";return t+=indent+"nodetype: "+this.type+"\n",this.literal&&(indent+="    ",t+=this.literal.show(indent)),t},!window.NameTest&&window.defaultConfig&&(window.NameTest=null),NameTest=function(name){this.name=name.toLowerCase()},NameTest.parse=function(lexer){return new NameTest("*"!=lexer.peek()&&":"==lexer.peek(1)&&"*"==lexer.peek(2)?lexer.next()+lexer.next()+lexer.next():lexer.next())},NameTest.prototype=new BaseExpr,NameTest.prototype.match=function(node){var type=node.nodeType;return!(1!=type&&2!=type||"*"!=this.name&&this.name!=node.nodeName.toLowerCase())},NameTest.prototype.show=function(indent){indent=indent||"";var t="";return t+=indent+"nametest: "+this.name+"\n"},!window.VariableReference&&window.defaultConfig&&(window.VariableReference=null),VariableReference=function(name){this.name=name.substring(1)},VariableReference.parse=function(lexer){var token=lexer.next();if(token.length<2)throw Error("unnamed variable reference");return new VariableReference(token)},VariableReference.prototype=new BaseExpr,VariableReference.prototype.datatype="void",VariableReference.prototype.show=function(indent){indent=indent||"";var t="";return t+=indent+"variable: "+this.name+"\n"},!window.Literal&&window.defaultConfig&&(window.Literal=null),Literal=function(text){this.text=text.substring(1,text.length-1)},Literal.parse=function(lexer){var token=lexer.next();if(token.length<2)throw Error("unclosed literal string");return new Literal(token)},Literal.prototype=new BaseExpr,Literal.prototype.datatype="string",Literal.prototype.evaluate=function(ctx){return this.text},Literal.prototype.show=function(indent){indent=indent||"";var t="";return t+=indent+"literal: "+this.text+"\n"},!window.Number&&window.defaultConfig&&(window.Number=null),Number=function(digit){this.digit=+digit},Number.parse=function(lexer){return new Number(lexer.next())},Number.prototype=new BaseExpr,Number.prototype.datatype="number",Number.prototype.evaluate=function(ctx){return this.digit},Number.prototype.show=function(indent){indent=indent||"";var t="";return t+=indent+"number: "+this.digit+"\n"},!window.FunctionCall&&window.defaultConfig&&(window.FunctionCall=null),FunctionCall=function(name){var info=FunctionCall.funcs[name];if(!info)throw Error(name+" is not a function");this.name=name,this.func=info[0],this.args=[],this.datatype=info[1],info[2]&&(this.needContextPosition=!0),this.needContextNodeInfo=info[3],this.needContextNode=this.needContextNodeInfo[0]},FunctionCall.funcs={"context-node":[function(){if(0!=arguments.length)throw Error("Function context-node expects ()");var ns;return ns=new NodeSet,ns.push(this.node),ns},"nodeset",!1,[!0]],"root-node":[function(){if(0!=arguments.length)throw Error("Function root-node expects ()");var ns,ctxn;return ns=new NodeSet,ctxn=this.node,9==ctxn.nodeType?ns.push(ctxn):ns.push(ctxn.ownerDocument),ns},"nodeset",!1,[]],last:[function(){if(0!=arguments.length)throw Error("Function last expects ()");return this.last},"number",!0,[]],position:[function(){if(0!=arguments.length)throw Error("Function position expects ()");return this.position},"number",!0,[]],count:[function(ns){if(1!=arguments.length||!(ns=ns.evaluate(this)).isNodeSet)throw Error("Function count expects (nodeset)");return ns.length},"number",!1,[]],id:[function(s){var ids,ns,i,id,elm,ctxn,doc;if(1!=arguments.length)throw Error("Function id expects (object)");for(ctxn=this.node,doc=9==ctxn.nodeType?ctxn:ctxn.ownerDocument,s=s.string(this),ids=s.split(/\s+/),ns=new NodeSet,i=0,l=ids.length;i<l;i++)if(id=ids[i],elm=doc.getElementById(id),uai.opera&&elm&&elm.id!=id)for(var elms=doc.getElementsByName(id),j=0,l0=elms.length;j<l0;j++)elm=elms[j],elm.id==id&&ns.push(elm);else elm&&ns.push(elm);return ns.isSorted=!1,ns},"nodeset",!1,[]],"local-name":[function(ns){var nd;switch(arguments.length){case 0:nd=this.node;break;case 1:if((ns=ns.evaluate(this)).isNodeSet){nd=ns.first();break}default:throw Error("Function local-name expects (nodeset?)")}return""+nd.nodeName.toLowerCase()},"string",!1,[!0,!1]],name:[function(ns){return FunctionCall.funcs["local-name"][0].apply(this,arguments)},"string",!1,[!0,!1]],"namespace-uri":[function(ns){return""},"string",!1,[!0,!1]],string:[function(s){switch(arguments.length){case 0:s=NodeUtil.to("string",this.node);break;case 1:s=s.string(this);break;default:throw Error("Function string expects (object?)")}return s},"string",!1,[!0,!1]],concat:[function(s1,s2){if(arguments.length<2)throw Error("Function concat expects (string, string[, ...])");for(var t="",i=0,l=arguments.length;i<l;i++)t+=arguments[i].string(this);return t},"string",!1,[]],"starts-with":[function(s1,s2){if(2!=arguments.length)throw Error("Function starts-with expects (string, string)");return s1=s1.string(this),s2=s2.string(this),0==s1.indexOf(s2)},"boolean",!1,[]],contains:[function(s1,s2){if(2!=arguments.length)throw Error("Function contains expects (string, string)");return s1=s1.string(this),s2=s2.string(this),-1!=s1.indexOf(s2)},"boolean",!1,[]],substring:[function(s,n1,n2){var a1,a2;switch(s=s.string(this),n1=n1.number(this),arguments.length){case 2:n2=s.length-n1+1;break;case 3:n2=n2.number(this);break;default:throw Error("Function substring expects (string, string)")}return n1=Math.round(n1),n2=Math.round(n2),a1=n1-1,a2=n1+n2-1,a2==1/0?s.substring(a1<0?0:a1):s.substring(a1<0?0:a1,a2)},"string",!1,[]],"substring-before":[function(s1,s2){var n;if(2!=arguments.length)throw Error("Function substring-before expects (string, string)");return s1=s1.string(this),s2=s2.string(this),n=s1.indexOf(s2),-1==n?"":s1.substring(0,n)},"string",!1,[]],"substring-after":[function(s1,s2){if(2!=arguments.length)throw Error("Function substring-after expects (string, string)");s1=s1.string(this),s2=s2.string(this);var n=s1.indexOf(s2);return-1==n?"":s1.substring(n+s2.length)},"string",!1,[]],"string-length":[function(s){switch(arguments.length){case 0:s=NodeUtil.to("string",this.node);break;case 1:s=s.string(this);break;default:throw Error("Function string-length expects (string?)")}return s.length},"number",!1,[!0,!1]],"normalize-space":[function(s){switch(arguments.length){case 0:s=NodeUtil.to("string",this.node);break;case 1:s=s.string(this);break;default:throw Error("Function normalize-space expects (string?)")}return s.replace(/\s+/g," ").replace(/^ /,"").replace(/ $/,"")},"string",!1,[!0,!1]],translate:[function(s1,s2,s3){if(3!=arguments.length)throw Error("Function translate expects (string, string, string)");s1=s1.string(this),s2=s2.string(this),s3=s3.string(this);for(var map=[],i=0,l=s2.length;i<l;i++){var ch=s2.charAt(i);map[ch]||(map[ch]=s3.charAt(i)||"")}for(var t="",i=0,l=s1.length;i<l;i++){var ch=s1.charAt(i),replace=map[ch];t+=replace!=undefined?replace:ch}return t},"string",!1,[]],boolean:[function(b){if(1!=arguments.length)throw Error("Function boolean expects (object)");return b.bool(this)},"boolean",!1,[]],not:[function(b){if(1!=arguments.length)throw Error("Function not expects (object)");return!b.bool(this)},"boolean",!1,[]],true:[function(){if(0!=arguments.length)throw Error("Function true expects ()");return!0},"boolean",!1,[]],false:[function(){if(0!=arguments.length)throw Error("Function false expects ()");return!1},"boolean",!1,[]],lang:[function(s){return!1},"boolean",!1,[]],number:[function(n){switch(arguments.length){case 0:n=NodeUtil.to("number",this.node);break;case 1:n=n.number(this);break;default:throw Error("Function number expects (object?)")}return n},"number",!1,[!0,!1]],sum:[function(ns){var nodes,n,i,l;if(1!=arguments.length||!(ns=ns.evaluate(this)).isNodeSet)throw Error("Function sum expects (nodeset)");for(nodes=ns.list(),n=0,i=0,l=nodes.length;i<l;i++)n+=NodeUtil.to("number",nodes[i]);return n},"number",!1,[]],floor:[function(n){if(1!=arguments.length)throw Error("Function floor expects (number)");return n=n.number(this),Math.floor(n)},"number",!1,[]],ceiling:[function(n){if(1!=arguments.length)throw Error("Function ceiling expects (number)");return n=n.number(this),Math.ceil(n)},"number",!1,[]],round:[function(n){if(1!=arguments.length)throw Error("Function round expects (number)");return n=n.number(this),Math.round(n)},"number",!1,[]]},FunctionCall.parse=function(lexer){var expr,func=new FunctionCall(lexer.next());for(lexer.next();")"!=lexer.peek();){if(lexer.empty())throw Error("missing function argument list");if(expr=BinaryExpr.parse(lexer),func.arg(expr),","!=lexer.peek())break;lexer.next()}if(lexer.empty())throw Error("unclosed function argument list");if(")"!=lexer.next())throw lexer.back(),Error("bad token: "+lexer.next());return func},FunctionCall.prototype=new BaseExpr,FunctionCall.prototype.evaluate=function(ctx){return this.func.apply(ctx,this.args)},FunctionCall.prototype.arg=function(arg){this.args.push(arg),arg.needContextPosition&&(this.needContextPosition=!0);var args=this.args;arg.needContextNode&&(args.needContexNode=!0),this.needContextNode=args.needContextNode||this.needContextNodeInfo[args.length]},FunctionCall.prototype.show=function(indent){indent=indent||"";var t="";if(t+=indent+"function: "+this.name+"\n",indent+="    ",this.args.length){t+=indent+"arguments: \n",indent+="    ";for(var i=0;i<this.args.length;i++)t+=this.args[i].show(indent)}return t};var NodeID={uuid:1,get:function(node){return node.__jsxpath_id__||(node.__jsxpath_id__=this.uuid++)}};!window.NodeSet&&window.defaultConfig&&(window.NodeSet=null),NodeSet=function(){this.length=0,this.nodes=[],this.seen={},this.idIndexMap=null,this.reserveDels=[]},NodeSet.prototype.isNodeSet=!0,NodeSet.prototype.isSorted=!0,NodeSet.prototype.merge=function(nodeset){if(this.isSorted=!1,nodeset.only)return this.push(nodeset.only);if(this.only){var only=this.only;delete this.only,this.push(only),this.length--}for(var nodes=nodeset.nodes,i=0,l=nodes.length;i<l;i++)this._add(nodes[i])},NodeSet.prototype.sort=function(){if(!this.only&&!this.sortOff&&!this.isSorted){this.isSorted=!0,this.idIndexMap=null;this.nodes.sort(function(a,b){if(a==b)return 0;if(a.compareDocumentPosition){var result=a.compareDocumentPosition(b);return 2&result?1:4&result?-1:0}for(var node1=a,node2=b,ancestor1=a,ancestor2=b,deep1=0,deep2=0;ancestor1=ancestor1.parentNode;)deep1++;for(;ancestor2=ancestor2.parentNode;)deep2++;if(deep1>deep2){for(;deep1--!=deep2;)node1=node1.parentNode;if(node1==node2)return 1}else if(deep2>deep1){for(;deep2--!=deep1;)node2=node2.parentNode;if(node1==node2)return-1}for(;(ancestor1=node1.parentNode)!=(ancestor2=node2.parentNode);)node1=ancestor1,node2=ancestor2;for(;node1=node1.nextSibling;)if(node1==node2)return-1;return 1})}},NodeSet.prototype.reserveDelByNodeID=function(id,offset,reverse){var index,map=this.createIdIndexMap();if((index=map[id])&&(reverse&&this.length-offset-1>index||!reverse&&offset<index)){var obj={value:index,order:String.fromCharCode(index),toString:function(){return this.order},valueOf:function(){return this.value}};this.reserveDels.push(obj)}},NodeSet.prototype.reserveDelByNode=function(node,offset,reverse){this.reserveDelByNodeID(NodeID.get(node),offset,reverse)},NodeSet.prototype.doDel=function(){if(this.reserveDels.length){if(this.length<65536)var dels=this.reserveDels.sort(function(a,b){return b-a});else var dels=this.reserveDels.sort(function(a,b){return b-a});for(var i=0,l=dels.length;i<l;i++)this.del(dels[i]);this.reserveDels=[],this.idIndexMap=null}},NodeSet.prototype.createIdIndexMap=function(){if(this.idIndexMap)return this.idIndexMap;for(var map=this.idIndexMap={},nodes=this.nodes,i=0,l=nodes.length;i<l;i++){var node=nodes[i];map[NodeID.get(node)]=i}return map},NodeSet.prototype.del=function(index){if(this.length--,this.only)delete this.only;else{var node=this.nodes.splice(index,1)[0];this._first==node&&(delete this._first,delete this._firstSourceIndex,delete this._firstSubIndex),delete this.seen[NodeID.get(node)]}},NodeSet.prototype.delDescendant=function(elm,offset){if(!this.only){var nodeType=elm.nodeType;if((1==nodeType||9==nodeType)&&!uai.applewebkit2){if(!elm.contains)if(1==nodeType){var _elm=elm;elm={contains:function(node){return 8&node.compareDocumentPosition(_elm)}}}else elm={contains:function(){return!0}};for(var nodes=this.nodes,i=offset+1;i<nodes.length;i++)elm.contains(nodes[i])&&(this.del(i),i--)}}},NodeSet.prototype._add=function(node,reverse){var seen=this.seen,id=NodeID.get(node);if(seen[id])return!0;seen[id]=!0,this.length++,reverse?this.nodes.unshift(node):this.nodes.push(node)},NodeSet.prototype.unshift=function(node){if(!this.length)return this.length++,void(this.only=node);if(this.only){var only=this.only;delete this.only,this.unshift(only),this.length--}return this._add(node,!0)},NodeSet.prototype.push=function(node){if(!this.length)return this.length++,void(this.only=node);if(this.only){var only=this.only;delete this.only,this.push(only),this.length--}return this._add(node)},NodeSet.prototype.first=function(){return this.only?this.only:(this.nodes.length>1&&this.sort(),this.nodes[0])},NodeSet.prototype.list=function(){return this.only?[this.only]:(this.sort(),this.nodes)},NodeSet.prototype.string=function(){var node=this.only||this.first();return node?NodeUtil.to("string",node):""},NodeSet.prototype.bool=function(){return!(!this.length&&!this.only)},NodeSet.prototype.number=function(){return+this.string()},NodeSet.prototype.iterator=function(reverse){this.sort();var nodeset=this;if(reverse){var count=0;return function(){var index=nodeset.length-count++-1;return nodeset.only&&0==index?nodeset.only:nodeset.nodes[index]}}var count=0;return function(){return nodeset.only&&0==count++?nodeset.only:nodeset.nodes[count++]}};var win,install=function(win){win=win||this;var doc=win.document;win.undefined;win.XPathExpression=function(expr){if(!expr.length)throw win.Error("no expression");var lexer=this.lexer=Lexer(expr);if(lexer.empty())throw win.Error("no expression");if(this.expr=BinaryExpr.parse(lexer),!lexer.empty())throw win.Error("bad token: "+lexer.next())},win.XPathExpression.prototype.evaluate=function(node,type){return new win.XPathResult(this.expr.evaluate(new Ctx(node)),type)},win.XPathResult=function(value,type){if(0==type)switch(typeof value){case"object":type++;case"boolean":type++;case"string":type++;case"number":type++}switch(this.resultType=type,type){case 1:return void(this.numberValue=value.isNodeSet?value.number():+value);case 2:return void(this.stringValue=value.isNodeSet?value.string():""+value);case 3:return void(this.booleanValue=value.isNodeSet?value.bool():!!value);case 4:case 5:case 6:case 7:this.nodes=value.list(),this.snapshotLength=value.length,this.index=0,this.invalidIteratorState=!1;break;case 8:case 9:return void(this.singleNodeValue=value.first())}},win.XPathResult.prototype.iterateNext=function(){return this.nodes[this.index++]},win.XPathResult.prototype.snapshotItem=function(i){return this.nodes[i]},win.XPathResult.ANY_TYPE=0,win.XPathResult.NUMBER_TYPE=1,win.XPathResult.STRING_TYPE=2,win.XPathResult.BOOLEAN_TYPE=3,win.XPathResult.UNORDERED_NODE_ITERATOR_TYPE=4,win.XPathResult.ORDERED_NODE_ITERATOR_TYPE=5,win.XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE=6,win.XPathResult.ORDERED_NODE_SNAPSHOT_TYPE=7,win.XPathResult.ANY_UNORDERED_NODE_TYPE=8,win.XPathResult.FIRST_ORDERED_NODE_TYPE=9,doc.createExpression=function(expr){return new win.XPathExpression(expr,null)},doc.evaluate=function(expr,context,_,type){return doc.createExpression(expr,null).evaluate(context,type||win.XPathResult.ANY_TYPE)}};if(config.targetFrame){var frame=document.getElementById(config.targetFrame);frame&&(win=frame.contentWindow)}config.exportInstaller&&(window.install=install),config.hasNative&&config.useNative||install(win||window)}}),"undefined"!=typeof _qtp_inject_css&&1!=_qtp_inject_css||(qtpProps.SizzleInjector=function(){!function(){function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var sibDir="previousSibling"==dir&&!isXML,i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){sibDir&&1===elem.nodeType&&(elem.sizcache=doneName,elem.sizset=i),elem=elem[dir];for(var match=!1;elem;){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(1!==elem.nodeType||isXML||(elem.sizcache=doneName,elem.sizset=i),elem.nodeName===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var sibDir="previousSibling"==dir&&!isXML,i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){sibDir&&1===elem.nodeType&&(elem.sizcache=doneName,elem.sizset=i),elem=elem[dir];for(var match=!1;elem;){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(1===elem.nodeType)if(isXML||(elem.sizcache=doneName,elem.sizset=i),"string"!=typeof cur){if(elem===cur){match=!0;break}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,done=0,toString=Object.prototype.toString,hasDuplicate=!1,Sizzle=function(selector,context,results,seed){results=results||[];var origContext=context=context||document;if(1!==context.nodeType&&9!==context.nodeType)return[];if(!selector||"string"!=typeof selector)return results;var m,set,checkSet,extra,parts=[],prune=!0,contextXML=isXML(context);for(chunker.lastIndex=0;null!==(m=chunker.exec(selector));)if(parts.push(m[1]),m[2]){extra=RegExp.rightContext;break}if(parts.length>1&&origPOS.exec(selector))if(2===parts.length&&Expr.relative[parts[0]])set=posProcess(parts[0]+parts[1],context);else for(set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);parts.length;)selector=parts.shift(),Expr.relative[selector]&&(selector+=parts.shift()),set=posProcess(selector,set);else{if(!seed&&parts.length>1&&9===context.nodeType&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){var ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]}if(context){var ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),1!==parts.length||"~"!==parts[0]&&"+"!==parts[0]||!context.parentNode?context:context.parentNode,contextXML);for(set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set,parts.length>0?checkSet=makeArray(set):prune=!1;parts.length;){var cur=parts.pop(),pop=cur;Expr.relative[cur]?pop=parts.pop():cur="",null==pop&&(pop=context),Expr.relative[cur](checkSet,pop,contextXML)}}else checkSet=parts=[]}if(checkSet||(checkSet=set),!checkSet)throw"Syntax error, unrecognized expression: "+(cur||selector);if("[object Array]"===toString.call(checkSet))if(prune)if(context&&1===context.nodeType)for(var i=0;null!=checkSet[i];i++)checkSet[i]&&(!0===checkSet[i]||1===checkSet[i].nodeType&&contains(context,checkSet[i]))&&results.push(set[i]);else for(var i=0;null!=checkSet[i];i++)checkSet[i]&&1===checkSet[i].nodeType&&results.push(set[i]);else results.push.apply(results,checkSet);else makeArray(checkSet,results);return extra&&(Sizzle(extra,origContext,results,seed),Sizzle.uniqueSort(results)),results};Sizzle.uniqueSort=function(results){if(sortOrder&&(hasDuplicate=!1,results.sort(sortOrder),hasDuplicate))for(var i=1;i<results.length;i++)results[i]===results[i-1]&&results.splice(i--,1)},Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)},Sizzle.find=function(expr,context,isXML){var set,match;if(!expr)return[];for(var i=0,l=Expr.order.length;i<l;i++){var match,type=Expr.order[i];if(match=Expr.match[type].exec(expr)){var left=RegExp.leftContext;if("\\"!==left.substr(left.length-1)&&(match[1]=(match[1]||"").replace(/\\/g,""),null!=(set=Expr.find[type](match,context,isXML)))){expr=expr.replace(Expr.match[type],"");break}}}return set||(set=context.getElementsByTagName("*")),{set:set,expr:expr}},Sizzle.filter=function(expr,set,inplace,not){for(var match,anyFound,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&isXML(set[0]);expr&&set.length;){for(var type in Expr.filter)if(null!=(match=Expr.match[type].exec(expr))){var found,item,filter=Expr.filter[type];if(anyFound=!1,curLoop==result&&(result=[]),Expr.preFilter[type])if(match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter)){if(!0===match)continue}else anyFound=found=!0;if(match)for(var i=0;null!=(item=curLoop[i]);i++)if(item){found=filter(item,match,i,curLoop);var pass=not^!!found;inplace&&null!=found?pass?anyFound=!0:curLoop[i]=!1:pass&&(result.push(item),anyFound=!0)}if(void 0!==found){if(inplace||(curLoop=result),expr=expr.replace(Expr.match[type],""),!anyFound)return[];break}}if(expr==old){if(null==anyFound)throw"Syntax error, unrecognized expression: "+expr;break}old=expr}return curLoop};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},attrMap:{class:"className",for:"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")}},relative:{"+":function(checkSet,part,isXML){var isPartStr="string"==typeof part,isTag=isPartStr&&!/\W/.test(part),isPartStrNotTag=isPartStr&&!isTag;isTag&&!isXML&&(part=part.toUpperCase());for(var elem,i=0,l=checkSet.length;i<l;i++)if(elem=checkSet[i]){for(;(elem=elem.previousSibling)&&1!==elem.nodeType;);checkSet[i]=isPartStrNotTag||elem&&elem.nodeName===part?elem||!1:elem===part}isPartStrNotTag&&Sizzle.filter(part,checkSet,!0)},">":function(checkSet,part,isXML){var isPartStr="string"==typeof part;if(isPartStr&&!/\W/.test(part)){part=isXML?part:part.toUpperCase();for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName===part&&parent}}}else{for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];elem&&(checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part)}isPartStr&&Sizzle.filter(part,checkSet,!0)}},"":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck;if(!part.match(/\W/)){var nodeCheck=part=isXML?part:part.toUpperCase();checkFn=dirNodeCheck}checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck;if("string"==typeof part&&!part.match(/\W/)){var nodeCheck=part=isXML?part:part.toUpperCase();checkFn=dirNodeCheck}checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if(void 0!==context.getElementById&&!isXML){var m=context.getElementById(match[1]);return m?[m]:[]}},NAME:function(match,context,isXML){if(void 0!==context.getElementsByName){for(var ret=[],results=context.getElementsByName(match[1]),i=0,l=results.length;i<l;i++)results[i].getAttribute("name")===match[1]&&ret.push(results[i]);return 0===ret.length?null:ret}},TAG:function(match,context){return context.getElementsByTagName(match[1])}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){if(match=" "+match[1].replace(/\\/g,"")+" ",isXML)return match;for(var elem,i=0;null!=(elem=curLoop[i]);i++)elem&&(not^(elem.className&&(" "+elem.className+" ").indexOf(match)>=0)?inplace||result.push(elem):inplace&&(curLoop[i]=!1));return!1},ID:function(match){return match[1].replace(/\\/g,"")},TAG:function(match,curLoop){for(var i=0;!1===curLoop[i];i++);return curLoop[i]&&isXML(curLoop[i])?match[1]:match[1].toUpperCase()},CHILD:function(match){if("nth"==match[1]){var test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"==match[2]&&"2n"||"odd"==match[2]&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=test[1]+(test[2]||1)-0,match[3]=test[3]-0}return match[0]=done++,match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1].replace(/\\/g,"");return!isXML&&Expr.attrMap[name]&&(match[1]=Expr.attrMap[name]),"~="===match[2]&&(match[4]=" "+match[4]+" "),match},PSEUDO:function(match,curLoop,inplace,result,not){if("not"===match[1]){if(!(match[3].match(chunker).length>1||/^\w/.test(match[3]))){var ret=Sizzle.filter(match[3],curLoop,inplace,!0^not);return inplace||result.push.apply(result,ret),!1}match[3]=Sizzle(match[3],null,null,curLoop)}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0]))return!0;return match},POS:function(match){return match.unshift(!0),match}},filters:{enabled:function(elem){return!1===elem.disabled&&"hidden"!==elem.type},disabled:function(elem){return!0===elem.disabled},checked:function(elem){return!0===elem.checked},selected:function(elem){return elem.parentNode.selectedIndex,!0===elem.selected},parent:function(elem){return!!elem.firstChild},empty:function(elem){return!elem.firstChild},has:function(elem,i,match){return!!Sizzle(match[3],elem).length},header:function(elem){return/h\d/i.test(elem.nodeName)},text:function(elem){return"text"===elem.type},radio:function(elem){return"radio"===elem.type},checkbox:function(elem){return"checkbox"===elem.type},file:function(elem){return"file"===elem.type},password:function(elem){return"password"===elem.type},submit:function(elem){return"submit"===elem.type},image:function(elem){return"image"===elem.type},reset:function(elem){return"reset"===elem.type},button:function(elem){return"button"===elem.type||"BUTTON"===elem.nodeName.toUpperCase()},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName)}},setFilters:{first:function(elem,i){
return 0===i},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2==0},odd:function(elem,i){return i%2==1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0==i},eq:function(elem,i,match){return match[3]-0==i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter)return filter(elem,i,match,array);if("contains"===name)return(elem.textContent||elem.innerText||"").indexOf(match[3])>=0;if("not"===name){var not=match[3];for(i=0,l=not.length;i<l;i++)if(not[i]===elem)return!1;return!0}},CHILD:function(elem,match){var type=match[1],node=elem;switch(type){case"only":case"first":for(;node=node.previousSibling;)if(1===node.nodeType)return!1;if("first"==type)return!0;node=elem;case"last":for(;node=node.nextSibling;)if(1===node.nodeType)return!1;return!0;case"nth":var first=match[2],last=match[3];if(1==first&&0==last)return!0;var doneName=match[0],parent=elem.parentNode;if(parent&&(parent.sizcache!==doneName||!elem.nodeIndex)){var count=0;for(node=parent.firstChild;node;node=node.nextSibling)1===node.nodeType&&(node.nodeIndex=++count);parent.sizcache=doneName}var diff=elem.nodeIndex-last;return 0==first?0==diff:diff%first==0&&diff/first>=0}},ID:function(elem,match){return 1===elem.nodeType&&elem.getAttribute("id")===match},TAG:function(elem,match){return"*"===match&&1===elem.nodeType||elem.nodeName===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Expr.attrHandle[name]?Expr.attrHandle[name](elem):null!=elem[name]?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return null==result?"!="===type:"="===type?value===check:"*="===type?value.indexOf(check)>=0:"~="===type?(" "+value+" ").indexOf(check)>=0:check?"!="===type?value!=check:"^="===type?0===value.indexOf(check):"$="===type?value.substr(value.length-check.length)===check:"|="===type&&(value===check||value.substr(0,check.length+1)===check+"-"):value&&!1!==result},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter)return filter(elem,i,match,array)}}},origPOS=Expr.match.POS;for(var type in Expr.match)Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source);var makeArray=function(array,results){return array=Array.prototype.slice.call(array),results?(results.push.apply(results,array),results):array};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(e){makeArray=function(array,results){var ret=results||[];if("[object Array]"===toString.call(array))Array.prototype.push.apply(ret,array);else if("number"==typeof array.length)for(var i=0,l=array.length;i<l;i++)ret.push(array[i]);else for(var i=0;array[i];i++)ret.push(array[i]);return ret}}var sortOrder;document.documentElement.compareDocumentPosition?sortOrder=function(a,b){var ret=4&a.compareDocumentPosition(b)?-1:a===b?0:1;return 0===ret&&(hasDuplicate=!0),ret}:"sourceIndex"in document.documentElement?sortOrder=function(a,b){var ret=a.sourceIndex-b.sourceIndex;return 0===ret&&(hasDuplicate=!0),ret}:document.createRange&&(sortOrder=function(a,b){var aRange=a.ownerDocument.createRange(),bRange=b.ownerDocument.createRange();aRange.selectNode(a),aRange.collapse(!0),bRange.selectNode(b),bRange.collapse(!0);var ret=aRange.compareBoundaryPoints(Range.START_TO_END,bRange);return 0===ret&&(hasDuplicate=!0),ret}),function(){var form=document.createElement("div"),id="script"+(new Date).getTime();form.innerHTML="<a name='"+id+"'/>";var root=document.documentElement;root.insertBefore(form,root.firstChild),document.getElementById(id)&&(Expr.find.ID=function(match,context,isXML){if(void 0!==context.getElementById&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||void 0!==m.getAttributeNode&&m.getAttributeNode("id").nodeValue===match[1]?[m]:void 0:[]}},Expr.filter.ID=function(elem,match){var node=void 0!==elem.getAttributeNode&&elem.getAttributeNode("id");return 1===elem.nodeType&&node&&node.nodeValue===match}),root.removeChild(form),root=form=null}(),function(){var div=document.createElement("div");div.appendChild(document.createComment("")),div.getElementsByTagName("*").length>0&&(Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if("*"===match[1]){for(var tmp=[],i=0;results[i];i++)1===results[i].nodeType&&tmp.push(results[i]);results=tmp}return results}),div.innerHTML="<a href='#'></a>",div.firstChild&&void 0!==div.firstChild.getAttribute&&"#"!==div.firstChild.getAttribute("href")&&(Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)}),div=null}(),document.querySelectorAll&&function(){var oldSizzle=Sizzle,div=document.createElement("div");if(div.innerHTML="<p class='TEST'></p>",!div.querySelectorAll||0!==div.querySelectorAll(".TEST").length){Sizzle=function(query,context,extra,seed){if(context=context||document,!seed&&9===context.nodeType&&!isXML(context))try{return makeArray(context.querySelectorAll(query),extra)}catch(e){}return oldSizzle(query,context,extra,seed)};for(var prop in oldSizzle)Sizzle[prop]=oldSizzle[prop];div=null}}(),document.getElementsByClassName&&document.documentElement.getElementsByClassName&&function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>",0!==div.getElementsByClassName("e").length&&(div.lastChild.className="e",1!==div.getElementsByClassName("e").length&&(Expr.order.splice(1,0,"CLASS"),Expr.find.CLASS=function(match,context,isXML){if(void 0!==context.getElementsByClassName&&!isXML)return context.getElementsByClassName(match[1])},div=null))}();var contains=document.compareDocumentPosition?function(a,b){return 16&a.compareDocumentPosition(b)}:function(a,b){return a!==b&&(!a.contains||a.contains(b))},isXML=function(elem){return 9===elem.nodeType&&"HTML"!==elem.documentElement.nodeName||!!elem.ownerDocument&&"HTML"!==elem.ownerDocument.documentElement.nodeName},posProcess=function(selector,context){for(var match,tmpSet=[],later="",root=context.nodeType?[context]:context;match=Expr.match.PSEUDO.exec(selector);)later+=match[0],selector=selector.replace(Expr.match.PSEUDO,"");selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++)Sizzle(selector,root[i],tmpSet);return Sizzle.filter(later,tmpSet)};window.Sizzle=Sizzle}(),qtpProps.Sizzle=window.Sizzle});var finder={css:function(specifier,context){var retVal=[];try{document="undefined"!=typeof GlobalNSResolver?GlobalNSResolver.document:qtpProps.wnd.document,qtpProps.Sizzle||qtpProps.SizzleInjector();for(var elems=qtpProps.Sizzle(specifier,context),i=0;i<elems.length;i++)retVal.push(elems[i])}finally{document=null}return retVal},xpath_evaluate:function(specifier,context,resultType){var result=null;try{if(document="undefined"!=typeof GlobalNSResolver?GlobalNSResolver.document:qtpProps.wnd.document,document.evaluate)result=document.evaluate(specifier,context,null,window.XPathResult[resultType],null);else{if(!qtpProps.window.document.evaluate){if("undefined"!=typeof GlobalNSResolver&&GlobalNSResolver.navigator?navigator=GlobalNSResolver.navigator:document&&document.parentWindow&&document.parentWindow.navigator?navigator=document.parentWindow.navigator:qtpProps.wnd&&qtpProps.wnd.navigator&&(navigator=qtpProps.wnd.navigator),qtpProps.XPathInjector(),qtpProps.wnd){var localWindow=window;window=qtpProps.wnd,qtpProps.XPathInjector(),window=localWindow}navigator=null}result=qtpProps.window.document.evaluate(specifier,context,null,qtpProps.window.XPathResult[resultType],null)}}finally{navigator=null,document=null}return result},xpath:function(specifier,context){for(var curVal,retVal=[],result=finder.xpath_evaluate(specifier,context,"ANY_TYPE");curVal=result.iterateNext();)retVal.push(curVal);return retVal},uniqify:function(arr1,arr2){var retVal=[];for(var objIndex1 in arr1){var obj1=arr1[objIndex1];obj1.wrappedJSObject&&(obj1=obj1.wrappedJSObject);for(var objIndex2 in arr2){var obj2=arr2[objIndex2];if(obj2.wrappedJSObject&&(obj2=obj2.wrappedJSObject),obj1==obj2){retVal.push(arr1[objIndex1]);break}}}return retVal}};if(qtpProps.evaluate=function(){try{document="undefined"!=typeof GlobalNSResolver?GlobalNSResolver.document:qtpProps.wnd.document;for(var retVal=[],firstTime=!0,context=null,i=0;i<arguments.length;i++){var specifier=arguments[i];if(void 0!=specifier)if("object"!=typeof specifier){var pos=specifier.indexOf(":");if(-1!=pos){var finderFunc=finder[specifier.substr(0,pos)];specifier=specifier.substr(pos+1),firstTime?(retVal=finderFunc(specifier,context),firstTime=!1):retVal=finder.uniqify(retVal,finderFunc(specifier,context))}}else context=specifier}}finally{document=null}return retVal},qtpProps.finder=finder,this._QTP=this._QTP||{},_QTP=this._QTP,Object.keys)Object.keys(qtpProps).forEach(function(key){this._QTP[key]=qtpProps[key]});else for(key in qtpProps)this._QTP[key]=qtpProps[key];try{this._QTP.evaluate(this.window.document,"xpath://body")}catch(e){}}}(),(void 0!==_QTP||window._QTP)&&function(){var _QTP=this;_QTP.AutoXpathRecorder=function(srcElem){function findImportentAncestor(elem){function calcSimilarity(node1,node2){var calcedSimilarty=0,weight=0;for(var calcF in calcFunctions){var cf=calcFunctions[calcF];cf.weight>0&&(calcedSimilarty+=cf.func(node1,node2),weight+=cf.weight)}return calcedSimilarty/weight}function calcDomSimilarity(node1,node2){if(!areEqual(node1,node2))return 0;var list1=node1.childNodes,list2=node2.childNodes;return 0==list1.length&&0==list2.length?.5:0==list1.length||0==list2.length?0:Math.abs(list1.length-list2.length)>10?0:list1.length>5||list2.length>5?0:1-calcEditDistance(list1,0,list2,0)/(list1.length+list2.length)}function calcEditDistance(list1,index1,list2,index2){return index1+1>=list1.length?list2.length-index2-1:index2+1>=list2.length?list1.length-index1-1:areEqual(list1[index1],list2[index2])?calcEditDistance(list1,index1+1,list2,index2+1):Math.min(calcEditDistance(list1,index1+1,list2,index2),calcEditDistance(list1,index1,list2,index2+1))+1}function areEqual(elem1,elem2){try{var role1=elem1.getAttribute?elem1.getAttribute("role"):"",role2=elem2.getAttribute?elem2.getAttribute("role"):"";return elem1.tagName==elem2.tagName&&role1==role2}catch(e){return!1}}for(var bestElem,calcFunctions={domSimilarity:{func:calcDomSimilarity,weight:1}},bestGrade=0;(elem=elem.parentNode).parentNode;){for(var grade=1,siblings=1,curSibling=elem.parentNode.firstChild;curSibling;curSibling=curSibling.nextSibling)if(1==curSibling.nodeType&&curSibling!=elem){var g=calcSimilarity(elem,curSibling);if(grade+=g,++siblings>20)break}if(1!=siblings&&(grade=grade/siblings-1/(siblings*siblings),Log("grade: "+grade),grade>bestGrade&&(bestGrade=grade,bestElem=elem,bestGrade>.8)))break}if(Log("bestGrade: "+bestGrade),bestElem&&bestGrade>.5)return bestElem}function qouteString(srcText){var qoutes='"';if(/"/g.test(srcText)){if(/'/g.test(srcText))return"";qoutes="'"}return qoutes+srcText+qoutes}function isStrongId(idString){return!!idString&&!/\d/.test(idString)}function evaluateXpath(xpath,context,resultType){return _QTP.finder.xpath_evaluate(xpath,context,resultType)}function xpathBuilder(srcElem,destElem,options,doc){if(!destElem)return"";for(var xpathString="",done=!1,nextE=srcElem,textAdded=!1;nextE&&nextE!=destElem&&!done;){var currentE=nextE;if(!(nextE=currentE.parentNode))return"";var nodeStr=currentE.tagName,predicate="",nodeId=currentE.id;if(isStrongId(nodeId))predicate='@id="'+nodeId+'"',done=!0;else{if(options&xpathBuilder.addRole)try{var role=currentE.getAttribute?currentE.getAttribute("role"):"";role&&(predicate+='@role="'+role+'"')}catch(e){}if(options&xpathBuilder.addText&&nextE!=srcElem&&destElem!=doc.body){var result=evaluateXpath("text()",currentE,"STRING_TYPE"),txt=result?result.stringValue:"";if(""!=txt){var qoutedString=qouteString(txt);""!=qoutedString&&(""!=predicate&&(predicate+=" and "),predicate+="text()="+qoutedString)}}if(!textAdded&&options&xpathBuilder.addNormalizedSpace){var result=evaluateXpath("normalize-space()",currentE,"STRING_TYPE"),txt=result?result.stringValue:"";if(txt&&txt.length>0&&txt.length<=20){var qoutedString=qouteString(txt);if(""!=qoutedString){var newPredicate=predicate;if(""!=newPredicate&&(newPredicate+=" and "),newPredicate+="normalize-space()="+qoutedString,nextE==destElem)predicate=newPredicate,textAdded=!0;else{var tempXpath="//"+nodeStr+"["+newPredicate+"]"+xpathString,res=evaluateXpath(tempXpath,currentE,"ANY_TYPE");if(res&&res.iterateNext){for(var num=0;res.iterateNext()&&!(++num>1););1==num&&(predicate=newPredicate,textAdded=!0)}}}}}}if(""!=predicate&&(nodeStr+="["+predicate+"]"),!done&&!textAdded&&options&xpathBuilder.addSpecifier)for(var node,results=evaluateXpath(nodeStr,nextE,"ORDERED_NODE_ITERATOR_TYPE"),i=1;results&&(node=results.iterateNext());){if(node.wrappedJSObject==currentE||node==currentE){nodeStr+="["+i+"]";break}i++}xpathString="/"+nodeStr+xpathString}return""!=xpathString&&(xpathString="/"+xpathString),xpathString}function isXpathUnique(xpath,doc){var snapshotLength=0;try{snapshotLength=doc.evaluate(xpath,doc,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}catch(e){return!1}return 1===snapshotLength}function Log(str){}var doc="undefined"!=typeof GlobalNSResolver?GlobalNSResolver.document:window.document;if(doc.body.contains(srcElem)){if(xpathBuilder.addText=1,xpathBuilder.addSpecifier=2,xpathBuilder.addRole=4,xpathBuilder.addNormalizedSpace=8,srcElem===doc.body)return"//BODY";var endElem=findImportentAncestor(srcElem);if(endElem){var xpathResult=xpathBuilder(srcElem,endElem.parentNode,xpathBuilder.addSpecifier|xpathBuilder.addRole|xpathBuilder.addNormalizedSpace,doc);if(isXpathUnique(xpathResult,doc))return xpathResult}return xpathBuilder(srcElem,doc.body,xpathBuilder.addSpecifier|xpathBuilder.addRole,doc)}}}.call(void 0!==_QTP?_QTP:window._QTP),(void 0!==_QTP||window._QTP)&&("undefined"==typeof Node&&(Node={ELEMENT_NODE:1,DOCUMENT_NODE:9}),function(){function nodeNameInCorrectCase(node){var shadowRootType=node.shadowRootType;return shadowRootType?"#shadow-root ("+shadowRootType+")":node.xmlVersion?node.nodeName:node.nodeName.toLowerCase()}var _QTP=this,WebInspector={DOMPresentationUtils:{}};WebInspector.DOMPresentationUtils.cssPath=function(node,optimized){if(node.nodeType!==Node.ELEMENT_NODE)return"";for(var steps=[],contextNode=node;contextNode;){var step=WebInspector.DOMPresentationUtils._cssPathStep(contextNode,!!optimized,contextNode===node);if(!step)break;if(steps.push(step),step.optimized)break;contextNode=contextNode.parentNode}return steps.reverse(),steps.join(" > ")},WebInspector.DOMPresentationUtils._cssPathStep=function(node,optimized,isTargetNode){function prefixedElementClassNames(node){var classAttribute=node.getAttribute("class");if(!classAttribute)return[];for(var split=classAttribute.split(/\s+/g),rc=[],i=0;i<split.length;i++)split[i]&&rc.push("$"+split[i]);return rc}function idSelector(id){return"#"+escapeIdentifierIfNeeded(id)}function escapeIdentifierIfNeeded(ident){if(isCSSIdentifier(ident))return ident;var shouldEscapeFirst=/^(?:[0-9]|-[0-9-]?)/.test(ident),lastIndex=ident.length-1;return ident.replace(/./g,function(c,i){return shouldEscapeFirst&&0===i||!isCSSIdentChar(c)?escapeAsciiChar(c,i===lastIndex):c})}function escapeAsciiChar(c,isLast){return"\\"+toHexByte(c)+(isLast?"":" ")}function toHexByte(c){var hexByte=c.charCodeAt(0).toString(16);return 1===hexByte.length&&(hexByte="0"+hexByte),hexByte}function isCSSIdentChar(c){return!!/[a-zA-Z0-9_-]/.test(c)||c.charCodeAt(0)>=160}function isCSSIdentifier(value){return/^-?[a-zA-Z_][a-zA-Z0-9_-]*$/.test(value)}if(node.nodeType!==Node.ELEMENT_NODE)return null;var id=node.getAttribute("id");if(optimized){if(id)return new WebInspector.DOMNodePathStep(idSelector(id),!0);var nodeNameLower=node.nodeName.toLowerCase();if("body"===nodeNameLower||"head"===nodeNameLower||"html"===nodeNameLower)return new WebInspector.DOMNodePathStep(nodeNameInCorrectCase(node),!0)}var nodeName=nodeNameInCorrectCase(node);if(id)return new WebInspector.DOMNodePathStep(nodeName+idSelector(id),!0);var parent=node.parentNode;if(!parent||parent.nodeType===Node.DOCUMENT_NODE)return new WebInspector.DOMNodePathStep(nodeName,!0);for(var prefixedOwnClassNamesArray=prefixedElementClassNames(node),needsClassNames=!1,needsNthChild=!1,ownIndex=-1,elementIndex=-1,siblings=parent.children,i=0;(-1===ownIndex||!needsNthChild)&&i<siblings.length;++i){var sibling=siblings[i];if(sibling.nodeType===Node.ELEMENT_NODE)if(elementIndex+=1,sibling!==node){if(!needsNthChild&&nodeNameInCorrectCase(sibling)===nodeName){needsClassNames=!0;var ownClassNames=prefixedOwnClassNamesArray.keySet,ownClassNameCount=0;for(var name in ownClassNames)++ownClassNameCount;if(0!==ownClassNameCount)for(var siblingClassNamesArray=prefixedElementClassNames(sibling),j=0;j<siblingClassNamesArray.length;++j){var siblingClass=siblingClassNamesArray[j];if(ownClassNames.hasOwnProperty(siblingClass)&&(delete ownClassNames[siblingClass],!--ownClassNameCount)){needsNthChild=!0;break}}else needsNthChild=!0}}else ownIndex=elementIndex}var result=nodeName;if(isTargetNode&&"input"===nodeName.toLowerCase()&&node.getAttribute("type")&&!node.getAttribute("id")&&!node.getAttribute("class")&&(result+='[type="'+node.getAttribute("type")+'"]'),needsNthChild)result+=":nth-child("+(ownIndex+1)+")";else if(needsClassNames)for(var prefixedName in prefixedOwnClassNamesArray.keySet)result+="."+escapeIdentifierIfNeeded(prefixedName.substr(1));return new WebInspector.DOMNodePathStep(result,!1)},WebInspector.DOMNodePathStep=function(value,optimized){this.value=value,this.optimized=optimized||!1},WebInspector.DOMNodePathStep.prototype={toString:function(){return this.value}},_QTP.CSSGenerator=function(elem){return WebInspector.DOMPresentationUtils.cssPath(elem)},_QTP.autoCssLog=function(str){if(_QTP.wnd&&_QTP.wnd.console)_QTP.wnd.console.log(str);else{var d=void 0;d="undefined"!=typeof GlobalNSResolver?GlobalNSResolver.document:window.document,d&&d.parentWindow&&d.parentWindow.console.log(str)}}}.call(void 0!==_QTP?_QTP:window._QTP)),WebExtKit.prototype={name:"WebExtKit",priority:100,loadToolkits:function(toolkits){this._logger.trace("loadToolkits called"),this._toolkitManager.loadToolkits(toolkits),this._tagElements=this._toolkitManager.getTagList()},createAO:function(element,parentID,noDefault,micclass){this._logger.trace("createAO called");var ao=null;if(!Util.isNullOrUndefined(element)&&!Util.isNullOrUndefined(element.tagName)){var tagName=element.tagName.toLowerCase();if(-1!==this._tagElements.indexOf(tagName)||-1!==this._tagElements.indexOf("default")){var rootElem={_elem:null},control=this._toolkitManager.createControl(element,this._skipTypes,rootElem,micclass);null!==control&&(this._logger.trace("createAO: element found control. Contro is ",control.controlType),this._skipTypes.push(control.controlType),this._logger.trace("createAO: skipTypes push control types. skipTypes contains ",this._skipTypes),ao=new WebExtAO(Util.isNullOrUndefined(rootElem._elem)?element:rootElem._elem,control,parentID),this._skipTypes.pop(),this._logger.trace("createAO: skipTypes pop(); skipTypes contians ",this._skipTypes))}}return ao},createRecordAOArray:function(element,parentID){for(var aos=[],curr=element;curr;curr=curr.parentElement){var ao=this.createAO(curr,parentID,!0);ao&&aos.push(ao)}aos.reverse();var foundChildAO=null;return aos.some(function(childAO){return foundChildAO=childAO,childAO.RegisterExtEventHandler(),!childAO.UseDefaultEventHandlingForChildren()},this),foundChildAO?[foundChildAO]:null},relevant:Util.alwaysTrue,webCore:Util.alwaysFalse},ToolkitManager.prototype={loadToolkits:function(toolkits){this._logger.trace("loadToolkits: started"),toolkits.forEach(function(item,index){var toolkitIndex=index+1;this._loadToolkit(item,toolkitIndex)},this)},_loadToolkit:function(toolkitInfo,index){if(this._logger.trace("_loadToolkit: name = "+toolkitInfo.name+"; index = "+index),-1===this._getToolkitIndexByName(toolkitInfo.name)){this._logger.trace("_loadToolkit: "+toolkitInfo.name+" does not exists. Add it to the list");var kit=new Toolkit(toolkitInfo,index);this._addToolkit(kit)}},getTagList:function(){this._logger.trace("getTagList:started");var tagList=[];return this._toolkits.forEach(function(toolkit){toolkit.getTagList().forEach(function(tag){-1===tagList.indexOf(tag)&&tagList.push(tag)})}),tagList},createControl:function(element,skipTypes,rootElem,micclass){this._logger.trace("createControl: started");var controlObj=null;return Util.arrayFindIndex(this._toolkits,function(toolkit){return null!==(controlObj=toolkit.createControl(element,skipTypes,rootElem||{},micclass))}),controlObj},_addToolkit:function(toolkit){for(var i=0;i<this._toolkits.length&&!(this._toolkits[i].priority>toolkit.priority);i++);this._logger.trace("_addToolkit: insert at "+i),this._toolkits.splice(i,0,toolkit)},_getToolkitIndexByName:function(toolkitName){return Util.arrayFindIndex(this._toolkits,function(toolkit){return toolkit.toolkitName.toUpperCase()===toolkitName.toUpperCase()})}},Toolkit.prototype={CONST_PRIORITY_ATTR_DEF_VALUE:100,CONST_UNINITIALIZE:"UNINITIALIZE",_setScriptingEnviroment:function(){this._logger.trace("_setScriptingEnviroment: started");var scriptEnv={},browserInfo=Util.browserApplicationVersion().split(" ");return scriptEnv.name=browserInfo[0],scriptEnv.version=browserInfo[1],scriptEnv},_initControlList:function(controlObjects){this._logger.trace("_initControlList: started");var controls=[],ctrl=null,controlList=[];return controlList=controlList.concat(controlObjects),controlList.forEach(function(item,index){ctrl=new Control(item,index+1,this),controls.push(ctrl),this._controlByMicClass[ctrl.controlType]=ctrl},this),controls},getTagList:function(){this._logger.trace("getTagList:started"),Util.isNullOrUndefined(this._controlListByTags)&&(this._controlListByTags=[],this._controls.forEach(function(control){var controltags=control.initIdentificationTags();this.registerControlByTagList(control,controltags)},this));var tagList=[];return Util.isNullOrUndefined(this._controlListByTags)||this._controlListByTags.forEach(function(item){tagList.push(item.tagName)}),tagList},registerControlByTagList:function(control,tagList){tagList.forEach(function(tag){this.registerControlByTagName(control,tag._name)},this)},registerControlByTagName:function(control,tagName){var tn=tagName.toString().toLowerCase(),index=this._getControlListIndexByTagName(tn);if(-1===index){var tagWithControl={tagName:tn,controls:[control]};this._controlListByTags.push(tagWithControl)}else this._controlListByTags[index].controls.push(control)},_getControlListIndexByTagName:function(tagName){return Util.isNullOrUndefined(this._controlListByTags)?-1:Util.arrayFindIndex(this._controlListByTags,function(control){return tagName===control.tagName})},getControlByMicClass:function(micclass){if(!micclass)return null;if(micclass.isRegExp&&micclass.regExQuery){var targetMicClass=micclass.regExQuery.toUpperCase(),micclasses=Object.keys(this._controlByMicClass);micclass=Util.arrayFind(micclasses,function(item){return item.toUpperCase()===targetMicClass}),micclass&&this._logger.trace("Found control by regular expression, micclass=",micclass)}return this._controlByMicClass[micclass]},createControl:function(element,skipTypes,rootElem,micclass){var control=null;if(micclass)return control=this.getControlByMicClass(micclass),null!=control&&-1===skipTypes.indexOf(control.controlType)?control.getControlByIdentification(element,rootElem||{}):null;var controlList=this._getCandidateControlList(element);return Util.arrayFindIndex(controlList,function(item){return-1===skipTypes.indexOf(item.controlType)&&(control=item.getControlByIdentification(element,rootElem||{})),!Util.isNullOrUndefined(control)}),control},_getCandidateControlList:function(element){var controlList=[],index=this._getControlListIndexByTagName(element.tagName.toLowerCase());return-1!==index&&(controlList=this._controlListByTags[index].controls),index=this._getControlListIndexByTagName("default"),-1!==index&&(controlList=controlList.concat(this._controlListByTags[index].controls)),controlList},getControlByCommonIdentification:function(element){var control=null;if(!Util.isNullOrUndefined(this._commonIdentificationInfo)){var controlClassName=this._callCommonIdentificationHandler(this._commonIdentificationInfo,element);!Util.isNullOrUndefined(controlClassName)&&"string"==typeof controlClassName&&controlClassName.length&&(control=this._getControlByControlName(controlClassName))}return control},_callCommonIdentificationHandler:function(commonIdentificationInfo,element){var controlClassName=null;if(this._commonIdentificationFunctionHandler===this.CONST_UNINITIALIZE&&(this._commonIdentificationFunctionHandler=this._getHandler(commonIdentificationInfo)),!Util.isNullOrUndefined(this._commonIdentificationFunctionHandler)){var ret=this._commonIdentificationFunctionHandler.execute(element,[]);Util.isNullOrUndefined(ret.type)||"OBJECT"!==ret.type||"string"!=typeof ret.result||(controlClassName=ret.result)}return controlClassName},_getControlByControlName:function(controlName){return Util.arrayFind(this._controls,function(control){return control.controlType===controlName})||null},getSettingVar:function(name){var setting=Util.arrayFind(this._settings,function(setting){return setting._name===name});return Util.isNullOrUndefined(setting)?null:setting._value},getJscript:function(jsFileName){return this.jsFunctionsManager.getJSScript(jsFileName)},_getHandler:function(handlerInfo){var handler=SectionHandlersFactory.prototype.getSectionHandler(handlerInfo._type);return Util.isNullOrUndefined(handler)||handler.initialize(handlerInfo,null,this)||(handler=null),handler}},JSFunctionsManager.prototype={getJSScript:function(jsFileName){var jsfunctionscript="",index=this._getIndex(jsFileName);return-1!==index&&(jsfunctionscript=this._jsFunctionScripts[index]),jsfunctionscript},_getIndex:function(jsFileName){return Util.arrayFindIndex(this._jsFunctionFileNames,function(item){return item===jsFileName})}},Control.prototype={CONST_DEFAULT_TAG_VALUE:"default",CONST_UNINITIALIZE:"UNINITIALIZE",_identificationType:{IdentifyIfPropMatch:0,CallIDFuncIfPropMatch:1,SkipIfPropMatch:2},_identificationMode:{Identified:0,CallIndentificationFunction:1,Skip:2},_initMethodList:function(controlInfo){var methodList=[];try{Util.isNullOrUndefined(controlInfo.Run.Methods.Method)||(methodList=methodList.concat(controlInfo.Run.Methods.Method))}catch(error){}return methodList},initIdentificationTags:function(){var tagList=[],browserEntry=this._getBrowserSpecificEntry(this._toolkit.scriptEnv);return Util.isNullOrUndefined(browserEntry)||(Util.isNullOrUndefined(browserEntry.HTMLTags)?tagList.push({_name:this.CONST_DEFAULT_TAG_VALUE}):tagList=tagList.concat(browserEntry.HTMLTags.Tag)),tagList},_getBrowserSpecificEntry:function(scriptEnv){var browsers,browserEntry=null,min_version=parseFloat(scriptEnv.version),max_version=NaN,checkBrowserMinVersionInRange=function(currentVersion,minVersion,maxVersion){return!(isNaN(minVersion)||isNaN(currentVersion)||currentVersion<minVersion)&&(!!isNaN(maxVersion)||currentVersion<maxVersion)};try{browsers=this._controlInfo.Identification.Browser}catch(exception){this._logger.info("_getBrowserSpecificEntry: fail to get Identification.Browser"),browsers=null}if(Util.isNullOrUndefined(browsers))return this._logger.info("_getBrowserSpecficEntry: Identification.Browser not exist. get the identification node."),this._controlInfo.Identification;var browserList=[];return browserList=browserList.concat(browsers),browserList.forEach(function(browser){"*"===browser._name&&Util.isNullOrUndefined(browserEntry)?browserEntry=browser:browser._name.toLowerCase()===scriptEnv.name.toLowerCase()&&(Util.isNullOrUndefined(browser._min_version)?(Util.isNullOrUndefined(browserEntry)||"*"===browserEntry._name)&&(browserEntry=browser):checkBrowserMinVersionInRange(parseFloat(browser._min_version),min_version,max_version)&&(browserEntry=browser,max_version=parseFloat(browser._min_version)))}),browserEntry},getControlByIdentification:function(element,rootElem){var idMode=this.getIdentificationModeForElement(element);return idMode===this._identificationMode.Identified?this:idMode===this._identificationMode.Skip?null:this._getControlByIdentificationHandler(element,rootElem)},getIdentificationModeForElement:function(element){return this._initializeIdentificationConditionsSection(),Util.isNullOrUndefined(this._identificationConditions)?this._identificationMode.Skip:!Util.isNullOrUndefined(this._identificationConditions[this._identificationType.IdentifyIfPropMatch])&&this._identificationConditions[this._identificationType.IdentifyIfPropMatch].evaluate(element)?this._identificationMode.Identified:Util.isNullOrUndefined(this._identificationConditions[this._identificationType.CallIDFuncIfPropMatch])||this._identificationConditions[this._identificationType.CallIDFuncIfPropMatch].evaluate(element)?!Util.isNullOrUndefined(this._identificationConditions[this._identificationType.SkipIfPropMatch])&&this._identificationConditions[this._identificationType.SkipIfPropMatch].evaluate(element)?this._identificationMode.Skip:this._identificationMode.CallIndentificationFunction:this._identificationMode.Skip},_initializeIdentificationConditionsSection:function(){if(Util.isNullOrUndefined(this._identificationConditions)){this._identificationConditions=new Array(3);var conditions=this._getBrowserSpecificConditions(this._toolkit.scriptEnv);if(Util.isNullOrUndefined(conditions))this._logger.info("no condition found in the control");else{var conditionsList=[];conditionsList=conditionsList.concat(conditions),conditionsList.forEach(function(item){this._conditionsExpressParse(item)},this)}}},_conditionsExpressParse:function(conditions){if(!Util.isNullOrUndefined(conditions._type)){var index=this._identificationConditionTypeStrToIndex(conditions._type);if(index<0)return void this._logger.error("identification type is not correct");if(Util.isNullOrUndefined(this._identificationConditions[index])){var conditionExp=new ConditionsExpress(conditions);conditionExp.isValid()&&(this._identificationConditions[index]=conditionExp)}else this._logger.error("condition express for the condition type exist already")}},_identificationConditionTypeStrToIndex:function(conditionType){var conditionIndex=this._identificationType[conditionType];return Util.isNullOrUndefined(conditionIndex)?-1:conditionIndex},_getBrowserSpecificConditions:function(scriptEnv){var conditionsEntry=null,browserEntry=this._getBrowserSpecificEntry(scriptEnv);return browserEntry&&!Util.isNullOrUndefined(browserEntry.Conditions)&&(conditionsEntry=browserEntry.Conditions),conditionsEntry},_getControlByIdentificationHandler:function(element,rootElem){var control=null;return Util.isNullOrUndefined(this._toolkit._commonIdentificationInfo)?this._callControlIdentificationHandler(element,rootElem)&&(control=this):control=this._toolkit.getControlByCommonIdentification(element),control},_callControlIdentificationHandler:function(element,rootElement){var result=!1;if("string"==typeof this._identificationHanlder&&this._identificationHanlder===this.CONST_UNINITIALIZE&&(this._identificationHanlder=this._getHandler(this._controlInfo.Identification)),Util.isNullOrUndefined(this._identificationHanlder))return!1;var ret=this._identificationHanlder.execute(element,[]);return Util.isNullOrUndefined(ret.type)||"UNDEFINED"===ret.type||Util.isNullOrUndefined(ret.result)||("boolean"==typeof ret.result?result=ret.result:"number"==typeof ret.result?result=0!==parseInt(ret.result,10):"object"==typeof ret.result&&(rootElement._elem=ret.result,result=!0)),result},getInternalElement:function(element){var innerElement=null
;if(!this.isRootElement(element))return this._logger.error("getInternalElement: the element is not the control supported"),null;if("string"==typeof this._innerElementHandler&&this._innerElementHandler===this.CONST_UNINITIALIZE&&this._initializeInnerElementHandler(),Util.isNullOrUndefined(this._innerElementHandler))return innerElement;var ret=this._innerElementHandler.execute(element,[]);return Util.isNullOrUndefined(ret.type)||"OBJECT"!==ret.type||(innerElement=ret.result),innerElement},_initializeInnerElementHandler:function(){var handlerInfo={};handlerInfo._function=this.getSettingVar("func_to_get_base_elem"),handlerInfo._file_name=this.getSettingVar("file_for_func_to_get_base_elem"),this._innerElementHandler=this._getHandler(handlerInfo)},isRootElement:function(element){var idMode=this.getIdentificationModeForElement(element);return idMode===this._identificationMode.Identified||idMode!==this._identificationMode.Skip&&this._callControlIdentificationHandler(element,{})},getSettingVar:function(name){var setting=Util.arrayFind(this._settings,function(item){return item._name===name});return Util.isNullOrUndefined(setting)?null:setting._value},_getHandler:function(handlerInfo){var handler=SectionHandlersFactory.prototype.getSectionHandler(handlerInfo._type);return Util.isNullOrUndefined(handler)||handler.initialize(handlerInfo,this,this._toolkit)||(handler=null),handler},getExtProperty:function(element,property){var propertyValue=null;if("string"==typeof this._propertyHandler&&this._propertyHandler===this.CONST_UNINITIALIZE&&this._initializePropertyHandler(),Util.isNullOrUndefined(this._propertyHandler))return propertyValue;var ret=this._propertyHandler.execute(element,[property]);return Util.isNullOrUndefined(ret.type)||"UNDEFINED"===ret.type||(propertyValue=ret.result),propertyValue},_initializePropertyHandler:function(){var handlerInfo={};Util.isNullOrUndefined(this._controlInfo.Run)||Util.isNullOrUndefined(this._controlInfo.Run.Properties)?(handlerInfo._function="get_property_value",handlerInfo._file_name=this.getSettingVar("file_for_func_to_get_base_elem")):handlerInfo=this._controlInfo.Run.Properties,this._propertyHandler=this._getHandler(handlerInfo)},invokeExtMethod:function(element,methodName,args){var methodIndex=Util.arrayFindIndex(this._methodList,function(method){return method._name===methodName});-1===methodIndex&&(methodIndex=Util.arrayFindIndex(this._methodList,function(method){return method._name.toLowerCase()===methodName.toLowerCase()}));var handlerInfo={};-1===methodIndex?(handlerInfo._function=methodName,handlerInfo._file_name=this.getSettingVar("file_for_func_to_get_base_elem")):handlerInfo=this._methodList[methodIndex];var ret,methodHandler=this._getHandler(handlerInfo);Util.isNullOrUndefined(methodHandler)||(ret=methodHandler.execute(element,args));var result={};return ret&&!Util.isNullOrUndefined(ret.type)&&"UNDEFINED"!==ret.type?result.status="pass":result.status="fail",Util.isNullOrUndefined(ret.result)||(result.data=ret.result),result},isObjSpyable:function(){try{var controlSpyable=this._controlInfo.Filter.Spy._is_control_spyable;if(!Util.isNullOrUndefined(controlSpyable)&&"no"===controlSpyable.toLowerCase())return!1}catch(error){this._logger.warn("isObjSpyable: return true by default, error: "+error)}return!0},UseDefaultEventHandling:function(){try{var value=this._controlInfo.Record.EventListening._use_default_event_handling;if(value&&("FALSE"===value.toUpperCase()||"0"===value))return!1}catch(error){this._logger.warn("UseDefaultEventHandling: return true by default, error: "+error)}return!0},UseDefaultEventHandlingForChildren:function(){try{var value=this._controlInfo.Record.EventListening._use_default_event_handling_for_children;if(value&&("FALSE"===value.toUpperCase()||"0"===value))return!1}catch(error){this._logger.warn("UseDefaultEventHandlingForChildren: return true by default, error: "+error)}return!0},_getControlLearnType:function(){var learnControl=ControlLearnType.Yes;try{if(!Util.isNullOrUndefined(this._controlInfo.Filter.Learn._learn_control))switch(this._controlInfo.Filter.Learn._learn_control){case"Yes":learnControl=ControlLearnType.Yes;break;case"No":learnControl=ControlLearnType.No;break;case"IfChildren":learnControl=ControlLearnType.IfChildren}}catch(exception){this._logger.info("_getControlLearnType: fail to get Filter.Learn.learn_control")}return learnControl},_getChildrenLearnType:function(){var learnChildren=ChildrenLearnType.Yes;try{if(!Util.isNullOrUndefined(this._controlInfo.Filter.Learn._learn_children))switch(this._controlInfo.Filter.Learn._learn_children){case"Yes":learnChildren=ChildrenLearnType.Yes;break;case"No":learnChildren=ChildrenLearnType.No;break;case"CallFilterFunc":learnChildren=ChildrenLearnType.LetMeSupply}}catch(exception){this._logger.info("_getChildrenLearnType: fail to get Filter.Learn.learn_children")}return learnChildren},getChildrenForLearn:function(element){var result=null;if("string"==typeof this._learnFilterHandler&&this._learnFilterHandler===this.CONST_UNINITIALIZE&&(this._learnFilterHandler=this._getHandler(this._controlInfo.Filter.Learn)),!Util.isNullOrUndefined(this._learnFilterHandler)){var ret=this._learnFilterHandler.execute(element,[]);Util.isNullOrUndefined(ret.type)||"OBJECT"!==ret.type||(result=ret.result)}return result},RegisterExtEventHandler:function(element){this._callListenToEventsHandler(element)},_callListenToEventsHandler:function(element){if(this._listenToEventsHandler===this.CONST_UNINITIALIZE){var handlerInfo;handlerInfo=this._controlInfo.Record&&this._controlInfo.Record.EventListening?this._controlInfo.Record.EventListening:{_function:"ListenToEvents"},this._listenToEventsHandler=this._getHandler(handlerInfo)}this._listenToEventsHandler&&this._listenToEventsHandler.execute(element,[])},isContainer:function(){return this._controlInfo&&"true"===this._controlInfo._IsContainer}},ConditionsExpress.prototype={CONST_LOGIC_AND:0,CONST_LOGIC_OR:1,_logicType:this.CONST_LOGIC_AND,_init:function(conditionInfo){if(Util.isNullOrUndefined(conditionInfo._logic)||"or"!==conditionInfo._logic.toLowerCase()||(this._logicType=this.CONST_LOGIC_OR),!Util.isNullOrUndefined(conditionInfo.Condition)){var conditionList=[];conditionList=conditionList.concat(conditionInfo.Condition),conditionList.forEach(function(item){this._parseSubCondition(item)},this)}if(!Util.isNullOrUndefined(conditionInfo.Conditions)){var conditionsList=[];conditionsList=conditionsList.concat(conditionInfo.Conditions),conditionsList.forEach(function(item){this._parseSubConditions(item)},this)}},_parseSubCondition:function(conditionInfo){var condition=new Condition(conditionInfo);condition.isValid()&&this._conditions.push(condition)},_parseSubConditions:function(conditionsInfo){var conditionExpress=new ConditionsExpress(conditionsInfo);conditionExpress.isValid()&&this._conditions.push(conditionExpress)},isValid:function(){return this._conditions.length>0},evaluate:function(element){if(!this.isValid()||Util.isNullOrUndefined(this._conditions)||0===this._conditions.length)return!1;return this._logicType===this.CONST_LOGIC_OR?this._conditions.some(function(item){return!0===item.evaluate(element)}):this._conditions.every(function(item){return!0===item.evaluate(element)})}},Condition.cache=Object.create(null),Condition.MAXSIZE=20480,Condition.cacheSize=0,Condition.prototype={_init:function(conditionInfo){Util.isNullOrUndefined(conditionInfo._prop_name)||(this._propName=conditionInfo._prop_name),Util.isNullOrUndefined(conditionInfo._trim)||"false"!==conditionInfo._trim.toLowerCase()&&"0"!==conditionInfo._trim||(this._trimExpectedValue=!1),Util.isNullOrUndefined(conditionInfo._expected_value)||(this._trimExpectedValue?this._expectedValue=conditionInfo._expected_value.trim().toLowerCase():this._expectedValue=conditionInfo._expected_value.toLowerCase()),Util.isNullOrUndefined(conditionInfo._is_reg_exp)||"true"!==conditionInfo._is_reg_exp.toLowerCase()&&"1"!==conditionInfo._is_reg_exp||(this._isRegExp=!0),Util.isNullOrUndefined(conditionInfo._equal)||"false"!==conditionInfo._equal.toLowerCase()&&"0"!==conditionInfo._equal||(this._isNegative=!0)},isValid:function(){return this._propName.length>0&&this._expectedValue.length>0},evaluate:function(element){if(!this.isValid())return!1;var result=this._matchHtmlElemProp(element,this._propName,this._expectedValue,this._isRegExp,this._trimExpectedValue);return this._isNegative?!result:result},_expectValueMeanTrue:function(value){return"true"===value||"1"===value||"yes"===value||"valid"===value},_expectValueMeanFalse:function(value){return"false"===value||"0"===value||"no"===value||"null"===value},_testPropertyValueAgainstExpected:function(expectedValue,propVal){var key=expectedValue+"$"+propVal;if(!(key in Condition.cache)){var regExpress=new RegExp(expectedValue),isMatched=regExpress.test(propVal);return Condition.cacheSize>=Condition.MAXSIZE&&(Condition.cache=Object.create(null),Condition.cacheSize=0),Condition.cache[key]=isMatched,Condition.cacheSize++,isMatched}return Condition.cache[key]},_matchHtmlElemProp:function(element,propName,expectedValue,isRegExp,trimBeforeCompare){var propVal=element[propName]||element.getAttribute(propName);if(Util.isNullOrUndefined(propVal))return this._expectValueMeanFalse(expectedValue);if("string"==typeof propVal){trimBeforeCompare&&(propVal=propVal.trim().toLowerCase());var _expectedValue=expectedValue.toLowerCase();return isRegExp?this._testPropertyValueAgainstExpected(_expectedValue,propVal):propVal===expectedValue}if("boolean"==typeof propVal)return propVal?this._expectValueMeanTrue(expectedValue):this._expectValueMeanFalse(expectedValue);if("number"==typeof propVal){return Number(expectedValue)===propVal}return this._expectValueMeanTrue(expectedValue)}},WebExtAO.prototype=new AO,WebExtAO.prototype.constructor=WebExtAO,WebExtAO.prototype._initMicClass=function(){this._micclass=[this._control.controlType];var otherTypes=this._control.getSettingVar("other supported types");otherTypes&&(this._micclass=this._micclass.concat(otherTypes.split("; ")))},WebExtAO.prototype._initInternalElement=function(element){var innerAO=null;this._logger.trace("WebExtAO._initInternalElement: started");var innerElem=this._control.getInternalElement(element);return Util.isNullOrUndefined(innerElem)||(innerAO=content.kitsManager.createAO(innerElem,this._parentID,!0)),innerAO},WebExtAO.prototype._initBaseAO=function(element){var baseAO=WebKit.createAO(element,this._parentID,!1,!0);return baseAO.setOuterAO(this),this._mergeBaseAOBehavior(baseAO),baseAO},WebExtAO.prototype.GetAttr=function(property,msg,resultCallback){this._logger.trace("WebExtAO.GetAttr: query property "+property);var propertyValue=this.GetExtAttr(property,msg);return Util.isNullOrUndefined(propertyValue)?this._processProperty(property,msg,function(){this.GetAttr(property,msg,resultCallback)}):resultCallback(Util.cleanSpecialChars(propertyValue))},WebExtAO.prototype.GetAttrSync=function(property,msg){this._logger.trace("WEbExtAO.GetAttrSync: query property "+property);var propertyValue=this.GetExtAttr(property,msg);return Util.isNullOrUndefined(propertyValue)?this._processProperty(property,msg,function(){return this.GetAttrSync(property,msg)}):Util.cleanTextProperty(propertyValue)},WebExtAO.prototype.GetExtAttr=function(property,msg){this._logger.trace("WebExtAO.GetExtAttr: started to query"+property);var propertyValue=null;return this._lazyInit("_attrs",property),propertyValue=this._attrs[property]?this._attrs[property].call(this,msg):this._getControlExtAttr(property),this._logger.trace("WebExtAO.GetExtAttr: "+property+" = "+propertyValue),propertyValue},WebExtAO.prototype._getControlExtAttr=function(property){var propertyValue=null;return-1===this._excludeAttrs.indexOf(property)&&(propertyValue=this._control.getExtProperty(this._elem,property),Util.isNullOrUndefined(propertyValue)&&(this._logger.trace("WebExtAO.GetExtAttr:fail to get "+property+" attribute from control"),propertyValue=null,this._excludeAttrs.push(property))),Array.isArray(propertyValue)&&"micclass"!==property&&(propertyValue=propertyValue.join(";")),propertyValue},WebExtAO.prototype._processProperty=function(property,msg,func){return Util.isNullOrUndefined(this._innerAO)||this._isCoreProperty(property)?func.call(this._baseAO):func.call(this._innerAO)},WebExtAO.prototype.InvokeMethod=function(method,msg,resultCallback){if("WEBEXT_GENERIC_METHOD_NAME"===method)return this._logger.trace("InvokeMethod: invoke ext method"),this.InvokeExtMethod(method,msg,resultCallback);if("GET_TABLE_DATA"===method){var funcToGetTableData=this._control.getSettingVar("func_to_get_table_data");if(!Util.isNullOrUndefined(funcToGetTableData)&&funcToGetTableData.length>0)return this._logger.trace("InvokeMethod: invoke ext method for GET_TABLE_DATA"),this._getTableData(funcToGetTableData,msg,resultCallback)}return Util.isNullOrUndefined(this._innerAO)?this._baseAO.InvokeMethod(method,msg,resultCallback):this._innerAO.InvokeMethod(method,msg,resultCallback)},WebExtAO.prototype._getTableData=function(getTableDataFunc,msg,resultCallback){var fillTableData=function(msg,data){if(!Array.isArray(data))return void this._logger.error("The return value is not array for function "+getTableDataFunc);for(var rows=data,maxcol=0,i=0;i<rows.length;++i){var cells=rows[i];if(!Array.isArray(cells))return void this._logger.error("The content is not array at row #"+i);cells.length>maxcol&&(maxcol=cells.length);var rowText=[cells];msg._data["WEB_PN_ROW_DATA"+(i+1)]=rowText}msg._data.row=rows.length,msg._data.WEB_AN_MAX_COLUMN=maxcol}.bind(this),callbackWrapper=function(msg){msg._data.WEBEXT_PN_METHOD_RETURN_VALUE&&fillTableData(msg,msg._data.WEBEXT_PN_METHOD_RETURN_VALUE),resultCallback(msg)}.bind(this);this.invokeMethodOnControl(getTableDataFunc,[],msg,callbackWrapper)},WebExtAO.prototype.InvokeExtMethod=function(method,msg,callback){if("WEBEXT_GENERIC_METHOD_NAME"!==method)return this._logger.warn("WebExtAO.InvokeExtMethod: the method name is not supported by Web Ext"),void ErrorReporter.ThrowGeneralError();var extMethod=msg._data.WEBEXT_PN_METHOD_NAME;if(this._logger.trace("WebExtAO.InvokeExtMethod: the ext method name is "+extMethod),0===extMethod.length&&(this._logger.warn("WebExtAO.InvokeExtMethod: the method name is empty"),ErrorReporter.ThrowInvalidArg()),"WEB_EXT_METHOD_EXTRACT_DATA"===extMethod){var funcExtractData=this._control.getSettingVar("func_to_extract_data");Util.isNullOrUndefined(funcExtractData)&&(this._logger.warn("WebExtAO.InvokeExtMethod: no func_to_extract_data variable settings when calling WEB_EXT_METHOD_EXTRACT_DATA"),ErrorReporter.ThrowMethodNotFound()),extMethod=funcExtractData}var argsList=[],argsCount=msg._data.WEBEXT_PN_METHOD_PARAMS_COUNT;if(this._logger.trace("InvokeExtMethod: the params count is "+argsCount),argsCount>50||argsCount<0)this._logger.warn("WebExtAO.InvokeMethod: the argCount is not correct.WEBEXT_PN_METHOD_PARAMS_COUNT = "+argsCount.toString()),ErrorReporter.ThrowInvalidArg();else for(var index=0;index<argsCount;index++)argsList.push(msg._data["WEBEXT_PN_METHOD_PARAM_"+index.toString()]);this.invokeMethodOnControl(extMethod,argsList,msg,callback)},WebExtAO.prototype.invokeMethodOnControl=function(methodName,argsList,msg,resultCallback){function waitingForReportCallbackHelper(self,theMsg){self._sendingReport?Util.setTimeout(waitingForReportCallbackHelper,50,self,theMsg):(self._replayReport&&(Util.extend(theMsg._data,self._replayReport),self._replayReport=null),resultCallback(theMsg))}function processReturnValueHelper(self,theMsg,retVal){try{switch(PageProxy.setActiveAO(null),retVal.status){case"pass":!Util.isNullOrUndefined(retVal.data)&&Util.isNullOrUndefined(theMsg._data.WEBEXT_PN_METHOD_RETURN_VALUE)&&(theMsg._data.WEBEXT_PN_METHOD_RETURN_VALUE=retVal.data),waitingForReportCallbackHelper(self,theMsg);break;case"fail":self._processExtMethodCallError(retVal.data,methodName,theMsg,waitingForReportCallbackHelper.bind(null,self));break;default:ErrorReporter.ThrowGeneralError()}}catch(e){theMsg.status=e.message||"ERROR",waitingForReportCallbackHelper(self,theMsg)}self._replayReport=null}var ret=this._invokeHandlerOnControl(methodName,argsList);ret.data&&ret.data.isPromise&&ret.data.cookie?PageProxy.addAsyncCall(ret.data.cookie,processReturnValueHelper.bind(null,this,msg)):processReturnValueHelper(this,msg,ret)},WebExtAO.prototype._invokeHandlerOnControl=function(handlerName,argsList){return PageProxy.setActiveAO(this),this._replayReport=null,this._control.invokeExtMethod(this._elem,handlerName,argsList)},WebExtAO.prototype.isObjSpyable=function(){return this._control.isObjSpyable()},WebExtAO.prototype.report=function(status,method,parameters,details,type){this._logger.trace("report: report started");var data={WEBEXT_PN_REPORT_STATUS:status,WEBEXT_PN_METHOD_NAME:method,WEBEXT_PN_PARAMETERS:parameters,WEBEXT_PN_REPORT_DETAILS:details,WEBEXT_PN_REPORT_EVENT_TYPE:type};if(BrowserServices.shouldSendWebExtReportWithResponse)return void(this._replayReport=data);this._sendingReport=!0;var msg=new Msg("WEBEXT_REPORT_LINE",this.getID(),data);content.dispatcher.sendMessage(msg,RtIdUtils.GetExtensionRtId(),null,function(){this._sendingReport=!1}.bind(this))},WebExtAO.prototype._processExtMethodCallError=function(errorResult,method,msg,callback){if(Util.isNullOrUndefined(errorResult))ErrorReporter.ThrowGeneralError();else switch(errorResult.ErrorType){case"Error":msg._data.WEBEXT_PN_EXE_ERROR_FILE=this._control.controlType+".js",msg._data.WEBEXT_PN_EXE_ERROR_DESCRIPTION=errorResult.ErrorDescription,ErrorReporter.ThrowGeneralError();break;case"MethodNotFound":this._lazyInit("_methods",method),this._methods[method]?this._methods[method].call(this,msg,callback):(this._logger.warn("InvokeMethod: unknown method "+method),ErrorReporter.ThrowMethodNotFound());break;default:ErrorReporter.ThrowGeneralError()}},WebExtAO.prototype.getControlLearnType=function(){return this._control._learnControl},WebExtAO.prototype.getChildrenLearnType=function(){return this._control._learnChildren},WebExtAO.prototype.getChildrenForLearn=function(element){return this._control.getChildrenForLearn(element)},WebExtAO.prototype.RegisterExtEventHandler=function(){PageProxy.setActiveAO(this),this._control.RegisterExtEventHandler(this._elem),PageProxy.setActiveAO(null)},WebExtAO.prototype.ReceiveEvent=function(recorder,ev){if(!Util.isExtEventRegistered(ev.target,ev.type))if(this._elem===ev.target)this.UseDefaultEventHandling()&&this._baseAO&&this._baseAO.ReceiveEvent(recorder,ev);else if(this.UseDefaultEventHandlingForChildren()){var aoArr=WebKit.createRecordAOArray(ev.target,recorder.frame.id,!0);aoArr.forEach(function(ao){ao.ReceiveEvent(recorder,ev)},recorder)}},WebExtAO.prototype._gestureToCustomEventMapper=function(gesture){return gesture?"UFT_GESTURE_"+gesture.toUpperCase():""},WebExtAO.prototype.ReceiveGesture=function(recorder,info,elem){this._fireCustomGestureEvent(elem,info)},WebExtAO.prototype._fireCustomGestureEvent=function(elem,info){var eventName=this._gestureToCustomEventMapper(info.event);if(eventName&&elem){var customEventDetails={bubbles:!0,cancelable:!1,detail:info},ev=ContentUtils.createCrossOriginCustomEvent(eventName,customEventDetails);elem.dispatchEvent(ev)}},WebExtAO.prototype.UseDefaultEventHandlingForChildren=function(){return this._control.UseDefaultEventHandlingForChildren()},WebExtAO.prototype.UseDefaultEventHandling=function(){return this._control.UseDefaultEventHandling()},WebExtAO.prototype.UseEventConfiguration=function(event){return this.UseDefaultEventHandling()},WebExtAO.prototype._mergeBaseAOBehavior=function(baseAO){this._logger.trace("mergeBaseAOBehavior: merging base AO behavior"),baseAO._behaviors.forEach(function(behavior){var funcs=behavior._helpers;for(var f in funcs)this[f]=funcs[f]},this)},WebExtAO.prototype.QUERY_REPOSITORY_DESC2ID=function(msg,resultCallback){if(this._logger.trace("QUERY_REPOSITORY_DESC2ID: Started"),this._control&&this._control.isContainer)var additonalParams={filter:function(ao){return ao&&(ao.isLearnable()||content.settings.shouldlearnwebelement)},learn:!0};else var additonalParams={filter:Util.alwaysFalse,learn:!0};this._internalQueryDescToId(msg,additonalParams,resultCallback)};var WebExtAOBehavior={_attrs:{is_container:function(){return!Util.isNullOrUndefined(this._control)&&this._control.isContainer()},"logical name":function(){return this._getControlExtAttr("logical name")||this._getControlExtAttr("logical_name")},"cell id":function(msg){var funcGetCellElemName=this._control.getSettingVar("func_to_get_cell_elem");if(Util.isNullOrUndefined(funcGetCellElemName))return null;var row=msg._data["cell id"][0][0],col=msg._data["cell id"][0][1],ret=this._invokeHandlerOnControl(funcGetCellElemName,[row,col]);return"pass"===ret.status&&ret.data instanceof HTMLElement?content.kitsManager.createAO(ret.data,this._parentID).getID():null},innerhtml:function(){return this._elem.innerHTML.replace(/ _uft_custom_id="[0-9]+"/g,"")},outerhtml:function(){return this._elem.outerHTML.replace(/ _uft_custom_id="[0-9]+"/g,"")}},_helpers:{isLearnable:function(){return this._control._learnControl===ControlLearnType.Yes},_isCoreProperty:function(property){var bIsCoreProp=!1;switch(property){case"html tag":case"height":case"width":case"abs_x":case"abs_y":case"x":case"y":case"coords":case"rect":case"pos":case"screen_rect":case"real rect":case"real pos":bIsCoreProp=!0}return bIsCoreProp}}};SectionHandlersFactory.prototype={getSectionHandler:function(type){var sectionType=type||"javascript",handler=null;switch(sectionType){case"boolean":handler=new BoolSectionHandler;break;case"javascript":case"jscript":handler=new JScriptSectionHandler}return handler}},SectionHandlerBase.prototype={CONST_RESULT_TYPE_UNDEFINED:"UNDEFINED",CONST_RESULT_TYPE_BOOL:"BOOL",CONST_RESULT_TYPE_OBJECT:"OBJECT",initialize:function(sectionInfo,control,toolkit){return this._sectionInfo=sectionInfo,this._control=control,this._toolkit=toolkit,this._valid=this._initSectionHanlder(sectionInfo,control,toolkit),this._valid},_initSectionHanlder:function(){return!0},terminate:function(){},execute:function(element,args){var result={type:this.CONST_RESULT_TYPE_UNDEFINED,result:null};return this._valid&&this._executeSection(element,args,result),result},_executeSection:function(){},getControlSettings:function(name){var settingValue=null;return Util.isNullOrUndefined(this._control)||(settingValue=this._control.getSettingVar(name)),settingValue},getToolkitSettings:function(name){var settingValue=null;return Util.isNullOrUndefined(this._toolkit)||(settingValue=this._toolkit.getSettingVar(name)),settingValue}},JScriptSectionHandler.prototype=new SectionHandlerBase,JScriptSectionHandler.prototype.constructor=JScriptSectionHandler,JScriptSectionHandler.prototype._functionWrapperList=[],JScriptSectionHandler.prototype._initSectionHanlder=function(sectionInfo,control,toolkit){var getFileName=function(filename){if("string"==typeof filename){var splashIndex=filename.lastIndexOf("\\");return splashIndex=-1!==splashIndex?splashIndex+1:0,filename.slice(splashIndex)}return filename},result=!1;if(Util.isNullOrUndefined(toolkit))return result;for(;;){if(this._jsFileName=sectionInfo._file_name,!Util.isNullOrUndefined(this._jsFileName))break;if(this._jsFileName=this.getControlSettings("default_imp_file"),!Util.isNullOrUndefined(this._jsFileName))break;if(this._jsFileName=this.getToolkitSettings("default_imp_file"),!Util.isNullOrUndefined(this._jsFileName))break;return result}return this._jsFileName=getFileName(this._jsFileName),Util.isNullOrUndefined(sectionInfo._function)?result:(this._function=sectionInfo._function,this._toolkitCommonFileName=getFileName(this.getToolkitSettings("common_file")),result=!0)},JScriptSectionHandler.prototype._executeSection=function(element,args,result){if(!this._functionWrapperClassName.length){this._functionWrapperClassName=this._jsFileName.replace(".js",""),this._functionWrapperClassName+="FunctionWrapper";var index=this._getFunctionWrapperIndex(this._functionWrapperClassName);if(-1!==index)this._functionWrapper=this._functionWrapperList[index];else{var script=this._getFunctionScript();if(Util.isNullOrUndefined(script))return;this._functionWrapper=new FunctionWrapper(this._functionWrapperClassName,script),this._functionWrapperList.push(this._functionWrapper)}}var ret=PageProxy.invokeOnPage(this._functionWrapperClassName,element,this._functionWrapper._functionBody,this._function,args);Util.isNullOrUndefined(ret)||(ret.status===PageAgent.INVOKE_STATUS_PASS?(result.type=this.CONST_RESULT_TYPE_OBJECT,result.result=ret.data):(result.type=this.CONST_RESULT_TYPE_UNDEFINED,ret.data.type===PageAgent.INVOKE_ERROR_METHOD_NOT_FOUND?result.result={ErrorType:"MethodNotFound"}:result.result={ErrorType:"Error",ErrorDescription:ret.data.error}))},JScriptSectionHandler.prototype.terminate=function(){},JScriptSectionHandler.prototype._getFunctionWrapperIndex=function(functionName){return Util.arrayFindIndex(this._functionWrapperList,function(functionWrapper){return functionWrapper._functionName===functionName})},JScriptSectionHandler.prototype._getFunctionScript=function(){var script=this._toolkit.getJscript(this._qtpCommonFileName)||"";return Util.isNullOrUndefined(this._toolkitCommonFileName)||(script+=this._toolkit.getJscript(this._toolkitCommonFileName)||""),script+=this._toolkit.getJscript(this._jsFileName)||""},BoolSectionHandler.prototype=new SectionHandlerBase,BoolSectionHandler.prototype.constructor=BoolSectionHandler,BoolSectionHandler.prototype._initSectionHanlder=function(sectionInfo){if(!Util.isNullOrUndefined(sectionInfo._value)){switch(sectionInfo._value.toString().toLowerCase()){case"true":this._value=!0,this._valid=!0;break;case"false":this._value=!1,this._valid=!0}}return this._valid},BoolSectionHandler.prototype._executeSection=function(){var ret={};return ret.type=this.CONST_RESULT_TYPE_BOOL,ret.result=this._value,ret},BoolSectionHandler.prototype.terminate=function(){},QTPUtil.prototype={Alert:function(s){alert(s)},_dispatchEvent:function(op,data){var detail={};detail.op=op,detail.data=data;var event=document.createEvent("CustomEvent");event.initCustomEvent("_UFT_TOOLKIT_RESULT",!0,!0,detail);var result=window.dispatchEvent(event);_logger.debug("QTPUtil._dispatchEvent: dispatch event to page, result: "+result)},isHandlerRegistered:function(element,aoId,eventName){if(Util.isNullOrUndefined(element._QTPExtHandlerRegArray))return!1;var index=Util.arrayFindIndex(element._QTPExtHandlerRegArray,function(item){return RtIdUtils.IsRTIDEqual(item.WEB_PN_ID,aoId)}),exist=!1;return-1!==index&&-1!==element._QTPExtHandlerRegArray[index].eventTypes.indexOf(eventName)&&(exist=!0),exist},AddHandlerRegisteredInfo:function(element,aoId,eventName){element._QTPExtHandlerRegArray=element._QTPExtHandlerRegArray||[];var index=Util.arrayFindIndex(element._QTPExtHandlerRegArray,function(item){return RtIdUtils.IsRTIDEqual(item.WEB_PN_ID,aoId)});-1===index&&(element._QTPExtHandlerRegArray.push({WEB_PN_ID:aoId,eventTypes:[]}),index=0),element._QTPExtHandlerRegArray[index].eventTypes.push(eventName);var eventTypes=element._QTPExtHandlerRegArray[index].eventTypes;element.setAttribute("_uft_ext_events_hooked",JSON.stringify({events:eventTypes}))},RegisterForGesture:function(element,gestureName,handler,handlerParam){if(_logger.trace("QTPUtil.RegisterForGesture: started"),gestureName=gestureName.toLowerCase(),_logger.debug("QTPUtil.RegisterForGesture: gesture name: "+gestureName),PageAgent._activeScriptWrapper._aoId){var script=PageAgent._activeScriptWrapper,elem=PageAgent._activeScriptWrapper._elem,aoId=PageAgent._activeScriptWrapper._aoId,eventHandler=function(e){var params=[handlerParam,e];script.invoke(elem,handler,params,aoId)},eventType=this._gestureToCustomEventMapper(gestureName);if(!eventType)return void _logger.warn("cant add event listener for the following gesture :"+gestureName);this._updateGestureRegisterInfo(element,eventType,eventHandler),_logger.trace("QTPUtil.RegisterForGesture: add EventListener to element for the custom event - "+eventType),element.addEventListener(eventType,eventHandler)}},_updateGestureRegisterInfo:function(element,eventType,eventHandler){element._QTPExtGestureHandlerRegArray=element._QTPExtGestureHandlerRegArray||[],element._QTPExtGestureHandlerRegArray[eventType]&&element.removeEventListener(eventType,element._QTPExtGestureHandlerRegArray[eventType]),element._QTPExtGestureHandlerRegArray[eventType]=eventHandler},_gestureToCustomEventMapper:function(gesture){return gesture?"UFT_GESTURE_"+gesture.toUpperCase():""},RegisterForEvent:function(element,eventName,handler,handlerParam){if(_logger.trace("QTPUtil.RegisterForEvent: started"),eventName=eventName.toLowerCase(),PageAgent._activeScriptWrapper._aoId){var eventType=eventName.length>2&&"on"===eventName.substr(0,2)?eventName.slice(2):eventName;if(!this.isHandlerRegistered(element,PageAgent._activeScriptWrapper._aoId,eventName)){_logger.debug("QTPUtil.RegisterForEvent: event name: "+eventName);var script=PageAgent._activeScriptWrapper,elem=PageAgent._activeScriptWrapper._elem,aoId=PageAgent._activeScriptWrapper._aoId,eventHandler=function(e){var params=[handlerParam,e];script.invoke(elem,handler,params,aoId)}.bind(this);element.addEventListener(eventType,eventHandler,!0),this.AddHandlerRegisteredInfo(element,aoId,eventName)}}},Record:function(methodName,parameters,delay){if(Util.isNullOrUndefined(PageAgent._activeScriptWrapper._aoId))return void _logger.warn("Record data is not sent because there is no valid active ao ID.");var recordData={};recordData.methodName=methodName,recordData.parameters=parameters,recordData.delay=delay,recordData.WEB_PN_ID=PageAgent._activeScriptWrapper._aoId,this._dispatchEvent("Record",recordData)},_report:function(status,method,parameters,details,eventType){var reportData={};reportData.status=status,reportData.method=method,reportData.parameters=parameters,reportData.details=details,reportData.eventType=eventType,this._dispatchEvent("Report",reportData)},Report:function(status,method,parameters,details){this._report(status,method,parameters,details,"Replay")},ReportEvent:function(status,method,parameters,details){this._report(status,method,parameters,details,"User")},LogLine:function(text,severity,id,category){switch(severity){case 4:case 3:_logger.error(text);break;case 2:_logger.warn(text);break;case 1:_logger.info(text);break;case 0:_logger.debug(text);break;default:_logger.error(text)}},Wait:function(milliseconds){for(var start=(new Date).getTime(),expire=start+milliseconds;(new Date).getTime()<expire;);},GetBrowserType:function(){var browserTypeVersion=Util.browserApplicationVersion();return browserTypeVersion.slice(0,browserTypeVersion.lastIndexOf(" "))},GetBrowserVersion:function(){var broswerTypeVersion=Util.browserApplicationVersion();return broswerTypeVersion.slice(broswerTypeVersion.lastIndexOf(" ")+1)},IsFirefoxLegacyAgent:function(){return!1},ResolveAsyncCall:function(cookie,value){var param={cookie:cookie,data:value};this._dispatchEvent("AnswerAsyncCall",param)},RejectAsyncCall:function(cookie,error,line,file){var param={cookie:cookie,data:{errorMessage:error,errorLine:line,errorFile:file}};this._dispatchEvent("AnswerAsyncCall",param)}};var PageProxy={_activeAO:null,setActiveAO:function(ao){this._activeAO=ao},install:function(){this._logger=new LoggerUtil("Content.PageProxy"),window.addEventListener("_UFT_TOOLKIT_RESULT",this.onMessageFromPage.bind(this),!1),content.domSubscriber.startNamespace(),content.domSubscriber.addUtilityObject("ShadowDomUtil",ShadowDomUtil),content.domSubscriber.addUtilityObject("_QTPUtil",new QTPUtil),content.domSubscriber.addUtilityObject("PageAgent",PageAgent,{_UFT_INVOKE_REQUEST:"onInvokeRequest"}),content.domSubscriber.addScript("PageAgent._logger = _logger;"),content.domSubscriber.addFunction(ScriptWrapper),content.domSubscriber.addScript("window._uftext = {PageAgent: PageAgent, _QTPUtil: _QTPUtil};"),content.domSubscriber.endNamespace()},
onMessageFromPage:function(eventObj){var detail=Util.deepObjectClone(eventObj.detail),data=detail.data;switch(detail.op){case"Report":Util.isNullOrUndefined(this._activeAO)||this._activeAO.report(data.status,data.method,this._wrapParameters(data.parameters),data.details,data.eventType);break;case"Record":if(data=detail.data,data.parameters=this._wrapParameters(data.parameters),!Util.isNullOrUndefined(data.WEB_PN_ID)){var frameId=Util.shallowObjectClone(data.WEB_PN_ID);frameId.object=null;var msg=new Msg("WEBEXT_RECORD_EVENT",frameId,data);content.dispatcher.sendMessage(msg)}break;case"AnswerAsyncCall":var ret,cookie=data.cookie,result=data.data;ret=result&&result.errorMessage?{status:"fail",data:{ErrorType:"Error",ErrorDescription:result.errorMessage}}:{status:"pass",data:result},this.answerAsyncCall(cookie,ret);break;default:this._logger.warn("Unsupported Operation: "+detail.op)}},_wrapParameters:function(parameters){return[parameters]},invokeOnPage:function(key,elem,script,methodName,args){var detail={};detail.elemDOMId=elem.id,detail.key=key,detail.elemId=PageAgent.flagElement(elem),detail.script=script,detail.methodName=methodName,detail.args=args,detail.WEB_PN_ID=Util.isNullOrUndefined(this._activeAO)?null:this._activeAO.getID();var event=ContentUtils.createCrossOriginCustomEvent("_UFT_INVOKE_REQUEST",{detail:detail});window.dispatchEvent(event);var result=PageAgent.getResult(this._logger);return PageAgent.unFlagElement(elem),result},_asyncCallbacks:{},addAsyncCall:function(cookie,func){this._logger.info("addAsyncCall: adding callback with cookie :"+cookie),this._asyncCallbacks[cookie]=func},answerAsyncCall:function(cookie,result){this._asyncCallbacks[cookie]?(this._asyncCallbacks[cookie](result),delete this._asyncCallbacks[cookie]):this._logger.warn("answerAsyncCall: Not find call back associate with cookie ",cookie," result: ",result)}},PageAgent={_logger:null,_scriptwrappers:{},_activeScriptWrapper:null,registerScriptWrapper:function(key,scriptWrapper){this._scriptwrappers[key]=scriptWrapper},onInvokeRequest:function(eventObj){var detail=eventObj.detail,key=detail.key,scriptWrapper=this._scriptwrappers[key];if(scriptWrapper||(this._logger.info("create a new script wrapper."),this.evalCustomizedScriptWrapperInDom(key,detail.script),scriptWrapper=this._scriptwrappers[key]),!scriptWrapper)return void this._logger.error("onInvokeRequest: failed to evaluate script with key: "+key);var elemId=detail.elemId,elem=this.getElement(elemId);null==elem&&(elem=document.getElementById(detail.elemDOMId));var aoId=detail.WEB_PN_ID,res=scriptWrapper.invoke(elem,detail.methodName,detail.args,aoId);this.setResult(res),this._logger.info("invoke result: "+res)},wrap:function(obj){var result={special:!0};return obj instanceof HTMLElement?(result.type="element",result.id=this.flagElement(obj)):obj instanceof Window?result.type="window":obj instanceof Document?result.type="document":"function"==typeof window.Event&&obj instanceof window.Event?(result.type="event",result.data=this.wrapEvent(obj)):result=obj,result},unwrap:function(obj){var result=obj;if(null!==obj&&void 0!==obj&&obj.special)switch(obj.type){case"document":result=window.document;break;case"window":result=window;break;case"element":result=this.getElement(obj.id);break;case"event":result=this.unwrapEvent(obj.data)}else result=obj;return result},_getNextId:function(){var attr=document.documentElement.getAttribute("___nextUFTID");return attr=null===attr||void 0===attr?1:1+parseInt(attr,10),document.documentElement.setAttribute("___nextUFTID",attr),attr},keyCustomAttribute:"_UFT_CUSTOM_ID",flagElement:function(elem){var attribute=elem.getAttribute(this.keyCustomAttribute);return null!==attribute&&void 0!==attribute||(attribute=this._getNextId(),elem.setAttribute(this.keyCustomAttribute,attribute)),attribute},unFlagElement:function(elem){elem.removeAttribute(this.keyCustomAttribute)},getElement:function(id){var elements=ContentUtils.querySelectorAll(document,"["+this.keyCustomAttribute+'="'+id+'"]');return 0===elements.length?(this._logger.error("Failed to find element with custom id "+id),null):(elements.length>1&&this._logger.warn("more than one element matches the custom attribute id of "+id),elements[0])},_customResultAttributeKey:"__UFT__SYNC__RES",setResult:function(obj){document.documentElement.setAttribute(this._customResultAttributeKey,Util.jsonStringify(obj,_logger))},getResult:function(logger){var jsonStr=document.documentElement.getAttribute(this._customResultAttributeKey);if(!jsonStr)return void(logger&&logger.error("getResult, failed to get result JSON string from document element's attribute."));var jsonObj=JSON.parse(jsonStr);return jsonObj.status===PageAgent.INVOKE_STATUS_PASS&&(jsonObj.data=this.unwrap(jsonObj.data)),jsonObj},wrapEvent:function(eventObj){var obj={};for(var key in eventObj)obj[key]=this.wrap(eventObj[key]);return obj.eventPrototype=eventObj.constructor.name,Util.jsonStringify(obj,_logger)},unwrapEvent:function(eventStr){var o=JSON.parse(eventStr);for(var key in o)o[key]=this.unwrap(o[key]);return o},INVOKE_STATUS_PASS:"passed",INVOKE_STATUS_FAIL:"failed",INVOKE_ERROR_METHOD_NOT_FOUND:"MethodNotFound",INOVKE_ERROR_GENERAL:"GeneralERROR",evalCustomizedScriptWrapperInDom:function(key,script){var registerMethodHelper=function(){"function"==typeof METHODNAME&&(this._methods.METHODNAME=METHODNAME)},methodNameProcessor="",methodNames=this._extractMethodNames(script);this._logger.info("Methods extracted: "+methodNames.join(";")),methodNames.forEach(function(methodName){var specialized=Util.safeReplace(registerMethodHelper.toString(),/METHODNAME/g,methodName);methodNameProcessor+="("+specialized+").apply(this);\n"});var str=ScriptWrapper.toString();str=str.replace("#KEYPLACEHOLDER",key),str=Util.safeReplace(str,"//#METHODSPLACEHOLDER",methodNameProcessor),str=Util.safeReplace(str,"//#USERSCRIPTSPLACEHOLDER",script),str="( new "+str+"());",ContentUtils.evalInDocument(str)},_extractMethodNames:function(script){var f=document.createElement("iframe");document.body.appendChild(f);var oldMethods={};Object.getOwnPropertyNames(f.contentWindow).forEach(function(name){"function"==typeof f.contentWindow[name]&&(oldMethods[name]=f.contentWindow[name])}),ContentUtils.evalInDocument(script,f.contentDocument);var newProperties=Object.getOwnPropertyNames(f.contentWindow),candidates=newProperties.filter(function(name){return"function"==typeof f.contentWindow[name]&&f.contentWindow[name]!=oldMethods[name]});return document.body.removeChild(f),candidates}};LoggerUtilSettings.init();var content=null;!function(){function isDomReady(){return document&&document.body&&("none"!==document.body.style.display||"complete"===document.readyState)}function initFrame(){logger.info("initContent: prerequisites for initialization seem OK. Continue with initialization."),content.domSubscriber=new DomRequestSubscriber,content.kitsManager=new KitsManager,content.dispatcher=new ContentDispatcher,content.dispatcher.init(),content.rtidManager=new ObjectRTIDManager,content.frame.init()}function doOnDomReady(func){function executeOnDomReadyHelper(forceExecute){isFinished||(forceExecute||isDomReady()||++count*interval>1e4)&&(Util.clearInterval(intervalId),isFinished=!0,func())}var isFinished=!1,interval=500,count=0,intervalId=Util.setInterval(executeOnDomReadyHelper,interval);document.addEventListener("DOMContentLoaded",function(){executeOnDomReadyHelper(!0)})}var url=window.location?window.location.href:"",logger=new LoggerUtil("ContentLoader");if(content)return void logger.warn("initContent: Already initialized, url="+url);if(BrowserServices.executeOnLoad&&(isDomReady()?BrowserServices.executeOnLoad():doOnDomReady(BrowserServices.executeOnLoad)),!ContentUtils.isInjectable(window,logger)){var iFrameId="Unknown Id";try{iFrameId=window.frameElement?window.frameElement.id:""}catch(e){}return void logger.info("initContent: skip loading content for not injactable for url "+url+" - Frame Id: "+iFrameId)}logger.info("initContent: loading content. For "+(window.parent===window?"Page":"Frame")+" , on "+url),content={},logger.trace("initContent: creating Frame"),content.frame=new Frame,isDomReady()?initFrame():(logger.info("initContent: document is not ready. Waiting for DOMContentLoaded event."),doOnDomReady(initFrame))}(),window._QTP.ext=ext,window._QTP.content=content}}if(ShadowDomUtil={_supportShadowDom:function(){return"undefined"!=typeof ShadowRoot},_filteredElementTagName:["lightning"],_belongToFilteredElement:function(elem){var tagName=elem.tagName.toLowerCase();return this._filteredElementTagName.some(function(value){return tagName.includes(value)})},makeArray:function(seq){if(Array.isArray(seq))return seq;for(var array=new Array(seq.length),i=0;i<seq.length;i++)array[i]=seq[i];return array},_getEmptyLogger:function(){function nop(){}return{trace:nop,prettyTrace:nop,debug:nop,prettyDebug:nop,warn:nop,info:nop,error:nop}},_arrayReduce:function(array,iterateFunc,startVal){if(!Array.isArray(array))return null;var startIndex=0,cumulator=array[0];startVal&&(cumulator=startVal,indexOffset=1);for(var i=startIndex;i<array.length;i++)cumulator=iterateFunc(cumulator,array[i],i,array);return cumulator},isOpenShadowRoot:function(elem){return!!elem&&!!elem.shadowRoot&&"open"==elem.shadowRoot.mode&&!this._belongToFilteredElement(elem)},_findAllNoNestedShadowRoots:function(elem){elem=elem||document;var output=[];this.isOpenShadowRoot(elem)&&output.push(elem.shadowRoot);var childlist=this.makeArray(elem.querySelectorAll("*"));return output=this._arrayReduce(childlist,function(targetAOs,childElem){return this.isOpenShadowRoot(childElem)&&targetAOs.push(childElem.shadowRoot),targetAOs}.bind(this),output)},findAllShadowRoots:function(elem,logger){if(logger=logger||this._getEmptyLogger(),logger.trace("findAllShadowRoots: start "),elem=elem||document,!this._supportShadowDom())return[];var output=[],firstLayerShadowRoots=[];for(firstLayerShadowRoots=this._findAllNoNestedShadowRoots(elem),output=output.concat(firstLayerShadowRoots);firstLayerShadowRoots.length;){var tempArray=firstLayerShadowRoots;firstLayerShadowRoots=this._arrayReduce(tempArray,function(targetAOs,childElem){return targetAOs.concat(this._findAllNoNestedShadowRoots(childElem))}.bind(this),[]),output=output.concat(firstLayerShadowRoots)}return logger.trace("findAllShadowRoots: find ",output.length,"shadowRoots"),output},getElemInShadowRootByPoint:function(elem,point,logger){logger=logger||this._getEmptyLogger(),elem=elem||document;var target;return this.isOpenShadowRoot(elem)&&point?(target=elem.shadowRoot.elementFromPoint(point.x,point.y),target?this.getElemInShadowRootByPoint(target,point,logger):(logger.trace("getElemInShadowRootByPoint: get element with tag name ",elem.tagName),elem)):(logger.trace("getElemInShadowRootByPoint: get element with tag name ",elem.tagName),elem)},getParentShadowRoot:function(elem,logger){return logger=logger||this._getEmptyLogger(),elem&&this._supportShadowDom()?elem.constructor==ShadowRoot?(logger.trace("getParentShadowRoot: we find a parent shadow root here "),elem):this.getParentShadowRoot(elem.parentNode,logger):(logger.trace("getParentShadowRoot: the Dom element is not within a shadow root "),null)}},"undefined"==typeof isFrameSupported||!0===isFrameSupported){var frameLoopInjector,isHPMC=!!window._hpmcBridge;FrameLoopInjector.prototype={_framesNodeArr:[],_framesMonitorId:-1,_contextWin:null,_checkInterval:2e3,_injectFramesIfNeeded:function(){if(this._framesNodeArr=this._framesNodeArr.filter(function(frame){try{frame.src}catch(ex){return!1}return!!frame.contentWindow}),!this._framesNodeArr.length)return this._contextWin.clearInterval(this._framesMonitorId),void(this._framesMonitorId=-1);this._framesNodeArr.forEach(function(frame){isCrossDomainFrame(frame)||frame.contentWindow._QTP||injectAgentJs(frame.contentWindow)})},addFrametoMonitor:function(frame){frame&&(-1==this._framesNodeArr.indexOf(frame)&&this._framesNodeArr.push(frame),this._framesNodeArr.length&&-1===this._framesMonitorId&&(this._framesMonitorId=this._contextWin.setInterval(this._injectFramesIfNeeded.bind(this),this._checkInterval)))}},frameLoopInjector=new FrameLoopInjector(window),injectAgentJs(window)}else InjectUFTWebAgent()}();;
function injectSAPScripts() { 
   
window._QTP = window._QTP || {};
window._QTP.SAP = window._QTP.SAP || {};
window._QTP.SAP.version = "14.53.3798.2.r8cb02953";	
 
 
var sapMsg = 
{
    "_data": {
        "text": [
            "function get_property_value(property){return(new SAPUIButton).GetPropertyValue(property)}function ListenToEvents(){return(new SAPUIButton).RegisterForEvents(),!0}function OnClick(handlerParam,eventObj){return new SAPUIButton({element:_elem,isStandalone:!0,handlers:[new EventCallBack(\"click\",isMenuButton(_elem)?\"OpenMenu\":\"Click\",handlerParam)]}).OnClick(eventObj)}function OnSubmit(handlerParam,eventObj){return new SAPUIButton({element:_elem,isStandalone:!0,handlers:[new EventCallBack(\"submit\",\"Submit\",handlerParam)]}).OnSubmit(eventObj)}function OpenMenu(){return mClick(\"OpenMenu\")}function HoverTap(){return mClick(\"HoverTap\")}function mClick(type){return(new SAPUIButton).Click(type||\"Click\")}function Click(){return mClick(\"Click\")}function Submit(){return mClick(\"Submit\")}", 
            "function get_property_value(property){var calendar=SAPCalendarFactory();return\"date_yyyymmdd\"===property?calendar.GetDate():\"displayed date\"===property?calendar.GetValue():\"locale\"===property?calendar.GetLocale():calendar.GetPropertyValue(property)}function ListenToEvents(){return SAPCalendarFactory().RegisterForEvents(),!0}function OnFocus(handlerParam,eventObj){return SAPCalendarFactory().OnFocus(handlerParam,eventObj)}function OnSelect(handlerParam,eventObj){return SAPCalendarFactory().OnSelect(handlerParam,eventObj)}function OnBlur(handlerParam,eventObj){return SAPCalendarFactory().OnBlur(handlerParam,eventObj)}function OnActivate(handlerParam,eventObj){return SAPCalendarFactory().OnActivate(handlerParam,eventObj)}function OnClick(handlerParam,eventObj){return SAPCalendarFactory().OnClick(handlerParam,eventObj)}function SetDate(date){return SAPCalendarFactory().SetDate(date)}", 
            "function SAPUICarousel(config){null==config&&(config={}),void 0==config.handlers&&(config.handlers=defaultCarouselEventHandlers),void 0==config.type&&(config.type=SAPUI5ControlTypeId.CAROUSEL),void 0==config.name&&(config.name=SAPUI5ControlName.CAROUSEL),SAPUI5Control.call(this,config)}function get_property_value(property){return(new SAPUICarousel).GetPropertyValue(property)}function ListenToEvents(){return(new SAPUICarousel).RegisterForEvents(),!0}function OnClick(handlerParam,eventObj){return(new SAPUICarousel).OnClick(eventObj)}function onSwipeGesture(handlerParam,eventObj){if(eventObj&&eventObj.detail){return(new SAPUICarousel).OnSwipe(eventObj.detail)}}function Next(){return(new SAPUICarousel).Next()}function Previous(){return(new SAPUICarousel).Previous()}var defaultCarouselEventHandlers=[new EventCallBack(\"click\",\"OnClick\",[])],CarouselMethods={Next:\"Next\",Previous:\"Previous\"};SAPUICarousel.InheritsFrom(SAPUI5Control),SAPUICarousel.prototype.GetName=function(){this.CheckNullElement();var rc=null,elem=this.Element();return rc||(rc=window._uft.$(elem).attr(\"title\")),rc||(rc=\"\"),rc},SAPUICarousel.prototype.ShouldTargetIgnoreEvent=function(eventObj){var element=getTargetObjectFromEvent(eventObj);return!!isDisabled(element)||(!!isReadOnly(element)||!!isInvalid(element))},SAPUICarousel.prototype.GetCarouselInputElement=function(eventObj){return eventObj?getTargetObjectFromEvent(eventObj):null},SAPUICarousel.prototype.OnSwipe=function(eventObj){return\"moveRight\"==eventObj.direction?this.Record(CarouselMethods.Previous):\"moveLeft\"==eventObj.direction&&this.Record(CarouselMethods.Next),!0},SAPUICarousel.prototype.OnClick=function(eventObj){if(this.ShouldIgnoreEvent(eventObj))return!0;if(this.ShouldTargetIgnoreEvent(eventObj))return!0;var rc=[],method=null,trgt=this.GetCarouselInputElement(eventObj);return this.IsUi()?isElementOfClass(trgt,\"DIV\",\"sapUiCrslPrevBtn\")?method=CarouselMethods.Previous:isElementOfClass(trgt,\"DIV\",\"sapUiCrslNextBtn\")&&(method=CarouselMethods.Next):this.IsMobile()&&(isElementOfClass(trgt,\"A\",\"sapMCrslPrev\")||window._uft.$(trgt).parents(\"A.sapMCrslPrev\").get(0)?method=CarouselMethods.Previous:(isElementOfClass(trgt,\"A\",\"sapMCrslNext\")||window._uft.$(trgt).parents(\"A.sapMCrslNext\").get(0))&&(method=CarouselMethods.Next)),null!==method&&(this.Record(method),rc[0]=new EventCallBack(\"click\",method,[])),!!this.IsStandalone()||rc},SAPUICarousel.prototype.RegisterForEvents=function(){var element=this.Element(),prevBtn=null,nextBtn=null;this.IsUi()?(prevBtn=window._uft.$(element).find(\"DIV.sapUiCrslPrevBtn\").get(0),nextBtn=window._uft.$(element).find(\"DIV.sapUiCrslNextBtn\").get(0)):this.IsMobile()&&(prevBtn=window._uft.$(element).find(\"A.sapMCrslPrev\").get(0),nextBtn=window._uft.$(element).find(\"A.sapMCrslNext\").get(0)),DeviceType.IsMobile()&&_control.RegisterElementToEvent(this.Element(),\"swipe\",\"onSwipeGesture\"),null!==prevBtn&&this.RegisterClickEvent(prevBtn),null!==nextBtn&&this.RegisterClickEvent(nextBtn)},SAPUICarousel.prototype.RegisterClickEvent=function(innerCtrl){if(!innerCtrl||null===innerCtrl||void 0===innerCtrl)return!1;var handler=new EventCallBack(\"click\",\"OnClick\",innerCtrl);if(new SAPUI5Control({element:innerCtrl,isStandalone:!1,handlers:[handler]}).RegisterForEvents(),this.IsMobile()){var spanElem=window._uft.$(innerCtrl).find(\"span\").get(0);_control.RegisterElementToEvent(spanElem,\"click\",\"DummyHandler\")}return!0},SAPUICarousel.prototype.GetPropertyValue=function(property){return\"items count\"===property?this.GetItems():\"orientation\"===property?this.GetOrientation():SAPUI5Control.prototype.GetPropertyValue.call(this,property)},SAPUICarousel.prototype.GetOrientation=function(){var coreElement=this.GetCoreElement();return null!==coreElement&&coreElement.getOrientation?coreElement.getOrientation():\" \"},SAPUICarousel.prototype.GetItems=function(){var rc=0;if(this.IsUi()){var ul=window._uft.$(this.Element()).find(\"UL[role='listbox']\").get(0);if(null!==ul&&void 0!==ul){var li=window._uft.$(ul).find(\"LI\");null!==li&&void 0!==li&&(rc=li.length)}}else if(this.IsMobile()){var item=window._uft.$(this.Element()).find(\"DIV.sapMCrslItem\");null!==item&&void 0!==item&&(rc=item.length)}return rc},SAPUICarousel.prototype.Next=function(){return this.Navigate(CarouselMethods.Next)},SAPUICarousel.prototype.Previous=function(){return this.Navigate(CarouselMethods.Previous)},SAPUICarousel.prototype.Navigate=function(method){method||(method=CarouselMethods.Next);var element=this.Element();window._uft.$(element).focus();var innerCtrl=null,classNameForSearch=null;if(DeviceType.IsMobile()){var c=this.GetCoreElement();return method==CarouselMethods.Previous&&c&&c.previous?(c.previous(),this.Report(micDone,method),!0):method==CarouselMethods.Next&&c&&c.next?(c.next(),this.Report(micDone,method),!0):(this.Report(micFail,method),!1)}if(this.IsUi()?(classNameForSearch=method==CarouselMethods.Previous?\"sapUiCrslPrevBtn\":\"sapUiCrslNextBtn\",innerCtrl=window._uft.$(element).find(\"DIV.\"+classNameForSearch).get(0)):this.IsMobile()&&(classNameForSearch=method==CarouselMethods.Previous?\"sapMCrslPrev\":\"sapMCrslNext\",innerCtrl=window._uft.$(element).find(\"A.\"+classNameForSearch).get(0)),null!==innerCtrl){return new SAPUI5Control({element:innerCtrl,isStandalone:!1}).Click(method),this.Report(micDone,method),!0}return this.Report(micFail,method),!1};", 
            "function SAPUICheckBoxFactory(){return isTriCheckBox(_elem)?new SAPUITriCheckBox:new SAPUICheckBox}function get_property_value(property){return SAPUICheckBoxFactory().GetPropertyValue(property)}function ListenToEvents(){var ctrl=SAPUICheckBoxFactory(),handler=new EventCallBack(\"click\",\"OnClick\",[]);return ctrl.RegisterForEvents([handler]),!0}function OnClick(handlerParam,eventObj){var ctrl=SAPUICheckBoxFactory();return ctrl.SetEventHandler(\"click\",\"Set\",[ctrl.GetSetState()]),ctrl.OnClick(eventObj)}function Set(state){return!!state&&(\"string\"==typeof state&&SAPUICheckBoxFactory().SetState(\"Set\",state))}", 
            "function dateToYMD(date){if(\"Invalid Date\"==date)return\"\";var d=date.getDate(),m=date.getMonth()+1;return\"\"+date.getFullYear()+(m<=9?\"0\"+m:m)+(d<=9?\"0\"+d:d)}function ValidateYMDFormat(dateStr){if(8!==dateStr.length)return!1;var year=parseInt(dateStr.slice(0,4),10),day=parseInt(dateStr.slice(6,8),10),month=parseInt(dateStr.slice(4,6),10);return!(isNaN(year)||isNaN(day)||isNaN(month)||day<=0||day>31||month<=0||month>12)}function DummyHandler(param,eventObj){return!0}function EventCallBack(eventStr,callback,callbackParams){switch(arguments.length){case 0:eventStr=\"click\";case 1:callback=\"OnClick\";case 2:callbackParams=new Array}this.m_event=eventStr,this.m_callback=callback,this.m_parameters=callbackParams}function SAPUI5ControlConfig(){this.element=null,this.isStandalone=!0,this.handlers=[],this.type=SAPUI5ControlTypeId.UNKNOWN,this.name=SAPUI5ControlName.UNKNOWN}function SAPUI5Control(config){null==config&&(config={}),void 0===config.element&&\"undefined\"!=typeof _elem&&(config.element=_elem),void 0===config.isStandalone&&(config.isStandalone=!0),void 0===config.handlers&&(config.handlers=[]),void 0===config.type&&(config.type=SAPUI5ControlTypeId.UNKNOWN),void 0===config.name&&(config.name=SAPUI5ControlName.UNKNOWN),this.m_elementDOM=config.element,this.m_isStandalone=config.isStandalone,this.m_controlType=config.type,this.m_controlName=config.name,this.m_eventsHandlers=config.handlers}function getCoreFromElement(elem){try{var rc=window.sap.ui.getCore();return null!=rc&&(rc=rc.byId(window._uft.$(elem).attr(\"id\"))),rc}catch(err){return null}}function SAPUIButton(config){null==config&&(config={}),void 0==config.handlers&&(config.handlers=defaultButtonEventHandlers),void 0==config.type&&(config.type=SAPUI5ControlTypeId.BUTTON),void 0==config.name&&(config.name=SAPUI5ControlName.BUTTON),SAPUI5Control.call(this,config)}function SAPUIToggleButton(config){null==config&&(config={}),void 0==config.handlers&&(config.handlers=defaultToggleButtonEventHandlers),void 0==config.type&&(config.type=SAPUI5ControlTypeId.TOGGLEBUTTON),void 0==config.name&&(config.name=SAPUI5ControlName.TOGGLEBUTTON),SAPUI5Control.call(this,config)}function SAPUIRadioGroup(config){null==config&&(config={}),void 0===config.handlers&&(config.handlers=defaultRadioGroupEventHandlers),void 0===config.type&&(config.type=SAPUI5ControlTypeId.RADIOGROUP),void 0===config.name&&(config.name=SAPUI5ControlName.RADIOGROUP),SAPUI5Control.call(this,config)}function SAPUILink(config){null==config&&(config={}),void 0==config.handlers&&(config.handlers=defaulLinkEventHandlers),void 0==config.type&&(config.type=SAPUI5ControlTypeId.LINK),void 0==config.name&&(config.name=SAPUI5ControlName.LINK),SAPUI5Control.call(this,config)}function SAPUICheckBox(config){null==config&&(config={}),void 0==config.handlers&&(config.handlers=defaulCheckBoxEventHandlers),void 0==config.type&&(config.type=SAPUI5ControlTypeId.CHECKBOX),void 0==config.name&&(config.name=SAPUI5ControlName.CHECKBOX),SAPUI5Control.call(this,config)}function SAPUITriCheckBox(config){null==config&&(config={}),void 0==config.handlers&&(config.handlers=defaulCheckBoxEventHandlers),void 0==config.type&&(config.type=SAPUI5ControlTypeId.CHECKBOX),void 0==config.name&&(config.name=SAPUI5ControlName.CHECKBOX),SAPUI5Control.call(this,config)}function SAPUIRadioButton(config){null==config&&(config={}),void 0==config.handlers&&(config.handlers=defaulRadioButtonEventHandlers),void 0==config.type&&(config.type=SAPUI5ControlTypeId.RADIOBUTTON),void 0==config.name&&(config.name=SAPUI5ControlName.RADIOBUTTON),SAPUI5Control.call(this,config)}function SAPUIRadioButtonSemaphore(){this.elementId=null,this.recorded=!1}function SAPUIPaginator(config){null==config&&(config={}),void 0===config.handlers&&(config.handlers=defaultPaginatorEventHandlers),void 0===config.type&&(config.type=SAPUI5ControlTypeId.PAGINATOR),void 0===config.name&&(config.name=SAPUI5ControlName.PAGINATOR),SAPUI5Control.call(this,config)}function HTMLElemArrayToString(HTMLElemArray){for(var ElemArrayAsString=new Array,len=HTMLElemArray.length,i=0;i<len;i++)ElemArrayAsString.push(window._uft.$(HTMLElemArray[i]).text());return ElemArrayAsString.join(\";\")}function preventReplayOnDisabledControl(action){if(get_property_value(\"disabled\"))throw _util.Report(micFail,action,toSafeArray(new Array),\"Cannot Replay On Disabled Control\"),\"Cannot Replay On Disabled Control\";if(get_property_value(\"readonly\"))throw _util.Report(micFail,action,toSafeArray(new Array),\"Cannot Replay On Disabled Control\"),\"Cannot Replay On Disabled Control\";return!0}function getTargetObjectFromEvent(eventObj){return eventObj.target||eventObj.srcElement||eventObj.originalTarget}function isLeftMouseButtonEvent(eventObj){return _util.GetBrowserType()!=QtpConstants.IE||!!eventObj&&(null!=eventObj.button&&void 0!=eventObj.button&&eventObj.button===QtpConstants.LEFT_BUTTON())}function shouldIgnoreEvent(eventObj){return!1===isLeftMouseButtonEvent(eventObj)||(!!get_property_value(\"disabled\")||!!get_property_value(\"readonly\"))}function isDisabled(element){return!element||checkElementAttribute(element,\"aria-disabled\",SAPUI5ControlName.UNKNOWN)}function isReadOnly(element){return!element||checkElementAttribute(element,\"aria-readonly\",SAPUI5ControlName.UNKNOWN)}function isInvalid(element){return!element||checkElementAttribute(element,\"aria-invalid\",SAPUI5ControlName.UNKNOWN)}function myTrace(text,severity,Id,category){if(3===window.mytrace&&(category||(category=0),Id||(Id=0),severity||(severity=LogSeverity_Success),void 0!==window.console&&null!==window.console))switch(severity){case LogSeverity_Error:case LogSeverity_Failure:window.console.error(text);break;case LogSeverity_Warning:window.console.warn(text);break;case LogSeverity_Information:window.console.info(text);break;case LogSeverity_Success:default:window.console.log(text)}return!0}function MessageClickListener(oEvent){var oMessage=oEvent.getParameter(\"message\");window.console.log(\"Message selected: \"+oMessage.getText())}function myDebug(level){level}function toNumber(numberIn,convertNonIndex){var rc=null;if(\"number\"==typeof numberIn)rc=numberIn;else if(\"string\"==typeof numberIn||\"object\"==typeof numberIn&&numberIn&&numberIn.constructor===String){var nmbString=trim(numberIn);if(!convertNonIndex&&(rc=parseInt(nmbString,10),!isNaN(rc)&&nmbString.length===rc.toString().length))return rc;rc=null;var regExp=/^#(\\d+)$/,matchResult=regExp.exec(nmbString);null!=matchResult&&(nmbString=matchResult[1],rc=parseInt(nmbString,10),isNaN(rc)&&(rc=null))}return rc}function getElementInnerText(element){return element.innerText||element.textContent}function getControlText(element){element||(element=_elem);var rc=null;switch(element.tagName){case\"input\":case\"INPUT\":case\"textarea\":case\"TEXTAREA\":rc=window._uft.$(element).val();break;case\"script\":case\"SCRIPT\":rc=window._uft.$(element).html();break;default:rc=window._uft.$(element).text()}return rc}function getIndex1based(liElement){if(null==liElement)return null;var rc=-1;switch(liElement.tagName){case\"li\":case\"LI\":var rc=window._uft.$(liElement).index();rc++}return rc}function checkElementAttribute(elem,attrName,className){if(!elem)return!1;if(!attrName)return!1;var rc=!1;className||(className=\"SAPUI5 control\"+elem.id);var attrVal=window._uft.$(elem).attr(attrName);return void 0!=attrVal&&(rc=\"true\"==attrVal),rc}function checkElementAttributeValue(elem,attrName,attrValue,caseSensitive,className){if(!elem)return!1;switch(arguments.length){case 0:case 1:case 2:return!1;case 3:caseSensitive=!1;case 4:className=\"SAPUI5 control\"+elem.id}var rc=!1,attrVal=window._uft.$(elem).attr(attrName);return void 0!=attrVal&&(rc=caseSensitive?attrVal===attrValue:attrVal.toLowerCase()===attrValue.toLowerCase()),rc}function getElementAttributeValue(elem,attrName,className){switch(arguments.length){case 0:case 1:return!1;case 2:className=\"SAPUI5 control\"}var attrVal=window._uft.$(elem).attr(attrName);return void 0==attrVal&&(attrVal=null),attrVal}function isButton(elem){return elem||(elem=_elem),isUi(elem)?!isToggleButton(elem)&&isElementOfClass(elem,\"BUTTON\",\"sapUiBtn\"):!!isMobile(elem)&&(!isMobileToggleButton(elem)&&(isElementOfClass(elem,\"BUTTON\",\"sapMBtn\")||isElementOfClass(elem,\"DIV\",\"sapMSltIconOnly\")||isElementOfClass(elem,\"LI\",\"sapMSegBBtn\")))}function isMobileToggleButton(elem){elem||(elem=_elem);var rc=!1;if(\"BUTTON\"==elem.tagName){var sapMRegex=/^sapMBtn/;rc=testClassName(elem.className,sapMRegex)&&elem.firstElementChild.hasAttribute(\"pressed\")}return rc}function isToggleButton(elem){elem||(elem=_elem);var rc=!1,tag=elem.tagName,type=elem.type;if(\"BUTTON\"==tag){var classNm=new String(elem.className);classNm=trim(classNm);for(var nmList=classNm.split(\" \"),len=nmList.length,i=0;i<len;i++)if(\"sapUiToggleBtn\"==nmList[i]){rc=!0;break}}return rc}function isCloseButton(elem){var rc=!1;elem||(elem=_elem);var classNm=new String(elem.className),tag=elem.tagName,type=elem.type;classNm=trim(classNm);var nmList=classNm.split(\" \");if(\"BUTTON\"==tag&&\"button\"==type)for(var len=nmList.length,i=0;i<len;i++)if(\"sapUiTabClose\"==nmList[i]){rc=!0;break}return rc}function isMenuButton(elem){return elem||(elem=_elem),isElementOfClass(elem,\"BUTTON\",\"sapUiMenuButton\")||isElementOfClass(elem,\"BUTTON\",\"dropDownButtonImage\")}function isCheckBox(elem){return elem||(elem=_elem),isElementOfClass(elem,\"SPAN\",\"sapUiCb\")||isElementOfClass(elem,\"DIV\",\"sapMCb\")}function isLink(elem){return elem||(elem=_elem),!0!==isPaginatorButton(elem)&&(isElementOfClass(elem,\"A\",\"sapUiLnk\",!0)||isElementOfClass(elem,\"A\",\"sapMLnk\",!0))}function isPaginatorButton(elem){elem||(elem=_elem);var rc=!1;return!1===rc&&(rc=isElementOfClass(elem,\"A\",\"sapUiPagBtn\")),!1===rc&&(rc=isElementOfClass(elem,\"LI\",\"sapUiPagPage\")),rc}function isTable(element){return element||(element=_elem),isElementOfClass(element,\"DIV\",\"sapUiTable\")}function isTablePaginator(element){return element||(element=_elem),isElementOfClass(element,\"DIV\",\"sapUiTablePaginator\")}function isTableCnt(element){return element||(element=_elem),isElementOfClass(element,\"DIV\",\"sapUiTableCnt\")}function isTree(element){return element||(element=_elem),isElementOfClass(element,\"DIV\",\"sapUiTree\")}function isTextEdit(element){element||(element=_elem);var rc=!1;return isElementOfClass(element,\"TEXTAREA\",\"sapUiTf\")||isElementOfClass(element,\"TEXTAREA\",\"sapMTextAreaInner\")?rc=!0:(isElementOfClass(element,\"INPUT\",\"sapUiTf\")||isElementOfClass(element,\"INPUT\",\"sapMInputBaseInner\"))&&\"password\"!=element.type?rc=!0:isElementOfClass(element,\"INPUT\",\"sapMSFI\")&&(rc=!0),rc}function isMTextEdit(element){element||(element=_elem);var rc=!1;return isElementOfClass(element,\"DIV\",\"sapMInput\")&&(rc=!0),rc}function isCalendar(element){element||(element=_elem);var rc=!1;return isElementOfClass(element,\"DIV\",\"sapMDP\")?rc=!0:isElementOfClass(element,\"DIV\",\"sapUiTfCombo\")?rc=window._uft.$(element).find(\"BUTTON.ui-datepicker-trigger\").length>0||window._uft.$(element).find(\"DIV.sapUiTfDateIcon\").length>0:isElementOfClass(element,\"DIV\",\"sapUiCal\")?rc=!0:isElementOfClass(element,\"DIV\",\"sapMInputBaseHeightMargin\")&&!isElementOfClass(element,\"DIV\",\"sapMInput\")&&(rc=!0),rc}function isListBox(elem){elem||(elem=_elem);var tag=elem.tagName,type=elem.type;return isElementOfClass(elem,\"DIV\",\"sapUiLbx\")||isElementOfClass(elem,\"DIV\",\"sapMList\")&&!isElementOfClass(elem,\"DIV\",\"sapMSltList\")}function isComboBox(elem){return elem||(elem=_elem),\"combobox\"==window._uft.$(elem).attr(\"role\")||!!isElementOfClass(elem,\"DIV\",\"sapMComboBox\")}function isTabStrip(elem){return elem||(elem=_elem),isElementOfClass(elem,\"DIV\",\"sapUiTabBar\")}function isRatingIndicator(elem){return elem||(elem=_elem),isElementOfClass(elem,\"DIV\",\"sapUiRating\")||isElementOfClass(elem,\"DIV\",\"sapMRI\")}function isPaginator(elem){return elem||(elem=_elem),isElementOfClass(elem,\"DIV\",\"sapUiPag\")}function isRadioButton(elem){elem||(elem=_elem);var rc=!1;return isUi(elem)?rc=isElementOfClass(elem,\"SPAN\",\"sapUiRb\"):isMobile(elem)&&(rc=isElementOfClass(elem,\"DIV\",\"sapMRb\")),rc}function isClickableLabel(elem){if(elem||(elem=_elem),isMobile(elem))return!1;for(var parent=elem.parentElement,i=0;parent&&i<5;){if(isElementOfClass(parent,\"DIV\",\"sapUiUx3TPContent\"))return!0;parent=parent.parentElement,i++}return!1}function isNotComboBoxVisbleChildList(elem){elem||(elem=_elem);var valPopup=window._uft.$(elem).attr(\"data-sap-ui-popup\"),elemParent=elem.parentNode,parentPopupContainerSapUiArea=window._uft.$(elemParent).attr(\"data-sap-ui-area\");return null==valPopup&&\"sap-ui-static\"!==parentPopupContainerSapUiArea}function objectToArrayTransform(elemsObject){return window._uft.$.map(elemsObject,function(value,index){return value})}function isElementOfClass(elem,tagName,className,ifSubstring,roleString){if(!elem)return!1;switch(arguments.length){case 0:case 1:case 2:return!1;case 3:ifSubstring=!1}var rc=!1,tag=elem.tagName,type=elem.type;if(tag===tagName){if(!0===ifSubstring){var classNm=new String(elem.className);classNm=trim(classNm);for(var nmList=classNm.split(\" \"),len=nmList.length,i=0;i<len;i++){if(-1!=new String(nmList[i]).indexOf(className)){rc=!0;break}}}else try{void 0!==window._uft.$?rc=void 0!==window._uft.$(elem).hasClass&&window._uft.$(elem).hasClass(className):void 0!==window._uft.jQuery&&(rc=void 0!==window._uft.jQuery(elem).hasClass&&window._uft.jQuery(elem).hasClass(className),myTrace(\" jQuery version: \"+_uft.jQuery.fn.jquery))}catch(err){myTrace(\"isElementOfClass Error Description: \"+err.message,LogSeverity_Error)}if(roleString)return rc&&roleString===elem.getAttribute(\"role\")}return rc}function testClassName(className,regExp){var rc=!1;switch(arguments.length){case 0:case 1:return!1}var classNm=new String(className);classNm=trim(classNm);for(var nmList=classNm.split(\" \"),len=nmList.length,i=0;i<len&&!0!==(rc=regExp.test(nmList[i]));i++);return rc}function isMobile(elem){switch(arguments.length){case 0:return!1}var sapMRegex=/^sapM/;return testClassName(elem.className,sapMRegex)}function isFioriControl(elem){return isMobile(elem)}function isUi(elem){if(isMobile(elem))return!1;switch(arguments.length){case 0:return!1}var sapUiRegex=/^sapUi/;return testClassName(elem.className,sapUiRegex)}function isTriCheckBox(elem){switch(arguments.length){case 0:return!1}var triCheckBoxRegex=/sapUiTriCb/;return testClassName(elem.className,triCheckBoxRegex)}function ClickElement(element){_util.GetBrowserType(),QtpConstants.IE,_control.ReplayClick(element)}function SAPUIList(config){null==config&&(config={}),void 0===config.handlers&&(config.handlers=defaultListBoxEventHandlers),void 0===config.type&&(config.type=SAPUI5ControlTypeId.LIST),void 0===config.name&&(config.name=SAPUI5ControlName.LIST),SAPUI5Control.call(this,config)}function SAPMenuFactory(config){var textEdit;return textEdit=isMobile(_elem)?new SAPMMenu(config):new SAPUIMenu(config)}function SAPUIMenu(config){null==config&&(config={}),void 0===config.handlers&&(config.handlers=defaultListBoxEventHandlers),void 0===config.type&&(config.type=SAPUI5ControlTypeId.MENU),void 0===config.name&&(config.name=SAPUI5ControlName.MENU),SAPUI5Control.call(this,config)}function SAPMMenu(config){null==config&&(config={}),void 0===config.handlers&&(config.handlers=defaultListBoxEventHandlers),void 0===config.type&&(config.type=SAPUI5ControlTypeId.MENU),void 0===config.name&&(config.name=SAPUI5ControlName.MENU),SAPUI5Control.call(this,config)}function SAPTextEditFactory(config){var textEdit;return textEdit=isMobile(_elem)?new SAPMTextEdit(config):new SAPUITextEdit(config)}function SAPUITextEdit(config){null==config&&(config={}),void 0===config.handlers&&(config.handlers=defaultTextEditEventHandlers),void 0===config.type&&(config.type=SAPUI5ControlTypeId.TEXTEDIT),void 0===config.name&&(config.name=SAPUI5ControlName.TEXTEDIT),void 0===config.handlerForButton&&(config.handlerForButton=defaultTextEditEventHandlerForButton),void 0===config.handlerForOptions&&(config.handlerForOptions=defaultTextEditEventHandlerForOptions),this.m_handlerForButton=config.handlerForButton,this.m_handlerForOptions=config.handlerForOptions,SAPUI5Control.call(this,config)}function SAPMTextEdit(config){null==config&&(config={}),void 0===config.handlers&&(config.handlers=defaultTextEditEventHandlers),void 0===config.type&&(config.type=SAPUI5ControlTypeId.TEXTEDIT),void 0===config.name&&(config.name=SAPUI5ControlName.TEXTEDIT),void 0===config.handlerForButton&&(config.handlerForButton=defaultTextEditEventHandlerForButton),this.m_handlerForButton=config.handlerForButton,SAPUI5Control.call(this,config)}function SAPUICalendar(config){null==config&&(config={}),void 0===config.handlers&&(config.handlers=defaulCalendarEventHandlers),void 0===config.type&&(config.type=SAPUI5ControlTypeId.CALENDAR),void 0===config.name&&(config.name=SAPUI5ControlName.CALENDAR),SAPUI5Control.call(this,config)}function SAPMCalendar(config){null==config&&(config={}),void 0===config.handlers&&(config.handlers=defaulCalendarEventHandlers),void 0===config.type&&(config.type=SAPUI5ControlTypeId.CALENDAR),void 0===config.name&&(config.name=SAPUI5ControlName.CALENDAR),SAPUI5Control.call(this,config)}function SAPCalendarFactory(config){var calendarElement;return config&&(calendarElement=config.element),isMobile(calendarElement||_elem)?new SAPMCalendar(config):new SAPUICalendar(config)}function SAPUILabel(config){null==config&&(config={}),void 0===config.handlers&&(config.handlers=defaulLabelEventHandlers),void 0===config.type&&(config.type=SAPUI5ControlTypeId.LABEL),void 0===config.name&&(config.name=SAPUI5ControlName.LABEL),SAPUI5Control.call(this,config)}function SAPUIRatingIndicator(config){null==config&&(config={}),void 0===config.handlers&&(config.handlers=defaultRatingIndicatorEventHandlers),void 0===config.type&&(config.type=SAPUI5ControlTypeId.RATINGINDICATOR),void 0===config.name&&(config.name=SAPUI5ControlName.RATINGINDICATOR),SAPUI5Control.call(this,config)}var SAPUI5_CATEGORY=1,SAPUI5_BUTTON_CATEGORY=2,SAPUI5_TOGGLEBUTTON_CATEGORY=3,SAPUI5_RADIOBUTTON_CATEGORY=4,SAPUI5_CHECKBOX_CATEGORY=5,SAPUI5_TABSTRIP_CATEGORY=6,SAPUI5_TABLE_CATEGORY=7,SAPUI5_LINK_CATEGORY=8,SAPUI5_TEXTEDIT_CATEGORY=9,SAPUI5_PASSWORDFIELD_CATEGORY=10,SAPUI5_TEXTAREA_CATEGORY=11,SAPUI5_LIST_CATEGORY=12,SAPUI5_LISTITEM_CATEGORY=13,SAPUI5_PAGINATOR_CATEGORY=14,SAPUI5_RADIOGROUP_CATEGORY=15,SAPUI5_TREE_CATEGORY=16,SAPUI5_MENU_CATEGORY=17,SAPUI5_MENUBAR_CATEGORY=18,SAPUI5_CALENDAR_CATEGORY=19,SAPUI5_LABEL_CATEGORY=20,SAPUI5_CAROUSEL_CATEGORY=21,SAPUI5_NOTIFICATIONBAR_CATEGORY=22,SAPUI5_DIALOG_CATEGORY=23,SAPUI5_TOOLBAR_CATEGORY=24,SAPUI5_FACETFILTER_CATEGORY=25,SAPUI5_ACCORDION_CATEGORY=26,SAPUI5_ROWREPEATER_CATEGORY=27,SAPUI5_RATINGINDICATOR_CATEGORY=28,SAPUI5_ROADMAP_CATEGORY=29,SAPUI5_TILE_CATEGORY=30,classIdentification={tag:\"\",className:\"\",handle:\"\",handleParam:\"\"},SAPUI5ControlName={UNKNOWN:\"UNKNOWN\",BUTTON:\"SAPUIButton\",TOGGLEBUTTON:\"SAPUIToggleButton\",RADIOBUTTON:\"SAPUIRadioButton\",CHECKBOX:\"SAPUICheckBox\",TABSTRIP:\"SAPUITabStrip\",TABLE:\"SAPUITable\",LINK:\"SAPUILink\",TEXTEDIT:\"SAPUITextEdit\",PASSWORD:\"SAPUIPassword\",TEXTAREA:\"SAPUITextArea\",LIST:\"SAPUIList\",LISTITEM:\"SAPUIListItem\",PAGINATOR:\"SAPUIPaginator\",RADIOGROUP:\"SAPUIRadioGroup\",TREE:\"SAPUITree\",MENU:\"SAPUIMenu\",MENUBAR:\"SAPUIMenuBar\",CALENDAR:\"SAPUICalendar\",DATEPICKER:\"SAPUIDatePicker\",DateTimeInput:\"SAPUIDateTimeInput\",LABEL:\"SAPUILabel\",CAROUSEL:\"SAPUICarousel\",NOTIFICATIONBAR:\"SAPUINotificationBar\",DIALOG:\"SAPUIDialog\",TOOLBAR:\"SAPUIToolbar\",FACETFILTER:\"SAPUIFacetFilter\",ACCORDION:\"SAPUIAccordion\",ROWREPEATER:\"SAPUIRowRepeater\",RATINGINDICATOR:\"SAPUIRaitingIndicator\",ROADMAP:\"SAPUIRoadMap\",TILE:\"SAPUITile\",HEADER:\"SAPUIHeader\",DUMMY:\"SAPUIDummy\"},SAPUI5ControlTypeId={UNKNOWN:0,BUTTON:1,TOGGLEBUTTON:2,RADIOBUTTON:3,CHECKBOX:4,TABSTRIP:5,TABLE:6,LINK:7,TEXTEDIT:8,PASSWORD:9,TEXTAREA:10,LIST:11,LISTITEM:12,PAGINATOR:13,RADIOGROUP:14,TREE:15,MENU:16,MENUBAR:17,CALENDAR:18,LABEL:19,CAROUSEL:20,NOTIFICATIONBAR:21,DIALOG:22,TOOLBAR:23,FACETFILTER:24,ACCORDION:25,ROWREPEATER:26,RATINGINDICATOR:27,ROADMAP:28,DATEPICKER:29,DateTimeInput:30,TILE:31,HEADER:32,TABLE_HEADER_COLUMN:6001};EventCallBack.prototype.Event=function(){return this.m_event},EventCallBack.prototype.Method=function(){return this.m_callback},EventCallBack.prototype.Parameters=function(){return this.m_parameters},EventCallBack.prototype.SetEvent=function(eventStr){eventStr||(eventStr=\"click\"),this.m_event=eventStr},EventCallBack.prototype.SetMethod=function(callback){callback||(callback=\"OnClick\"),this.m_callback=callback},EventCallBack.prototype.SetParameters=function(callbackParams){callbackParams||(callbackParams=new Array),this.m_parameters=callbackParams},Function.prototype.InheritsFrom=function(parentClassOrObject){if(0==arguments.length)throw new Error(\"Null parent\");return parentClassOrObject.constructor==Function?(this.prototype=new parentClassOrObject,this.prototype.constructor=this,this.prototype.parent=parentClassOrObject.prototype):(this.prototype=parentClassOrObject,this.prototype.constructor=this,this.prototype.parent=parentClassOrObject),this},Array.prototype.indexOf=function(item){for(var i=0;i<this.length;i++)if(this[i]===item)return i;return-1},SAPUI5Control.prototype.Element=function(){return this.m_elementDOM},SAPUI5Control.prototype.SAPUIControlType=function(){return this.m_controlType},SAPUI5Control.prototype.SAPUIControlName=function(){return this.m_controlName},SAPUI5Control.prototype.IsStandalone=function(){return this.m_isStandalone},SAPUI5Control.prototype.EventsHandlers=function(){return this.m_eventsHandlers},SAPUI5Control.prototype.SetElement=function(element){this.m_elementDOM=element},SAPUI5Control.prototype.SetEventHandler=function(eventStr,callback,parameters){var handler=null,arr=[];switch(arguments.length){case 1:handler=eventStr;break;case 2:handler=new EventCallBack(eventStr,callback,arr);break;case 3:parameters instanceof Array?arr=parameters:arr[0]=parameters,handler=new EventCallBack(eventStr,callback,arr);break;default:return}this.ResetEventHandlers(),this.m_eventsHandlers[0]=handler},SAPUI5Control.prototype.UpdateEventHandler=function(eventStr,callback,parameters){var handler=null;switch(arguments.length){case 1:handler=eventStr;break;case 2:handler=new EventCallBack(eventStr,callback,[]);break;case 3:handler=new EventCallBack(eventStr,callback,parameters);break;default:return}for(var i=0;i<this.m_eventsHandlers.length;i++)if(this.m_eventsHandlers[i].Event()===eventStr)return void(this.m_eventsHandlers[i]=handler)},SAPUI5Control.prototype.AddEventHandler=function(eventHandler){for(var i=0;i<this.m_eventsHandlers.length;i++)this.m_eventsHandlers[i].Event()===eventHandler.Event()&&(this.m_eventsHandlers.splice(i,1),i--);this.m_eventsHandlers.push(eventHandler)},SAPUI5Control.prototype.SetEventHandlers=function(eventsHandlers){this.m_eventsHandlers!=eventsHandlers&&(this.ResetEventHandlers(),this.m_eventsHandlers=eventsHandlers)},SAPUI5Control.prototype.RegisterForEvents=function(eventsHandlers){this.CheckNullElement(),eventsHandlers&&this.SetEventHandlers(eventsHandlers);for(var len=this.EventsHandlers().length,i=0;i<len;i++)this.InternalRegisterForEvent(this.EventsHandlers()[i])},SAPUI5Control.prototype.ListenToEvents=function(eventsHandlers){this.RegisterForEvents(eventsHandlers)},SAPUI5Control.prototype.RegisterForEvent=function(eventsHandler){this.AddEventHandler(eventsHandler),this.InternalRegisterForEvent(eventsHandler)},SAPUI5Control.prototype.ResetEventHandlers=function(){this.m_eventsHandlers.length=0};var DeviceType={IsAndroid:function(){return!!navigator.userAgent.match(/Android/i)},IsBlackBerry:function(){return!!navigator.userAgent.match(/BlackBerry/i)},IsiOS:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)},IsWindows:function(){return!!navigator.userAgent.match(/IEMobile/i)},IsMobile:function(){return DeviceType.IsAndroid()||DeviceType.IsBlackBerry()||DeviceType.IsiOS()||DeviceType.IsWindows()},IsSupportedMobile:function(){return DeviceType.IsAndroid()||DeviceType.IsiOS()}};SAPUI5Control.prototype.InternalRegisterForEvent=function(eventHandler){this.CheckNullElement(),_control.RegisterElementToEvent(this.Element(),eventHandler.Event(),eventHandler.Method(),eventHandler.Parameters())},SAPUI5Control.prototype.GetPropertyValue=function(property){if(!property)return null;switch(property){case\"logical_name\":return this.GetName();case\"html id\":case\"id\":return this.GetHTMLId();case\"checked\":return this.IsChecked();case\"class\":return this.GetClass();case\"name\":return this.GetName();case\"disabled\":return this.IsDisabled();case\"pressed\":return this.IsPressed();case\"readonly\":return this.IsReadOnly();case\"state\":return this.GetCurrentState();case\"visible\":return this.IsVisible();case\"value\":return this.GetValue();case\"type\":return this.GetType();case\"href\":case\"url\":return this.GetUrl();case\"text\":return this.GetText();case\"title\":return this.GetTitle();case\"rows\":var rows=this.GetElementAttributeValue(\"rows\");return rows||0;case\"bpt_component_name\":return this.GetComponentName();case\"bpt_component_id\":return this.GetComponentId();case\"bpt_force_learn\":return this.GetComponentForceLearn();case\"baseURI\":return this.GetBaseURI();case\"subtype\":return this.GetSubtype()}},SAPUI5Control.prototype.GetCallBack=function(eventToFind){for(var rc=null,len=this.EventsHandlers().length,i=0;i<len&&(rc=this.EventsHandlers()[i],eventToFind!=this.EventsHandlers()[i].Event());i++)rc=null;return rc},SAPUI5Control.prototype.GetEventCallBack=function(eventToFind){var rc=this.GetCallBack(eventToFind);return null!=rc?rc.Method():rc},SAPUI5Control.prototype.GetEventReplayMethods=function(eventToFind){return null},SAPUI5Control.prototype.GetEventParameters=function(eventToFind){var rc=this.GetCallBack(eventToFind);return null!=rc?rc.Parameters():rc},SAPUI5Control.prototype.GetCore=function(){try{var rc=window.sap.ui.getCore();return void 0===rc&&(rc=null),rc}catch(err){return myTrace(\"SAPUI5Control.GetCore Error : \"+err.message,LogSeverity_Error),null}},SAPUI5Control.prototype.GetCoreElement=function(){this.CheckNullElement();try{var rc=window.sap.ui.getCore();return null!=rc&&(rc=rc.byId(this.GetHTMLId())),void 0==rc&&(rc=null),rc}catch(err){return myTrace(\"SAPUI5Control.GetCoreElement Error : \"+err.message,LogSeverity_Error),null}},SAPUI5Control.prototype.GetTextOfLeavesElements=function(leaves){if(!leaves||0===leaves.length)return[];for(var result=[],i=0;i<leaves.length;i++)if(leaves[i]){var txt=getControlText(leaves[i]);txt.length>0&&result.push(txt)}return result},SAPUI5Control.prototype.GetComponentName=function(){var name=\"\";try{this.CheckNullElement(),name=_control.GetComponentName(this.Element())}catch(err){}return myTrace(\" GetComponentName for \"+this.SAPUIControlName()+\" = \"+name,LogSeverity_Information),name},SAPUI5Control.prototype.GetComponentId=function(){var id=\"\";try{this.CheckNullElement(),id=_control.GetComponentId(this.Element())}catch(err){}return myTrace(\" GetComponentId for \"+this.SAPUIControlName()+\" : \"+id,LogSeverity_Information),id},SAPUI5Control.prototype.GetComponentForceLearn=function(){var rc=!0;switch(this.SAPUIControlType()){case SAPUI5ControlTypeId.DIALOG:case SAPUI5ControlTypeId.DATEPICKER:case SAPUI5ControlTypeId.DateTimeInput:rc=!1;break;case SAPUI5ControlTypeId.CAROUSEL:case SAPUI5ControlTypeId.TABSTRIP:case SAPUI5ControlTypeId.ACCORDION:case SAPUI5ControlTypeId.ROWREPEATER:rc=!1;break;case SAPUI5ControlTypeId.TREE:case SAPUI5ControlTypeId.MENU:case SAPUI5ControlTypeId.MENUBAR:case SAPUI5ControlTypeId.NOTIFICATIONBAR:case SAPUI5ControlTypeId.TOOLBAR:case SAPUI5ControlTypeId.FACETFILTER:case SAPUI5ControlTypeId.ROADMAP:case SAPUI5ControlTypeId.CALENDAR:case SAPUI5ControlTypeId.TILE:case SAPUI5ControlTypeId.LINK:case SAPUI5ControlTypeId.LIST:case SAPUI5ControlTypeId.PAGINATOR:rc=!1;break;case SAPUI5ControlTypeId.BUTTON:case SAPUI5ControlTypeId.TOGGLEBUTTON:case SAPUI5ControlTypeId.RADIOBUTTON:case SAPUI5ControlTypeId.CHECKBOX:case SAPUI5ControlTypeId.TABLE:case SAPUI5ControlTypeId.PASSWORD:case SAPUI5ControlTypeId.TEXTEDIT:case SAPUI5ControlTypeId.TEXTAREA:case SAPUI5ControlTypeId.LISTITEM:case SAPUI5ControlTypeId.RADIOGROUP:case SAPUI5ControlTypeId.LABEL:case SAPUI5ControlTypeId.RATINGINDICATOR:default:rc=!1}return rc},SAPUI5Control.prototype.GetName=function(){this.CheckNullElement();var name=this.GetInnerText();return name||(name=this.GetTitle()),name||(name=\"\"),name},SAPUI5Control.prototype.GetInnerText=function(){this.CheckNullElement();var element=this.Element();return window._uft.$(element).innerText||window._uft.$(element).textContent},SAPUI5Control.prototype.GetText=function(){return this.CheckNullElement(),getControlText(this.Element())},SAPUI5Control.prototype.GetTitle=function(){return this.CheckNullElement(),this.Element().title},SAPUI5Control.prototype.GetType=function(){return this.CheckNullElement(),this.Element().type},SAPUI5Control.prototype.GetHTMLId=function(){return this.CheckNullElement(),this.Element().id},SAPUI5Control.prototype.GetBaseURI=function(){return this.CheckNullElement(),_control.GetBaseURI(this.Element())},SAPUI5Control.prototype.GetSubtype=function(){return this.CheckNullElement(),_control.GetSubtype(this.Element())},SAPUI5Control.prototype.GetValue=function(){return this.CheckNullElement(),this.Element().value},SAPUI5Control.prototype.GetClass=function(){return this.CheckNullElement(),this.Element().className},SAPUI5Control.prototype.GetUrl=function(){return this.CheckNullElement(),this.Element().href},SAPUI5Control.prototype.IsBoolAttribute=function(defaultAttribName,attrName){return attrName||(attrName=defaultAttribName),this.CheckElementAttribute(attrName)},SAPUI5Control.prototype.IsMobile=function(){return isMobile(this.m_elementDOM)},SAPUI5Control.prototype.IsUi=function(){return isUi(this.m_elementDOM)},SAPUI5Control.prototype.IsDisabled=function(attrName){return this.IsBoolAttribute(\"aria-disabled\",attrName)},SAPUI5Control.prototype.IsSelected=function(attrName){return this.IsBoolAttribute(\"aria-selected\",attrName)},SAPUI5Control.prototype.IsReadOnly=function(attrName){return this.IsBoolAttribute(\"aria-readonly\",attrName)},SAPUI5Control.prototype.IsPressed=function(attrName){return this.IsBoolAttribute(\"aria-pressed\",attrName)},SAPUI5Control.prototype.IsChecked=function(attrName){return this.IsBoolAttribute(\"aria-checked\",attrName)},SAPUI5Control.prototype.IsInvalid=function(attrName){return this.IsBoolAttribute(\"aria-invalid\",attrName)},SAPUI5Control.prototype.IsVisible=function(){return this.CheckNullElement(),\"visible\"==window._uft.$(this.Element()).css(\"visibility\")},SAPUI5Control.prototype.IsDisplayed=function(){return this.CheckNullElement(),\"none\"!==window._uft.$(this.Element()).css(\"display\")},SAPUI5Control.prototype.GetLabelledBy=function(attrName){return attrName||(attrName=\"aria-labelledby\"),this.GetElementAttributeValue(attrName)},SAPUI5Control.prototype.Record=function(methodName,params,delay){if(!this.ShouldIgnoreRecord(methodName)){switch(arguments.length){case 0:return;case 1:params=new Array;case 2:delay=0}var arr=new Array;null!==params&&void 0!==params||(params=[]),params instanceof Array?arr=params:arr[0]=params,_util.Record(methodName,toSafeArray(arr),delay)}},SAPUI5Control.prototype.ShouldIgnoreRecord=function(methodName){return!this.IsStandalone()},SAPUI5Control.prototype.OnClick=function(eventObj,delay){var rc=null;if(!this.ShouldIgnoreEvent(eventObj)){rc=this.EventsHandlers();for(var len=this.EventsHandlers().length,i=0;i<len;i++){var evt=this.EventsHandlers()[i].Event(),method=this.EventsHandlers()[i].Method(),params=this.EventsHandlers()[i].Parameters();if(\"click\"===evt){this.Record(method,params,delay);break}}}return!!this.IsStandalone()||rc},SAPUI5Control.prototype.OnSubmit=function(eventObj,delay){var rc=null;if(!this.ShouldIgnoreEvent(eventObj)){rc=this.EventsHandlers();for(var len=this.EventsHandlers().length,i=0;i<len;i++){var evt=this.EventsHandlers()[i].Event(),method=this.EventsHandlers()[i].Method(),params=this.EventsHandlers()[i].Parameters();if(\"submit\"===evt){this.Record(method,params,delay);break}}}return!!this.IsStandalone()||rc},SAPUI5Control.prototype.Report=function(runState,methodName,params,details){if(this.IsStandalone()){var argc=arguments.length,arr=[];try{switch(argc){case 0:runState=micDone;case 1:methodName=\"Click\";case 2:params=new Array;case 3:details=\" \"}params instanceof Array?arr=params:(arr=new Array,arr[0]=params),_util.Report(runState,methodName,toSafeArray(arr),details)}catch(e){myTrace(\"_util.Report: \"+methodName+\"(\"+(arr[0]?arr[0]:\"\")+(arr[1]?\",\"+arr[1]:\"\")+\") [ \"+(runState===micDone?\"micDone\":\"micFail\")+\" ] \"+details+\" Error : \"+e.message,LogSeverity_Error)}}},SAPUI5Control.prototype.Click=function(methodName,paramsArray,details){switch(arguments.length){case 0:methodName=\"Click\";case 1:paramsArray=new Array;case 2:details=\"\"}this.CheckNullElement(),this.PreventReplayMethod(methodName),this.ReplayClick(),this.Report(micDone,methodName,paramsArray,details)},SAPUI5Control.prototype.SetState=function(methodName,state,details){var rc=!0,Details=\"Null element\";switch(this.CheckNullElement(),arguments.length){case 0:throw Details=\"Null state\",new Error(Details);case 1:methodName=\"Set\";case 2:details=\"\"}this.PreventReplayMethod(methodName);var lState=state.toLowerCase();return this.GetCurrentState()!=lState?(rc=!0,this.ReplayClick(),this.Report(micDone,methodName,[state])):(rc=!1,this.Report(micInfo,methodName,[state],\" Control is set \"+state+\" already.\")),rc},SAPUI5Control.prototype.Submit=function(methodName,paramsArray,details){switch(arguments.length){case 0:methodName=\"Submit\";case 1:paramsArray=new Array;case 2:details=\"\"}this.CheckNullElement(),this.PreventReplayMethod(methodName),this.ReplayEvent(\"submit\"),this.Report(micDone,methodName,paramsArray,details)},SAPUI5Control.prototype.ReplayClick=function(eventArg){this.ReplayEvent(\"click\",eventArg)},SAPUI5Control.prototype.ReplayMouseDown=function(){this.ReplayEvent(\"mousedown\")},SAPUI5Control.prototype.ReplayEvent=function(eventStr,eventArg){if(0==arguments.length)throw new Error(\"Null event\");_control.ReplayEvent(this.Element(),eventStr.toLowerCase(),eventArg)},SAPUI5Control.prototype.GetCurrentState=function(){this.CheckNullElement();var rc=this.IsChecked();return 0==rc&&(rc=this.IsPressed()),1==rc?\"on\":\"off\"},SAPUI5Control.prototype.GetSetState=function(){this.CheckNullElement();var rc=this.IsChecked();return 0==rc&&(rc=this.IsPressed()),1==rc?\"OFF\":\"ON\"},SAPUI5Control.prototype.ShouldIgnoreEvent=function(eventObj){return!1===isLeftMouseButtonEvent(eventObj)||(!!this.IsDisabled()||(!!this.IsReadOnly()||!!this.IsInvalid()))},SAPUI5Control.prototype.PreventReplayMethod=function(replayMethod){var Details=this.SAPUIControlName();if(this.CheckNullElement(),replayMethod||(replayMethod=\"\"),this.IsDisabled())throw Details+=\" Is disabled.\",this.Report(micFail,replayMethod,[\"\"],Details),new Error(Details);if(this.IsReadOnly())throw Details+=\" Is read only.\",this.Report(micFail,replayMethod,[\"\"],Details),new Error(Details);if(this.IsInvalid())throw Details+=\" Is invalid.\",this.Report(micFail,replayMethod,[\"\"],Details),new Error(Details)},SAPUI5Control.prototype.CheckNullElement=function(){if(void 0==this.Element()||null==this.Element())throw new Error(this.SAPUIControlName()+\" is NULL element\")},SAPUI5Control.prototype.CheckElementAttribute=function(attrName){if(!attrName)return!1;this.CheckNullElement();var rc=!1,Details=this.SAPUIControlName(),attrVal=window._uft.$(this.Element()).attr(attrName);return void 0!=attrVal&&(rc=\"true\"===attrVal),rc},SAPUI5Control.prototype.CheckElementAttributeValue=function(attrName,attrValue,caseSensitive){switch(arguments.length){case 0:case 1:return!1;case 2:caseSensitive=!1}this.CheckNullElement();var result=!1,attrVal=window._uft.$(this.Element()).attr(attrName);return void 0!=attrVal&&(result=caseSensitive?attrVal===attrValue:attrVal.toString().toLowerCase()===attrValue.toLowerCase()),result},SAPUI5Control.prototype.CheckElementCSSValue=function(name,value,caseSensitive){switch(arguments.length){case 0:case 1:return!1;case 2:caseSensitive=!1}this.CheckNullElement();var rc=!1,val=window._uft.$(this.Element()).css(name);return void 0!=val&&(rc=caseSensitive?val===value:val.toLowerCase()===value.toLowerCase()),rc},SAPUI5Control.prototype.GetElementAttributeValue=function(attrName){if(!attrName)return null;this.CheckNullElement();var attrVal=window._uft.$(this.Element()).attr(attrName);return void 0==attrVal&&(attrVal=null),attrVal};var defaultButtonEventHandlers=[new EventCallBack(\"click\",\"OnClick\"),new EventCallBack(\"submit\",\"OnSubmit\")];SAPUIButton.InheritsFrom(SAPUI5Control),SAPUIButton.prototype.OnClick=function(eventObj){var rc=null;if(!this.ShouldIgnoreEvent(eventObj)){rc=this.EventsHandlers();var evt=this.EventsHandlers()[0].Event(),method=this.EventsHandlers()[0].Method();this.Record(method)}return!!this.IsStandalone()||rc},SAPUIButton.prototype.OnSubmit=function(eventObj){var rc=null;if(!this.ShouldIgnoreEvent(eventObj)){rc=this.EventsHandlers();for(var len=this.EventsHandlers().length,i=0;i<len;i++){var evt=this.EventsHandlers()[i].Event(),method=this.EventsHandlers()[i].Method();if(\"submit\"===evt){this.Record(method);break}}}return myTrace(\"SAPUI5Control.OnSubmit called for \"+this.SAPUIControlName()+\".\"+this.GetName()+\".\"+this.GetHTMLId(),LogSeverity_Information,0,SAPUI5_CATEGORY),!!this.IsStandalone()||rc},SAPUIButton.prototype.GetName=function(){var name=this.GetText();return name||(name=SAPUI5Control.prototype.GetName.call(this))},SAPUIButton.prototype.GetValue=function(){this.CheckNullElement();var rc=this.Element().value;return rc||(rc=this.GetName()),rc},SAPUIButton.prototype.GetButtonInputElement=function(elem){return elem||(elem=this.Element()),window._uft.$(elem)[0]},SAPUIButton.prototype.IsDisabled=function(){var rc=!1,bInput=this.GetButtonInputElement();if(void 0!=bInput&&null!=bInput){var temp=new SAPUI5Control({element:bInput});temp.IsUi()?rc=temp.CheckElementAttributeValue(\"aria-disabled\",\"true\"):temp.IsMobile()&&(rc=temp.CheckElementAttributeValue(\"disabled\",\"disabled\")||temp.GetClass().indexOf(\"sapMSegBBtnDis\")>0)}return rc},SAPUIButton.prototype.ShouldIgnoreEvent=function(eventObj){return!1===isLeftMouseButtonEvent(eventObj)||(!(!this.IsReadOnly()||!this.IsStandalone())||(!!this.IsDisabled()||!!this.IsInvalid()))},SAPUIButton.prototype.PreventReplayMethod=function(replayMethod){var Details=this.SAPUIControlName();if(this.CheckNullElement(),replayMethod||(replayMethod=\"\"),this.IsDisabled())throw Details+=\" is disabled.\",this.Report(micFail,replayMethod,[\"\"],Details),new Error(Details);if(this.IsInvalid())throw Details+=\" is invalid.\",this.Report(micFail,replayMethod,[\"\"],Details),new Error(Details);if(this.IsReadOnly()&&this.IsStandalone())throw Details+=\" is readonly.\",this.Report(micFail,replayMethod,[\"\"],Details),new Error(Details)},SAPUIButton.prototype.Click=function(methodName,paramsArray,details){switch(arguments.length){case 0:methodName=\"Click\";case 1:paramsArray=new Array;case 2:details=\"\"}try{this.CheckNullElement(),this.PreventReplayMethod(methodName);var that=this;window.setTimeout(function(){that.ReplayClick(!that.IsMobile())},100),this.Report(micDone,methodName,paramsArray,details)}catch(err){}},SAPUIButton.prototype.IsPressed=function(attrName){return this.CheckNullElement(),attrName||(attrName=\"aria-pressed\"),this.CheckElementAttribute(attrName)};var defaultToggleButtonEventHandlers=[new EventCallBack(\"click\",\"OnToggle\")];SAPUIToggleButton.InheritsFrom(SAPUI5Control),SAPUIToggleButton.prototype.GetName=function(){var name=this.GetText();return name||(name=SAPUI5Control.prototype.GetName.call(this))},SAPUIToggleButton.prototype.GetValue=function(){this.CheckNullElement();var rc=this.Element().value;return rc||(rc=this.GetName()),rc},SAPUIToggleButton.prototype.OnToggle=function(eventObj){var rc=null;if(!this.ShouldIgnoreEvent(eventObj)){for(var setValue=this.GetSetState(),i=0;i<this.EventsHandlers().length;i++){var evt=this.EventsHandlers()[i].Event(),method=this.EventsHandlers()[i].Method();this.EventsHandlers()[i].m_parameters=[setValue];var params=this.EventsHandlers()[i].Parameters();this.Record(method,params)}rc=this.EventsHandlers()}return rc},SAPUIToggleButton.prototype.GetToggleButtonInputElement=function(elem){return elem||(elem=this.Element()),window._uft.$(elem)[0]},SAPUIToggleButton.prototype.IsDisabled=function(){var rc=!1,tbInput=this.GetToggleButtonInputElement();if(void 0!=tbInput&&null!=tbInput){var temp=new SAPUI5Control({element:tbInput});temp.IsUi()?rc=temp.IsDisabled():temp.IsMobile()&&(rc=temp.GetClass().indexOf(\"sapMBtnDisabled\")>0)}return rc},SAPUIToggleButton.prototype.IsPressed=function(attrName){var rc=!0;return this.IsUi()?rc=this.IsBoolAttribute(\"aria-pressed\",attrName):this.IsMobile()&&(rc=new SAPUI5Control({element:this.GetToggleButtonInputElement().firstElementChild}).CheckElementAttributeValue(\"pressed\",\"true\")||this.CheckElementAttributeValue(\"aria-pressed\",\"true\")),rc},SAPUIToggleButton.prototype.GetCurrentState=function(){return this.CheckNullElement(),1==(this.IsChecked()||this.IsPressed())?\"on\":\"off\"},SAPUIToggleButton.prototype.GetSetState=function(){return\"on\"===this.GetCurrentState()?\"OFF\":\"ON\"},SAPUIToggleButton.prototype.SetState=function(methodName,state){if(null===state||void 0===state||\"on\"!==state.toLowerCase()&&\"off\"!==state.toLowerCase())return this.Report(micFail,methodName,[state],\"Invalid parameter.\"),!1;var rc=!0;switch(arguments.length){case 0:throw new Error(\"Null state\");case 1:methodName=\"Set\"}try{this.CheckNullElement(),this.PreventReplayMethod(methodName),state.toLowerCase()!==this.GetCurrentState()?(rc=!0,this.ReplayClick(),this.Report(micDone,methodName,[state])):(rc=!1,this.Report(micDone,methodName,[state],\"Toggle button is set \"+state+\" already.\"))}catch(err){}return rc};var defaultRadioGroupEventHandlers=[new EventCallBack(\"click\",\"OnClick\",[])];SAPUIRadioGroup.InheritsFrom(SAPUI5Control),SAPUIRadioGroup.prototype.GetPropertyValue=function(property){var rc;if(\"logical_name\"===property)return this.GetName();if(\"id\"===property&&null==(rc=this.Element().id))return this.GetName();if(\"default value\"==property)return\"\";if(\"disabled\"==property)return this.IsDisabled();if(\"all items\"==property){var itemList=this.GetItems();return this.ConnectItemNames(itemList)}if(\"items count\"==property){return this.GetItems().length}if(\"selected item index\"==property||\"selection\"===property){var selectedItem=this.GetSelectedItem();return null==selectedItem?\"\":rc=window._uft.$(selectedItem).attr(\"aria-posinset\")}if(\"value\"==property){var selectedItem=this.GetSelectedItem();return this.GetItemName(selectedItem)}return rc=SAPUI5Control.prototype.GetPropertyValue.call(this,property)},SAPUIRadioGroup.prototype.ConnectItemNames=function(itemElemList){if(null==itemElemList||null==itemElemList.length)return\"\";for(var rc=\"\",i=0;i<itemElemList.length;i++){i>0&&(rc+=\";\");rc+=this.GetItemName(itemElemList[i])}return rc},SAPUIRadioGroup.prototype.GetItems=function(){var elem=this.Element();return window._uft.$(elem).find(\"[role='radio']\").get()},SAPUIRadioGroup.prototype.GetSelectedItem=function(){var elem=this.Element(),inputElem=window._uft.$(elem).find(\"[aria-checked|='true']\")[0];return null==inputElem?null:inputElem},SAPUIRadioGroup.prototype.GetItemByIndex1Based=function(index1Based){var elem=this.Element();return window._uft.$(elem).find(\"[role='radio']\").filter(\"[aria-posinset='\"+index1Based+\"']\")[0]},SAPUIRadioGroup.prototype.GetItemName=function(elem){if(null==elem)return\"\";var rc=window._uft.$(elem).text(),labelElemId=window._uft.$(elem).attr(\"aria-labelledby\");return null!=labelElemId&&window._uft.$(\"#\"+labelElemId).length>0&&(rc=window._uft.$(\"#\"+labelElemId).text()),rc=trim(\"\"+rc)},SAPUIRadioGroup.prototype.GetName=function(){var elem=this.Element(),firstItem=this.GetItemByIndex1Based(1);return null!=firstItem?this.GetItemName(firstItem):null!=elem.title?elem.title:\"\"},SAPUIRadioGroup.prototype.RegisterForEvents=function(){var radioButtonGroup=window._uft.$(_elem).find(\"SPAN.sapUiRb\");this.IsMobile()&&(radioButtonGroup=window._uft.$(_elem).find(\"[role=radio]\"));for(var eventHandler=new EventCallBack(\"mousedown\",\"OnClick\"),i=0;i<radioButtonGroup.length;i++)radioButton=new SAPUIRadioButton({element:radioButtonGroup[i],isStandalone:!1,handlers:[eventHandler]}),radioButton.RegisterForEvents()},SAPUIRadioGroup.prototype.ShouldIgnoreEvent=function(eventObj){return!!this.IsDisabled()&&(myTrace(\" SAPUIRadioGroup is disabled. Do not record Click\",LogSeverity_Information,0,SAPUI5_RADIOGROUP_CATEGORY),!0)},SAPUIRadioGroup.prototype.PreventReplayMethod=function(replayMethod){this.CheckNullElement();var rc={details:\"\",status:!1};if(replayMethod||(replayMethod=\"\"),this.IsDisabled()){var Details=this.GetName()+\" is disabled.\";rc.details=Details,rc.status=!0}return rc},SAPUIRadioGroup.prototype.OnClick=function(handlerParam,eventObj){if(this.ShouldIgnoreEvent(eventObj))return!0;var trgt=getTargetObjectFromEvent(eventObj),radioButton=new SAPUIRadioButton(\"SPAN\"===trgt.tagName?{element:trgt,isStandalone:!1}:{element:trgt.parentNode,isStandalone:!1});if(this.IsMobile()){for(;\"radio\"!=trgt.getAttribute(\"role\");)trgt=trgt.parentNode;radioButton=new SAPUIRadioButton({element:trgt,isStandalone:!1})}var targetLabel=window._uft.$(radioButton.Element()).find(\"label\").text();if(\"\"==targetLabel&&(targetLabel=window._uft.$(radioButton.Element()).find(\"bdi\").text()),radioButton){var rc=radioButton.OnClick(eventObj);null!==rc&&\"Activate\"!==rc[0].m_callback&&this.Record(rc[0].m_callback,targetLabel)}return!0},SAPUIRadioGroup.prototype.Select=function(methodName,item,details){var Details=\"Null element\";switch(this.CheckNullElement(),arguments.length){case 0:return Details=\"Null item\",void this.Report(micFail,\"Select\",\"\",Details);case 1:methodName=\"Select\";case 2:details=\"\"}var preventCheck=this.PreventReplayMethod(methodName);if(!0===preventCheck.status)return void this.Report(micFail,methodName,[item],preventCheck.details);var isItemIndex=!1,itemIndex=0,itemString=trim(\"\"+item),regExp=/^#(\\d+)$/,matchResult=regExp.exec(itemString);if(null!=matchResult){isItemIndex=!0;var itemIndexString=matchResult[1],itemIndex1based=parseInt(itemIndexString,10);if(isNaN(itemIndex1based)||itemIndex1based<1)return void this.Report(micFail,methodName,itemString,\" Invalid item index: \"+itemString+\".\");itemIndex=itemIndex1based-1}var itemFound=!1,$radios=window._uft.$(_elem).find(\"[role='radio']\");if(isItemIndex){if(itemIndex>$radios.length)return void this.Report(micFail,methodName,itemString,\" Item index: \"+itemString+\" is out of range.\");itemFound=!0}else for(var i=0,len=$radios.length;i<len;i++){var radioButtonName=this.GetItemName($radios[i]);if(radioButtonName==itemString){itemFound=!0,itemIndex=i;break}}if(!itemFound)return void this.Report(micFail,methodName,itemString,\" Can not find item \"+itemString+\".\");var $inputRadio=$radios.eq(itemIndex).find(\":radio\");if($inputRadio.length<1)return void this.Report(micFail,methodName,itemString,\" Can not find the inner radion button of item \"+itemString+\".\");myTrace(\" Running  \"+methodName+\"(\"+itemString+\")\",LogSeverity_Information,0,SAPUI5_RADIOGROUP_CATEGORY),new SAPUIRadioButton({element:$inputRadio.get(0)}).ReplayClick(),this.Report(micDone,methodName,itemString)};var defaulLinkEventHandlers=[new EventCallBack(\"click\",\"OnClick\")];SAPUILink.InheritsFrom(SAPUI5Control);var defaulCheckBoxEventHandlers=[new EventCallBack(\"click\",\"OnClick\")];SAPUICheckBox.InheritsFrom(SAPUI5Control),SAPUICheckBox.prototype.GetName=function(){this.CheckNullElement();var rc=null,label=window._uft.$(this.Element()).find(\"LABEL\").get();return void 0!=label&&null!=label&&label.length>0&&(rc=getElementInnerText(label[0])),rc||(rc=\"\"),rc},SAPUICheckBox.prototype.GetValue=function(){return this.GetCurrentState()},SAPUICheckBox.prototype.ShouldIgnoreEvent=function(eventObj){return 0==isLeftMouseButtonEvent(eventObj)||(!!this.IsDisabled()||!!this.IsReadOnly())},SAPUICheckBox.prototype.PreventReplayMethod=function(replayMethod){if(this.CheckNullElement(),replayMethod||(replayMethod=\"\"),this.IsDisabled()){var Details=this.SAPUIControlName()+\" Is disabled.\";return this.Report(micFail,replayMethod,[\"\"],Details),!1}if(this.IsReadOnly()){var Details=this.SAPUIControlName()+\" Is read only.\";return this.Report(micFail,replayMethod,[\"\"],Details),!1}return!0},SAPUICheckBox.prototype.OnClick=function(eventObj){var rc=null;if(!this.ShouldIgnoreEvent(eventObj)){for(var setValue=this.GetSetState(),i=0;i<this.EventsHandlers().length;i++){var evt=this.EventsHandlers()[i].Event(),method=this.EventsHandlers()[i].Method();this.EventsHandlers()[i].m_parameters=[setValue];var params=this.EventsHandlers()[i].Parameters();this.Record(method,params)}rc=this.EventsHandlers()}return!!this.IsStandalone()||rc},SAPUICheckBox.prototype.IsChecked=function(){return window._uft.$(this.Element()).hasClass(\"sapMCb\")?!!window._uft.$(this.Element()).find(\"[checked]\").length:SAPUI5Control.prototype.IsChecked.call(this)},SAPUICheckBox.prototype.IsDisabled=function(){return window._uft.$(this.Element()).hasClass(\"sapMCb\")?!!window._uft.$(this.Element()).find(\"[disabled]\").length:SAPUI5Control.prototype.IsDisabled.call(this)},SAPUICheckBox.prototype.IsReadOnly=function(attrName){var rc=!1;if(this.IsUi())rc=this.IsBoolAttribute(\"aria-readonly\",attrName);else if(this.IsMobile()){var input=window._uft.$(this.Element()).find(\"input\").eq(0);input&&(rc=new SAPUI5Control({element:input}).CheckElementAttributeValue(\"readonly\",\"readonly\"))}return rc};var defaulTriCheckBoxEventHandlers=[new EventCallBack(\"click\",\"OnClick\")];SAPUITriCheckBox.InheritsFrom(SAPUI5Control),SAPUITriCheckBox.prototype.GetPropertyValue=function(property){return\"state\"===property?this.GetSatateForIdentificationProperty():SAPUI5Control.prototype.GetPropertyValue.call(this,property)},SAPUITriCheckBox.prototype.GetName=function(){this.CheckNullElement();var rc=null,label=window._uft.$(this.Element()).find(\".sapUiTriCbLbl\").get();return label&&label.length>0&&(rc=getElementInnerText(label[0])),rc||(rc=\"\"),rc},SAPUITriCheckBox.prototype.GetValue=function(){this.CheckNullElement();var triCheckBoxValue=window._uft.$(this.Element()).attr(\"aria-checked\");return triCheckBoxValue||!1},SAPUITriCheckBox.prototype.GetState=function(){this.CheckNullElement();var triCheckBoxValue=window._uft.$(this.Element().attr(\"aria-checked\"));return triCheckBoxValue||!1},SAPUITriCheckBox.prototype.ShouldIgnoreEvent=function(eventObj){return!1===isLeftMouseButtonEvent(eventObj)||!(!this.IsDisabled()&&!this.IsReadOnly())},SAPUITriCheckBox.prototype.PreventReplayMethod=function(replayMethod){var details=\"\";return this.CheckNullElement(),replayMethod||(replayMethod=\"\"),this.IsDisabled()?(details=this.SAPUIControlName()+\" Is disabled.\",this.Report(micFail,replayMethod,[],details),!1):!this.IsReadOnly()||(details=this.SAPUIControlName()+\" Is read only.\",this.Report(micFail,replayMethod,[],details),!1)},SAPUITriCheckBox.prototype.OnClick=function(eventObj){var rc=null;if(!this.ShouldIgnoreEvent(eventObj)){var setValue=this.GetSetState(),evt=this.EventsHandlers()[0].Event(),method=this.EventsHandlers()[0].Method();this.EventsHandlers()[0].m_parameters=[setValue];var params=this.EventsHandlers()[0].Parameters();this.Record(method,params),rc=this.EventsHandlers()}return!!this.IsStandalone()||rc},SAPUITriCheckBox.prototype.IsChecked=function(){return\"true\"===window._uft.$(this.Element()).attr(\"aria-checked\")},SAPUITriCheckBox.prototype.IsDisabled=function(){return SAPUI5Control.prototype.IsDisabled.call(this)},SAPUITriCheckBox.prototype.IsReadOnly=function(){return SAPUI5Control.prototype.IsReadOnly.call(this)},SAPUITriCheckBox.prototype.GetSatateForIdentificationProperty=function(){var ariaCheckedAttribute=window._uft.$(this.Element()).attr(\"aria-checked\");return\"true\"===ariaCheckedAttribute?\"on\":\"false\"===ariaCheckedAttribute?\"off\":ariaCheckedAttribute};var defaulRadioButtonEventHandlers=[new EventCallBack(\"click\",\"OnClick\",[])];SAPUIRadioButton.InheritsFrom(SAPUI5Control),SAPUIRadioButton.prototype.GetName=function(){this.CheckNullElement();var rc=null,elem=this.Element(),label=this.GetRadioButtonInputElement();return void 0!=label&&null!=label&&(rc=window._uft.$(label).text()),rc=rc||window._uft.$(elem).text()||window._uft.$(elem).attr(\"title\")||\" \"},SAPUIRadioButton.prototype.GetValue=function(){return this.GetCurrentState()},SAPUIRadioButton.prototype.GetType=function(){var rc=null;if(!(rc=window._uft.$(this.Element()).attr(\"type\"))){var rbInput=this.GetRadioButtonInputElement();void 0!=rbInput&&null!=rbInput&&(rc=window._uft.$(rbInput).attr(\"type\"))}return rc},SAPUIRadioButton.prototype.IsSelected=function(attrName){var rc=!1,rbInput=this.GetRadioButtonInputElement();if(void 0!=rbInput&&null!=rbInput){rc=new SAPUI5Control({element:rbInput}).CheckElementAttributeValue(\"selected\",\"selected\")}return rc},SAPUIRadioButton.prototype.IsChecked=function(attrName){var rc=!1,rbInput=this.GetRadioButtonInputElement();if(void 0!=rbInput&&null!=rbInput){rc=new SAPUI5Control({element:rbInput}).CheckElementAttributeValue(\"checked\",\"checked\")}return rc},SAPUIRadioButton.prototype.IsInvalid=function(attrName){var rc=!1,rbInput=this.GetRadioButtonInputElement();if(void 0!=rbInput&&null!=rbInput){rc=new SAPUI5Control({element:rbInput}).CheckElementAttributeValue(\"invalid\",\"invalid\")}return rc},SAPUIRadioButton.prototype.GetCurrentState=function(){this.CheckNullElement();var rc=this.IsChecked();return!1===rc&&(rc=this.IsSelected()),1==rc?\"on\":\"off\"},SAPUIRadioButton.prototype.GetSetState=function(){return\"on\"===this.GetCurrentState()?\"OFF\":\"ON\"},SAPUIRadioButton.prototype.ShouldIgnoreEvent=function(eventObj){return!isLeftMouseButtonEvent(eventObj)||this.IsDisabled()||this.IsReadOnly()||this.IsInvalid()},SAPUIRadioButton.prototype.PreventReplayMethod=function(replayMethod){replayMethod||(replayMethod=\"\");var Details=\"\";if(\"Select\"===replayMethod){if(this.IsDisabled())return Details=this.GetName()+\" is disabled.\",myTrace(\" PreventReplayMethod \"+this.GetName()+\" \"+this.GetHTMLId()+Details,LogSeverity_Information),this.Report(micFail,replayMethod,[],Details),!0;if(this.IsReadOnly())return Details=this.GetName()+\" is read only.\",myTrace(\" PreventReplayMethod \"+this.GetName()+\" \"+this.GetHTMLId()+Details,LogSeverity_Information),this.Report(micFail,replayMethod,[],Details),!0;if(this.IsChecked())return Details=this.GetName()+\" is selected already.\",myTrace(\" PreventReplayMethod \"+this.GetName()+\" \"+this.GetHTMLId()+Details,LogSeverity_Information),this.Report(micInfo,replayMethod,[],Details),!0;if(this.IsSelected())return Details=this.GetName()+\" is selected already.\",myTrace(\" PreventReplayMethod \"+this.GetName()+\" \"+this.GetHTMLId()+Details,LogSeverity_Information),this.Report(micInfo,replayMethod,[],Details),!0}return!1},SAPUIRadioButton.prototype.Click=function(methodName,paramsArray,details){switch(arguments.length){case 0:methodName=\"Click\";case 1:paramsArray=new Array;case 2:details=\" \"}this.CheckNullElement(),!1===this.PreventReplayMethod(methodName)&&(this.ReplayClick(),this.Report(micDone,methodName,paramsArray,details))},SAPUIRadioButton.prototype.IsDisabled=function(){return window._uft.$(this.Element()).hasClass(\"sapUiRbDis\")||window._uft.$(this.Element()).hasClass(\"sapMRbDis\")},SAPUIRadioButton.prototype.IsReadOnly=function(){return window._uft.$(this.Element()).hasClass(\"sapUiRbRo\")||window._uft.$(this.Element()).hasClass(\"sapMRbRo\")};var rbSemaphore=new SAPUIRadioButtonSemaphore;SAPUIRadioButton.prototype.OnClick=function(eventObj){if(this.ShouldIgnoreEvent(eventObj))return null;rbSemaphore.elementId&&rbSemaphore.elementId===this.GetHTMLId()||(rbSemaphore.elementId=this.GetHTMLId(),rbSemaphore.recorded=!1);var state=this.GetSetState(),rc=null,method=\"\",recordSelect=!1;return\"ON\"!==state&&\"on\"!==state||(recordSelect=!(this.IsDisabled()||this.IsReadOnly()||this.IsChecked()||this.IsSelected())),recordSelect?(method=\"Select\",this.Record(method,[]),rbSemaphore.recorded=!0):!1===rbSemaphore.recorded&&(method=\"Activate\",this.Record(method,[]),rbSemaphore.recorded=!0),!!this.IsStandalone()||(rc=[new EventCallBack(\"click\",method,[])])},SAPUIRadioButton.prototype.GetRadioButtonInputElement=function(elem){return elem||(elem=this.Element()),window._uft.$(elem).find(\"INPUT\").get(0)};var SAPUIPaginatorButtonTypeId={UNKNOWN:0,FIRST:1,BACKWARD:2,FORWARD:3,LAST:4,PAGE:5},PaginatorMethods={FirstPage:\"FirstPage\",LastPage:\"LastPage\",PreviousPage:\"PreviousPage\",NextPage:\"NextPage\",SetPage:\"SetPage\"},defaultPaginatorEventHandlers=[new EventCallBack(\"click\",\"OnClick\")];SAPUIPaginator.InheritsFrom(SAPUI5Control),SAPUIPaginator.prototype.GetName=function(){var elem=this.Element();return null!==elem.title?elem.title:\"\"},SAPUIPaginator.prototype.GetPropertyValue=function(property){return\"logical_name\"===property||\"name\"===property?this.GetName():\"current page\"===property?this.GetCurrentPage():\"total pages\"===property?this.GetNumberOfPages():\"visible pages\"===property?this.GetPaginatorSize():SAPUI5Control.prototype.GetPropertyValue.call(this,property)},SAPUIPaginator.prototype.ShouldChildIgnoreEvent=function(element){return!!this.IsChildDisabled(element)||(!!isReadOnly(element)||!!isInvalid(element))},SAPUIPaginator.prototype.IsChildDisabled=function(element){var rc=isElementOfClass(element,\"A\",\"sapUiLnkDsbl\");if(!0===rc)return rc;var parnt=window._uft.$(element).parent(\"A\").context;return!!parnt&&(rc=isElementOfClass(parnt,\"A\",\"sapUiLnkDsbl\"))},SAPUIPaginator.prototype.GetSetPageNumber=function(element){if(void 0==element||null==element)throw Error(\"Null target element\");return parseInt(getElementInnerText(element),10)},SAPUIPaginator.prototype.OnClick=function(eventObj){if(this.ShouldIgnoreEvent(eventObj))return[new EventCallBack(\"click\",\"\",null)];var funcName=\"\",setPageNumber=1,trgt=getTargetObjectFromEvent(eventObj);if(this.ShouldChildIgnoreEvent(trgt))return[new EventCallBack(\"click\",\"\",null)];var currPage=1,p=this.GetCoreElement();void 0!=p&&null!=p&&(currPage=p.getCurrentPage());var parArr=[];switch(this.GetPageType(trgt)){case SAPUIPaginatorButtonTypeId.FIRST:funcName=PaginatorMethods.FirstPage,setPageNumber=1;break;case SAPUIPaginatorButtonTypeId.LAST:funcName=PaginatorMethods.LastPage,setPageNumber=this.GetNumberOfPages();break;case SAPUIPaginatorButtonTypeId.FORWARD:funcName=PaginatorMethods.NextPage,setPageNumber=currPage+1;break;case SAPUIPaginatorButtonTypeId.BACKWARD:funcName=PaginatorMethods.PreviousPage,setPageNumber=currPage-1;break;case SAPUIPaginatorButtonTypeId.PAGE:funcName=PaginatorMethods.SetPage,setPageNumber=this.GetSetPageNumber(trgt),parArr=[setPageNumber]}var rc=new EventCallBack(\"click\",funcName,parArr);return this.Record(funcName,parArr),[rc]},SAPUIPaginator.prototype.GetPageType=function(elem){if(!elem)throw Error(\"Null target button\");var rc=SAPUIPaginatorButtonTypeId.UNKNOWN;return isElementOfClass(elem,\"LI\",\"sapUiPagPage\")?rc=SAPUIPaginatorButtonTypeId.PAGE:isElementOfClass(elem,\"A\",\"sapUiPagFirst\")?rc=SAPUIPaginatorButtonTypeId.FIRST:isElementOfClass(elem,\"A\",\"sapUiPagLast\")?rc=SAPUIPaginatorButtonTypeId.LAST:isElementOfClass(elem,\"A\",\"sapUiPagForward\")?rc=SAPUIPaginatorButtonTypeId.FORWARD:isElementOfClass(elem,\"A\",\"sapUiPagBack\")?rc=SAPUIPaginatorButtonTypeId.BACKWARD:isElementOfClass(elem,\"A\",\"sapUiLnk\")?rc=SAPUIPaginatorButtonTypeId.PAGE:rc},SAPUIPaginator.prototype.GetNumberOfPages=function(){var totalPages=0,p=this.GetCoreElement();if(void 0!=p&&null!=p&&(totalPages=p.getNumberOfPages()),0===totalPages){var lastPageElement=window._uft.$(this.Element()).find(\"A.sapUiPagLast\")[0];if(!lastPageElement)return 0;var txt=getControlText(lastPageElement);if(!txt)return 0;var strArr=txt.split(\" \"),len=strArr.length;if(0===len)return 0;for(var nmb=0,i=len-1;i>=0;i--)if(null!==(nmb=toNumber(strArr[i]))){totalPages=nmb;break}}return totalPages},SAPUIPaginator.prototype.GetPaginatorSize=function(){var element=this.Element();if(null!=element){return window._uft.$(element).find(\"UL\").get(0).children.length}return 0},SAPUIPaginator.prototype.CurrentPage=function(){var p=this.GetCurrentPage();return 0!==p?this.Report(micDone,\"CurrentPage\",[],p):this.Report(micFail,\"CurrentPage\",[],p),p},SAPUIPaginator.prototype.GetCurrentPage=function(){var p=this.GetCoreElement(),rc=0;if(void 0!=p&&null!=p)rc=p.getCurrentPage();else{var element=this.Element();if(null!=element){var ul=window._uft.$(element).find(\"UL\").get(0);if(ul){var currentLi=window._uft.$(ul).find(\"LI.sapUiPagCurrentPage\")[0];currentLi&&(rc=getControlText(currentLi),myTrace(\" SAPUIPaginator.prototype.GetCurrentPage = \"+rc))}}}return rc},SAPUIPaginator.prototype.setCurrentPage=function(pageNumberIn,methodName,orgPageIn){orgPageIn||(orgPageIn=pageNumberIn);var pageNumber=toNumber(pageNumberIn);if(!pageNumber)return this.Report(micFail,methodName,[orgPageIn],\" Invalid page \"+orgPageIn+\".\"),!1;var total=this.GetNumberOfPages();if(pageNumber<1)return this.Report(micFail,methodName,[orgPageIn],\"Out of bounds. Page number starts from 1. Total number of pages: \"+total.toString()),!1;if(pageNumber>total)return this.Report(micFail,methodName,[orgPageIn],\"Out of bounds. Page number starts from 1. Total number of pages: \"+total.toString()),!1;var p=this.GetCoreElement();if(void 0!=p&&null!=p){window._uft.$(this.Element()).focus();var srcPageNum=p.getCurrentPage(),eventMethodType=this.getMethodEventType(methodName);if(!eventMethodType)return this.Report(micFail,methodName,parArray,pageNumber),!1;p.setCurrentPage(pageNumber);var paraMap={srcPage:srcPageNum,targetPage:pageNumber,type:eventMethodType};p.firePage(paraMap);var parArray=[];return methodName==PaginatorMethods.SetPage&&(parArray[0]=orgPageIn),p.getCurrentPage()===pageNumber?this.Report(micDone,methodName,parArray,pageNumber):this.Report(micFail,methodName,parArray,pageNumber),!0}return this.Report(micFail,methodName,parArray,pageNumber),!1},SAPUIPaginator.prototype.getMethodEventType=function(methodName){var PaginatorEvent=sap.ui.commons.PaginatorEvent,eventMethodType=null;switch(methodName){case PaginatorMethods.FirstPage:eventMethodType=PaginatorEvent.First;break;case PaginatorMethods.LastPage:eventMethodType=PaginatorEvent.Last;break;case PaginatorMethods.PreviousPage:eventMethodType=PaginatorEvent.Previous;break;case PaginatorMethods.NextPage:eventMethodType=PaginatorEvent.Next;break;case PaginatorMethods.SetPage:eventMethodType=PaginatorEvent.Goto}return eventMethodType},SAPUIPaginator.prototype.SetPage=function(pageNumberIn){var methodName=PaginatorMethods.SetPage;this.CheckNullElement();var pageNumber=toNumber(pageNumberIn);if(!pageNumber)return this.Report(micFail,methodName,[pageNumberIn],\" Invalid page \"+pageNumberIn+\".\"),!1;var total=this.GetNumberOfPages();return pageNumber<1?(this.Report(micFail,methodName,[pageNumberIn],\"Out of bounds. Page number starts from 1. Total number of pages: \"+total.toString()),!1):pageNumber>total?(this.Report(micFail,methodName,[pageNumberIn],\"Out of bounds. Page number starts from 1. Total number of pages: \"+total.toString()),!1):this.setCurrentPage(pageNumber,methodName,pageNumberIn)},SAPUIPaginator.prototype.NextPage=function(){var currPage=this.GetCurrentPage(),setPage=currPage===this.GetNumberOfPages()?currPage:currPage+1;return this.setCurrentPage(setPage,PaginatorMethods.NextPage)},SAPUIPaginator.prototype.PreviousPage=function(){var currPage=this.GetCurrentPage(),setPage=1===currPage?currPage:currPage-1;return this.setCurrentPage(setPage,PaginatorMethods.PreviousPage)},SAPUIPaginator.prototype.FirstPage=function(){return this.setCurrentPage(1,PaginatorMethods.FirstPage)},SAPUIPaginator.prototype.LastPage=function(){var pageNumber=this.GetNumberOfPages();return this.setCurrentPage(pageNumber,PaginatorMethods.LastPage)};var defaultListBoxEventHandlers=[new EventCallBack(\"click\",\"OnItemClick\")],SAPUIListMethod={Delete:\"Delete\",Details:\"Details\",ExtendDeselect:\"ExtendDeselect\",Deselect:\"Deselect\",ExtendSelect:\"ExtendSelect\",More:\"More\",Select:\"Select\",Set:\"Set\",SingleSelect:\"SingleSelect\"};SAPUIList.InheritsFrom(SAPUI5Control),SAPUIList.prototype.GetPropertyValue=function(property){if(\"logical_name\"===property)return this.GetName();if(\"name\"===property)return this.GetName();if(\"id\"===property){if(null==this.Element().id)return this.GetName()}if(\"all items\"===property){var itemList=this.GetItems();return this.ConnectItemNames(itemList)}if(\"default value\"===property)return\"\";if(\"disabled\"===property)return this.IsDisabled();if(\"visible\"===property)return this.IsVisible();if(\"items count\"===property||\"rows\"===property){if(this.IsComboBox()&&!this.IsMobile()){var innerEdit=this.GetComboBoxInnerEdit(),val=window._uft.$(innerEdit).attr(\"aria-setsize\");return null==val?\"\":val}var list=this.GetItems();return list.length}if(\"select type\"===property)return this.IsComboBox()?\"Combobox Select\":this.IsMultiselectable()?\"Extended Selection\":\"Single Selection\";if(\"selected item index\"===property){if(this.IsComboBox()){var innerEdit=this.GetComboBoxInnerEdit();if(this.IsMobile())return this.GetSelectedItemIndex(innerEdit);var val=window._uft.$(innerEdit).attr(\"aria-posinset\");return null===val?\"\":val}var itemList=this.GetSelectedItems();return this.ConnectItemIndexes(itemList)}if(\"selected items count\"===property){if(this.IsComboBox()){var innerEdit=this.GetComboBoxInnerEdit();if(this.IsMobile()){return-1===this.GetSelectedItemIndex(innerEdit)?0:1}var val=window._uft.$(innerEdit).attr(\"aria-posinset\");return null==val?0:1}var list=this.GetSelectedItems();return list.length}return\"selection\"===property?this.GetValue():\"value\"===property?this.GetValue():SAPUI5Control.prototype.GetPropertyValue.call(this,property)},SAPUIList.prototype.GetSelectedItemIndex=function(innerEdit){var itemList=this.GetItems(),selectedItemValue=getControlText(innerEdit),isItemHasTwoColumns=!1;isElementOfClass(itemList[0],\"LI\",\"sapMSelectListRow\")&&(isItemHasTwoColumns=!0);for(var i=0,item;i<itemList.length;i++)if(item=isItemHasTwoColumns?itemList[i].firstChild:itemList[i],getControlText(item)===selectedItemValue)return i+1;return-1},SAPUIList.prototype.SetTextBeforeChange=function(value){m_textBeforeChange=value},SAPUIList.prototype.GetTextBeforeChange=function(){return m_textBeforeChange},SAPUIList.prototype.RegisterListItemsForEvents=function(){if(this.IsDisabled())return!0;if(this.IsReadOnly())return!0;for(var item,items=this.GetItems(),totalRegistered=0,i=0;i<items.length;i++)item=items[i],this.IsItemDisabled(item)||(_control.RegisterElementToEvent(item,\"mousedown\",\"DummyHandler\"),_control.RegisterElementToEvent(item,\"click\",\"OnItemClick\",item),totalRegistered++);if(this.GetGrowing()){var grow=this.GetGrowingList();this.IsItemDisabled(grow)||_control.RegisterElementToEvent(grow,\"click\",\"OnItemClick\",grow)}return this.RegisterInfoToolBarCalendar(),!0},SAPUIList.prototype.OnListToolBarCalendarEventHandler=function(handlerParam,eventObj,event){var config={element:this.GetListCalendar(),isStandalone:!1};if(config.element){var calendar=new SAPMCalendar(config),rc=calendar.RecordIfChange(event);if(null!==rc&&0!=rc.length){var eventCB=rc[0];\"SetDate\"===eventCB.m_callback&&this.Record(\"FilterByDate\",eventCB.m_parameters)}}},SAPUIList.prototype.FilterByDate=function(dateStr){var outputParams={},calendar=this.GetListCalendar();return calendar||this.Report(micFail,\"FilterByDate\",[dateStr],\"List doesn't support filtering by Date.\"),\"\"===dateStr?(this.SetFilterDateInput(calendar,\"\"),void this.Report(micDone,\"FilterByDate\",[dateStr])):ValidateYMDFormat(dateStr)?(this.SetFilterDateInput(calendar,dateStr),_util.Wait(100),void this.Report(micDone,\"FilterByDate\",[dateStr],\"\")):(this.Report(micFail,\"FilterByDate\",[dateStr],\"Date Format is invalid, Format should be YYYYMMDD\"),!1)},SAPUIList.prototype.SetFilterDateInput=function(calendarElem,date){new SAPCalendarFactory({element:calendarElem,isStandalone:!1}).SetDate(date)},SAPUIList.prototype.ConvertToToolBarCalendarFormat=function(calendar,dateStr,outputParams){var year=dateStr.slice(0,4),month=dateStr.slice(4,6),day=dateStr.slice(6,8);if(isNaN(year)||isNaN(month)||isNaN(day))return outputParams.details=\"Date Format is invalid, Format should be YYYYMMDD\",\"\";var calendarCoreElement=getCoreFromElement(calendar);if(!calendarCoreElement||!calendarCoreElement.getValueFormat)return outputParams.details=\"List doesn't support filtering by Date.\",\"\";var dateFormat=calendarCoreElement.getValueFormat();return dateFormat?(dateFormat=dateFormat.toLocaleLowerCase(),outputParams.status=micDone,-1===dateFormat.indexOf(\"yyyy\")&&(outputParams.details=\"Year field isn't applicable.\",outputParams.status=micWarning),-1===dateFormat.indexOf(\"mm\")&&(outputParams.details=\"Month field isn't applicable.\",outputParams.status=micWarning),-1===dateFormat.indexOf(\"dd\")&&(outputParams.details=\"Day field isn't applicable.\",outputParams.status=micWarning),dateFormat.replace(\"yyyy\",year).replace(\"mm\",month).replace(\"dd\",day)):(outputParams.details=\"Error in retrieving date format.\",\"\")},SAPUIList.prototype.GetListCalendar=function(){return window._uft.$(this.GetInfoToolBar()).find(\".sapMDP\").get(0)},SAPUIList.prototype.RegisterInfoToolBarCalendar=function(){var calendar=this.GetListCalendar();if(calendar){var config={element:calendar};QtpConstants.IE===_util.GetBrowserType()?config.handlers=[new EventCallBack(\"focus\",\"OnListCalendarToolBarFocus\"),new EventCallBack(\"activate\",\"OnListCalendarToolBarActivate\"),new EventCallBack(\"blur\",\"OnListCalendarToolBarFocus\"),new EventCallBack(\"keyup\",\"OnListCalendarToolBarKeyUp\")]:config.handlers=[new EventCallBack(\"focus\",\"OnListCalendarToolBarFocus\"),new EventCallBack(\"select\",\"OnListCalendarToolBarSelect\"),new EventCallBack(\"blur\",\"OnListCalendarToolBarSelect\"),new EventCallBack(\"keyup\",\"OnListCalendarToolBarKeyUp\")];new SAPMCalendar(config).RegisterForEvents()}},SAPUIList.prototype.GetInfoToolBar=function(){return window._uft.$(this.Element()).find(\".sapMListInfoTBar\").get(0)},SAPUIList.prototype.RegisterComboBoxEvents=function(eventsHandlers){if(this.CheckNullElement(),this.IsDisabled())return!0;if(this.IsReadOnly())return!0;_control.RegisterElementToEvent(this.Element(),\"click\",\"OnComboBoxClick\");var comboText=this.GetComboBoxInnerEdit();if(comboText){SAPTextEditFactory({element:comboText,isStandalone:!1,handlers:[new EventCallBack(\"focus\",\"OnCBTextEditFocus\"),new EventCallBack(\"blur\",\"OnCBTextEditBlur\"),new EventCallBack(\"keydown\",\"OnCBTextEditKeydown\"),new EventCallBack(\"submit\",\"OnCBTextEditSubmit\")]}).RegisterForEvents()}return!0},SAPUIList.prototype.RegisterForEvents=function(eventsHandlers){this.CheckNullElement(),eventsHandlers&&this.SetEventHandlers(eventsHandlers);var totalMethods=this.EventsHandlers().length;if(0===totalMethods)return!1;if(this.IsDisabled())return!0;if(this.IsReadOnly())return!0;for(var items=this.GetItems(),totalRegistered=0,totalItems=items.length,i=0;i<totalItems;i++)if(!this.IsItemDisabled(items[i])){for(var j=0;j<totalMethods;j++){var eventHandler=this.EventsHandlers()[j];null!==eventHandler.m_parameters&&void 0!==eventHandler.m_parameters||(eventHandler.m_parameters=[]),_control.RegisterElementToEvent(items[i],eventHandler.Event(),eventHandler.Method(),eventHandler.Parameters())}totalRegistered++}return!0},SAPUIList.prototype.GetGrowing=function(){try{if(this.IsMobile()){var core=this.GetCoreElement();return!!core&&(this.IsComboBox()&&(core=core.getList()),core.getGrowing())}return!1}catch(err){if(this.GetGrowingList())return!0}return!1},SAPUIList.prototype.Grow=function(numberIn){if(this.IsUi())return!1;numberIn||(numberIn=1);var times=1;if(\"number\"==typeof numberIn&&(times=numberIn),!this.GetGrowing()||times<=0)return!1;for(var i=0;i<times;i++){var selectElem=this.GetGrowingElement();if(!selectElem)return!1;_control.ReplayClick(selectElem),_util.Wait(100)}return!0},SAPUIList.prototype.GrowUpTo=function(numberIn){var lineNumber=0;if(this.IsUi())return!1;if(numberIn||(numberIn=0),\"number\"==typeof numberIn&&(lineNumber=numberIn),!this.GetGrowing()||lineNumber<0)return!1;if(lineNumber<this.GetItems().length)return!0;var selectElem=null;do{if(!(selectElem=this.GetGrowingElement()))return!1;_control.ReplayClick(selectElem),_util.Wait(100)}while(lineNumber>=this.GetItems().length);return!0},SAPUIList.prototype.RegisterInputContainer=function(inputContainer,listItem){var input=window._uft.$(inputContainer).find(\".sapMInputBaseInner\").get(0);if(!input)return!1;var ctrl=new SAPUITextEdit({element:input,isStandalone:!1});return ctrl.SetTextBeforeChange(ctrl.GetValue()),this.UpdateListSingleElementToRegisterObject(input,[listItem],SAPUI5ControlTypeId.TEXTEDIT),!0},SAPUIList.ListSingleElementToRegister={params:[],element:null,type:null},SAPUIList.prototype.SetItemData=function(itemName,value){var methodName=\"SetItemData\",targetList=this.GetListForReplay(itemName),targetItem=targetList.GeneralGetItemFromList(itemName);if(!targetItem)return void this.Report(micFail,methodName,[itemName,value],\"Failed to find the list item: \"+itemName);this.SetListItemInput(targetItem,value)?this.Report(micDone,methodName,[itemName,value]):this.Report(micFail,methodName,[itemName,value],\"Failed to find text edit control in list item: \"+itemName)},SAPUIList.prototype.SetListItemInput=function(itemElement,value){var input=window._uft.$(itemElement).find(\".sapMInputBaseInner\").get(0);if(!input)return!1;var ctrl=new SAPUITextEdit({element:input,isStandalone:!1});return!!ctrl&&(ctrl.Set(value),!0)},SAPUIList.prototype.GeneralGetItemFromList=function(itemName){var isItemIndex=!1,itemIndex=toNumber(itemName,!0);return null!=itemIndex&&itemIndex>=1?(itemIndex-=1,isItemIndex=!0,this.GetItemByIndex(itemIndex)):this.GetItemByName(itemName)},SAPUIList.prototype.UpdateListSingleElementToRegisterObject=function(element,params,type){SAPUIList.ListSingleElementToRegister.element=element,SAPUIList.ListSingleElementToRegister.params=params,SAPUIList.ListSingleElementToRegister.type=type,this.SingleElementRegisterToEvent()},SAPUIList.prototype.SingleElementRegisterToEvent=function(){if(SAPUIList.ListSingleElementToRegister.element)switch(SAPUIList.ListSingleElementToRegister.type){case SAPUI5ControlTypeId.TEXTEDIT:this.RegisterSingleTextEditElement()}},SAPUIList.prototype.RegisterSingleTextEditElement=function(){var eventHandlers=[new EventCallBack(\"blur\",\"OnListTextEditBlur\"),new EventCallBack(\"keydown\",\"OnListTextEditKeydown\"),new EventCallBack(\"submit\",\"OnListTextEditSubmit\"),new EventCallBack(\"focus\",\"OnListTextEditBlur\")];return new SAPUITextEdit({element:SAPUIList.ListSingleElementToRegister.element,isStandalone:!1,handlers:eventHandlers}).RegisterForEvents(),!0},SAPUIList.prototype.RecordTextEditSet=function(params,eventCallback){if(null===eventCallback||0==eventCallback.length)return void myTrace(\"OnTextEditBlur null parameter\");var callBackData=eventCallback[0],itemText=\"\";if(\"Set\"===callBackData.m_callback&&0!==callBackData.m_parameters.length){if(itemText=callBackData.m_parameters[0]||\"\",!params||params.length<1)return!1;params[1]=itemText,this.Record(\"SetItemData\",params)}},SAPUIList.prototype.OnItemClick=function(selectedItem,eventObj){if(this.ShouldIgnoreEvent(eventObj))return!0;if(this.IsItemDisabled(selectedItem))return!1;var targetElem=null,itemName=this.GetItemName(selectedItem),allowMultiSelect=!1;try{allowMultiSelect=this.IsMultiselectable()}catch(err){allowMultiSelect=!1}var methodName=SAPUIListMethod.Select,innerElement=null;if(this.IsMobile()){targetElem=getTargetObjectFromEvent(eventObj);var inputContainer=window._uft.$(targetElem).parents(\".sapMILIDiv\").get(0);if(inputContainer&&this.RegisterInputContainer(inputContainer,itemName))return;return innerElement=window._uft.$(targetElem).closest(\"div.sapMLIBSelectM\"),0<innerElement.length?(methodName=this.IsItemSelected(selectedItem)?SAPUIListMethod.ExtendDeselect:SAPUIListMethod.ExtendSelect,this.Record(methodName,selectedItem),[new EventCallBack(\"click\",methodName,[itemName])]):(innerElement=window._uft.$(targetElem).closest(\"div.sapMLIBSelectS\"),0===innerElement.length&&(innerElement=window._uft.$(targetElem).closest(\"div.sapMLIBSelectSM\")),0===innerElement.length&&(innerElement=window._uft.$(targetElem).closest(\"div.sapMLIBSelectSL\")),0===innerElement.length&&(innerElement=window._uft.$(targetElem).closest(\"div.sapMRb\")),0<innerElement.length?(methodName=this.IsItemSelected(selectedItem)?\"\":SAPUIListMethod.SingleSelect,this.Record(methodName,selectedItem),[new EventCallBack(\"click\",methodName,[itemName])]):(innerElement=window._uft.$(targetElem).closest(\"div.sapMLIBSelectD\"),0<innerElement.length?(methodName=SAPUIListMethod.Delete,this.Record(methodName,selectedItem),[new EventCallBack(\"click\",methodName,[itemName])]):(innerElement=window._uft.$(targetElem).closest(\"button.sapMLIBSelectD\"),0<innerElement.length?(methodName=SAPUIListMethod.Delete,this.Record(methodName,selectedItem),[new EventCallBack(\"click\",methodName,[itemName])]):(innerElement=window._uft.$(targetElem).closest(\"div.sapMLIBCursor\"),0===innerElement.length&&(innerElement=window._uft.$(targetElem).closest(\"span.sapMLIBImgNav\")),0<innerElement.length?(methodName=SAPUIListMethod.Details,this.Record(methodName,[itemName]),[new EventCallBack(\"click\",methodName,[itemName])]):(innerElement=window._uft.$(targetElem).closest(\"UL.sapMGrowingList\"),0<innerElement.length?(methodName=SAPUIListMethod.More,this.Record(methodName),[new EventCallBack(\"click\",methodName,[])]):(innerElement=window._uft.$(targetElem).closest(\"div.sapMGrowingList\"),0<innerElement.length?(methodName=SAPUIListMethod.More,this.Record(methodName),[new EventCallBack(\"click\",methodName,[])]):(methodName=SAPUIListMethod.Select,this.Record(methodName,selectedItem),[new EventCallBack(\"click\",methodName,[itemName])])))))))}return allowMultiSelect&&eventObj.ctrlKey&&(methodName=this.IsItemSelected(selectedItem)?SAPUIListMethod.ExtendDeselect:SAPUIListMethod.ExtendSelect),this.Record(methodName,selectedItem),[new EventCallBack(\"click\",methodName,[itemName])]},SAPUIList.prototype.More=function(){var Details=\"\",status=micDone;return this.Grow()?(this.Report(micDone,SAPUIListMethod.More),!0):(this.Report(micDone,SAPUIListMethod.More,[],\"More button does not exist.\"),!1)},SAPUIList.prototype.Select=function(itemName,methodName){if(!this.IsVisible())return this.Report(micFail,methodName,itemName,\"The object is invisible.\"),!1;var Details=\"\",targetList=this,status=micDone,isItemIndex=!1,itemIndex=toNumber(itemName,!0);if(null!=itemIndex&&(itemIndex-=1,isItemIndex=!0),this.IsComboBox()&&methodName!==SAPUIListMethod.Select)return this.Report(micFail,methodName,itemName,\"Irrelevant method.\"),!1;if(!(targetList=this.GetListForReplay(itemName)))return!1;var itemFound=!1,targetItem=null;if(isItemIndex){if(itemIndex<0)return this.Report(micFail,methodName,itemName,\" Invalid item index: \"+itemName+\".\"),!1;targetItem=targetList.GetItemByIndex(itemIndex)}else targetItem=targetList.GetItemByName(itemName);if(null==targetItem)return this.Report(micFail,methodName,itemName,\"Failed to find the list item named: \"+itemName),!1;if(targetList.IsItemDisabled(targetItem))return this.Report(micFail,methodName,itemName,\"Ignore to select disabled list item named: \"+itemName),!1;if(methodName===SAPUIListMethod.ExtendSelect&&targetList.IsItemSelected(targetItem))return this.Report(micDone,methodName,itemName,\"The item already selected: \"+itemName),!1;if(methodName===SAPUIListMethod.ExtendDeselect&&!targetList.IsItemSelected(targetItem))return this.Report(micDone,methodName,itemName,\"The item already deselected: \"+itemName),!1;itemIndex=window._uft.$(targetItem).index();var result=this.ReplayMethod(targetItem,itemIndex,methodName);return this.Report(result.status,methodName,itemName,result.details),!0},SAPUIList.prototype.ReplayMethod=function(targetItem,itemIndex,methodName){if(!methodName)return{status:micFail,details:\"Method undefined.\"};if(!targetItem)return{status:micFail,details:\"Null item element.\"};var selectElem=null,Status=micDone,Details=\"\",replayTarget=this.GetTargetElementForReplay(targetItem,methodName);if(!(selectElem=replayTarget.element))return{status:micFail,details:replayTarget.details};try{this.GetCoreElement().scrollToIndex(itemIndex)}catch(err){}if(this.IsMobile())window._uft.$(targetItem).focus(),_control.ReplayClick(selectElem);else switch(methodName){case SAPUIListMethod.SingleSelect:case SAPUIListMethod.Select:window._uft.$(targetItem).focus(),window._uft.$(targetItem).simulate(\"click\");break;case SAPUIListMethod.Deselect:case SAPUIListMethod.ExtendDeselect:case SAPUIListMethod.ExtendSelect:window._uft.$(targetItem).focus();var e=window._uft.jQuery.Event(\"click\");e.ctrlKey=!0,window.jQuery?window.$(targetItem).trigger(e):window._uft.$(targetItem).trigger(e);break;default:Status=micFail,Details=\"Irrelevant.\"}return{status:Status,details:Details}},SAPUIList.prototype.GetListForReplay=function(itemName){var childListElem=null,targetList=this,details=\"\",methodName=\"GetListForReplay\";if(this.IsComboBox()){if(!this.IsComboBoxExpanded()){if(!this.ExpandComboBox(details))return this.Report(micFail,methodName,itemName,details),null}for(var times=0;times<10;times++){childListElem=this.GetComboBoxChildList();{if(null!=childListElem)break;_util.Wait(100)}}if(null==childListElem)return this.Report(micFail,methodName,itemName,\" Can not find visible popup list of combobox\"),null;targetList=new SAPUIList({element:childListElem,isStandalone:!1})}return targetList},SAPUIList.prototype.GetTargetElementForReplay=function(targetItem,methodName){var selectElem=null,Status=micDone,Details=\"\";switch(methodName){case\"SingleSelect\":this.IsMobile()?(selectElem=window._uft.$(targetItem).find(\"div.sapMRb\").get(0),Details=\"Single selection item not found.\"):selectElem=targetItem;break;case\"Deselect\":case\"ExtendDeselect\":case\"ExtendSelect\":this.IsMobile()?(selectElem=window._uft.$(targetItem).find(\"div.sapMCb\").get(0),Details=\"Multiple selection item not found.\"):selectElem=targetItem;break;case\"Delete\":this.IsMobile()?(selectElem=window._uft.$(targetItem).find(\"div.sapMLIBSelectD > span\").get(0),selectElem||(selectElem=window._uft.$(targetItem).find(\"button.sapMLIBSelectD > span\").get(0)),Details=\"Fail to delete this item.\"):(Status=micFail,Details=\"Irrelevent method.\");break;case\"Details\":this.IsMobile()?(selectElem=window._uft.$(targetItem).find(\"div.sapMLIBCursor > span\").get(0),selectElem||(selectElem=window._uft.$(targetItem).find(\"span.sapMLIBImgNav\").get(0)),Details=\"Details item not found.\"):(Status=micFail,Details=\"Irrelevent method.\");break;case\"Select\":this.IsMobile()&&!this.IsComboBox()?(selectElem=window._uft.$(targetItem).find(\"div.sapMLIBContent\").get(0),Details=\" Content item not found.\"):selectElem=targetItem;break;default:selectElem=null,Status=micFail,Details=\"Method \"+methodName+\" not supported.\"}return{element:selectElem,status:Status,details:Details}},SAPUIList.prototype.GetItem=function(numberIn){var nmb=-1,rc=\" \",textElement=null;if(\"number\"!=typeof numberIn)return this.Report(micFail,\"GetItem\",[numberIn],\"Not numeric type.\"),rc;if((nmb=numberIn-1)<0)return this.Report(micFail,\"GetItem\",[numberIn],\"Invalid item index: \"+numberIn+\".\"),rc;var li=this.GetItems(),len=li.length;return len>0&&len>nmb?(rc=this.GetItemName(li[nmb]),this.Report(micDone,\"GetItem\",[numberIn],rc||\"\")):this.Report(micFail,\"GetItem\",[numberIn],\" Item index: \"+numberIn+\" is out of range.\"),rc},SAPUIList.prototype.GetValue=function(){if(this.IsComboBox()){var innerEdit=this.GetComboBoxInnerEdit();return null==innerEdit?null:innerEdit.value}var itemList=this.GetSelectedItems();return this.ConnectItemNames(itemList)},SAPUIList.prototype.IsDisabled=function(){if(this.IsComboBox()){var innerEditElem=this.GetComboBoxInnerEdit();if(null==innerEditElem)return!1;return new SAPUI5Control({element:innerEditElem}).IsDisabled()}var innerListElem=this.GetInnerListElement();return null!=innerListElem&&new SAPUI5Control({element:innerListElem}).IsDisabled()},SAPUIList.prototype.IsVisible=function(){var rc=!0;return this.IsUi()?rc=\"visible\"===window._uft.$(this.Element()).css(\"visibility\"):this.IsMobile()&&(rc=0===window._uft.$(this.Element()).parents(\"DIV.sapMNavItemHidden\").length),rc},SAPUIList.prototype.IsReadOnly=function(){if(this.IsComboBox()){var innerEditElem=this.GetComboBoxInnerEdit();if(null==innerEditElem)return!1;return new SAPUI5Control({element:innerEditElem}).IsReadOnly()}var innerListElem=this.GetInnerListElement();return null!=innerListElem&&new SAPUI5Control({element:innerListElem}).IsReadOnly()},SAPUIList.prototype.IsMultiselectable=function(){if(this.IsComboBox())return!1;var innerListElem=this.GetInnerListElement(),val=!1;return this.IsMobile()?val=window._uft.$(innerListElem).hasClass(\"sapMListModeMultiSelect\"):\"true\"===(val=window._uft.$(innerListElem).attr(\"aria-multiselectable\"))},SAPUIList.prototype.IsComboBox=function(){var elem=this.Element();return\"combobox\"==window._uft.$(elem).attr(\"role\")||!!isElementOfClass(elem,\"DIV\",\"sapMComboBox\")},SAPUIList.prototype.IsComboBoxPopup=function(){return isElementOfClass(this.Element(),\"UL\",\"sapMSelectList\")},SAPUIList.prototype.IsListBox=function(elem){return null==elem&&(elem=this.Element()),!!window._uft.$(elem).is(\"DIV\")&&(!window._uft.$(elem).is(\"[role='combobox']\")&&!(window._uft.$(elem).find(\"UL[role='listbox']\").length<1))},SAPUIList.prototype.IsComboBoxVisbleChildList=function(elem){return null==elem&&(elem=this.Element()),!!this.IsListBox(elem)&&!isNotComboBoxVisbleChildList(elem)},SAPUIList.prototype.GetComboBoxChildList=function(){var elem=this.Element();if(this.IsMobile()){var core=this.GetCoreElement();return null!=core?core.getList().getDomRef():null}for(var childrenVal=window._uft.$(elem).attr(\"aria-owns\"),childIds=childrenVal.split(\" \"),i=0;i<childIds.length;i++){var childElem=window._uft.$(\"#\"+childIds[i]).get(0);if(null!=childElem&&this.IsComboBoxVisbleChildList(childElem))return childElem}return null},SAPUIList.prototype.IsComboBoxExpanded=function(){var elem=this.Element();if(this.IsMobile())return window._uft.$(elem).hasClass(\"sapMComboBoxBasePressed\");var expandButton=window._uft.$(elem).find(\"DIV[role='presentation']\").get(0);return null!=expandButton&&\"on\"!=window._uft.$(expandButton).attr(\"unselectable\")},SAPUIList.prototype.ExpandComboBox=function(Details){var elem=this.Element(),expandButton;return null==(expandButton=this.IsMobile()?window._uft.$(elem).find(\"DIV.sapMComboBoxBaseArrow, Button.sapMComboBoxBaseArrow, SPAN.sapMComboBoxBaseArrow, SPAN.sapMSltArrow, SPAN.sapMInputBaseIcon\").get(0):window._uft.$(elem).find(\"DIV[role='presentation']\").get(0))?(Details=\" Fail to expand combo box. The expanding button is not found.\",!1):(_control.ReplayClick(expandButton),!0)},SAPUIList.prototype.GetComboBoxInnerEdit=function(){var elem=this.Element(),comboBox=window._uft.$(elem).children(\"input\").get(0);return void 0===comboBox&&(comboBox=window._uft.$(elem).find(\"DIV > input\").get(0)),\"true\"===window._uft.$(comboBox).attr(\"aria-readonly\")&&(comboBox=window._uft.$(elem).find(\"label\").get(0)),comboBox},SAPUIList.prototype.IsItemDisabled=function(listItem){if(null==listItem)return!0;var val=window._uft.$(listItem).attr(\"aria-disabled\");if(\"true\"===val)return!0;var selectRbElement=window._uft.$(listItem).find(\"DIV.sapMRb\").get();return selectRbElement?val=window._uft.$(selectRbElement).attr(\"aria-disabled\"):(selectElement=window._uft.$(listItem).find(\"DIV.sapMCb\").get(),selectElement&&(selectElement=window._uft.$(selectElement).find(\"INPUT\").get()),val=checkElementAttributeValue(selectElement,\"disabled\",\"disabled\")?\"true\":\"false\"),\"true\"===val},SAPUIList.prototype.IsItemSelected=function(listItem){var selectElement;if(null==listItem)return!0;var val=window._uft.$(listItem).attr(\"aria-selected\");return\"true\"===val||(!0===(selectElement=window._uft.$(listItem).hasClass(\"sapUiLbxISel\"))||(!0===(selectElement=window._uft.$(listItem).hasClass(\"sapMLIBSelected\"))||(selectElement=window._uft.$(listItem).find(\"DIV.sapMRb\").get(),selectElement?val=window._uft.$(selectElement).attr(\"aria-checked\"):(selectElement=window._uft.$(listItem).find(\"DIV.sapMCb\").get(),selectElement&&(selectElement=window._uft.$(selectElement).find(\"INPUT\").get()),val=checkElementAttributeValue(selectElement,\"checked\",\"checked\")?\"true\":\"false\"),\"true\"===val)))},SAPUIList.prototype.GetName=function(){var elem=this.Element(),firstItem=null;if(this.IsMobile()){var listCore=this.GetCoreElement(),hdrText=null;try{if(hdrText=listCore.getHeaderText())return hdrText}catch(err){}var headerElement=window._uft.$(this.Element()).find(\"DIV.sapMListHdr\").get();if(headerElement)return getControlText(headerElement)}return null!==elem.title?elem.title:this.IsComboBox()&&null!==(firstItem=this.GetItemByIndex(0))?this.GetItemName(firstItem):\"\"},SAPUIList.prototype.GetItems=function(){var rc=new Array,targetList=this.Element();return this.IsComboBox()&&null==(targetList=this.GetComboBoxChildList())?rc:rc=!this.IsMobile()||this.IsComboBoxPopup()||isElementOfClass(targetList,\"UL\",\"sapMSelectList\")?window._uft.$(targetList).find(\"LI\").get():window._uft.$(targetList).find(\" UL.sapMListUl:not(.sapMGrowingList ) > LI\").get()},SAPUIList.prototype.ConnectItemNames=function(itemElemList){if(null==itemElemList||null==itemElemList.length)return\"\";for(var rc=\"\",i=0;i<itemElemList.length;i++){i>0&&(rc+=\";\");rc+=this.GetItemName(itemElemList[i])}return rc},SAPUIList.prototype.ConnectItemIndexes=function(itemElemList){if(null==itemElemList||null==itemElemList.length)return\"\";for(var rc=\"\",i=0;i<itemElemList.length;i++){i>0&&(rc+=\";\");rc+=this.GetItemIndex1based(itemElemList[i])}return rc},SAPUIList.prototype.GetSelectedItems=function(){var rc=new Array;if(this.IsComboBox()){var innerEdit=this.GetComboBoxInnerEdit(),selectedIndex=window._uft.$(innerEdit).attr(\"aria-posinset\");if(null==selectedIndex)return rc;var childList=this.GetComboBoxChildList();if(null==childList)return rc;var selectedItem=window._uft.$(childList).find(\"LI[aria-posinset='\"+selectedIndex+\"']\").get(0);return null!=selectedItem&&rc.push(selectedItem),rc}var element=this.Element(),list=window._uft.$(element).find(\"LI\").get();list=list.filter(function(listItem){return listItem&&listItem.className&&listItem.className.indexOf(\"sapMSelectListItem\")<0});for(var i=0;i<list.length;i++)this.IsItemSelected(list[i])&&rc.push(list[i]);return rc},SAPUIList.prototype.GetInnerListElement=function(){var element=this.Element(),innerListElem=window._uft.$(element).find(\"UL[role='listbox']\").get(0);return innerListElem||(innerListElem=window._uft.$(element).find(\"UL.sapMListUl:not(UL.sapMGrowingList)\").get(0)),innerListElem},SAPUIList.prototype.GetGrowingList=function(){var element=this.Element(),growingListElem=window._uft.$(element).find(\"UL.sapMGrowingList\").get(0);return growingListElem&&\"none\"!==growingListElem.style.display?window._uft.$(growingListElem).find(\"LI\").get(0):(growingListElem=window._uft.$(element).find(\"DIV.sapMGrowingList\").get(0),growingListElem&&\"none\"!==growingListElem.style.display?window._uft.$(growingListElem).find(\"DIV\").get(0):null)},SAPUIList.prototype.GetGrowingElement=function(){var element=this.Element(),growingListElem=window._uft.$(element).find(\"UL.sapMGrowingList\").get(0);return growingListElem&&\"none\"!==growingListElem.style.display?window._uft.$(growingListElem).find(\"LI > DIV.sapMLIBContent\").get(0):(growingListElem=window._uft.$(element).find(\"DIV.sapMGrowingList\").get(0),growingListElem&&\"none\"!==growingListElem.style.display?window._uft.$(growingListElem).find(\"DIV > DIV.sapMLIBContent\").get(0):null)},SAPUIList.prototype.GetItemIndex1based=function(itemElement){return null==itemElement?null:getIndex1based(itemElement)},SAPUIList.prototype.GetInputTextFromSelectedItem=function(itemElement){var rc=null;if(null==itemElement)return null;var textElement=window._uft.$(itemElement).find(\"span.sapUiLbxITxt\").get();return rc=getControlText(textElement),rc=trim(\"\"+rc),rc||(textElement=this.GetItemTextElement(itemElement),rc=getControlText(textElement),rc=trim(\"\"+rc)),rc},SAPUIList.prototype.GetItemTextElement=function(itemElement){if(null===itemElement)return null;var textElement=null;if(this.IsMobile()){if(this.IsComboBox()||this.IsComboBoxPopup())return itemElement;if(!(textElement=window._uft.$(itemElement).find(\"div.sapMLIBContent\").get(0)))return null;if(textElement=window._uft.$(itemElement).find(\"div.sapMObjectIdentifierTitle\").get(0))return textElement;if(textElement=window._uft.$(itemElement).find(\"label.sapMILILabel\").get(0))return textElement;if(textElement=window._uft.$(itemElement).find(\"span.sapMILILabel\").get(0))return textElement;if(textElement=window._uft.$(itemElement).find(\"label.sapMDLILabel\").get(0))return textElement;if(textElement=window._uft.$(itemElement).find(\"div.sapMSLITitleOnly\").get(0))return textElement;if(textElement=window._uft.$(itemElement).find(\"div.sapMFFLITitle\").get(0))return textElement;if(textElement=window._uft.$(itemElement).find(\"div.sapMObjLTopRow\").get(0))return null;if(textElement=window._uft.$(itemElement).find(\"div.sapMObjLBottomRow\").get(0))return null;if(textElement=window._uft.$(itemElement).find(\".sapMSLITitle\").get(0))return textElement;if(textElement=window._uft.$(itemElement).find(\"span.sapMObjLTitle\").get(0))return textElement;if(textElement=window._uft.$(itemElement).find(\"span.sapMSLITitle\").get(0))return textElement;if(textElement=window._uft.$(itemElement).find(\"div.sapMSLIDescription\").get(0))return textElement;if(textElement=window._uft.$(itemElement).find(\"div.sapMSLIInfo\").get(0))return textElement}return textElement},SAPUIList.prototype.GetFacetFilterParent=function(){return window._uft.$(this.Element()).parents(\".sapUiUx3FacetFilter\").get(0)||window._uft.$(this.Element()).parents(\".sapMFF\").get(0)},SAPUIList.prototype.GetItemName=function(itemElement){if(null==itemElement)return null;var rc=null,textElement=null,itemIndex1based=null;if(this.IsUi()){var facetFilter=this.GetFacetFilterParent();if(facetFilter&&SAPUIFacetFilter){if((rc=new SAPUIFacetFilter({element:facetFilter}).GetFacetFilterItemName(itemElement))&&rc.length>0)return rc}if(textElement=window._uft.$(itemElement).find(\"span.sapUiLbxITxt\").get(0),rc=getControlText(textElement?textElement:itemElement),null!==(rc=trim(\"\"+rc)))return rc}else(textElement=this.GetItemTextElement(itemElement))&&(rc=getControlText(textElement),rc=trim(\"\"+rc));return rc||null!==(itemIndex1based=this.GetItemIndex1based(itemElement))&&(rc=\"#\"+itemIndex1based),rc},SAPUIList.prototype.GetItemByIndex=function(index){if(index<0)return null;var list=this.GetItems();return null==list?null:index>=list.length&&!this.GrowUpTo(index)?null:this.GetItems()[index]},SAPUIList.prototype.GetItemByName=function(name){if(null==name)return null;name=trim(name);for(var itemName=null,list=this.GetItems(),i=0;i<list.length;i++){if(itemName=this.GetItemName(list[i]),trim(\"\"+itemName)===name)return list[i];this.Grow()&&(list=this.GetItems())}return null},SAPUIList.prototype.GetListItemContent=function(liElement){if(!liElement)return null;var data=\"\",content=window._uft.$(liElement).find(\"div.sapMLIBContent\").get(0);if(!content)return null;var leaves=window._uft.$(content).find(\":not(:has(*))\");return leaves=0===leaves.length?[content]:leaves,data+=this.GetTextOfLeavesElements(leaves).join(\";\")},SAPUIList.prototype.Record=function(methodName,params,delay){if(this.IsStandalone()){-1!==[SAPUIListMethod.Set,SAPUIListMethod.Select,SAPUIListMethod.ExtendSelect,SAPUIListMethod.ExtendDeselect,SAPUIListMethod.Delete,SAPUIListMethod.SingleSelect].indexOf(methodName)&&(params=this.ConvertItemNameToItemIndexIfNeeded(params)),SAPUI5Control.prototype.Record.call(this,methodName,params,delay)}},SAPUIList.prototype.ConvertItemNameToItemIndexIfNeeded=function(selectedItem){if(\"string\"==typeof selectedItem)return selectedItem;for(var itemsNameList=this.GetItems(),selectedItemIndex=this.GetItemIndex1based(selectedItem)-1,selectedItemName=this.GetItemName(selectedItem),i=0;i<itemsNameList.length;i++)if(this.GetItemName(itemsNameList[i])===selectedItemName&&i!==selectedItemIndex)return\"#\"+(selectedItemIndex+1);return\"#-1\"===selectedItemName?selectedItem:selectedItemName},SAPUIMenu.InheritsFrom(SAPUI5Control),SAPMMenu.InheritsFrom(SAPUIMenu),SAPUIMenu.prototype.GetPropertyValue=function(property){try{return\"logical_name\"===property?this.GetName():\"id\"===property&&(rc=this.Element().id,null===rc)?this.GetName():\"default value\"===property?\"\":\"disabled\"===property?this.IsDisabled():SAPUI5Control.prototype.GetPropertyValue.call(this,property)}catch(err){return myTrace(\"SAPUIMenu.GetPropertyValue Error : \"+err.message,LogSeverity_Error),null}},SAPUIMenu.prototype.RegisterForEvents=function(){if(this.IsDisabled())return!0;if(this.IsReadOnly())return!0;this.IsMobile()||this.InternalRegisterForEvent(new EventCallBack(\"keyup\",\"OnMenuItemEnterKeyAction\"));for(var subMenus=Array.prototype.slice.call(window._uft.$(\"div.sapUiMnu.sapUiShd\"),1),i=0;i<subMenus.length;i++)_control.RegisterElementToEvent(subMenus[i],\"keydown\",\"OnMenuItemEnterKeyAction\",subMenus[i]);if(!window._uft.$(this.Element()).hasClass(\"sapMSltPicker\")||(this.RegisterParentMenu(),DeviceType.IsAndroid()||_util.GetBrowserType()!==QtpConstants.Chrome||!this.GetCoreElement())){for(var items=this.GetItems(),totalRegistered=0,i=0;i<items.length;i++)if(!this.IsItemDisabled(items[i])){var textBox=window._uft.$(items[i]).find(\"input[role='textbox']\").get();if(textBox.length>0){var eventHandlers=[new EventCallBack(\"keydown\",\"OnMnuTextEditKeydown\")],textFld=new SAPUITextEdit({element:textBox[0],isStandalone:!1,handlers:eventHandlers});textFld.RegisterForEvents()}else _control.RegisterElementToEvent(items[i],\"click\",\"OnItemClick\",items[i]),window._uft.$(items[i]).attr(\"aria-owns\")&&_control.RegisterElementToEvent(items[i],\"mousemove\",\"OnItemMouseOver\",items[i]);totalRegistered++}return myTrace(\"SAPUIMenu \"+this.GetName()+\" RegisterForEvents for \"+totalRegistered+\" of \"+items.length+\" items \",LogSeverity_Information,0,SAPUI5_LIST_CATEGORY),!0}},SAPUIMenu.prototype.RegisterMenuItemsWithDelay=function(){this.RegisterMenuItems();var that=this;_util.GetBrowserType()!==QtpConstants.IE&&window.setTimeout(function(){that.RegisterMenuItems()},10)},SAPUIMenu.prototype.RegisterMenuItems=function(item,eventObj){if(window._uft.$(item).hasClass(\"sapUiMnuItmSubMnuOpen\")){for(var items=this.GetItems(),i=0;i<items.length;i++)this.IsItemDisabled(items[i])||(_control.RegisterElementToEvent(items[i],\"click\",\"OnItemClick\",items[i]),window._uft.$(items[i]).attr(\"aria-owns\")&&_control.RegisterElementToEvent(items[i],\"mousemove\",\"OnItemMouseOver\",items[i]));for(var subMenus=Array.prototype.slice.call(window._uft.$(\"div.sapUiMnu.sapUiShd\"),1),i=0;i<subMenus.length;i++)_control.RegisterElementToEvent(subMenus[i],\"keyup\",\"OnMenuItemEnterKeyAction\",subMenus[i])}},SAPUIMenu.prototype.RegisterParentMenu=function(){var core=this.GetCoreElement();if(core&&core.getParent){var parentMenu=core.getParent().getDomRef();_control.RegisterElementToEvent(parentMenu,\"keyup\",\"OnParentElementKeyup\",parentMenu)}},SAPUIMenu.prototype.OnParentElementKeyup=function(handlerParam,eventObj){if(eventObj&&handlerParam&&13===eventObj.keyCode){var parentMenu=handlerParam,itemText=window._uft.$(parentMenu).find(\".sapMSltLabel\").text();this.Record(\"Select\",[itemText])}},SAPUIMenu.prototype.OnItemClick=function(handlerParam,eventObj){this.RecordItemSelection(handlerParam,eventObj)},SAPUIMenu.prototype.OnMenuItemEnterKeyAction=function(handlerParam,eventObj){var target=getTargetObjectFromEvent(eventObj),selectedItem=window._uft.$(target).find(\".sapUiMnuItmHov\").get();13===eventObj.keyCode?this.RecordItemSelection(selectedItem,eventObj):this.RegisterMenuItemsWithDelay()},SAPUIMenu.prototype.RecordItemSelection=function(selectedItem,eventObj){if(this.ShouldIgnoreEvent(eventObj))return!0;if(this.IsItemDisabled(selectedItem))return!1;var path=this.GetItemPath(selectedItem);if(null==path)return!1;var textBox=window._uft.$(selectedItem).find(\"input[role='textbox']\").get(0);return void 0!=textBox?this.Record(\"Select\",[path,textBox.value]):this.Record(\"Select\",path),!0},SAPUIMenu.prototype.Select=function(path,value){var params=[path];void 0!=value&&(params[1]=value);var pathArray=path.split(\";\"),originMenuId=this.GetHTMLId();myTrace(\" Menu id = \"+originMenuId);var core=this.GetCore(),sapMenu=null;core&&(sapMenu=core.byId(originMenuId));var promise=new HPPromise,selectInSubMenu=function(level,that){var submenu=window._uft.$(_elem).parent().children(\".sapUiMnu\")[level];if(!submenu)return window.setTimeout(function(){selectInSubMenu(level,that)},300),!1;var itemName=pathArray[level],targetItem=that.GetItemInSubmenu(itemName,submenu);if(null===targetItem)return that.Report(micFail,\"Select\",params,\"Path not Found.\"),that.CloseMenuPopup(sapMenu),promise.resolve(!1),!1;if(that.IsItemDisabled(targetItem))return that.Report(micFail,\"Select\",params,\"Item \"+itemName+\" is Disabled.\"),that.CloseMenuPopup(sapMenu),promise.resolve(!1),!1;if(level!==pathArray.length-1&&!that.IsItemHasSubMenu(targetItem))return that.Report(micFail,\"Select\",params,\"Path not Found.\"),that.CloseMenuPopup(sapMenu),promise.resolve(!1),!1;if(window.jQuery?window.$(targetItem).mouseover():window._uft.$(targetItem).mouseover(),level<pathArray.length-1)window.setTimeout(function(){selectInSubMenu(level+1,that)},500);else if(void 0!=value){var textElem=window._uft.$(targetItem).find(\"input[role='textbox']\").get(0);if(!textElem)return that.Report(micFail,\"Select\",params,\"Can not find TextBox.\"),!1;var textEdit=new SAPUITextEdit({element:textElem,isStandalone:!1});textEdit.Set(value),window._uft.$(textElem).submit();var e=window._uft.jQuery.Event(\"keydown\");e.keyCode=13,window._uft.$(textElem).trigger(e)}else that.Report(micDone,\"Select\",params),promise.resolve(!0),window.setTimeout(function(){_control.ReplayEvent(targetItem,\"click\")},100)},that=this;return window.setTimeout(function(){selectInSubMenu(0,that)},0),promise},SAPMMenu.prototype.Select=function(path,value){var params=[];params[0]=path,void 0!=value&&(params[1]=value);var pathArray=path.split(\";\"),itemName=\"\",originMenuId=this.GetHTMLId(),promise=new HPPromise;if(pathArray.length>0){itemName=trim(pathArray[0]),myDebug(window.mydebug);var btn;return isElementOfClass(this.Element(),\"DIV\",\"sapMSlt\")?btn=new SAPUIButton({element:this.Element()}):isElementOfClass(this.Element(),\"DIV\",\"sapMSltPicker\")&&(this.IsVisible()?myTrace(\"Popup div.sapMSltPicker Is Visible.\"):btn=new SAPUIButton({element:this.GetCoreElement().getParent().getDomRef()})),btn&&(myTrace(\"ReplayClick to show menu\"),btn.ReplayClick()),this.AsyncSelect(itemName,value,btn,promise)}return this.Report(micFail,\"Select\",params,\"Path not Found.\"),promise.resolve(!1),promise},SAPMMenu.prototype.AsyncSelect=function(itemName,value,btn,promise){var times=8,timeInterval=220,that=this;myTrace(\">> SAPMMenu.AsyncSelect \"+itemName);var fWaitForPopup=function(){var submenu;if(DeviceType.IsSupportedMobile())return submenu=that.GetItemsFromMobileMenu(),myTrace(\"Mobile Device, Waiting for popup Resolved\"),promise.resolve(that.SelectItem(submenu,itemName,value)),promise;var pop=window._uft.$(\"DIV.sapMPopover\"),len=pop.length;if(len>0)for(var i=0;i<len;i++)if(\"visible\"===pop.eq(i).css(\"visibility\"))return submenu=pop[i],myTrace(\"Desktop, visible popup found, \"+(submenu.id?submenu.id:\"\")+\" proceed to selection\"),promise.resolve(that.SelectItem(submenu,itemName,value)),myTrace(\"<< SAPMMenu.AsyncSelect  \"+itemName+\" promise resolved\"),promise;return times--,timeInterval+=50,times>0?window.setTimeout(function(){fWaitForPopup()},timeInterval):btn&&0===times?(btn.ReplayClick(),window.setTimeout(function(){fWaitForPopup()},timeInterval)):btn&&-1===times&&window.setTimeout(function(){fWaitForPopup()},timeInterval),promise};return window.setTimeout(function(){fWaitForPopup()},timeInterval),promise},SAPMMenu.prototype.SelectItem=function(submenu,itemName,value){myTrace(\">> SAPMMenu.SelectItem \"+itemName);var originMenuId=this.GetHTMLId(),core=this.GetCore(),sapMenu;core&&(sapMenu=core.byId(originMenuId));var params=[];params[0]=itemName,void 0!==value&&(params[1]=value);var targetItem;if(!submenu)return this.Report(micFail,\"Select\",params,\"Path not Found.\"),this.CloseMenuPopup(sapMenu,\"<< SelectItem FAILED.  Null submenu. \"+itemName+\" not found , close (\"+originMenuId+\")\"),!1;if(sapMenu&&sapMenu.isOpen&&sapMenu.open&&!1===sapMenu.isOpen()&&(myTrace(\" Menu not Opened, call native sapMenu.open(\"+itemName+\") for \"+originMenuId),sapMenu.open()),!(targetItem=this.GetItemInSubmenu(itemName,submenu)))return myDebug(window.GetItemInSubmenuFailed),this.CloseMenuPopup(sapMenu,\"<< SelectItem FAILED. GetItemInSubmenu. Path \"+itemName+\" not found , close (\"+originMenuId+\")\"),this.Report(micFail,\"Select\",params,\"Path not Found.\"),!1;if(this.IsItemDisabled(targetItem))return this.CloseMenuPopup(sapMenu,\"<< SelectItem FAILED. Item \"+itemName+\" Disabled. Close (\"+originMenuId+\")\"),this.Report(micFail,\"Select\",params,\"Item \"+itemName+\" is Disabled.\"),!1;if(window._uft.$(targetItem).mouseover(),void 0!==value){var textElem=window._uft.$(targetItem).find(\"input[role='textbox']\").get(0);if(!textElem)return this.CloseMenuPopup(sapMenu,\"Can not find TextBox for Item \"+itemName+\" close (\"+originMenuId+\")\"),this.Report(micFail,\"Select\",params,\"Can not find TextBox.\"),!1;new SAPUITextEdit({element:textElem,isStandalone:!1}).Set(value),window._uft.$(textElem).submit();var e=window._uft.jQuery.Event(\"keydown\");e.keyCode=13,window._uft.$(textElem).trigger(e)}else{var textItem=this.GetItemTextElement(targetItem);_control.ReplayEvent(textItem,\"click\"),this.CloseMenuPopup(sapMenu,\"Item \"+itemName+\" selected. Close (\"+originMenuId+\")\")}return this.Report(micDone,\"Select\",params),!0},SAPMMenu.prototype.GetAdjustedMenu=function(){var element=this.Element();return(window._uft.$(element).hasClass(\"sapMSelectList\")?element:window._uft.$(element).find(\"UL.sapMSelectList\").get(0))||element},SAPMMenu.prototype.GetItemTextElement=function(itemElement){if(!DeviceType.IsSupportedMobile())return itemElement;if(!itemElement)return null;var $itemElement=window._uft.$(itemElement),textElement;return(textElement=$itemElement.hasClass(\"sapMSelectListItem\")?$itemElement.get(0):$itemElement.find(\".sapMSLITitleOnly\").get(0))||itemElement},SAPUIMenu.prototype.CloseMenuPopup=function(sapMenu,traceMessage){try{if(!sapMenu)return;var sapMenuA=null,core,adjustedMenu,originMenuId;sapMenu.isOpen&&sapMenu.close?!0===sapMenu.isOpen()&&sapMenu.close():(core=this.GetCore())&&(adjustedMenu=this.GetAdjustedMenu(),originMenuId=adjustedMenu.id||this.GetHTMLId(),(sapMenuA=core.byId(originMenuId))&&sapMenuA.isOpen&&sapMenuA.close&&!0===sapMenuA.isOpen()&&sapMenuA.close())}catch(err){myTrace(\" SAPUIMenu.CloseMenuPopup Error : \"+err.message,LogSeverity_Error)}},SAPUIMenu.prototype.GetItemsFromMobileMenu=function(){return window._uft.$(\"LI.sapMSelectListItem\").get()},SAPUIMenu.prototype.GetName=function(){if(this.IsMobile()){var select=isElementOfClass(this.Element(),\"DIV\",\"sapMSlt\")?this.Element():this.GetCoreElement().getParent().getDomRef(),index=window._uft.$(\"DIV.sapMSlt\").index(window._uft.$(select));if(index<0)return\"\";index++;return 1==index?\"SAPUIMenu\":\"SAPUIMenu_\"+index}var elem=this.Element(),firstItem=this.GetSubMenuItemByIndex1based(1,elem);return null!=firstItem?this.GetItemName(firstItem):\"\"},SAPUIMenu.prototype.GetItems=function(){var rc=null;return this.IsMobile()?(rc=_util.GetBrowserType()===QtpConstants.Chrome?window._uft.$(\"LI.sapMSelectListItem\").get():window._uft.$(\"LI.sapMSltItem\").get(),0===rc.length&&(rc=window._uft.$(this.Element()).find(\"LI.sapMSelectListItem\").get())):rc=window._uft.$(\"LI[role='menuitem']\").get(),rc},SAPUIMenu.prototype.IsItemDisabled=function(item){if(null==item)return!0;var val=!1;return this.IsUi()?val=\"true\"==window._uft.$(item).attr(\"aria-disabled\"):this.IsMobile()&&(val=isElementOfClass(item,\"LI\",\"sapMSltItemDisabled\")||isElementOfClass(item,\"LI\",\"sapMSelectListItemDisabled\")),val},SAPUIMenu.prototype.IsItemHasSubMenu=function(item){return!!window._uft.$(item).find(\"DIV.sapUiIconMirrorInRTL\").get(0)},SAPUIMenu.prototype.GetItemPath=function(itemElement){if(null==itemElement)return null;for(var itemName=this.GetItemName(itemElement),path=itemName,itemLevel=this.GetItemSubMenuLevel(itemElement),currentItem=itemElement,i=itemLevel-1;i>0;i--){var parentItem=this.GetParentSelectedItem(currentItem);itemName=this.GetItemName(parentItem),path=itemName+\";\"+path,currentItem=parentItem}return path},SAPUIMenu.prototype.GetItemName=function(itemElement){if(null==itemElement)return null;var $itemElement=window._uft.$(itemElement),textElement;if(this.IsMobile()){if($itemElement.hasClass(\"sapMSelectListItem\"))textElement=$itemElement.get(0);else if(!(textElement=$itemElement.find(\".sapMSLITitleOnly\").get(0)))return itemElement.innerHTML}else textElement=$itemElement.find(\".sapUiMnuItmTxt\").get(0);if(null==textElement)return null;var rc=getElementInnerText(textElement);if(!(rc=trim(\"\"+rc))){var itemIndex1based=this.GetItemIndex1based(itemElement);null!==itemIndex1based&&(rc=\"#\"+itemIndex1based)}return rc},SAPUIMenu.prototype.GetItemIndex1based=function(itemElement){if(null==itemElement)return null;var indexStr=null,elem=window._uft.$(itemElement);return this.IsUi()?(indexStr=elem.attr(\"aria-posinset\"))&&(indexStr=parseInt(indexStr,10)):this.IsMobile()&&(indexStr=elem.siblings().length-elem.nextAll().length+1),indexStr},SAPUIMenu.prototype.GetItemSubMenuLevel=function(itemElement){if(this.IsMobile())return 1;if(null==itemElement)return null;var subMenu=window._uft.$(itemElement).parents(\"DIV[role='menu']\").get(0);return null==subMenu?null:window._uft.$(subMenu).parent().children(\".sapUiMnu\").index(subMenu)+1},SAPUIMenu.prototype.GetParentSelectedItem=function(itemElement){if(null==itemElement)return null;var subMenu=window._uft.$(itemElement).parents(\"DIV[role='menu']\").get(0);return null==subMenu?null:window._uft.$(\"LI[role='menuitem']\").filter(\"[aria-owns='\"+subMenu.id+\"']\").get(0)},SAPUIMenu.prototype.GetSubMenuItemByIndex1based=function(itemIndex1based,subMenu){null==subMenu&&(subMenu=this.Element());var item;return item=this.IsMobile()?this.GetSubMenuItemByIndexMobileItem(itemIndex1based-1,subMenu):window._uft.$(subMenu).find(\"LI[role='menuitem']\").filter(\"[aria-posinset='\"+itemIndex1based+\"']\").get(0)},SAPUIMenu.prototype.GetSubMenuItemByIndexMobileItem=function(indexZeroBased,subMenu){return subMenu.length&&subMenu.length>indexZeroBased&&(window._uft.$(subMenu[indexZeroBased]).hasClass(\"sapMSelectListItem\")||window._uft.$(subMenu[indexZeroBased]).hasClass(\"sapMSltItem\")||window._uft.$(subMenu[indexZeroBased]).hasClass(\"sapMSltNative\"))?subMenu[indexZeroBased]:window._uft.$(subMenu).find(\"LI.sapMSltItem\").get(indexZeroBased)||window._uft.$(subMenu).find(\"LI.sapMSelectListItem\").get(indexZeroBased)||window._uft.$(\"LI.sapMSltItem\").get(indexZeroBased)||window._uft.$(\"LI.sapMSelectListItem\").get(indexZeroBased)||window._uft.$(subMenu).find(\"select.sapMSltNative > option\").get(indexZeroBased)},SAPUIMenu.prototype.GetItemInSubmenu=function(itemName,subMenu){var isItemIndex=!1,itemString=trim(\"\"+itemName),regExp=/^#(\\d+)$/,itemIndex1based=0,itemIndexString,matchResult=regExp.exec(itemString);if(null!=matchResult){isItemIndex=!0;var itemIndexString=matchResult[1];if(itemIndex1based=parseInt(itemIndexString,10),isNaN(itemIndex1based)||itemIndex1based<1)return null}if(isItemIndex)return this.GetSubMenuItemByIndex1based(itemIndex1based,subMenu);var menuItems;this.IsMobile()?(menuItems=window._uft.$(subMenu).find(\"LI.sapMSltItem\").get(),0===menuItems.length&&(menuItems=window._uft.$(subMenu).find(\"LI.sapMSelectListItem\").get(),0===menuItems.length&&(menuItems=window._uft.$(\"LI.sapMSelectListItem\").get(),0===menuItems.length&&(menuItems=window._uft.$(\"LI.sapMSltItem\").get()))),DeviceType.IsSupportedMobile()&&(menuItems=this.GetItemsFromMobileMenu())):menuItems=window._uft.$(subMenu).find(\"LI[role='menuitem']\").get();var i=0,itemsCouter=menuItems.length;for(i=0;i<itemsCouter;i++)if(\"visible\"===window._uft.$(menuItems[i]).css(\"visibility\")){var menuItemName=this.GetItemName(menuItems[i]);if(myTrace(\"menu item \"+menuItemName+\" is visible\"),menuItemName===itemString)return myTrace(\"SAPUIMenu.GetItemInSubmenu( \"+itemName+\")  item FOUND\"),menuItems[i]}return myTrace(\"SAPUIMenu.GetItemInSubmenu( \"+itemName+\")  item not found\"),null},SAPUIMenu.prototype.GetItem=function(itemIndex){if(\"number\"!=typeof itemIndex)return this.Report(micFail,\"GetItem\",[itemIndex],\"Not numeric type.\"),\"\";if(itemIndex<=0)return this.Report(micFail,\"GetItem\",[itemIndex],\"Invalid item index: \"+itemIndex+\". Index values begin with 1.\"),\"\";var elem=this.Element(),itemElement=this.GetSubMenuItemByIndex1based(itemIndex,elem);if(null==itemElement)return this.Report(micFail,\"GetItem\",[itemIndex],\" Item index: \"+itemIndex+\" is out of range.\"),\"\";var rc=this.GetItemName(itemElement);return this.Report(micDone,\"GetItem\",[itemIndex],rc),rc};var defaultTextEditEventHandlers=[new EventCallBack(\"focus\",\"OnFocus\"),new EventCallBack(\"blur\",\"OnBlur\"),new EventCallBack(\"keydown\",\"OnKeydown\"),new EventCallBack(\"submit\",\"OnSubmit\")],defaultTextEditEventHandlerForButton=new EventCallBack(\"click\",\"OnButtonClick\"),defaultTextEditEventHandlerForOptions=new EventCallBack(\"click\",\"OnOptionClick\"),EditType={NORMAL:0,SEARCHFIELD:1,VALUEHELP:2,AUTOCOMPLETE:3,LAYOUT_CHILD_WRAPPER:4},m_textBeforeChange=\"\",m_lockForText=!0;SAPUITextEdit.InheritsFrom(SAPUI5Control),SAPUITextEdit.prototype.GetPropertyValue=function(property){return\"placeholder\"===property?this.GetElementAttributeValue(\"placeholder\"):\"multiline\"===property?this.CheckElementAttribute(\"aria-multiline\"):SAPUI5Control.prototype.GetPropertyValue.call(this,property)},SAPUITextEdit.prototype.GetTextBeforeChange=function(){return m_textBeforeChange},SAPUITextEdit.prototype.SetTextBeforeChange=function(value){m_textBeforeChange=value},SAPUITextEdit.prototype.GetName=function(){var labelElem,owner=this.GetOwner();return owner&&(labelElem=window._uft.$(owner).find(\"LABEL\").text()),labelElem||\"\"},SAPUITextEdit.prototype.GetTitle=function(){var owner=this.GetOwner();if(owner){var title=owner.title;if(title)return title;var elems=window._uft.$(owner).find(\"[title]\");if(elems.length>0)return elems.get(0).title}return\"\"},SAPUITextEdit.prototype.RegisterForEvents=function(eventsHandlers){this.CheckNullElement(),eventsHandlers&&this.SetEventHandlers(eventsHandlers);for(var len=this.EventsHandlers().length,i=0;i<len;i++)this.InternalRegisterForEvent(this.EventsHandlers()[i]);if(this.GetEditType()===EditType.SEARCHFIELD||this.GetEditType()===EditType.VALUEHELP){var button=this.GetButton();null!=button&&(_control.RegisterElementToEvent(button,\"mousedown\",\"DummyHandler\"),_control.RegisterElementToEvent(button,this.m_handlerForButton.Event(),this.m_handlerForButton.Method(),this.m_handlerForButton.Parameters()))}else if(this.GetEditType()===EditType.AUTOCOMPLETE)for(var options=this.GetSuggestOptions(),i=0;i<options.length;i++)_control.RegisterElementToEvent(options[i],this.m_handlerForOptions.Event(),this.m_handlerForOptions.Method(),this.m_handlerForOptions.Parameters());window._uft.$(this.Element()).parents(\".sapUiSearchFieldCb\").parents(\".sapUiSearchField\").get(0)&&_control.RegisterElementToEvent(this.Element(),\"select\",\"OnSearchFieldSelect\")},SAPUITextEdit.prototype.ShouldIgnoreEvent=function(eventObj){return!!this.IsDisabled()||!!this.IsReadOnly()},SAPUITextEdit.prototype.PreventReplayMethod=function(replayMethod,inputText){this.CheckNullElement(),replayMethod||(replayMethod=\"\"),inputText||(inputText=\"\");var details;return this.IsDisabled()?(details=this.SAPUIControlName()+\" is disabled.\",this.Report(micFail,replayMethod,[inputText],details),!0):this.IsReadOnly()?(details=this.SAPUIControlName()+\" is read only.\",this.Report(micFail,replayMethod,[inputText],details),!0):this.IsOutOfMaxLength(inputText)?(details=this.SAPUIControlName()+\" out of max length.\",this.Report(micFail,replayMethod,[inputText],details),!0):\"OpenPossibleEntries\"===replayMethod&&this.GetEditType()!==EditType.VALUEHELP?(details=this.SAPUIControlName()+\" is not a ValueHelpField.\",this.Report(micFail,replayMethod,[inputText],details),!0):\"Search\"===replayMethod&&this.GetEditType()!==EditType.SEARCHFIELD&&(details=this.SAPUIControlName()+\" is not a SearchField.\",this.Report(micFail,replayMethod,[inputText],details),!0)},SAPUITextEdit.prototype.IsOutOfMaxLength=function(inputText){return inputText.length>parseInt(this.GetElementAttributeValue(\"maxlength\"),10)},SAPUITextEdit.prototype.ShouldIgnoreRecord=function(methodName){return!this.IsStandalone()&&\"Set\"===methodName},SAPUITextEdit.prototype.GetOwner=function(){this.CheckNullElement();var elem,editType=this.GetEditType();return elem=editType===EditType.SEARCHFIELD||editType===EditType.LAYOUT_CHILD_WRAPPER?this.Element().parentElement.parentElement:editType===EditType.VALUEHELP||editType===EditType.AUTOCOMPLETE||editType===EditType.NORMAL?this.Element().parentElement:this.Element()},SAPUITextEdit.prototype.GetCoreElement=function(){var elem=this.GetOwner(),rc=this.GetCore();return rc&&elem&&(rc=rc.byId(elem.id)),rc||(rc=null),rc},SAPUITextEdit.prototype.GetEditType=function(){return this.m_EditType?this.m_EditType:(this.Initialize(),this.m_EditType)},SAPUITextEdit.prototype.GetButton=function(){return void 0!==this.m_Button?this.m_Button:(this.Initialize(),this.m_Button)},SAPUITextEdit.prototype.GetSuggestOptions=function(){var options,listbox=window._uft.$(\"#\"+this.GetOwner().id+\"-lb\").get(0);return options=listbox?window._uft.$(listbox).find(\"LI[role='option']\").get():[]},SAPUITextEdit.prototype.Initialize=function(){this.CheckNullElement();var parentElement=this.Element().parentElement;isElementOfClass(parentElement,\"DIV\",\"sapUiSearchField\",!0)?(this.m_EditType=EditType.SEARCHFIELD,this.m_Button=window._uft.$(parentElement).find(\"DIV.sapUiSearchFieldIco\")[0]):isElementOfClass(parentElement,\"DIV\",\"sapUiTfAutoComp\")?(this.m_EditType=EditType.AUTOCOMPLETE,this.m_Button=null):isElementOfClass(parentElement,\"DIV\",\"sapUiTfCombo\")?(this.m_EditType=EditType.VALUEHELP,this.m_Button=window._uft.$(parentElement).find(\"[role='button']\")[0]):isElementOfClass(parentElement,\"DIV\",\"sapUiHLayoutChildWrapper\")?(this.m_EditType=EditType.LAYOUT_CHILD_WRAPPER,this.m_Button=null):(this.m_EditType=EditType.NORMAL,this.m_Button=null)},SAPUITextEdit.prototype.OnButtonClick=function(handlerParam,eventObj){if(this.ShouldIgnoreEvent(eventObj))return!0;var methodName,params,editType=this.GetEditType(),currentValue=this.GetValue();if(editType===EditType.SEARCHFIELD){var core=this.GetCoreElement();if(!core)return null;core.getEnableClear()?(currentValue=\"\",core.getEnableFilterMode()?(methodName=\"Search\",params=[currentValue]):(methodName=\"Clear\",params=[])):(methodName=\"Search\",params=[currentValue])}else{if(editType!==EditType.VALUEHELP)return null;methodName=\"OpenPossibleEntries\",params=[]}return this.Record(methodName,params),this.SetTextBeforeChange(currentValue),!!this.IsStandalone()||null},SAPUITextEdit.isExpanded=!1,SAPUITextEdit.prototype.IsSearchFieldExpanded=function(handlerParam,eventObj){var searchfield=window._uft.$(this.Element()).parents(\".sapUiSearchFieldCb\");return!(!searchfield||\"true\"!==searchfield.attr(\"aria-expanded\"))&&(SAPUITextEdit.isExpanded=!0,!0)},SAPUITextEdit.prototype.OnSearchFieldSelect=function(handlerParam,eventObj){var rc=[],currentValue=this.GetValue();return!0===this.IsSearchFieldExpanded()||(!SAPUITextEdit.isExpanded||(this.Record(\"Search\",currentValue),myTrace(\"SAPUITextEdit.prototype.OnSearchFieldSelect:\"+SAPUI5ControlName.TEXTEDIT+\" is enabled. Record Bocus \"+this.GetTextBeforeChange(),LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY),SAPUITextEdit.isExpanded=!1,this.SetTextBeforeChange(currentValue),rc[0]=new EventCallBack(\"select\",\"Search\",[currentValue]),!!this.IsStandalone()||rc))},SAPUITextEdit.prototype.OnFocus=function(handlerParam,eventObj){return!0===this.IsSearchFieldExpanded()||(m_lockForText&&(this.SetTextBeforeChange(this.GetValue()),m_lockForText=!1),myTrace(\"SAPUITextEdit.prototype.OnFocus:\"+SAPUI5ControlName.TEXTEDIT+\" is enabled. Record Bocus \"+this.GetTextBeforeChange(),LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY),!!this.IsStandalone()||null)},SAPUITextEdit.prototype.OnBlur=function(handlerParam,eventObj){if(m_lockForText=!0,this.ShouldIgnoreEvent(eventObj))return!0;var currentValue=this.GetValue(),rc=[];return!0===this.IsSearchFieldExpanded()||(this.GetTextBeforeChange()!=currentValue&&(this.Record(\"Set\",currentValue),this.SetTextBeforeChange(currentValue),rc[0]=new EventCallBack(\"blur\",\"Set\",[currentValue]),myTrace(\"SAPUITextEdit.prototype.OnBlur: \"+SAPUI5ControlName.TEXTEDIT+\" is enabled. Record Set \"+currentValue,LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY)),!!this.IsStandalone()||rc)},SAPUITextEdit.prototype.OnSubmit=function(handlerParam,eventObj){return!!this.ShouldIgnoreEvent(eventObj)||(this.Record(\"Submit\"),!!this.IsStandalone()||null)},SAPUITextEdit.prototype.OnOptionClick=function(handlerParam,eventObj){if(this.ShouldIgnoreEvent(eventObj))return!0;var option=getTargetObjectFromEvent(eventObj),currentValue=getControlText(option),rc=[];return this.GetTextBeforeChange()!==currentValue&&(this.Record(\"Set\",currentValue),this.SetTextBeforeChange(currentValue),rc[0]=new EventCallBack(\"click\",\"Set\",[currentValue]),myTrace(\"SAPUITextEdit.prototype.OnOptionClick: \"+SAPUI5ControlName.TEXTEDIT+\" is enabled. Record Set \"+currentValue,LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY)),!!this.IsStandalone()||rc},SAPUITextEdit.prototype.OnKeydown=function(handlerParams,eventObj){if(this.ShouldIgnoreEvent(eventObj))return!0;if(this.IsTextArea())return!0;var currentValue=this.GetValue(),rc=[],methodName=\"\",editType=this.GetEditType(),params=[];return 115===eventObj.keyCode?editType==EditType.VALUEHELP&&(methodName=\"OpenPossibleEntries\",params=[]):13===eventObj.keyCode&&(editType==EditType.SEARCHFIELD?(methodName=\"Search\",params=[currentValue],this.SetTextBeforeChange(currentValue)):this.GetTextBeforeChange()!=currentValue?(methodName=\"Set\",params=[currentValue],rc[0]=this.GenerateTextEditRecordLine(currentValue)):null!=handlerParams&&null!=handlerParams[0]&&!0===handlerParams[0].toRecordRegardlessChanges&&(rc[0]=this.GenerateTextEditRecordLine(currentValue))),void 0!==methodName&&this.Record(methodName,params),!!this.IsStandalone()||rc},SAPUITextEdit.prototype.GenerateTextEditRecordLine=function(currentValue){var params=[currentValue];return this.SetTextBeforeChange(currentValue),new EventCallBack(\"keydown\",\"Set\",params)},SAPUITextEdit.prototype.IsTextArea=function(){return this.GetEditType()===EditType.NORMAL&&this.CheckElementAttribute(\"aria-multiline\")},SAPUITextEdit.prototype.Set=function(text){var methodName=\"Set\";if(this.PreventReplayMethod(methodName,text))return!1;if(void 0===text)return this.Report(micFail,methodName,[],\"Lack of argument\"),!1;window._uft.$(this.Element()).focus();var paramsArray=[];return DeviceType.IsMobile()&&1==this.setValueOnMobileDevice(text)?(this.Report(micDone,methodName,paramsArray,\"\"),!0):(this.Element().value=text||\"\",paramsArray.push(text||\"\"),window._uft.$(this.Element()).keydown(),window._uft.$(this.Element()).keyup(),this.Report(micDone,methodName,paramsArray,\"\"),!0)},SAPUITextEdit.prototype.setValueOnMobileDevice=function(text){if(!document.createEvent)return!1;var event=document.createEvent(\"TextEvent\");return!!event.initTextEvent&&(event.initTextEvent(\"textInput\",!0,!0,null,text||\"\"),this.Element().value=\"\",this.Element().dispatchEvent(event),this.Element().value!==text&&(this.Element().value=text||\"\"),!0)},SAPUITextEdit.prototype.Clear=function(){var methodName=\"Clear\";if(this.PreventReplayMethod(methodName,\"\"))return!1;window._uft.$(this.Element()).focus(),this.Element().value=\"\",window._uft.$(this.Element()).keydown(),window._uft.$(this.Element()).keyup(),this.Report(micDone,methodName,[],\"\")},SAPUITextEdit.prototype.Submit=function(methodName,paramsArray,details){switch(this.CheckNullElement(),arguments.length){case 0:methodName=\"Submit\";case 1:paramsArray=[];case 2:details=\"\"}if(this.PreventReplayMethod(methodName))return!1;this.ReplayEvent(\"keypress\",{keyCode:13}),this.Report(micDone,methodName,paramsArray,details)},SAPUITextEdit.prototype.Search=function(text){var methodName=\"Search\";if(this.PreventReplayMethod(methodName))return!1;var paramsMap=[],paramsArray=[];void 0!=text&&(text=text||\"\",paramsArray.push(text));var rc=this.GetCoreElement();if(rc)return text&&rc.setValue&&rc.setValue(text),text&&rc.fireSearch?(paramsMap.query=text,rc.fireSearch(paramsMap)):this.ButtonClick(),this.Report(micDone,methodName,paramsArray,\"\"),!0;this.Report(micFail,methodName,[],this.SAPUIControlName()+\" is not a valid SearchField.\")},SAPUITextEdit.prototype.OpenPossibleEntries=function(){var methodName=\"OpenPossibleEntries\";if(this.PreventReplayMethod(methodName))return!1;var rc=this.GetCoreElement();if(rc)return this.IsMobile()&&rc.fireValueHelpRequest?rc.fireValueHelpRequest():this.ButtonClick(),this.Report(micDone,methodName,[],\"\"),!0;this.Report(micFail,methodName,[],this.SAPUIControlName()+\" is not a valid ValueHelpField.\")},SAPUITextEdit.prototype.ButtonClick=function(){var button=this.GetButton();if(!button)throw this.Report(micFail,\"ButtonClick\",[],\"Target button not found\"),new Error(\"Target button not found\");window._uft.$(button).focus(),_control.ReplayClick(button)},SAPMTextEdit.InheritsFrom(SAPUITextEdit),SAPMTextEdit.prototype.Search=function(text){var methodName=\"Search\";if(this.PreventReplayMethod(methodName))return!1;var paramsArray=[];void 0!=text&&(text=text||\"\",paramsArray.push(text));var paramsMap=[],rc=this.GetCoreElement();if(rc)return text&&rc.setValue&&rc.setValue(text),text&&rc.fireLiveChange&&(paramsMap.newValue=text,rc.fireLiveChange(paramsMap)),text&&rc.fireSearch?(paramsMap.length=0,paramsMap.query=text,rc.fireSearch(paramsMap)):this.ButtonClick(),this.Report(micDone,methodName,toSafeArray(paramsArray),\"\"),!0;this.Report(micFail,methodName,[],this.SAPUIControlName()+\" is not a valid SearchField.\")},SAPMTextEdit.prototype.GetPropertyValue=function(property){return\"multiline\"===property?\"TEXTAREA\"===this.Element().tagName:SAPUITextEdit.prototype.GetPropertyValue.call(this,property)},SAPMTextEdit.prototype.IsDisabled=function(){return\"disabled\"===this.GetElementAttributeValue(\"disabled\")},SAPMTextEdit.prototype.IsReadOnly=function(){return\"readonly\"===this.GetElementAttributeValue(\"readonly\")},SAPMTextEdit.prototype.IsTextArea=function(){return this.GetEditType()===EditType.NORMAL&&isElementOfClass(this.Element(),\"TEXTAREA\",\"sapMTextAreaInner\")},SAPMTextEdit.prototype.PreventReplayMethod=function(replayMethod){this.CheckNullElement(),replayMethod||(replayMethod=\"\");var Details=\"\";return\"Search\"!==replayMethod&&\"Refresh\"!==replayMethod||this.GetEditType()===EditType.SEARCHFIELD?\"Search\"===replayMethod&&void 0!==this.GetCoreElement().getShowSearchButton&&!1===this.GetCoreElement().getShowSearchButton()?(Details=this.SAPUIControlName()+\" does not have Search Button.\",this.Report(micFail,replayMethod,[\"\"],Details),!0):\"Refresh\"===replayMethod&&void 0!==this.GetCoreElement().getShowRefreshButton&&!1===this.GetCoreElement().getShowRefreshButton()?(Details=this.SAPUIControlName()+\" does not have Refresh Button.\",this.Report(micFail,replayMethod,[\"\"],Details),!0):\"OpenPossibleEntries\"===replayMethod?this.GetEditType()!=EditType.VALUEHELP?(Details=this.SAPUIControlName()+\" is not a ValueHelpField.\",this.Report(micFail,replayMethod,[\"\"],Details),!0):!!this.IsDisabled()&&(Details=this.SAPUIControlName()+\" is disabled.\",this.Report(micFail,replayMethod,[\"\"],Details),!0):SAPUITextEdit.prototype.PreventReplayMethod.call(this,replayMethod):(Details=this.SAPUIControlName()+\" is not a SearchField.\",this.Report(micFail,replayMethod,[\"\"],Details),!0)},SAPMTextEdit.prototype.GetName=function(){var label=window._uft.$(this.GetOwner()).parent().prev().children(\"LABEL.sapMLabel\").get(0);if(null!=label)return label.innerHTML;var placeholder=this.GetElementAttributeValue(\"placeholder\");return null!=placeholder?placeholder:\"\"},SAPMTextEdit.prototype.Element=function(){var innerElement;switch(this.m_elementDOM.tagName){case\"INPUT\":case\"TEXTAREA\":case\"LABEL\":return this.m_elementDOM;case\"DIV\":if(innerElement=window._uft.$(this.m_elementDOM).find(\"INPUT\").get(0))return innerElement;if(innerElement=window._uft.$(this.m_elementDOM).find(\"TEXTAREA\").get(0))return innerElement;if(innerElement=window._uft.$(this.m_elementDOM).find(\"LABEL\").get(0))return innerElement;break;default:return this.m_elementDOM}return this.m_elementDOM},SAPMTextEdit.prototype.GetResetBtn=function(){return this.GetEditType()===EditType.SEARCHFIELD?window._uft.$(this.Element()).siblings(\".sapMSFR\").get(0):null},SAPMTextEdit.prototype.GetOwner=function(){this.CheckNullElement();var elem;return this.GetEditType()===EditType.SEARCHFIELD?elem=this.Element().parentElement.parentElement:(elem=this.Element().parentElement,(\"sapMInputDivWrapper\"==elem.className||elem.className.indexOf(\"sapMInputBaseContentWrapper\")>=0)&&(elem=elem.parentElement),\"sapMInputBaseDynamicContent\"==elem.className&&(elem=elem.parentElement.parentElement)),elem};var m_shouldIgnoreClear=!0;SAPMTextEdit.prototype.CheckIfHasVal=function(){m_shouldIgnoreClear=\"\"===this.GetValue()},SAPMTextEdit.prototype.RegisterForEvents=function(eventsHandlers){this.CheckNullElement(),eventsHandlers&&this.SetEventHandlers(eventsHandlers);for(var len=this.EventsHandlers().length,i=0;i<len;i++)this.InternalRegisterForEvent(this.EventsHandlers()[i]);var editType=this.GetEditType();if(editType===EditType.SEARCHFIELD){var rstBtn=this.GetResetBtn();null!=rstBtn&&(_control.RegisterElementToEvent(rstBtn,\"mousedown\",\"CheckIfHasVal\",rstBtn),_control.RegisterElementToEvent(rstBtn,\"mouseup\",this.m_handlerForButton.Method(),rstBtn))}if(editType===EditType.SEARCHFIELD||editType===EditType.VALUEHELP){var button=this.GetButton();null!=button&&_control.RegisterElementToEvent(button,this.m_handlerForButton.Event(),this.m_handlerForButton.Method(),button)}},SAPMTextEdit.prototype.Initialize=function(){this.CheckNullElement();var parentElement=this.Element().parentElement;if(isElementOfClass(parentElement,\"FORM\",\"sapMSF\",!0))this.m_EditType=EditType.SEARCHFIELD,this.m_Button=window._uft.$(parentElement).find(\"DIV.sapMSFS\")[0];else if(isElementOfClass(parentElement,\"DIV\",\"sapMInputVH\"))this.m_EditType=EditType.VALUEHELP,isElementOfClass(parentElement,\"DIV\",\"sapMInputVHO\")?this.m_Button=parentElement:this.m_Button=window._uft.$(parentElement).find(\"DIV.sapMInputValHelp\")[0];else if(isElementOfClass(parentElement.parentElement,\"DIV\",\"sapMInputVH\")){var parentElement=parentElement.parentElement;this.m_EditType=EditType.VALUEHELP,isElementOfClass(parentElement,\"DIV\",\"sapMInputVHO\")?this.m_Button=parentElement:this.m_Button=window._uft.$(parentElement).find(\"DIV.sapMInputValHelp\")[0]}else if(isElementOfClass(parentElement.parentElement,\"DIV\",\"sapMInputBaseHeightMargin\")||isElementOfClass(parentElement.parentElement.parentElement,\"DIV\",\"sapMInputBaseHeightMargin\")){var parentElement=parentElement.parentElement;this.m_EditType=EditType.VALUEHELP,this.m_Button=window._uft.$(parentElement).find(\"DIV.sapMInputBaseIconContainer\")[0]}else this.m_EditType=EditType.NORMAL,this.m_Button=null},SAPMTextEdit.prototype.OnButtonClick=function(button,eventObj){if(\"readonly\"===window._uft.$(button).attr(\"readonly\")||\"disabled\"===window._uft.$(button).attr(\"disabled\"))return!1;var methodName,params,editType=this.GetEditType(),currentValue=this.GetValue();if(editType===EditType.SEARCHFIELD){var core=this.GetCoreElement();if(!core)return null;var owner=this.GetOwner(),isHasRefreshBtn=core.getShowRefreshButton();if(isElementOfClass(button,\"DIV\",\"sapMSFR\")&&!m_shouldIgnoreClear)methodName=\"Clear\",currentValue=\"\",params=[];else{if(!isElementOfClass(button,\"DIV\",\"sapMSFS\"))return null;isElementOfClass(owner,\"DIV\",\"sapMFocus\")?(methodName=\"Search\",params=[currentValue]):isHasRefreshBtn?(methodName=\"Refresh\",params=[]):(methodName=\"Search\",params=[currentValue])}}else{if(editType!==EditType.VALUEHELP)return null;methodName=\"OpenPossibleEntries\",params=[]}return this.Record(methodName,params),this.SetTextBeforeChange(currentValue),!!this.IsStandalone()||null},SAPMTextEdit.prototype.Clear=function(){if(EditType.SEARCHFIELD===this.GetEditType()&&isElementOfClass(this.GetOwner(),\"DIV\",\"sapMSFVal\")){var button=window._uft.$(this.Element()).siblings(\"DIV.sapMSFR\");if(button.length>0)return button[0].focus(),_control.ReplayClick(button[0]),!0}return this.ClearSAPMTextEdit()},SAPMTextEdit.prototype.ClearSAPMTextEdit=function(){var methodName=\"Clear\";if(this.PreventReplayMethod(methodName))return!1;window._uft.$(this.Element()).focus(),this.Element().value=\"\",window._uft.$(this.Element()).keydown(),window._uft.$(this.Element()).keyup(),this.Report(micDone,methodName,[],\"\")},SAPMTextEdit.prototype.Refresh=function(){var methodName=\"Refresh\";return!this.PreventReplayMethod(methodName)&&(window._uft.$(this.Element()).blur(),this.ButtonClick(),this.Report(micDone,methodName,[],\"\"),!0)},SAPMTextEdit.prototype.ButtonClick=function(){var button=this.GetButton();return!!button&&(window._uft.$(button).focus(),_control.ReplayClick(button),!0)};var m_currentId=null,defaulCalendarEventHandlers=[new EventCallBack(\"focus\",\"OnFocus\"),new EventCallBack(\"activate\",\"OnActivate\"),new EventCallBack(\"select\",\"OnSelect\"),new EventCallBack(\"blur\",\"OnBlur\")];SAPUICalendar.InheritsFrom(SAPUI5Control),SAPUICalendar.prototype.GetValue=function(){this.CheckNullElement();var element=this.Element();if(element.hasAttribute(\"role\")&&\"dialog\"==element.getAttribute(\"role\")){var selector=\"input[role=combobox][aria-owns='\"+element.getAttribute(\"id\")+\"']\",input=_uft.$(selector);if(input.length>0)return input.get(0).value}var innerEdit=this.GetInnerEdit();if(innerEdit)return innerEdit.value},SAPUICalendar.prototype.GetDate=function(){var rc=this.GetCoreElement(),element=this.Element();if(element.hasAttribute(\"role\")&&\"dialog\"==element.getAttribute(\"role\")){var selector=\"input[role=combobox][aria-owns='\"+element.getAttribute(\"id\")+\"']\",input=_uft.$(selector);if(input.length>0)return new SAPMCalendar({element:input.eq(0).parent().get(0),isStandalone:!0}).GetDate()}if(!rc)return this.GetValue();if(\"function\"==typeof rc.getYyyymmdd)return rc.getYyyymmdd();if(\"function\"==typeof rc.getValue)return rc.getValue();if(\"function\"==typeof rc._getFocusedDate){var date=rc._getFocusedDate();if(!date)return\"\";var yyyy,mm,dd;return yyyy=\"\"+date.getFullYear(),mm=date.getMonth()+1,mm=mm>9?mm:\"0\"+mm,dd=date.getDate(),dd=dd>9?dd:\"0\"+dd,yyyy+mm+dd}},SAPUICalendar.prototype.GetLocale=function(){var rc=this.GetCoreElement();return rc&&void 0!==rc.getLocale?rc.getLocale():\"\"},SAPUICalendar.prototype.IsDisabled=function(){this.CheckNullElement();var innerEdit=this.GetInnerEdit();if(innerEdit){return new SAPUI5Control({element:innerEdit}).IsDisabled()}return!1},SAPUICalendar.prototype.IsReadOnly=function(){this.CheckNullElement();var innerEdit=this.GetInnerEdit();if(innerEdit){return new SAPUI5Control({element:innerEdit}).IsReadOnly()}return!1},SAPUICalendar.prototype.ShouldIgnoreEvent=function(eventObj){return!1===isLeftMouseButtonEvent(eventObj)||(!!this.IsDisabled()||!!this.IsReadOnly())},SAPUICalendar.prototype.GetInnerEdit=function(){return void 0===this.m_InnerEdit&&(this.m_InnerEdit=window._uft.$(this.Element()).find(\"Input\").get(0)),this.m_InnerEdit},SAPUICalendar.prototype.GetCalendarButton=function(){return void 0===this.m_CalButton&&(this.m_CalButton=window._uft.$(this.Element()).find(\"div.sapMInputValHelp, div.sapUiTfDateIcon\").get(0)),this.m_CalButton},SAPUICalendar.prototype.RegisterForEvents=function(eventsHandlers){this.CheckNullElement(),eventsHandlers&&this.SetEventHandlers(eventsHandlers);for(var currentEventHandlers=this.EventsHandlers(),i=0;i<currentEventHandlers.length;i++)if(currentEventHandlers[i]){var currentEvent=currentEventHandlers[i].Event(),elemToRegister;elemToRegister=this.GetInnerEdit();var currentMethod=currentEventHandlers[i].Method(),currentParams=currentEventHandlers[i].Parameters();if(elemToRegister&&_control.RegisterElementToEvent(elemToRegister,currentEvent,currentMethod,currentParams),\"click\"===currentEvent){var buttonElement=this.GetCalendarButton();buttonElement&&_control.RegisterElementToEvent(buttonElement,currentEvent,currentMethod,currentParams)}}if(!this.IsPersistedPropExist()&&!this.IsCalendarPopupBody()){var refreshCalendar=new SAPMCalendar({element:this.Element().getElementsByClassName(\"sapMDP\")[0],isStandalone:!1}),currentDateInCal=this.IsParentElemOfCalendar()?refreshCalendar.GetDate():this.GetDate();this.SetPersistedCalendarValue(currentDateInCal)}},SAPUICalendar.prototype.IsParentElemOfCalendar=function(){return\"sapMListTblCell\"==this.Element().className},SAPUICalendar.prototype.GetButton=function(){return window._uft.$(this.Element()).find(\"BUTTON.ui-datepicker-trigger\").get(0)},SAPUICalendar.prototype.GetName=function(){var innerEdit=this.GetInnerEdit();return innerEdit?window._uft.$(innerEdit).attr(\"aria-describedby\"):\"\"},SAPUICalendar.prototype.OnFocus=function(){return this.RecordIfChange(\"focus\")},SAPUICalendar.prototype.OnSelect=function(){return this.RecordIfChange(\"select\")},SAPUICalendar.prototype.OnBlur=function(){if(!DeviceType.IsiOS())return this.RecordIfChange(\"blur\")},SAPUICalendar.prototype.OnActivate=function(){if(!DeviceType.IsiOS())return this.RecordIfChange(\"activate\")},SAPUICalendar.prototype.CheckBelowVersion152=function(){var versionStr=sap.ui.getCore().getConfiguration().getVersion().toString().split(\".\");return 100*parseInt(versionStr[0],10)+parseInt(versionStr[1],10)<152},SAPUICalendar.prototype.HandleErrorOrWarningInput=function(event){if(this.m_elementDOM.ownerDocument.activeElement.attributes[\"aria-describedby\"]){var sapWarningInput=this.m_elementDOM.querySelector(\".sapMInputBaseWarningInner\"),sapErrorInput=this.m_elementDOM.querySelector(\".sapMInputBaseErrorInner\"),dp=this.m_elementDOM.ownerDocument.activeElement.attributes[\"aria-describedby\"].value;if(sapErrorInput&&sapErrorInput.getAttribute(\"aria-describedby\")==dp){var n=dp.lastIndexOf(\" \");return void(this.m_elementDOM.ownerDocument.activeElement.attributes[\"aria-describedby\"].value=-1==n?dp:dp.substr(0,n))}if(sapWarningInput&&sapWarningInput.getAttribute(\"aria-describedby\")==dp){var n=dp.lastIndexOf(\" \");return void(this.m_elementDOM.ownerDocument.activeElement.attributes[\"aria-describedby\"].value=-1==n?dp:dp.substr(0,n))}}},SAPUICalendar.prototype.RecordIfChange=function(event){if(!event)return[new EventCallBack(event,\"\",[])];var coreElement=this.GetCoreElement();coreElement&&\"blur\"===event&&coreElement.setValue&&this.CheckBelowVersion152()&&coreElement.setValue(this.GetValue());var dateStr=this.GetDate();if(void 0!=dateStr&&\"\"!=dateStr){var rc=[new EventCallBack(event,\"\",[])];return dateStr!==this.GetPersistedCalendarValue()&&(this.HandleErrorOrWarningInput(),this.Record(\"SetDate\",[dateStr]),this.SetPersistedCalendarValue(dateStr),rc[0]=new EventCallBack(event,\"SetDate\",[dateStr])),rc}},SAPUICalendar.prototype.SetPersistedCalendarValue=function(dateValue){if(this.IsParentElemOfCalendar())return void(this.Element().getElementsByClassName(\"sapMDP\")[0].currentDateVal=dateValue);this.Element().currentDateVal=dateValue},SAPUICalendar.prototype.GetPersistedCalendarValue=function(){return this.Element().currentDateVal},SAPUICalendar.prototype.IsPersistedPropExist=function(){return this.IsParentElemOfCalendar()?this.Element().getElementsByClassName(\"sapMDP\")[0].hasOwnProperty(\"currentDateVal\"):this.Element().hasOwnProperty(\"currentDateVal\")},SAPUICalendar.prototype.IsCalendarPopupBody=function(){var popupId=window._uft.$(this.Element()).attr(\"data-sap-ui-popup\");return this.IsParentElemOfCalendar()&&(popupId=window._uft.$(this.Element().getElementsByClassName(\"sapMDP\")[0]).attr(\"data-sap-ui-popup\")),void 0!==popupId},SAPUICalendar.prototype.PreventReplayMethod=function(replayMethod){if(this.CheckNullElement(),replayMethod||(replayMethod=\"\"),this.IsDisabled()){var Details=this.SAPUIControlName()+\".\"+this.GetName()+\" is disabled.\";return this.Report(micFail,replayMethod,[\"\"],Details),!0}if(this.IsReadOnly()){var Details=this.SAPUIControlName()+\".\"+this.GetName()+\" is read only.\";return this.Report(micFail,replayMethod,[\"\"],Details),!0}return!1},SAPUICalendar.prototype.SetDate=function(dateInputStr){var methodName=\"SetDate\",Details=\"\";if(this.PreventReplayMethod(methodName))return!1;void 0==dateInputStr&&(dateInputStr=\"\"),this.CheckNullElement();var rc=this.GetCoreElement();if(!rc)return Details=\"Core element of \"+this.GetName()+\" not found.\",this.Report(micFail,methodName,[],Details),!1;if(8===dateInputStr.length&&!isNaN(dateInputStr)&&rc.setYyyymmdd)rc.setYyyymmdd(dateInputStr),this.Report(micDone,methodName,[dateInputStr]);else{if(!rc.setValue)return Details=\"Core functions element of \"+this.GetName()+\" not found.\",this.Report(micFail,methodName,[],Details),!1;rc.setValue(dateInputStr),this.Report(micDone,methodName,[dateInputStr])}return!0},SAPMCalendar.InheritsFrom(SAPUICalendar),SAPMCalendar.prototype.GetDate=function(){var val=this.GetValue(),rc=this.GetCoreElement();if(rc&&\"function\"==typeof rc.getDateValue){var date=rc.getDateValue();if(date){var yyyy,mm,dd;yyyy=\"\"+date.getFullYear(),mm=date.getMonth()+1,mm=mm>9?mm:\"0\"+mm,dd=date.getDate(),dd=dd>9?dd:\"0\"+dd;return yyyy+mm+dd}return\"\"}return val},SAPMCalendar.prototype.IsReadOnly=function(){this.CheckNullElement();var innerEdit=this.GetInnerEdit();if(innerEdit){return new SAPMTextEdit({element:innerEdit}).IsReadOnly()}},SAPMCalendar.prototype.IsDisabled=function(){this.CheckNullElement();var innerEdit=this.GetInnerEdit();if(innerEdit){return new SAPMTextEdit({element:innerEdit}).IsDisabled()}},SAPMCalendar.prototype.PreventReplayMethod=function(replayMethod){if(this.CheckNullElement(),replayMethod||(replayMethod=\"\"),this.IsDisabled()){var Details=this.SAPUIControlName()+\".\"+this.GetName()+\" is disabled.\";return this.Report(micFail,replayMethod,[\"\"],Details),!0}if(DeviceType.IsSupportedMobile())return!1;if(this.IsReadOnly()){var Details=this.SAPUIControlName()+\".\"+this.GetName()+\" is read only.\";return this.Report(micFail,replayMethod,[\"\"],Details),!0}return!1},SAPMCalendar.prototype.SetDate=function(yyyymmdd){var methodName=\"SetDate\",Details=\"\";if(this.PreventReplayMethod(methodName))return!1;void 0==yyyymmdd&&(yyyymmdd=\"\"),this.CheckNullElement();var rc=this.GetCoreElement();if(rc){if(\"function\"==typeof rc.setDateValue){var date=this.GetDateFromString(yyyymmdd);return date?(rc.setDateValue(date),this.Report(micDone,methodName,[yyyymmdd]),!0):(Details=\"Input date has invalid format or data.\",this.Report(micFail,methodName,[],Details),!1)}return rc.setValue(yyyymmdd),this.reprot(micDone,methodName,[yyyymmdd]),!0}return Details=\"Core element of \"+this.GetName()+\" not found.\",this.Report(micFail,methodName,[],Details),!1},SAPMCalendar.prototype.GetDateFromString=function(yyyymmdd){var dateStr=trim(yyyymmdd);if(8!==dateStr.length)return null;var year=parseInt(dateStr.slice(0,4),10),day=parseInt(dateStr.slice(6,8),10);if(isNaN(year)||isNaN(day)||day<=0||day>31)return null;var month=parseInt(dateStr.slice(4,6),10)-1;return isNaN(month)||month<0||month>11?null:new window.Date(year,month,day)};var defaulLabelEventHandlers=[new EventCallBack(\"click\",\"OnClick\")];SAPUILabel.InheritsFrom(SAPUI5Control),SAPUILabel.prototype.GetName=function(){this.CheckNullElement();var name=this.GetInnerText();return name||(name=this.Element().title),name||(name=\"\"),name},SAPUILabel.prototype.GetValue=function(){return this.GetName()},SAPUILabel.prototype.OnClick=function(){this.Record(\"Click\",[])};var defaultRatingIndicatorEventHandlers=[new EventCallBack(\"click\",\"OnSelectItem\")];SAPUIRatingIndicator.InheritsFrom(SAPUI5Control),SAPUIRatingIndicator.prototype.GetPropertyValue=function(property){return\"maximum rating\"===property?this.GetMaxValue():\"rating\"===property?this.GetValue():\"orientation\"===property?window._uft.$(this.Element()).attr(\"aria-orientation\"):SAPUI5Control.prototype.GetPropertyValue.call(this,property)},SAPUIRatingIndicator.prototype.GetName=function(){return window._uft.$(this.Element()).attr(\"aria-label\")},SAPUIRatingIndicator.prototype.IsDisabled=function(){return this.IsMobile()?window._uft.$(this.Element()).hasClass(\"sapMRIDisabled\"):SAPUI5Control.prototype.IsDisabled.call(this)},SAPUIRatingIndicator.prototype.GetRatingItems=function(){var element=this.Element();return window._uft.$(element).hasClass(\"sapMRI\")?[element]:window._uft.$(element).find(\"DIV.sapUiRatingItm\").get()},SAPUIRatingIndicator.prototype.Select=function(itemIndex,method){var state=!0,micState=micDone,details=\"\",ratingItem=null,index;method||(method=\"Select\");do{if(this.IsReadOnly()){state=!1,details=\"Is Readonly.\";break}if(this.IsDisabled()){state=!1,details=\"Is Disabled.\";break}if(null!=itemIndex&&(index=toNumber(itemIndex)),null==index){state=!1,details=\"Invalid Rate Level.\";break}if(this.isItemNumOutOfRange(index)){state=!1,details=\"Rate Level \"+itemIndex+\" Out of Range.\";break}if(window._uft.$(this.Element()).hasClass(\"sapMRI\")){var coreElem=this.GetCoreElement();coreElem?coreElem.setValue(index):(state=!1,details=\"Element mot found.\");break}if(null==(ratingItem=this.GetRatingItemByNum(index))){state=!1,details=\"Rate Level not Found.\";break}ratingItem.click()}while(0);return!1===state&&(micState=micFail),this.IsStandalone()?(this.Report(micState,method,itemIndex,details),state):details},SAPUIRatingIndicator.prototype.isItemNumOutOfRange=function(itemNum){var element=this.Element(),min=window._uft.$(element).attr(\"aria-valuemin\");void 0==min&&(min=this.IsMobile()?0:1);var max=window._uft.$(element).attr(\"aria-valuemax\");return void 0==max&&(max=this.GetCoreElement().getMaxValue()),itemNum<min||itemNum>max},SAPUIRatingIndicator.prototype.onSwipeItem=function(handlerParam,eventObj){var itemValue=this.GetValueOfItem(this.Element());return!this.IsStandalone()||(this.Record(\"SetLevel\",itemValue,0),!0)},SAPUIRatingIndicator.prototype.OnSelectItem=function(handlerParam,eventObj){if(this.ShouldIgnoreEvent(eventObj))return!0;var trgt=getTargetObjectFromEvent(eventObj),ratingItem=null;isElementOfClass(trgt,\"DIV\",\"sapUiRatingItm\")||isElementOfClass(trgt,\"DIV\",\"sapMRI\")?ratingItem=trgt:(isElementOfClass(trgt,\"IMG\",\"sapUiRatingItmImg\")||isElementOfClass(trgt,\"DIV\",\"sapMRISelector\"))&&(ratingItem=window._uft.$(trgt).parent().get(0));var itemValue=this.GetValueOfItem(ratingItem);if(!itemValue&&0!==itemValue||isNaN(itemValue))return myTrace(\"itemValue: \"+itemValue+\" is not a number\"),!1;var method=\"SetLevel\";return this.IsStandalone()?(this.Record(method,itemValue,0),!0):[new EventCallBack(\"click\",method,[itemValue])]},SAPUIRatingIndicator.prototype.GetRatingItemByNum=function(itemNum){var element=this.Element();return window._uft.$(element).children(\"div.sapUiRatingItm\").get(itemNum-1)},SAPUIRatingIndicator.prototype.GetValue=function(){this.CheckNullElement();var element=this.Element();if(!window._uft.$(element).hasClass(\"sapMRI\"))return window._uft.$(element).attr(\"aria-valuenow\");var coreElem=this.GetCoreElement();return coreElem?coreElem.getValue():void 0},SAPUIRatingIndicator.prototype.GetMaxValue=function(){this.CheckNullElement();var element=this.Element();if(!window._uft.$(element).hasClass(\"sapMRI\"))return window._uft.$(this.Element()).attr(\"aria-valuemax\");var coreElem=this.GetCoreElement();return coreElem?coreElem.getMaxValue():void 0},SAPUIRatingIndicator.prototype.GetValueOfItem=function(ratingItem){if(!ratingItem)return null;var itemValue;if(window._uft.$(ratingItem).hasClass(\"sapMRI\"))if(DeviceType.IsSupportedMobile())itemValue=window._uft.$(ratingItem).attr(\"aria-valuenow\");else{var coreElem=this.GetCoreElement();coreElem&&(itemValue=coreElem.getValue())}else itemValue=window._uft.$(ratingItem).attr(\"itemvalue\");return parseInt(itemValue,10)},SAPUIRatingIndicator.prototype.RegisterForEvents=function(){this.CheckNullElement();var eventHandlers=this.EventsHandlers();if(0===eventHandlers.length)return!1;if(this.IsDisabled())return!0;if(this.IsReadOnly())return!0;DeviceType.IsMobile()&&_control.RegisterElementToEvent(this.Element(),\"swipe\",\"onRatingSwipeGesture\");for(var ratingItems=this.GetRatingItems(),ratingItemNum=ratingItems.length,i=0;i<ratingItemNum;i++){var current=ratingItems[i],eventHandler=eventHandlers[0];_control.RegisterElementToEvent(current,eventHandler.Event(),eventHandler.Method(),eventHandler.Parameters())}return!0};var _control={dispatchSwipeEventOnElement:function(element,direction,distance,duration,point){function doMoves(times,moveDistance){point=movePoint(direction,point,moveDistance),_control.dispatchTouchEventOnElement(element,\"move\",point),times>1?window.setTimeout(function(){doMoves(times-1,moveDistance)},timeOutForMove):window.setTimeout(function(){_contorl.dispatchTouchEventOnElement(element,\"end\",point)},timeOutForStartEnd)}function movePoint(direction,point,distance){var DIRECTIONS=_control.SWIPE_DIRECTIONS;switch(direction){case DIRECTIONS.LEFT:return{x:point.x-distance,y:point.y};case DIRECTIONS.RIGHT:return{x:point.x+distance,y:point.y};case DIRECTIONS.UP:return{x:point.x,y:point.y-distance};case DIRECTIONS.DOWN:return{x:point.x,y:point.y+distance}}throw Error(\"Unexpeced direction: \"+direction)}if(element&&distance&&direction){if(duration||(duration=2),!point){var rect=element.getBoundingClientRect();point={x:rect.left+rect.width/2,y:rect.top+rect.height/2}}_control._dispatchTouchEventOnDoc(element,\"start\",point);var numberOfMoves=Math.max(2,Math.floor(duration/100)),timeOutForStartEnd=.1*duration,timeOutForMove=(duration-2*timeOutForStartEnd)/numberOfMoves,moveDistance=distance/numberOfMoves;window.setTimeout(function(){_control.dispatchTouchEventOnElement(element,\"move\",point),window.setTimeout(function(){doMoves(numberOfMoves,moveDistance)},timeOutForMove)},timeOutForStartEnd)}},SWIPE_DIRECTIONS:{LEFT:0,RIGHT:1,UP:2,DOWN:3},dispatchTouchEventOnElement:function(element,type,point){if(element&&type){if(!point){var rect=element.getBoundingClientRect();point={x:rect.left+rect.width/2,y:rect.top+rect.height/2}}var event=document.createEvent(\"Event\");switch(event.initEvent(\"touch\"+type,!0,!0),event.changedTouches=_control._createTouchList(_control._createTouch(element,point)),type){case\"start\":case\"move\":event.touches=event.changedTouches,event.targetTouches=event.changedTouches;break;case\"end\":case\"cancel\":event.touches=_control._createTouchList(),event.targetTouches=_control._createTouchList();break;default:this._logger.warn(\"_dispatchTouchEventOnDoc got an unknown type of touch event: \"+type)}return element.dispatchEvent(event)}},_createTouch:function(element,point,id){var touchInfo={view:window,target:element,identifier:id||0,pageX:point.x,pageY:point.y,clientX:point.x,clientY:point.y};return document.createTouch?document.createTouch(window,element,id,point.x,point.y,point.x,point.y):\"function\"==typeof Touch?new Touch(touchInfo):touchInfo},_createTouchList:function(touches){return document.createTouchList?touches?document.createTouchList(touches):document.createTouchList():Array.isArray(touches)?touches:[touches]},normalizeDesktopEventToGesture:function(eventName){var retval={isGesture:!1,name:eventName};switch(eventName){case\"swipe\":retval.isGesture=!0,retval.name=\"swipe\";break;case\"click\":retval.isGesture=!0,retval.name=\"tap\";break;case\"mousedown\":retval.name=\"touchstart\";break;case\"mouseup\":retval.name=\"touchend\"}return retval},RegisterElementToEvent:function(element,event,handlerMethod,handlerParams){if(DeviceType.IsMobile()){var eventObj=_control.normalizeDesktopEventToGesture(event);eventObj.isGesture?_util.RegisterForGesture(element,eventObj.name,handlerMethod,handlerParams):_util.RegisterForEvent(element,\"on\"+eventObj.name,handlerMethod,handlerParams)}else _util.RegisterForEvent(element,\"on\"+event,handlerMethod,handlerParams)},GetBaseURI:function(element){return element||(element=_elem),window._uft.$(element).baseURI||window.document.baseURI||window.document.URL||window.location.href},GetComponentId:function(element){element||(element=_elem);var id=window._uft.$(element).baseURI||window.document.baseURI||window.location.href||window.document.URL,urlPos=-1,componentPos=id.indexOf(\"FioriLaunchpad.html\");return componentPos=id.indexOf(\"SAPUI5.Component\",componentPos),-1===componentPos&&(componentPos=id.indexOf(\"#\",componentPos),componentPos=-1===componentPos?componentPos:componentPos+1),urlPos=id.indexOf(\"&\",componentPos),-1===urlPos&&(urlPos=id.length),-1!==componentPos&&(id=id.slice(componentPos,urlPos)),id},GetComponentName:function(element){return element||(element=_elem),window.document.title},GetComponentForceLearn:function(element){return element||(element=_elem),!1},GetSubtype:function(element){return element||(element=_elem),isMobile(element)?\"m\":\"ui\"},IsDisabled:function(element,attrName,elemName){return!!element&&(attrName||(attrName=\"aria-disabled\"),elemName||(elemName=SAPUI5ControlName.UNKNOWN),checkElementAttribute(element,attrName,elemName))},IsSelected:function(element,attrName,elemName){return!!element&&(attrName||(attrName=\"aria-selected\"),elemName||(elemName=SAPUI5ControlName.UNKNOWN),checkElementAttribute(element,attrName,elemName))},IsReadOnly:function(element,attrName,elemName){return!!element&&(attrName||(attrName=\"aria-readonly\"),elemName||(elemName=SAPUI5ControlName.UNKNOWN),checkElementAttribute(element,attrName,elemName))},IsPressed:function(element,attrName,elemName){return!!element&&(attrName||(attrName=\"aria-pressed\"),elemName||(elemName=SAPUI5ControlName.UNKNOWN),checkElementAttribute(element,attrName,elemName))},IsChecked:function(element,attrName,elemName){return!!element&&(attrName||(attrName=\"aria-checked\"),elemName||(elemName=SAPUI5ControlName.UNKNOWN),checkElementAttribute(element,attrName,elemName))},IsInvalid:function(element,attrName,elemName){return!!element&&(attrName||(attrName=\"aria-invalid\"),elemName||(elemName=SAPUI5ControlName.UNKNOWN),checkElementAttribute(element,attrName,elemName))},GetLabelledBy:function(element,attrName,elemName){return!!element&&(attrName||(attrName=\"aria-labelledby\"),elemName||(elemName=SAPUI5ControlName.UNKNOWN),getElementAttributeValue(element,attrName,elemName))},Click:function(element,methodName,bReport,details){if(void 0==element||null==element)throw new Error(\"Null element\");methodName||(methodName=\"Click\"),void 0!=bReport&&null!=bReport||(bReport=!1),details||(details=\"\"),_control.PreventReplayMethod(element,methodName),_control.ReplayClick(element),bReport&&_util.Report(micDone,methodName,toSafeArray(new Array),methodName+\" the control \"+details)},Set:function(element,state,methodName,bReport,details){var rc=!0,Details=\"Null element\";if(void 0==element||null==element)throw new Error(Details);if(!state)throw Details=\"Null state\",new Error(Details);methodName||(methodName=\"Set\"),void 0!=bReport&&null!=bReport||(bReport=!1),details||(details=\"\");var lState=state.toLowerCase();return myTrace(\"Running the Set operation with \"+state,LogSeverity_Information,0,SAPUI5_CATEGORY),_control.PreventReplayMethod(element,methodName,bReport),_control.GetCurrentState(element)!=lState?(myTrace(\" Running  \"+methodName+\"(\"+state+\")\",LogSeverity_Information,0,SAPUI5_CATEGORY),rc=!0,_control.ReplayClick(element),bReport&&_util.Report(micDone,methodName,toSafeArray([state]),methodName+\" the control \"+state)):(rc=!1,myTrace(\" Control is set \"+state+\" already.\",LogSeverity_Information,0,SAPUI5_CATEGORY)),rc},ReplayClick:function(element){if(void 0==element||null==element)throw new Error(\"Null element\");_control.ReplayEvent(element,\"click\")},ReplayMouseDown:function(element){if(void 0==element||null==element)throw new Error(\"Null element\");_control.ReplayEvent(element,\"mousedown\")},ReplayEvent:function(element,eventStr,eventArg){if(void 0==element||null==element)throw new Error(\"Null element\");if(void 0==eventStr||null==eventStr)throw new Error(\"Null event\");var event=document.createEvent(\"HTMLEvents\");switch(event.initEvent(\"focus\",!0,!0),element.dispatchEvent(event),eventStr){case\"click\":DeviceType.IsMobile()?(_control.dispatchTouchEventOnElement(element,\"start\"),_control.dispatchTouchEventOnElement(element,\"end\")):(eventArg||(window._uft.$(element).simulate(\"mousedown\"),window._uft.$(element).simulate(\"mouseup\")),window._uft.$(element).simulate(\"click\"));break;default:eventArg?window._uft.$(element).simulate(eventStr,eventArg):window._uft.$(element).simulate(eventStr)}},GetCurrentState:function(element){if(void 0==element||null==element)throw new Error(\"Null element\");var rc=_control.IsChecked(element);return!1===rc&&(rc=_control.IsPressed(element)),1==rc?\"on\":\"off\"},ShouldIgnoreEvent:function(element,eventObj){return 0==isLeftMouseButtonEvent(eventObj)||(!!_control.IsDisabled(element)||!!_control.IsReadOnly(element))},PreventReplayMethod:function(element,replayMethod,bReport){var Details=\"Null element\";if(null==element||void 0==element)throw new Error(Details);if(replayMethod||(replayMethod=\"\"),null!=bReport&&void 0!=bReport||(bReport=!1),_control.IsDisabled(element))throw Details=\"Control is disabled.\",bReport&&_util.Report(micFail,replayMethod,toSafeArray([]),Details),new Error(Details);if(_control.IsReadOnly(element))throw Details=\"Control is read only.\",bReport&&_tab,_util.Report(micFail,replayMethod,toSafeArray([]),Details),new Error(Details);if(_control.IsInvalid())throw Details=\"Control is invalid.\",bReport&&_util.Report(micFail,replayMethod,toSafeArray([]),Details),new Error(Details)}};", 
            "function get_property_value(property){return(new SAPUIDatePicker).GetPropertyValue(property)}function ListenToEvents(){return(new SAPUIDatePicker).RegisterForEvents(),!0}function OnDaysContainerClick(handlerParam,eventObj){(new SAPUIDatePicker).OnDaysContainerClick(handlerParam,eventObj)}function OnNextButtonClick(handlerParam,eventObj){(new SAPUIDatePicker).OnNextButtonClick(handlerParam,eventObj)}function OnPrevButtonClick(handlerParam,eventObj){(new SAPUIDatePicker).OnPrevButtonClick(handlerParam,eventObj)}function Previous(){(new SAPUIDatePicker).Previous()}function Next(){(new SAPUIDatePicker).Next()}function SelectDate(date){(new SAPUIDatePicker).SelectDate(date,SAPUIDatePicker.EventHanlders.SelectDate)}function DeselectDate(date){(new SAPUIDatePicker).SelectDate(date,SAPUIDatePicker.EventHanlders.DeselectDate)}function SAPUIDatePicker(config){null==config&&(config={}),void 0===config.handlers&&(config.handlers=defaulCalendarEventHandlers),void 0===config.type&&(config.type=SAPUI5ControlTypeId.DATEPICKER),void 0===config.name&&(config.name=SAPUI5ControlName.DATEPICKER),SAPUI5Control.call(this,config)}function DateSelectionExecuter(date,method,rc){var currentObj=updateDatePickerObject();if(console.error(\"before DateSelectionExecuter\"),!0===rc.status){var dateCell=rc.dayCell||currentObj.GetDateCellFromMonthCnt(rc.monthCnt,date.day);if(!dateCell)return void currentObj.Report(micFail,method,[date],\"The specified date element cannot be found.\");rc=currentObj.PerformSelectDate(dateCell,method),currentObj.Report(rc.status,method,[date],rc.details)}else currentObj.Report(micFail,method,[],rc.details||\"The specified date element cannot be found.\")}SAPUIDatePicker.EventHanlders={Previous:\"Previous\",Next:\"Next\",SelectDate:\"SelectDate\",DeselectDate:\"DeselectDate\"},SAPUIDatePicker.DateCompareEnum={EQUAL:0,AFTER:1,BEFORE:-1,ERROR:-2},SAPUIDatePicker.GregorianMonthsTables=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],SAPUIDatePicker.InheritsFrom(SAPUI5Control),SAPUIDatePicker.prototype.DisplayMode={MONTH:\"1 month\",TWO_MONTHS:\"2 months\",YEAR:\"year\",WEEK:\"week\",TWO_WEEKS:\"2 weeks\",OTHER:\"\"},SAPUIDatePicker.prototype.GetMonthsList=function(){var core=this.GetCoreElement();return core?core.getMonths():[]},SAPUIDatePicker.prototype.GetSelectedDates=function(){var core=this.GetCoreElement();return core?core.getSelectedDates():[]},SAPUIDatePicker.prototype.GetDisplayMode=function(){var monthNumber;if(!(monthNumber=this.GetCalendarMonths().length)||0===monthNumber)return this.DisplayMode.OTHER=\"\",this.DisplayMode.OTHER;if(12===monthNumber)return this.DisplayMode.YEAR;if(2===monthNumber)return this.DisplayMode.TWO_MONTHS;if(1===monthNumber){var dayNumber=this.GetDaysElements().length;return 7===dayNumber?this.DisplayMode.WEEK:14===dayNumber?this.DisplayMode.TWO_WEEKS:this.DisplayMode.MONTH}return this.DisplayMode.OTHER=monthNumber+\" months\",this.DisplayMode.OTHER},SAPUIDatePicker.prototype.GetDaysElements=function(monthCnt){return window._uft.$(monthCnt||this.Element()).find(\".sapMeCalendarMonthDays\").find(\".sapMeCalendarMonthDay\")},SAPUIDatePicker.prototype.FilterDaysElementsByDayNumber=function(date){var win=window,that=this;return objectToArrayTransform(this.GetDaysElements()).filter(function(el){var elementDate=that.CellDateToSimpleDateObj(el);return!win._uft.$(elementDate).hasClass(\"sapMeCalendarDayNotInCurrentMonth\")&&that.IsDateEqual(elementDate,date)})},SAPUIDatePicker.prototype.IsDateEqual=function(d1,d2){return d1&&d2&&d1.day===d2.day&&d1.month===d2.month&&d1.year===d2.year},SAPUIDatePicker.prototype.GetPropertyValue=function(property){return\"months list\"===property?this.GetMonthsList().join(\";\"):\"display mode\"===property?this.GetDisplayMode():\"selected dates\"===property?this.GetSelectedDates().join(\";\"):\"visible\"===property?this.IsVisible():\"disabled\"===property?this.IsDisabled():\"name\"===property?\"\":\"logical_name\"===property?\"\":void SAPUI5Control.prototype.GetPropertyValue.call(this,property)},SAPUIDatePicker.prototype.IsVisible=function(){return 0===window._uft.$(this.Element()).parents(\".sapMNavItem.sapMNavItemHidden\").length},SAPUIDatePicker.prototype.PreventReplayMethod=function(){this.CheckNullElement();var rc={details:\"\",status:!1};if(this.IsDisabled()){var Details=\"DatePicker is disabled.\";rc.details=Details,rc.status=!0}if(!this.IsVisible()){var Details=\"DatePicker isn't visible.\";rc.details=Details,rc.status=!0}return rc},SAPUIDatePicker.prototype.Previous=function(){var rc=this.PreventReplayMethod();if(rc.status)return void this.Report(micFail,SAPUIDatePicker.EventHanlders.Previous,[],rc.details);rc=this.SimulatePrevious(),this.Report(rc.status,SAPUIDatePicker.EventHanlders.Previous,[],rc.details)},SAPUIDatePicker.prototype.Next=function(){var rc=this.PreventReplayMethod();if(rc.status)return void this.Report(micFail,SAPUIDatePicker.EventHanlders.Next,[],rc.details);rc=this.SimulateNext(),this.Report(rc.status,SAPUIDatePicker.EventHanlders.Next,[],rc.details)},SAPUIDatePicker.prototype.SimulateNext=function(){var rc={status:micDone,details:\"\"},nextBtn=this.GetNextButton();return nextBtn?(this.SimulateClick(nextBtn),rc):(rc.status=micFail,rc.details=\"Next Button Not Found.\",rc)},SAPUIDatePicker.prototype.SimulatePrevious=function(){var rc={status:micDone,details:\"\"},prevBtn=this.GetPreviousButton();return prevBtn?(this.SimulateClick(prevBtn),rc):(rc.status=micFail,rc.details=\"Previous Button Not Found.\",rc)},SAPUIDatePicker.prototype.SelectDate=function(date,method){if(!date)return void this.Report(micFail,method,[date],\"Date argument is undefined.\");var rc=this.PreventReplayMethod();if(rc.status)return void this.Report(micFail,method,[date],rc.details);var datePickerDate=this.YMDStringToSimpleDateObj(date);if(!datePickerDate.status)return void this.Report(micFail,method,[date],datePickerDate.details);if(_util.GetBrowserType()==QtpConstants.IE){rc=this.NavigateToDateOnIE(datePickerDate);var currentObj=this.UpdateDatePickerObject();if(!0===rc.status){var dateCell=rc.dayCell||currentObj.GetDateCellFromMonthCnt(rc.monthCnt,datePickerDate.day);if(!dateCell)return void this.Report(micFail,method,[date],\"The specified date element cannot be found.\");rc=currentObj.PerformSelectDate(dateCell,method),this.Report(rc.status,method,[date],rc.details)}else this.Report(micFail,method,[date],rc.details||\"The specified date element cannot be found.\")}else rc=this.NavigateToDate(datePickerDate,method),rc.status=!0===rc.status?micDone:micFail,this.Report(rc.status,method,[date],rc.details)},SAPUIDatePicker.prototype.NavigateToDateOnIE=function(date){var ret,rc={status:!0};rc=this.HandleCompareByDatePickerType(date);for(var currentDatePicker=this;!0===rc.status&&rc.cmp!==SAPUIDatePicker.DateCompareEnum.EQUAL;){switch(rc.cmp){case SAPUIDatePicker.DateCompareEnum.AFTER:ret=currentDatePicker.SimulateNext();break;case SAPUIDatePicker.DateCompareEnum.BEFORE:ret=currentDatePicker.SimulatePrevious()}if(ret.status===micFail)return rc.status=!1,rc.details=ret.details,rc;_util.Wait(110),currentDatePicker=this.UpdateDatePickerObject(),rc=currentDatePicker.HandleCompareByDatePickerType(date)}return _util.Wait(170),rc},window.document.addEventListener(\"DateSelectionExecuterEvent\",function(e){DateSelectionExecuter(e.detail.date,e.detail.method,e.detail.rc)},!1),SAPUIDatePicker.prototype.NavigateToDate=function(date,method){var ret={status:!0},rc=this.HandleCompareByDatePickerType(date),currentDatePicker=this,navigate=function(rc){switch(rc.cmp){case SAPUIDatePicker.DateCompareEnum.AFTER:ret=currentDatePicker.SimulateNext();break;case SAPUIDatePicker.DateCompareEnum.BEFORE:ret=currentDatePicker.SimulatePrevious()}if(ret.status===micFail)return rc.status=!1,rc.details=ret.details,rc;window.setTimeout(function(){if(currentDatePicker=currentDatePicker.UpdateDatePickerObject(),rc=currentDatePicker.HandleCompareByDatePickerType(date),!0===rc.status&&rc.cmp!=SAPUIDatePicker.DateCompareEnum.EQUAL)navigate(rc);else{var dateSelectionEvent=new CustomEvent(\"DateSelectionExecuterEvent\",{detail:{date:date,method:method,rc:rc}});last_id=window._uft.$(currentDatePicker.Element()).attr(\"id\"),window.document.dispatchEvent(dateSelectionEvent)}},120)};return navigate(rc),rc},SAPUIDatePicker.prototype.PerformSelectDate=function(dateElem,method){var rc={status:micDone,details:\"\"};return dateElem?(method===SAPUIDatePicker.EventHanlders.SelectDate?this.IsDateSelected(dateElem)?rc.details=\"The specified date is already selected.\":(rc.details=\"Successfully selects the specified date.\",_util.GetBrowserType()==QtpConstants.IE?(_util.Wait(250),this.SimulateClick(dateElem)):window.setTimeout(function(){this.SimulateClick(dateElem)}.bind(this),250)):this.IsDateSelected(dateElem)?(rc.details=\"Successfully deselects the specified date.\",_util.GetBrowserType()==QtpConstants.IE?(_util.Wait(250),this.SimulateClick(dateElem)):window.setTimeout(function(){this.SimulateClick(dateElem)}.bind(this),250)):rc.details=\"The specified date is already unselected.\",rc):(rc.status=micFail,rc.details=\"The specified date element cannot be found.\",rc)},SAPUIDatePicker.prototype.IsDateSelected=function(dateElem){return window._uft.$(dateElem).hasClass(\"sapMeCalendarSelected\")},SAPUIDatePicker.prototype.IsValidDate=function(date,dayEnabled){var dayCheck=!dayEnabled||\"number\"==typeof date.day&&date.day>0&&date.day<=31;return\"number\"==typeof date.year&&date.year>0&&\"number\"==typeof date.month&&date.month>0&&date.month<=12&&dayCheck},SAPUIDatePicker.prototype.CompareDates=function(date1,date2,dayEnabled){return this.IsValidDate(date1,!0)&&this.IsValidDate(date2,dayEnabled)?date1.year>date2.year?SAPUIDatePicker.DateCompareEnum.AFTER:date1.year<date2.year?SAPUIDatePicker.DateCompareEnum.BEFORE:date1.month>date2.month?SAPUIDatePicker.DateCompareEnum.AFTER:date1.month<date2.month?SAPUIDatePicker.DateCompareEnum.BEFORE:dayEnabled?date1.day>date2.day?SAPUIDatePicker.DateCompareEnum.AFTER:date1.day<date2.day?SAPUIDatePicker.DateCompareEnum.BEFORE:SAPUIDatePicker.DateCompareEnum.EQUAL:SAPUIDatePicker.DateCompareEnum.EQUAL:SAPUIDatePicker.DateCompareEnum.ERROR},SAPUIDatePicker.prototype.HandleCompareByDatePickerType=function(date){var rc={status:!1};if(!date)return rc.details=\"Error in date parameter.\",rc;var availableMonths=this.GetCalendarMonths();if(!availableMonths||0===availableMonths.length)return rc.details=\"DatePicker's month container cannot be found.\",rc;switch(this.GetDisplayMode()){case this.DisplayMode.MONTH:var cmp=this.CompareDates(date,availableMonths[0]);return rc={cmp:cmp,status:cmp!==SAPUIDatePicker.DateCompareEnum.ERROR,monthCnt:availableMonths[0]};case this.DisplayMode.TWO_MONTHS:case this.DisplayMode.YEAR:return this.HandleMultiMonthlyCompare(date,availableMonths);case this.DisplayMode.WEEK:case this.DisplayMode.TWO_WEEKS:return this.HandleWeeklyCompare(date);default:return rc=availableMonths>1?this.HandleMultiMonthlyCompare(date,availableMonths):this.HandleWeeklyCompare(date)}},SAPUIDatePicker.prototype.HandleWeeklyCompare=function(date){var rc={status:!0},days=this.GetDaysInCurrentMonthContainer(),firstDate=this.CellDateToSimpleDateObj(days[0]),lastDate=this.CellDateToSimpleDateObj(days[days.length-1]);switch(this.CompareDates(date,firstDate,!0)){case SAPUIDatePicker.DateCompareEnum.EQUAL:return rc.cmp=SAPUIDatePicker.DateCompareEnum.EQUAL,rc.dayCell=days[0],rc;case SAPUIDatePicker.DateCompareEnum.BEFORE:return rc.cmp=SAPUIDatePicker.DateCompareEnum.BEFORE,rc;case SAPUIDatePicker.DateCompareEnum.ERROR:return rc.status=!1,rc.details=\"Error in locating the specified date.\",rc}switch(this.CompareDates(date,lastDate,!0)){case SAPUIDatePicker.DateCompareEnum.EQUAL:return rc.cmp=SAPUIDatePicker.DateCompareEnum.EQUAL,rc.dayCell=days[days.length-1],rc;case SAPUIDatePicker.DateCompareEnum.AFTER:return rc.cmp=SAPUIDatePicker.DateCompareEnum.AFTER,rc;case SAPUIDatePicker.DateCompareEnum.ERROR:return rc.status=!1,rc.details=\"Error in locating the specified date.\",rc}return rc.cmp=SAPUIDatePicker.DateCompareEnum.EQUAL,rc.dayCell=this.FilterDaysElementsByDayNumber(date)[0],rc},SAPUIDatePicker.prototype.HandleMultiMonthlyCompare=function(date,availableMonths){var rc={status:!0};if(!availableMonths)return rc.status=!1,rc.details=\"Error in resolving DatePicker months controls..\",rc;switch(this.CompareDates(date,availableMonths[0])){case SAPUIDatePicker.DateCompareEnum.EQUAL:return rc.cmp=SAPUIDatePicker.DateCompareEnum.EQUAL,rc.monthCnt=availableMonths[0],rc;case SAPUIDatePicker.DateCompareEnum.BEFORE:return rc.cmp=SAPUIDatePicker.DateCompareEnum.BEFORE,rc;case SAPUIDatePicker.DateCompareEnum.ERROR:return rc.status=!1,rc.details=\"Error in locating the specified date.\",rc}switch(this.CompareDates(date,availableMonths[availableMonths.length-1])){case SAPUIDatePicker.DateCompareEnum.EQUAL:return rc.cmp=SAPUIDatePicker.DateCompareEnum.EQUAL,rc.monthCnt=availableMonths[availableMonths.length-1],rc;case SAPUIDatePicker.DateCompareEnum.AFTER:return rc.cmp=SAPUIDatePicker.DateCompareEnum.AFTER,rc;case SAPUIDatePicker.DateCompareEnum.BEFORE:for(var i=1;i<availableMonths.length-1;i++)if(0===this.CompareDates(date,availableMonths[i]))return rc.cmp=SAPUIDatePicker.DateCompareEnum.EQUAL,rc.monthCnt=availableMonths[i],rc}return rc.status=!1,rc.details=\"Error in locating the specified date.\",rc},SAPUIDatePicker.prototype.UpdateDatePickerObject=function(){var id=window._uft.$(this.Element()).attr(\"id\"),config={};return config.element=window._uft.$(\"#\"+id+\".sapMeCalendar\").get(0),new SAPUIDatePicker(config)};var last_id;updateDatePickerObject=function(){var config={};return config.element=window._uft.$(\"#\"+last_id+\".sapMeCalendar\").get(0),new SAPUIDatePicker(config)},SAPUIDatePicker.prototype.GetDateCellFromMonthCnt=function(monthCnt,dayNum){if(monthCnt){var daysCnt=this.GetCalendarDaysCnt(monthCnt.elem),win=window,daysElement=window._uft.$(daysCnt).find(\".sapMeCalendarMonthDay\");return objectToArrayTransform(daysElement).filter(function(el){return!win._uft.$(el).hasClass(\"sapMeCalendarDayNotInCurrentMonth\")&&parseInt(win._uft.$(el).text(),10)===dayNum})[0]}},SAPUIDatePicker.prototype.GetCalendarMonthsCnts=function(){return window._uft.$(this.Element()).find(\".sapMeCalendarMonth\")},SAPUIDatePicker.prototype.GetCalendarMonths=function(){var win=window,months=this.GetCalendarMonthsCnts();if(!months||0===months.length)return[];var that=this;return window._uft.$.map(months,function(value,index){var date=that.CellDateToSimpleDateObj(that.GetDaysInCurrentMonthContainer(value)[0]);return{monthName:SAPUIDatePicker.GregorianMonthsTables[date.month-1],month:date.month,year:date.year,elem:value}})},SAPUIDatePicker.prototype.SimulateClick=function(elem){_control.ReplayEvent(elem,\"click\")},SAPUIDatePicker.prototype.RegisterForEvents=function(){var prevButton=this.GetPreviousButton();prevButton&&_control.RegisterElementToEvent(prevButton,\"click\",\"OnPrevButtonClick\",prevButton);var nextButton=this.GetNextButton();nextButton&&_control.RegisterElementToEvent(nextButton,\"click\",\"OnNextButtonClick\",nextButton);for(var daysContainers=this.GetDaysContainer(),i=0;i<daysContainers.length;i++)_control.RegisterElementToEvent(daysContainers[i],\"click\",\"OnDaysContainerClick\",daysContainers[i])},SAPUIDatePicker.prototype.OnPrevButtonClick=function(handlerParam,eventObj){eventObj&&!1!==isLeftMouseButtonEvent(eventObj)&&this.Record(SAPUIDatePicker.EventHanlders.Previous)},SAPUIDatePicker.prototype.OnNextButtonClick=function(handlerParam,eventObj){eventObj&&!1!==isLeftMouseButtonEvent(eventObj)&&this.Record(SAPUIDatePicker.EventHanlders.Next)},SAPUIDatePicker.prototype.OnDaysContainerClick=function(handlerParam,eventObj){if(eventObj&&!1!==isLeftMouseButtonEvent(eventObj)){var datePickerCell,target=getTargetObjectFromEvent(eventObj);datePickerCell=window._uft.$(target).hasClass(\"sapMeCalendarMonthDay\")?target:window._uft.$(getTargetObjectFromEvent(eventObj)).parents(\".sapMeCalendarMonthDay\").get(0);var dateFormatYMD=this.CellDateToYMDString(datePickerCell),method=window._uft.$(datePickerCell).hasClass(\"sapMeCalendarSelected\")?SAPUIDatePicker.EventHanlders.DeselectDate:SAPUIDatePicker.EventHanlders.SelectDate;dateFormatYMD&&this.Record(method,[dateFormatYMD])}},SAPUIDatePicker.prototype.GetDaysContainer=function(){return window._uft.$(this.Element()).find(\".sapMeCalendarMonthDays\")},SAPUIDatePicker.prototype.GetDaysInCurrentMonthContainer=function(monthCnt){return this.GetDaysElements(monthCnt).not(\".sapMeCalendarDayNotInCurrentMonth\")},SAPUIDatePicker.prototype.GetPreviousButton=function(){return window._uft.$(this.Element()).find(\".sapMeCalendarPrevious\").get(0)},SAPUIDatePicker.prototype.GetNextButton=function(){return window._uft.$(this.Element()).find(\".sapMeCalendarNext\").get(0)},SAPUIDatePicker.prototype.GetCalendarDaysCnt=function(monthCnt){return monthCnt?window._uft.$(monthCnt).find(\".sapMeCalendarMonthDays\").get(0):null},SAPUIDatePicker.prototype.CellDateToYMDString=function(datePickerCell){var date=this.GetDateObjectFromCell(datePickerCell);if(date)return dateToYMD(date)},SAPUIDatePicker.prototype.GetDateObjectFromCell=function(datePickerCell){if(datePickerCell){var dateText=getControlText(window._uft.$(datePickerCell).find(\"INPUT\").get(0));return new Date(dateText)}},SAPUIDatePicker.prototype.CellDateToSimpleDateObj=function(datePickerCell){var date=this.GetDateObjectFromCell(datePickerCell);if(date){return{day:date.getDate(),month:date.getMonth()+1,year:date.getFullYear()}}},SAPUIDatePicker.prototype.YMDStringToSimpleDateObj=function(dateText){var rc={details:\"Date is not in YYYYMMDD format.\",status:!1};if(!dateText)return rc;if(dateText=trim(dateText),8!==dateText.length)return rc;if(rc.year=parseInt(dateText.slice(0,4),10),rc.day=parseInt(dateText.slice(6,8),10),isNaN(rc.day)||isNaN(rc.year))return rc;var month=parseInt(dateText.slice(4,6),10);return isNaN(month)||month<1||month>12?rc:(rc.monthName=SAPUIDatePicker.GregorianMonthsTables[month-1],rc.month=month,rc.status=!0,rc)};", 
            "function get_property_value(property){return(new SAPUIDateTimeInput).GetPropertyValue(property)}function SetDateTime(DateTimeText){(new SAPUIDateTimeInput).SetDateTime(DateTimeText)}function GetDateTime(){return(new SAPUIDateTimeInput).GetDateTime()}function OnDateTimeClick(handlerParam,eventObj){(new SAPUIDateTimeInput).OnDateTimeClick(handlerParam,eventObj)}function OnDateTimeInputFocus(handlerParam,eventObj){(new SAPUIDateTimeInput).OnDateTimeInputFocus(handlerParam,eventObj)}function ListenToEvents(){(new SAPUIDateTimeInput).RegisterForEvents()}function SAPUIDateTimeInput(config){null==config&&(config={}),void 0===config.handlers&&(config.handlers=SAPUIDateTimeInputClosure.DefaultDateTimeInputEventHandlers),void 0===config.type&&(config.type=SAPUI5ControlTypeId.DateTimeInput),void 0===config.name&&(config.name=SAPUI5ControlName.DateTimeInput),SAPUI5Control.call(this,config)}SAPUIDateTimeInputClosure={OK:1,ERROR:0,LastValue:\"\",LastDateInputID:\"\",DefaultDateTimeInputEventHandlers:[new EventCallBack(\"click\",\"OnDateTimeClick\"),new EventCallBack(\"focus\",\"OnDateTimeInputFocus\")]},SAPUIDateTimeInput.EventHandlers={SetDateTime:\"SetDateTime\",GetDateTime:\"GetDateTime\"},SAPUIDateTimeInput.InheritsFrom(SAPUI5Control),SAPUIDateTimeInput.prototype.GetPropertyValue=function(property){return\"display format\"===property?this.GetDisplayFormat():\"value\"===property?this.GetValueFromInput():\"readonly\"===property?this.IsReadOnly():\"placeholder\"===property?this.GetDateTimeInputPlaceHolder():\"disabled\"===property?this.IsDisabled():\"title\"===property?this.GetTitle():\"date type\"===property?this.GetDateType():\"logical_name\"===property?this.GetTitle():\"name\"===property?this.GetTitle():void SAPUI5Control.prototype.GetPropertyValue.call(this,property)},SAPUIDateTimeInput.prototype.RegisterForEvents=function(){var elem=this.Element(),element=window._uft.$(elem).find(\"INPUT\").get(0);element&&(_control.RegisterElementToEvent(element,\"click\",\"OnDateTimeClick\",elem),_control.RegisterElementToEvent(element,\"focus\",\"OnDateTimeInputFocus\",elem));var valueHelper=window._uft.$(elem).find(\".sapMInputValHelp\").get(0);valueHelper&&_control.RegisterElementToEvent(valueHelper,\"click\",\"OnDateTimeClick\",elem)},SAPUIDateTimeInput.prototype.OnDateTimeClick=function(handlerParam,eventObj){eventObj&&(SAPUIDateTimeInputClosure.LastValue=this.GetValueFromInput(),SAPUIDateTimeInputClosure.LastDateInputID=this.Element().id)},SAPUIDateTimeInput.prototype.OnDateTimeInputFocus=function(handlerParam,eventObj){var method=SAPUIDateTimeInput.EventHandlers.SetDateTime;if(eventObj){var currentValue=this.GetValueFromInput();if(currentValue!==SAPUIDateTimeInputClosure.LastValue&&SAPUIDateTimeInputClosure.LastDateInputID===this.Element().id){SAPUIDateTimeInputClosure.LastValue=currentValue;var dateString=this.DateTimeInputUFTFormat();if(dateString===SAPUIDateTimeInputClosure.ERROR)return;this.Record(method,[dateString])}}},SAPUIDateTimeInput.prototype.GetDateTime=function(){var dateString=this.DateTimeInputUFTFormat();return dateString?(this.Report(micDone,SAPUIDateTimeInput.EventHandlers.GetDateTime,[],dateString),dateString):(this.Report(micFail,SAPUIDateTimeInput.EventHandlers.GetDateTime,[],\"Failure to get the date.\"),\"\")},SAPUIDateTimeInput.prototype.SetDateTime=function(dateTimeStr){if(this.IsReadOnly())return void this.Report(micFail,SAPUIDateTimeInput.EventHandlers.SetDateTime,[dateTimeStr],\"The control is Read Only.\");if(this.IsDisabled())return void this.Report(micFail,SAPUIDateTimeInput.EventHandlers.SetDateTime,[dateTimeStr],\"The control is disabled Only.\");var details={},dateObj=this.GenerateDateObjectForReplay(dateTimeStr,details);if(!dateObj||\"Invalid Date\"==dateObj)return void this.Report(micFail,SAPUIDateTimeInput.EventHandlers.SetDateTime,[dateTimeStr],details.str||\"Fail to Set Date Time.\");this.SetDateValue(dateObj)===SAPUIDateTimeInputClosure.ERROR?this.Report(micFail,SAPUIDateTimeInput.EventHandlers.SetDateTime,[dateTimeStr],\"Fail to set Date value.\"):this.Report(micDone,SAPUIDateTimeInput.EventHandlers.SetDateTime,[dateTimeStr],dateTimeStr)},SAPUIDateTimeInput.prototype.ConstructNewDateObject=function(){var dateObj=new window.Date,currentDateObj=this.GetDateValue();return currentDateObj instanceof window.Date&&(dateObj.setSeconds(currentDateObj.getSeconds()),dateObj.setMinutes(currentDateObj.getMinutes()),dateObj.setHours(currentDateObj.getHours()),dateObj.setDate(currentDateObj.getDate()),dateObj.setMonth(currentDateObj.getMonth()),dateObj.setFullYear(currentDateObj.getFullYear())),dateObj},SAPUIDateTimeInput.prototype.GenerateDateObjectForReplay=function(dateTimeStr,details){var dateObj=this.ConstructNewDateObject();if(!dateObj||!dateObj instanceof Date)return null;var params=dateTimeStr.split(\",\");if(2===params.length)return this.SetTimeInDateObject(params[1],dateObj)===SAPUIDateTimeInputClosure.ERROR?(details.str=\"Date Time Format is invalid, Format should be YYYYMMDD,HH:MM:SS\",null):this.SetDateInDateObject(params[0],dateObj)===SAPUIDateTimeInputClosure.ERROR?(details.str=\"Date Time Format is invalid, Format should be YYYYMMDD,HH:MM:SS\",null):dateObj;if(1===params.length){if(this.IsValidTimeInput(params[0])){if(this.SetTimeInDateObject(params[0],dateObj)===SAPUIDateTimeInputClosure.ERROR)return details.str=\"Time Format is invalid, Format should be HH:MM:SS\",null}else if(this.SetDateInDateObject(params[0],dateObj)===SAPUIDateTimeInputClosure.ERROR)return details.str=\"Date Format is invalid, Format should be YYYYMMDD\",null;return dateObj}return details.str=\"Date Time Format is invalid, Format should be YYYYMMDD,HH:MM:SS\",null},SAPUIDateTimeInput.prototype.IsValidTimeInput=function(timeStr){if(!timeStr)return!1;var timeArr=timeStr.split(\":\");if(3!==timeArr.length)return!1;var hours=parseInt(timeArr[0],10),minutes=parseInt(timeArr[1],10),seconds=parseInt(timeArr[2],10);return!(isNaN(hours)||isNaN(minutes)||isNaN(seconds))&&!(hours>24||hours<0||minutes<0||minutes>60||seconds<0||seconds>60)},SAPUIDateTimeInput.prototype.SetDateInDateObject=function(dateStr,dateObj){if(!dateStr)return SAPUIDateTimeInputClosure.ERROR;if(dateStr=trim(dateStr),8!==dateStr.length)return SAPUIDateTimeInputClosure.ERROR;var year=parseInt(dateStr.slice(0,4),10),day=parseInt(dateStr.slice(6,8),10);if(isNaN(year)||isNaN(day)||day<=0||day>31)return SAPUIDateTimeInputClosure.ERROR;var month=parseInt(dateStr.slice(4,6),10)-1;if(isNaN(month)||month<0||month>11)return SAPUIDateTimeInputClosure.ERROR;dateObj.setMonth(0),dateObj.setFullYear(2e3);var rc3=dateObj.setDate(day),rc2=dateObj.setMonth(month),rc1=dateObj.setFullYear(year);return isNaN(rc1)||isNaN(rc2)||isNaN(rc2)?SAPUIDateTimeInputClosure.ERROR:SAPUIDateTimeInputClosure.OK},SAPUIDateTimeInput.prototype.SetTimeInDateObject=function(timeStr,dateObj){if(!this.IsValidTimeInput(timeStr))return SAPUIDateTimeInputClosure.ERROR;var timeParams=timeStr.split(\":\"),rc1=dateObj.setHours(timeParams[0]),rc2=dateObj.setMinutes(timeParams[1]),rc3=dateObj.setSeconds(timeParams[2]);return isNaN(rc1)||isNaN(rc2)||isNaN(rc2)?SAPUIDateTimeInputClosure.ERROR:SAPUIDateTimeInputClosure.OK},SAPUIDateTimeInput.prototype.GetTitle=function(){var parent=window._uft.$(this.Element()).parents(\".s4TimeInputFlx\").get(0);if(parent)return window._uft.$(parent).text();if(parent=window._uft.$(this.Element()).parents(\".sapMLIBContent\").find(\"sapMILILabel\").get(0))return window._uft.$(parent).text();var placeHolder=this.GetDateTimeInputPlaceHolder();return placeHolder||\"\"},SAPUIDateTimeInput.prototype.GetDateTimeInputPlaceHolder=function(){return _util.GetBrowserType()===QtpConstants.IE?window._uft.$(this.Element()).find(\"LABEL.sapMInputBasePlaceholder\").text()||\"\":window._uft.$(this.Element()).find(\"input\").attr(\"placeholder\")||\"\"},SAPUIDateTimeInput.prototype.DateTimeInputUFTFormat=function(){var dateType=this.GetDateType(),date=this.GetDateValue();if(!date)return SAPUIDateTimeInputClosure.ERROR;switch(dateType){case\"Time\":return this.GetTimeStringUFTFormat(date);case\"DateTime\":return this.GetDateTimeStringUFTFormat(date);case\"Date\":return dateToYMD(date);default:return SAPUIDateTimeInputClosure.ERROR}},SAPUIDateTimeInput.prototype.GetDateTimeStringUFTFormat=function(date){var dateStr=dateToYMD(date),timeStr=this.GetTimeStringUFTFormat(date);return dateStr&&timeStr?dateStr+\",\"+timeStr:\"\"},SAPUIDateTimeInput.prototype.GetTimeStringUFTFormat=function(date){return\"Invalid Date\"==date?\"\":date.getHours()+\":\"+date.getMinutes()+\":\"+date.getSeconds()},SAPUIDateTimeInput.prototype.IsReadOnly=function(){return!!window._uft.$(this.Element()).hasClass(\"sapMInputBaseReadonly\")},SAPUIDateTimeInput.prototype.IsDisabled=function(){return!!window._uft.$(this.Element()).hasClass(\"sapMInputBaseDisabled\")},SAPUIDateTimeInput.prototype.GetValueFromInput=function(){return getControlText(window._uft.$(this.Element()).find(\"INPUT\").get(0))},SAPUIDateTimeInput.prototype.SetValue=function(dateString){var core=this.GetCoreElement();return core&&core.setValue?(core.setValue(dateString),SAPUIDateTimeInputClosure.OK):SAPUIDateTimeInputClosure.ERROR},SAPUIDateTimeInput.prototype.SetDateValue=function(dateObj){if(!dateObj||isNaN(dateObj))return SAPUIDateTimeInputClosure.ERROR;var core=this.GetCoreElement();if(core&&core.setDateValue){core.setDateValue(dateObj),core.fireChange({valid:!0,dateValue:dateObj,newDateValue:dateObj});return this.Element().setAttribute(\"aria-invalid\",\"false\"),SAPUIDateTimeInputClosure.OK}return SAPUIDateTimeInputClosure.ERROR},SAPUIDateTimeInput.prototype.GetDateType=function(){var core=this.GetCoreElement();return core&&core.getType?core.getType():SAPUIDateTimeInputClosure.ERROR},SAPUIDateTimeInput.prototype.GetDisplayFormat=function(){var core=this.GetCoreElement();return core&&core.getDisplayFormat?core.getDisplayFormat():\"\"},SAPUIDateTimeInput.prototype.GetValueFormat=function(){var core=this.GetCoreElement();return core&&core.getValueFormat?core.getValueFormat():\"\"},SAPUIDateTimeInput.prototype.GetDateValue=function(){var core=this.GetCoreElement();return core&&core.getDateValue?core.getDateValue():\"\"};", 
            "function SAPUIDialog(config){null==config&&(config={}),void 0==config.handlers&&(config.handlers=defaulPopupEventHandlers),void 0==config.type&&(config.type=SAPUI5ControlTypeId.DIALOG),void 0==config.name&&(config.name=SAPUI5ControlName.DIALOG),SAPUI5Control.call(this,config)}function get_property_value(property){return(new SAPUIDialog).GetPropertyValue(property)}function ListenToEvents(){return(new SAPUIDialog).RegisterForEvents(),!0}function OnClick(handlerParam,eventObj){return(new SAPUIDialog).OnClick(eventObj)}function Close(){return(new SAPUIDialog).Close()}var defaulPopupEventHandlers=[new EventCallBack(\"click\",\"OnClick\",[])];SAPUIDialog.InheritsFrom(SAPUI5Control),SAPUIDialog.prototype.GetTitle=function(){this.CheckNullElement();var rc=null,dlgCore=this.GetCoreElement();if(null!==dlgCore&&(rc=dlgCore.getTitle()),!rc&&this.IsUi()){var label=window._uft.$(this.Element()).find(\"SPAN.sapUiDlgLabel\").get(0);null!==label&&void 0!==label&&(rc=getElementInnerText(label)||window._uft.$(label).attr(\"title\"))}if(!rc&&this.IsMobile()){var label=window._uft.$(this.Element()).find(\"header > div > LABEL.sapMLabel\").get(0)||window._uft.$(this.Element()).find(\"header > div > LABEL.sapMDialogTitle\").get(0);null!==label&&void 0!==label&&(rc=getElementInnerText(label)||window._uft.$(label).attr(\"title\"))}return rc=rc||window._uft.$(this.Element()).attr(\"title\")||\" \"},SAPUIDialog.prototype.GetName=function(){return this.GetTitle()},SAPUIDialog.prototype.GetPropertyValue=function(property){return\"title\"===property?this.GetTitle():SAPUI5Control.prototype.GetPropertyValue.call(this,property)},SAPUIDialog.prototype.RegisterForEvents=function(){if(this.IsMobile())return!0;var element=this.Element(),innerCtrl=window._uft.$(element).find(\"A.sapUiDlgCloseBtn\").get(0);if(null!==innerCtrl){var handler=new EventCallBack(\"click\",\"OnClick\",innerCtrl),dummyHandler=new EventCallBack(\"mousedown\",\"DummyHandler\"),dummyHandler2=new EventCallBack(\"mouseup\",\"DummyHandler\");new SAPUI5Control({element:innerCtrl,isStandalone:!1,handlers:[handler,dummyHandler,dummyHandler2]}).RegisterForEvents()}return!0},SAPUIDialog.prototype.OnClick=function(eventObj){if(this.ShouldIgnoreEvent(eventObj))return!0;var trgt=getTargetObjectFromEvent(eventObj);return isElementOfClass(trgt,\"A\",\"sapUiDlgCloseBtn\")&&this.Record(\"Close\"),!0},SAPUIDialog.prototype.Close=function(){if(this.IsMobile())return this.Report(micFail,\"Irrelevant method\"),!1;if(this.IsVisible()){var dlgCore=this.GetCoreElement();if(dlgCore)return dlgCore.close(),this.Report(micDone,\"Close\"),_util.Wait(500),!0;myTrace(this.SAPUIControlName()+\"(\"+this.GetName()+\").Close via X-Button\");var xButton=window._uft.$(this.Element()).find(\"A.sapUiDlgCloseBtn\").get(0);if(xButton){return new SAPUI5Control({element:xButton,isStandalone:!1}).ReplayClick(),this.Report(micDone,\"Close\"),_util.Wait(500),!0}return myTrace(this.SAPUIControlName()+\"(\"+this.GetName()+\").Close failure\",LogSeverity_Error),this.Report(micFail,\"Close\"),!1}return myTrace(this.SAPUIControlName()+\"(\"+this.GetName()+\") Is not visible\",LogSeverity_Error),this.Report(micFail,\"Close\",[],\"Is not visible\"),!1};", 
            "function SAPUIFacetFilter(config){null==config&&(config={}),void 0==config.handlers&&(config.handlers=defaulFacetFilterEventHandlers),void 0==config.type&&(config.type=SAPUI5ControlTypeId.FACETFILTER),void 0==config.name&&(config.name=SAPUI5ControlName.FACETFILTER),SAPUI5Control.call(this,config)}function get_property_value(property){return(new SAPUIFacetFilter).GetPropertyValue(property)}function ListenToEvents(){return(new SAPUIFacetFilter).RegisterForEvents(),!0}function OnClick(handlerParam,eventObj){return(new SAPUIFacetFilter).OnClick(handlerParam,eventObj)}function OnRemove(removeBtn,eventObj){var filterButtonElem=removeBtn.previousSibling,buttonText=getControlText(filterButtonElem);return _control.RegisterElementToEvent(removeBtn,\"mouseup\",\"OnRemoveDone\",buttonText),!0}function OnRemoveDone(title,eventObj){return(new SAPUIFacetFilter).Record(\"Remove\",title)}function OnBtnClick(handlerParam,eventObj){return(new SAPUIFacetFilter).OnBtnClick(handlerParam,eventObj)}function OnGeneralButtonClick(method,eventObj){return(new SAPUIFacetFilter).Record(method)}function OnLightToolBarClick(handlerParam,eventObj){var targetObject=getTargetObjectFromEvent(eventObj),btn=targetObject,methodName=\"Open\";\"button\"!==targetObject.tagName.toLowerCase()&&(btn=window._uft.$(targetObject).parents(\"button.sapMBtn\")),btn&&\"Reset\"===window._uft.$(btn).attr(\"title\")&&(methodName=\"Reset\"),(new SAPUIFacetFilter).Record(methodName)}function Remove(title){return(new SAPUIFacetFilter).Remove(title)}function Reset(FilterName){return(new SAPUIFacetFilter).Reset(FilterName)}function Open(title){return(new SAPUIFacetFilter).Open(title)}function OpenDialog(){return(new SAPUIFacetFilter).OpenDialog()}function Previous(){return(new SAPUIFacetFilter).Previous()}function Next(){return(new SAPUIFacetFilter).Next()}function FilterBy(FilterName,FilterPath){return(new SAPUIFacetFilter).Filter(FilterName,FilterPath,FacetFilterMethods.FilterBy)}function ExtendFilterBy(FilterName,FilterPath){return(new SAPUIFacetFilter).Filter(FilterName,FilterPath,FacetFilterMethods.ExtendFilterBy)}function SelectedKeys(FilterName){return(new SAPUIFacetFilter).GetFilterKeys(FilterName)}function SelectedKeysCount(FilterName){return(new SAPUIFacetFilter).GetFilterKeysCount(FilterName)}var FacetFilterMethods={FilterBy:\"FilterBy\",ExtendFilterBy:\"ExtendFilterBy\"},defaulFacetFilterEventHandlers=[new EventCallBack(\"click\",\"OnClick\",[])];SAPUIFacetFilter.InheritsFrom(SAPUI5Control),SAPUIFacetFilter.prototype.GetName=function(){if(this.CheckNullElement(),this.IsMobile())return\"\";var name=this.GetText();return name||(name=\"\"),name=this.GetTitle(),name||(name=\"\"),name},SAPUIFacetFilter.prototype.GetPropertyValue=function(property){var facetLists=null;switch(property){case\"all lists\":case\"all items\":return facetLists=this.IsMobile()?this.GetFilterBtns():this.GetTitles(),facetLists?HTMLElemArrayToString(facetLists):\" \";case\"list count\":case\"items count\":return this.GetFiltersCount();case\"mode\":return this.GetVisibleItemMode();default:return SAPUI5Control.prototype.GetPropertyValue.call(this,property)}},SAPUIFacetFilter.prototype.RegisterForEvents=function(eventsHandlers){return this.IsMobile()?this.RegisterForMEvents(eventsHandlers):this.RegisterForUIEvents(eventsHandlers)},SAPUIFacetFilter.prototype.RegisterForMEvents=function(eventsHandlers){var elem=this.Element(),mode=this.GetVisibleItemMode();if(\"Simple\"===mode){for(var btns=this.GetFilterBtns(),removeBtn,dialogBtn,i=0;i<btns.length;i++)_control.RegisterElementToEvent(btns[i],\"click\",\"OnBtnClick\",btns[i]);(removeBtn=this.GetVisibleRemoveBtn())&&_control.RegisterElementToEvent(removeBtn,\"mousedown\",\"OnRemove\",removeBtn),(dialogBtn=this.GetOpenDialogBtn())&&_control.RegisterElementToEvent(dialogBtn,\"click\",\"OnGeneralButtonClick\",\"OpenDialog\");var rst;(rst=window._uft.$(this.Element()).find(\"div.sapMFFResetDiv>button\").get(0))&&_control.RegisterElementToEvent(rst,\"click\",\"OnGeneralButtonClick\",\"Reset\");var prev,next;(prev=this.GetFFPrevBtn())&&_control.RegisterElementToEvent(prev,\"click\",\"OnGeneralButtonClick\",\"Previous\"),(next=this.GetFFNextBtn())&&_control.RegisterElementToEvent(next,\"click\",\"OnGeneralButtonClick\",\"Next\")}else\"Light\"===mode&&(_control.RegisterElementToEvent(this.Element(),\"click\",\"OnOpenDialog\"),_control.RegisterElementToEvent(this.GetToolbarBtn(),\"click\",\"OnLightToolBarClick\"));return!0},SAPUIFacetFilter.prototype.RegisterForUIEvents=function(eventsHandlers){var facetLists=window._uft.$(this.Element()).find(\"DIV.sapUiUx3FFLst\").get();if(!facetLists)return myTrace(\"No filers found\"),!1;for(var len=facetLists.length,listUL=null,listTitleElem=null,i=0;i<len;i++){listUL=this.GetListByIndex(i),listTitleElem=window._uft.$(facetLists[i]).find(\".sapUiUx3FFLstHeadTxt\").get(0);var listTitle=getControlText(listTitleElem);myTrace(\" register SAPUIList [\"+i+\"]=\"+listTitle);var handlerParam=new Array;handlerParam[0]=listTitle,handlerParam[1]=listUL;var eventHandler=new EventCallBack(\"click\",\"OnClick\",handlerParam);new SAPUIList({element:listUL,isStandalone:!1,handlers:[eventHandler]}).RegisterForEvents()}return!0},SAPUIFacetFilter.prototype.OnBtnClick=function(btn,eventObj){var buttonText=getControlText(btn);return this.Record(\"Open\",buttonText),!0},SAPUIFacetFilter.prototype.OnClick=function(handlerParams,eventObj){if(!handlerParams)return!1;if(!eventObj)return!1;var len=handlerParams.length,listTitle=handlerParams[0],listUL=handlerParams[1],itemSelection=null,method=FacetFilterMethods.FilterBy,listTO=null,itemElement;if(listUL){itemElement=getTargetObjectFromEvent(eventObj),listTO=new SAPUIList({element:listUL,isStandalone:!1});var itemSelectionCallBack=listTO.OnItemClick(itemElement,eventObj);itemSelectionCallBack&&(itemSelection=itemSelectionCallBack[0].m_parameters[0],method=\"Select\"===itemSelectionCallBack[0].m_callback?FacetFilterMethods.FilterBy:FacetFilterMethods.ExtendFilterBy)}myTrace(SAPUI5ControlName.FACETFILTER+\" recorded:  \"+method+\"( \"+listTitle+\",\"+itemSelection+\")\",LogSeverity_Information);var arr=[];return arr[0]=listTitle,itemSelection&&(arr[1]=itemSelection),_util.Record(method,toSafeArray(arr),0),!0},SAPUIFacetFilter.prototype.GetFacetFilterItemName=function(trgtItem){var item=trgtItem;return\"li\"!==item.tagName.toLocaleLowerCase()&&(item=window._uft.$(item).parents(\"LI\").get(0)),getControlText(window._uft.$(item).find(\".sapUiLbxITxt\").get(0))},SAPUIFacetFilter.prototype.GetFiltersCount=function(){var rc=0,lists=[],facetLists;return facetLists=this.IsMobile()?this.GetCoreLists():this.GetFilters(),facetLists&&(rc=facetLists.length),myTrace(\"GetFiltersCount returns \"+rc),rc},SAPUIFacetFilter.prototype.GetFilters=function(){return window._uft.$(this.Element()).find(\"div.sapUiUx3FFLst\").get()},SAPUIFacetFilter.prototype.GetTitles=function(){var rc=[],headTitle=null,facetLists=this.GetFilters();if(facetLists)for(var len=facetLists.length,i=0;i<len;i++)headTitle=window._uft.$(facetLists[i]).find(\".sapUiUx3FFLstHeadTxt\").get(0),rc[i]=headTitle;return rc},SAPUIFacetFilter.prototype.Open=function(title){if(this.IsMobile()&&\"Light\"===this.GetVisibleItemMode()&&!title)return _control.ReplayClick(this.GetToolbarBtn()),this.Report(micDone,\"Open\"),!0;if(!this.IsMobile()||\"Simple\"!==this.GetVisibleItemMode())return this.Report(micFail,\"Open\",title,\"Do not support Open.\"),!1;var btn,btns=this.GetFilterBtns(),index=toNumber(title,!0);if(null!==index){if(index<1||index>btns.length)return this.Report(micFail,\"Open\",title,\"Out of range.\"),!1;btn=btns[btns.length-index]}else for(var btntxt,i=0,len=btns.length;i<len;i++)if((btntxt=getControlText(btns[i]))===title){btn=btns[i];break}return btn?(_control.ReplayClick(btn),this.Report(micDone,\"Open\",title),!0):(this.Report(micFail,\"Open\",title,\"Cannot find target list.\"),!1)},SAPUIFacetFilter.prototype.OpenDialog=function(){if(!this.IsMobile())return this.Report(micFail,\"OpenDialog\",[],\"Do not support OpenDialog.\"),!1;var mode=this.GetVisibleItemMode(),btn;return\"Simple\"===mode?btn=this.GetOpenDialogBtn():\"Light\"===mode&&(btn=window._uft.$(this.Element()).find(\".sapMText\").get(0)),btn?(_control.ReplayClick(btn),this.Report(micDone,\"OpenDialog\"),!0):(this.Report(micFail,\"OpenDialog\",[],\"Cannot find OpenDialog button.\"),!1)},SAPUIFacetFilter.prototype.Remove=function(title){if(!this.IsMobile()||\"Simple\"!==this.GetVisibleItemMode())return this.Report(micFail,\"Remove\",title,\"Do not support Remove.\"),!1;var vrBtn=this.GetVisibleRemoveBtn(),btn,btns=this.GetFilterBtns(),index=toNumber(title,!0);if(null!==index){if(index<1||index>btns.length)return this.Report(micFail,\"Remove\",title,\"Out of range.\"),!1;btn=btns[btns.length-index]}else for(var btntxt,i=0,len=btns.length;i<len;i++)if((btntxt=getControlText(btns[i]))===title){btn=btns[i];break}return btn&&vrBtn===window._uft.$(btn).next().get(0)?(_control.ReplayClick(vrBtn),this.Report(micDone,\"Remove\",title),!0):(this.Report(micFail,\"Remove\",title,\"Cannot Remove the Filter List.\"),!1)},SAPUIFacetFilter.prototype.Reset=function(){if(!this.IsMobile())return this.Report(micFail,\"Reset\",[],\"Do not support Reset.\"),!1;var mode=this.GetVisibleItemMode(),btn;return\"Simple\"===mode?btn=window._uft.$(this.Element()).find(\"div.sapMFFResetDiv>button\").get(0):\"Light\"===mode&&(btn=window._uft.$(this.Element()).find(\"button\").get(0)),btn?(_control.ReplayClick(btn),this.Report(micDone,\"Reset\"),!0):(this.Report(micFail,\"Reset\",[],\"Cannot find Reset button.\"),!1)},SAPUIFacetFilter.prototype.Next=function(){if(!this.IsMobile()||\"Simple\"!==this.GetVisibleItemMode())return this.Report(micFail,\"Next\",[],\"Do not support Next.\"),!1;var btn=this.GetFFNextBtn();return btn?(_control.ReplayClick(btn),this.Report(micDone,\"Next\"),!0):(this.Report(micFail,\"Next\",[],\"Cannot find Next button.\"),!1)},SAPUIFacetFilter.prototype.Previous=function(){if(!this.IsMobile()||\"Simple\"!==this.GetVisibleItemMode())return this.Report(micFail,\"Previous\",[],\"Do not support Previous.\"),!1;var btn=this.GetFFPrevBtn();return btn?(_control.ReplayClick(btn),this.Report(micDone,\"Previous\"),!0):(this.Report(micFail,\"Previous\",[],\"Cannot find Previous button.\"),!1)},SAPUIFacetFilter.prototype.Filter=function(filterName,filterPath,filterMethod){filterMethod||(filterMethod=FacetFilterMethods.FilterBy);var listMethod=filterMethod===FacetFilterMethods.ExtendFilterBy?\"ExtendSelect\":\"Select\";if(this.IsMobile())return this.Report(micFail,filterMethod,new Array(filterName,filterPath),\"Do not support \"+filterMethod+\".\"),!1;if(!1===this.ValidateString(filterName,filterMethod,\"Filter List Name\"))return!1;if(!1===this.ValidateString(filterPath,\"FilterBy\",\"Filter Keys\"))return!1;var rc=!0,stepRc=!0,status=micDone,details=\"\",filerListElement=this.GetList(filterName);if(null!==filerListElement){var filterListTO=new SAPUIList({element:filerListElement,isStandalone:!1}),pathItems=filterPath.split(\";\"),len=pathItems.length;len>0&&!1===(stepRc=filterListTO.Select(pathItems[0],listMethod))&&(rc=!1,status=micFail,details=\" Filter item \"+pathItems[0]+\" not found\");for(var i=1;i<len;i++)!1===(stepRc=filterListTO.Select(pathItems[i],\"ExtendSelect\"))&&(status=micFail,rc=!1,details=\" Filter item \"+pathItems[i]+\" not found\")}else rc=!1,status=micFail,details=\"Filter list \"+filterName+\" not found.\";return this.Report(status,filterMethod,new Array(filterName,filterPath),details),rc},SAPUIFacetFilter.prototype.GetCoreLists=function(){var lists=null;try{lists=this.GetCoreElement().getLists()}catch(err){return null}return lists},SAPUIFacetFilter.prototype.GetFilterBtns=function(){return window._uft.$(this.Element()).find(\".sapMFFHead\").find(\".sapMBtnContent\").parents(\"button\").get()},SAPUIFacetFilter.prototype.GetVisibleRemoveBtn=function(){return window._uft.$(this.Element()).find(\".sapMFFLVisibleRemoveIcon\").get(0)},SAPUIFacetFilter.prototype.GetOpenDialogBtn=function(){return window._uft.$(this.Element()).find(\"div.sapMFFHead>button>div>span:not(.sapMBtnContent),div.sapMFFHead>button>span>span:not(.sapMBtnContent)\").parents(\"button\").get(0)},SAPUIFacetFilter.prototype.GetFFPrevBtn=function(){return window._uft.$(this.Element()).find(\".sapMFFArrowScrollLeft\").get(0)},SAPUIFacetFilter.prototype.GetFFNextBtn=function(){return window._uft.$(this.Element()).find(\".sapMFFArrowScrollRight\").get(0)},SAPUIFacetFilter.prototype.GetToolbarBtn=function(){return window._uft.$(this.Element()).find(\"div.sapMTBActive\").get(0)},SAPUIFacetFilter.prototype.GetList=function(filterName){var rc=null;if(!filterName)return myTrace(\"Filter list name is null not found\",LogSeverity_Error),null;var nmb=toNumber(filterName,!0);if(null===nmb){var headTitle=null,title=null,facetLists=window._uft.$(this.Element()).find(\"DIV.sapUiUx3FFLst\").get(),len=facetLists.length;nmb=-1;for(var i=0;i<len;i++)if(headTitle=window._uft.$(facetLists[i]).find(\".sapUiUx3FFLstHeadTxt\").get(0),(title=getControlText(headTitle))===filterName){nmb=i,myTrace(\" found: getSAPUIList headTitle[\"+i+\"]=\"+filterName);break}}else nmb--;return rc=this.GetListByIndex(nmb)},SAPUIFacetFilter.prototype.GetListByIndex=function(index){var rc=null;if(index<0)return rc;var lists=window._uft.$(this.Element()).find(\"DIV.sapUiLbx\").get();return lists&&index<lists.length&&(rc=lists[index]),rc},SAPUIFacetFilter.prototype.GetVisibleItemMode=function(){var rc=\"\",ffCore=this.GetCoreElement();try{ffCore&&(rc=this.IsMobile()?ffCore.getType():ffCore.getVisibleItemCountMode())}catch(err){myTrace(\"getVisibleItemCountMode error \"+err.message,LogSeverity_Error)}return myTrace(\"Filter mode \"+rc,LogSeverity_Success),rc},SAPUIFacetFilter.prototype.GetFilterKeys=function(FilterName){return this.IsMobile()?this.GetMFilterKeys(FilterName):this.GetUIFilterKeys(FilterName)},SAPUIFacetFilter.prototype.GetMFilterKeys=function(FilterName){var methodName=\"SelectedKeys\",list,cl=this.GetCoreLists(),index=toNumber(FilterName,!0);if(null!==index){if(index<1||index>cl.length)return this.Report(micFail,methodName,FilterName,\"Out of range.\"),!1;list=cl[index-1]}else try{for(var i=0;i<cl.length;i++)if(cl[i].getTitle()===FilterName){list=cl[i];break}}catch(err){list=null}if(list){var ko,keys=[];try{ko=list.getSelectedKeys()}catch(err){ko=null}if(ko){for(var x in ko)keys.push(ko[x]);return this.Report(micDone,methodName,FilterName),keys.join(\";\")}}return this.Report(micFail,methodName,FilterName,\"Cannot get filter list.\"),null},SAPUIFacetFilter.prototype.GetUIFilterKeys=function(FilterName){var rc=[],methodName=\"SelectedKeys\";if(!1===this.ValidateString(FilterName,methodName,\"Filter List Name\"))return rc;if(null===this.GetFilterKeysArray(FilterName))this.Report(micFail,methodName,[FilterName],\"Filter list \"+FilterName+\" not found.\");else{var filerListElement=this.GetList(FilterName);null===filerListElement?this.Report(micFail,methodName,[FilterName],\"Filter list \"+FilterName+\" not found.\"):(rc=new SAPUIList({element:filerListElement,isStandalone:!1}).GetValue(),myTrace(\"Filter keys \"+rc,LogSeverity_Success),this.Report(micDone,methodName,[FilterName],\"Filter list \"+FilterName+(rc.length>0?\" keys are : \"+rc:\" does not have selected keys\")+\".\"))}return rc},SAPUIFacetFilter.prototype.GetFilterKeysCount=function(FilterName){return this.IsMobile()?this.GetMFilterKeysCount(FilterName):this.GetUIFilterKeysCount(FilterName)},SAPUIFacetFilter.prototype.GetMFilterKeysCount=function(FilterName){var methodName=\"SelectedKeysCount\",keys=this.GetMFilterKeys(FilterName);return keys?(this.Report(micDone,methodName,FilterName),keys.split(\";\").length):(this.Report(micFail,methodName,FilterName,FilterName+\" filter list not found.\"),0)},SAPUIFacetFilter.prototype.GetUIFilterKeysCount=function(FilterName){var methodName=\"SelectedKeysCount\";if(!1===this.ValidateString(FilterName,methodName,\"Filter List Name\"))return 0;var rc=0,keys=this.GetFilterKeysArray(FilterName);return null===keys?this.Report(micFail,methodName,[FilterName],FilterName+\" filter list not found.\"):(rc=keys.length,this.Report(micDone,methodName,[FilterName],FilterName+\" Total filter keys \"+rc+\".\")),rc},SAPUIFacetFilter.prototype.GetFilterKeysArray=function(FilterNameIn){var rc=[],filerListElement=this.GetList(FilterNameIn);return filerListElement?rc=new SAPUIList({element:filerListElement,isStandalone:!1}).GetSelectedItems():rc},SAPUIFacetFilter.prototype.ValidateString=function(strToCheck,method,strDescription){return\"number\"==typeof strToCheck||(strDescription||(strDescription=\"\"),method||(method=\"\"),strToCheck?\"\"!==trim(strToCheck)||(this.Report(micFail,method,[],\"Empty \"+strDescription),!1):(this.Report(micFail,method,[],\"Null \"+strDescription),!1))};", 
            "function SAPUIHeader(config){null==config&&(config={}),void 0==config.type&&(config.type=SAPUI5ControlTypeId.HEADER),void 0==config.name&&(config.name=SAPUI5ControlName.HEADER),SAPUI5Control.call(this,config)}function get_property_value(property){return(new SAPUIHeader).GetPropertyValue(property)}function ListenToEvents(){return(new SAPUIHeader).RegisterForEvents(),!0}function OnSAPUIHeaderClick(handlerParam,eventObj){return(new SAPUIHeader).OnClick(handlerParam,eventObj)}function Click(){return(new SAPUIHeader).Click()}SAPUIHeader.InheritsFrom(SAPUI5Control),SAPUIHeader.prototype.RegisterForEvents=function(){_control.RegisterElementToEvent(this.Element(),\"click\",\"OnSAPUIHeaderClick\")},SAPUIHeader.prototype.Click=function(){var thisElem=this.Element(),elem=window._uft.$(thisElem).find(\":not(:has(*))\");if(!(elem.length>0))throw new Error(\"Couldn't find SAPUIheader clickable element\");_control.ReplayClick(elem[0])},SAPUIHeader.prototype.OnClick=function(handlerParam,eventObj){this.Record(\"Click\")},SAPUIHeader.prototype.GetPropertyValue=function(property){return\"text\"===property?this.GetText():\"name\"===property?\"\":SAPUI5Control.prototype.GetPropertyValue.call(this,property)},SAPUIHeader.prototype.GetText=function(){return window._uft.$(this.Element()).text()};", 
            "function get_property_value(property){return(new SAPUIList).GetPropertyValue(property)}function ListenToEvents(){var theList=new SAPUIList;if(theList.IsComboBox()){if(theList.RegisterComboBoxEvents(),currentComboBoxId===_elem.id){var childListElem=theList.GetComboBoxChildList();if(null==childListElem)return!0;for(var webListSpans=window._uft.$(childListElem).find(\"li>span\"),i=0,len=webListSpans.length;i<len;i++)_control.RegisterElementToEvent(webListSpans[i],\"mousedown\",\"DummyHandler\"),_control.RegisterElementToEvent(webListSpans[i],\"click\",\"DummyHandler\");new SAPUIList({element:childListElem}).RegisterListItemsForEvents()}return!0}return theList.RegisterListItemsForEvents(),theList.SingleElementRegisterToEvent(),!0}function OnItemClick(selectedItem,eventObj){var list=new SAPUIList,item=selectedItem;return isElementOfClass(selectedItem,\"LI\",\"sapMSelectListRow\")&&(item=selectedItem.firstChild),list.SetTextBeforeChange(list.GetItemName(item)),myTrace(list.SAPUIControlName()+\".\"+list.GetName()+\".OnItemClick\",LogSeverity_Information,0,SAPUI5_LIST_CATEGORY),list.OnItemClick(selectedItem,eventObj)}function OnComboBoxClick(handlerParam,eventObj){currentComboBoxId=_elem.id;var target=getTargetObjectFromEvent(eventObj);if(isElementOfClass(target,\"BUTTON\",\"sapMComboBoxArrow\")||isElementOfClass(target,\"SPAN\",\"sapMComboBoxArrow\",!1,\"button\")){var theList=new SAPUIList;window.setTimeout(function(){var childListElem=theList.GetComboBoxChildList();if(null==childListElem)return!0;for(var webListSpans=window._uft.$(childListElem).find(\"li>span\"),i=0,len=webListSpans.length;i<len;i++)_control.RegisterElementToEvent(webListSpans[i],\"mousedown\",\"DummyHandler\"),_control.RegisterElementToEvent(webListSpans[i],\"click\",\"DummyHandler\");new SAPUIList({element:childListElem}).RegisterListItemsForEvents()},100)}}function FilterByDate(date){(new SAPUIList).FilterByDate(date)}function Select(itemName){var theList=new SAPUIList;return myTrace(theList.SAPUIControlName()+\".\"+theList.GetName()+\".Select\",LogSeverity_Information,0,SAPUI5_LIST_CATEGORY),theList.Select(itemName,SAPUIListMethod.Select)}function Set(itemText){var listBox=new SAPUIList,textElem=listBox.GetComboBoxInnerEdit();if(!textElem)return void listBox.Report(micFail,SAPUIListMethod.Set,itemText);SAPTextEditFactory({element:textElem,isStandalone:!1}).Set(itemText),listBox.Report(micDone,SAPUIListMethod.Set,itemText)}function SetItemData(item,value){(new SAPUIList).SetItemData(item,value)}function ExtendSelect(itemName){var theList=new SAPUIList;return myTrace(theList.SAPUIControlName()+\".\"+theList.GetName()+\".ExtendSelect\",LogSeverity_Information,0,SAPUI5_LIST_CATEGORY),theList.Select(itemName,SAPUIListMethod.ExtendSelect)}function ExtendDeselect(itemName){var theList=new SAPUIList;return myTrace(theList.SAPUIControlName()+\".\"+theList.GetName()+\".ExtendDeselect\",LogSeverity_Information,0,SAPUI5_LIST_CATEGORY),theList.Select(itemName,SAPUIListMethod.ExtendDeselect)}function Deselect(itemName){var theList=new SAPUIList;return myTrace(theList.SAPUIControlName()+\".\"+theList.GetName()+\".Deselect\",LogSeverity_Information,0,SAPUI5_LIST_CATEGORY),theList.Select(itemName,SAPUIListMethod.Deselect)}function SingleSelect(itemName){return(new SAPUIList).Select(itemName,SAPUIListMethod.SingleSelect)}function Delete(itemName){return(new SAPUIList).Select(itemName,SAPUIListMethod.Delete)}function Details(itemName){return(new SAPUIList).Select(itemName,SAPUIListMethod.Details)}function More(){return(new SAPUIList).More()}function GetItem(itemIndex){return(new SAPUIList).GetItem(itemIndex)}function GetComboxTextEdit(handlerParams,eventObj){var textEdit=null,trgt=getTargetObjectFromEvent(eventObj);return isTextEdit(trgt)&&(textEdit=SAPTextEditFactory({element:trgt,isStandalone:!1})),textEdit}function RecordComboxTextEditSet(handlerParams,rc){var callBackData=rc[0],itemText=\"\";switch(callBackData.m_parameters.length){case 1:itemText=callBackData.m_parameters[0],itemText||(itemText=\"\");break;default:return myTrace(\"RecordTextEditSet null parameter\"),!1}return(new SAPUIList).Record(SAPUIListMethod.Set,itemText),!0}function OnCBTextEditFocus(handlerParams,eventObj){if(!1===isLeftMouseButtonEvent(eventObj))return!0;var textEdit=GetComboxTextEdit(handlerParams,eventObj);if(null===textEdit)return myTrace(\"OnTextEditFocus null parameter\"),!1;var rc=textEdit.OnFocus(null,eventObj);return null===rc||0==rc.length||RecordComboxTextEditSet(handlerParams,rc)}function OnCBTextEditBlur(handlerParams,eventObj){if(!1===isLeftMouseButtonEvent(eventObj))return!0;var textEdit=GetComboxTextEdit(handlerParams,eventObj);if(null===textEdit)return myTrace(\"OnTextEditBlur null parameter\"),!1;var rc=textEdit.OnBlur(null,eventObj);return null===rc||0==rc.length?(myTrace(\"OnTextEditBlur null parameter\"),!1):RecordComboxTextEditSet(handlerParams,rc)}function OnCBTextEditKeydown(handlerParams,eventObj){if(13!=eventObj.keyCode&&115!=eventObj.keyCode)return!0;var textEdit=GetComboxTextEdit(handlerParams,eventObj);if(null===textEdit)return myTrace(\"OnTextEditKeydown null parameter\"),!1;var rc=textEdit.OnKeydown(null,eventObj);return null===rc||0==rc.length?(myTrace(\"OnTextEditKeydown null parameter\"),!1):RecordComboxTextEditSet(handlerParams,rc)}function OnCBTextEditSubmit(handlerParams,eventObj){var textEdit=GetComboxTextEdit(handlerParams,eventObj);if(null===textEdit)return myTrace(\"OnTextEditSubmit null parameter\"),!1;var rc=textEdit.OnSubmit(null,eventObj);return null===rc||0==rc.length?(myTrace(\"OnTextEditSubmit null parameter\"),!1):void 0}function OnListCalendarToolBarFocus(handlerParam,eventObj){var list=new SAPUIList;myTrace(\"**********OnListCalendarFocus***************\"),list.OnListToolBarCalendarEventHandler(handlerParam,eventObj,\"focus\")}function OnListCalendarToolBarSelect(handlerParam,eventObj){var list=new SAPUIList;myTrace(\"**********OnListCalendarSelect***************\"),list.OnListToolBarCalendarEventHandler(handlerParam,eventObj,\"select\")}function OnListCalendarToolBarKeyUp(handlerParam,eventObj){if(myTrace(\"**********OnListCalendarToolBarKeyUp***************\"),13!==eventObj.keyCode){var list=new SAPUIList;QtpConstants.IE===_util.GetBrowserType()?list.OnListToolBarCalendarEventHandler(handlerParam,eventObj,\"focus\"):list.OnListToolBarCalendarEventHandler(handlerParam,eventObj,\"select\")}}function OnListCalendarToolBarActivate(handlerParam,eventObj){var list=new SAPUIList;myTrace(\"**********OnListCalendarActivate***************\"),list.OnListToolBarCalendarEventHandler(handlerParam,eventObj,\"activate\")}function OnListTextEditBlur(handlerParam,eventObj){if(SAPUIList.ListSingleElementToRegister.element&&SAPUIList.ListSingleElementToRegister.type===SAPUI5ControlTypeId.TEXTEDIT){var list=new SAPUIList,params=SAPUIList.ListSingleElementToRegister.params,textEdit=new SAPUITextEdit({element:SAPUIList.ListSingleElementToRegister.element,isStandalone:!1});if(!textEdit)return!1;var rc=textEdit.OnBlur(null,eventObj);return list.RecordTextEditSet(params,rc)}}function OnListTextEditSubmit(handlerParam,eventObj){if(SAPUIList.ListSingleElementToRegister.element&&SAPUIList.ListSingleElementToRegister.type===SAPUI5ControlTypeId.TEXTEDIT){var list=new SAPUIList,params=SAPUIList.ListSingleElementToRegister.params,textEdit=new SAPUITextEdit({element:SAPUIList.ListSingleElementToRegister.element,isStandalone:!1});if(!textEdit)return!1;var rc=textEdit.OnSubmit(null,eventObj);return list.RecordTextEditSet(params,rc)}}function OnListTextEditKeydown(handlerParam,eventObj){if(SAPUIList.ListSingleElementToRegister.element&&SAPUIList.ListSingleElementToRegister.type===SAPUI5ControlTypeId.TEXTEDIT&&13===eventObj.keyCode){var list=new SAPUIList,params=SAPUIList.ListSingleElementToRegister.params,textEdit=new SAPUITextEdit({element:SAPUIList.ListSingleElementToRegister.element,isStandalone:!1});if(!textEdit)return!1;var rc=textEdit.OnKeydown(null,eventObj);return list.RecordTextEditSet(params,rc)}}function ExtractData(){var rtnValue=get_property_value(\"all items\"),content=rtnValue.replace(/;/g,'\",\"');return'{type:\"list\",object_name:\"'+get_property_value(\"logical_name\")+'\",content:[\"'+content+'\"]}'}var currentComboBoxId=\"\";", 
            "function get_property_value(property){try{return(new SAPMenuFactory).GetPropertyValue(property)}catch(err){return myTrace(\"SAPUIMenu.get_property_value Error : \"+err.message,LogSeverity_Error),null}}function ListenToEvents(){return(new SAPMenuFactory).RegisterForEvents(),!0}function OnItemClick(handlerParam,eventObj){return new SAPMenuFactory({element:_elem}).OnItemClick(handlerParam,eventObj)}function OnMenuItemEnterKeyAction(handlerParam,eventObj){return(new SAPMenuFactory).OnMenuItemEnterKeyAction(handlerParam,eventObj)}function OnParentElementKeyup(handlerParam,eventObj){return(new SAPMenuFactory).OnParentElementKeyup(handlerParam,eventObj)}function OnItemMouseOver(handlerParam,eventObj){(new SAPMenuFactory).RegisterMenuItems(handlerParam,eventObj)}function GetMenuTextEdit(handlerParams,eventObj){var textEdit=null,trgt=getTargetObjectFromEvent(eventObj);return\"textbox\"==window._uft.$(trgt).attr(\"role\")&&(textEdit=new SAPUITextEdit({element:trgt,isStandalone:!1})),textEdit}function OnMnuTextEditKeydown(handlerParams,eventObj){var menu=new SAPMenuFactory,path=\"\";if(13!=eventObj.keyCode)return!0;var textEdit=GetMenuTextEdit(handlerParams,eventObj);if(null===textEdit)return myTrace(\"OnMnuTextEditKeydown null parameter\"),!1;var menuItem=window._uft.$(textEdit.Element()).parents(\"li[role='menuitem']\").get();menuItem.length>0&&(path=menu.GetItemPath(menuItem[0]));var onKeyDownFuncParam={toRecordRegardlessChanges:!0},onKeyDownFuncParamsArray=[onKeyDownFuncParam],rc=textEdit.OnKeydown(onKeyDownFuncParamsArray,eventObj);if(null===rc||0==rc.length)return myTrace(\"OnMnuTextEditKeydown null parameter\"),!1;var text=rc[0].m_parameters[0];return menu.Record(\"Select\",[path,text]),!0}function Select(path,value){return(new SAPMenuFactory).Select(path,value)}function GetItem(index){return(new SAPMenuFactory).GetItem(index)}function Deselect(Item){_util.Report(micDone,\"Deselect\",toSafeArray([Item]),\"Irrelevant method.\")}function ExtendSelect(path){return(new SAPMenuFactory).Select(path)}function isSAPUIMenu(){return _elem===window._uft.$(_elem).parent().children(\".sapUiMnu\")[0]}", 
            "function get_property_value(property){return(new SAPUIPassword).GetPropertyValue(property)}function SAPUIPassword(config){null==config&&(config={}),void 0==config.handlers&&(config.handlers=[]),void 0==config.type&&(config.type=SAPUI5ControlTypeId.PASSWORD),void 0==config.name&&(config.name=SAPUI5ControlName.PASSWORD),SAPUI5Control.call(this,config)}SAPUIPassword.InheritsFrom(SAPUI5Control),SAPUIPassword.prototype.GetName=function(){this.CheckNullElement();var elem=this.Element(),label=null;if(this.IsMobile()){var owner=this.Element().parentElement;if(owner&&(label=window._uft.$(owner).find(\"LABEL\")),null!=label)return label.text();var placeholder=this.GetElementAttributeValue(\"placeholder\");if(null!=placeholder)return placeholder}else{if(void 0!=window._uft.$(elem).attr(\"data-sap-ui\"))return window._uft.$(elem).attr(\"data-sap-ui\");label=document.getElementById(window._uft.$(elem).attr(\"aria-labelledby\"))}return label||\" \"};", 
            "function get_property_value(property){return(new SAPUIRadioButton).GetPropertyValue(property)}function ListenToEvents(){return(new SAPUIRadioButton).RegisterForEvents(),!0}function OnClick(handlerParam,eventObj){return(new SAPUIRadioButton).OnClick(eventObj)}function Select(){return(new SAPUIRadioButton).Click(\"Select\")}function Activate(){return(new SAPUIRadioButton).Click(\"Activate\")}function Submit(){return(new SAPUIRadioButton).Click(\"Submit\")}", 
            "function get_property_value(property){return(new SAPUIRadioGroup).GetPropertyValue(property)}function ListenToEvents(){return(new SAPUIRadioGroup).RegisterForEvents(),!0}function OnClick(handlerParam,eventObj){var radioGroup=new SAPUIRadioGroup;return myTrace(radioGroup.SAPUIControlName()+\".\"+radioGroup.GetName()+\".OnClick\",LogSeverity_Information,0,SAPUI5_RADIOGROUP_CATEGORY),radioGroup.OnClick([],eventObj)}function Select(item){var radioGroup=new SAPUIRadioGroup;myTrace(radioGroup.SAPUIControlName()+\".\"+radioGroup.GetName()+\".Select\",LogSeverity_Information,0,SAPUI5_RADIOGROUP_CATEGORY),radioGroup.Select(\"Select\",item)}", 
            "function ListenToEvents(){return(new SAPUIRatingIndicator).RegisterForEvents(),!0}function onRatingSwipeGesture(handlerParam,eventObj){(new SAPUIRatingIndicator).onSwipeItem(handlerParam,eventObj)}function get_property_value(property){return(new SAPUIRatingIndicator).GetPropertyValue(property)}function SetLevel(itemIndex){(new SAPUIRatingIndicator).Select(itemIndex,\"SetLevel\")}function Select(itemIndex){(new SAPUIRatingIndicator).Select(itemIndex,\"Select\")}function OnSelectItem(handlerParam,eventObj){return(new SAPUIRatingIndicator).OnSelectItem(handlerParam,eventObj)}", 
            "function get_property_value(property){return SAPTableFactory().GetPropertyValue(property)}function GetCellElem(row,col){var table=SAPTableFactory(),rowOneBased=table.ConvertOneBasedToZeroBased([row]),colOneBased=table.ConvertOneBasedToZeroBased([col]);return table.getCell(rowOneBased,colOneBased)}function SAPTableFactory(element){var table;element||(element=_elem);var config={element:element};return table=isMobile(_elem)?new SAPMTable(config):new SAPUITable(config)}function ListenToEvents(){return SAPTableFactory().RegisterForEvents(),!0}function isTableMore(){var tableElem=window._uft.$(_elem).parents(\".sapMListTblCnt\").children(\".sapMListTbl\").get(0);return tableElem||!1}function GetUiTableCnt(element){return element||(element=_elem),window._uft.$(element).find(\"table.sapUiTableCtrl\").get(0)}function GetTableData(element){return element||(element=_elem),SAPTableFactory(element).GetTableData()}function OnGeneralCellClick(handlerParams,eventObj){var ctrl;if(!eventObj)return!1;var target=getTargetObjectFromEvent(eventObj),cellElem=window._uft.$(target).parents(\"DIV.sapUiTableCell\").get(0);if(!cellElem)return!1;var tbl=SAPTableFactory(),params=[tbl.getRowIndexFromCell(cellElem),tbl.getColIndexFromCell(cellElem)];if(params[0]<0||params[1]<0)return!1;var elementsArray=objectToArrayTransform(window._uft.$(target).parentsUntil(\"DIV.sapUiTableCell\"));elementsArray.unshift(target);for(var i=elementsArray.length-1;i>=0;i--){var current=elementsArray[i];if(isCheckBox(current))return params[2]=current,OnCheckBoxClick(params,eventObj);if(isRatingIndicator(current))return params[2]=window._uft.$(current).parents(\"DIV.sapUiRating\"),OnRatingClick(params,eventObj);if(isTextEdit(current)){params[2]=current,ctrl=new SAPUITextEdit({element:current,isStandalone:!1});var currentValue=ctrl.GetValue();return ctrl.SetTextBeforeChange(currentValue),tbl.updateTableSingleElementToRegisterObject(current,params,SAPUI5ControlTypeId.TEXTEDIT)}if(isComboBox(current))return params[2]=current,tbl.updateTableSingleElementToRegisterObject(current,params,SAPUI5ControlTypeId.LIST);if(isButton(current)||isToggleButton(current)||isRadioButton(current))return OnButtonClick(params,eventObj);if(isLink(current))return OnLinkClick(params,eventObj);if(isCalendar(current))return params[2]=current,tbl.updateTableSingleElementToRegisterObject(current,params,SAPUI5ControlTypeId.CALENDAR)}return!0}function SetPage(pageNumber){return SAPTableFactory().SetPage(pageNumber)}function Navigate(index){return SAPTableFactory().Navigate(index)}function NextPage(){return SAPTableFactory().NextPage()}function PreviousPage(){return SAPTableFactory().PreviousPage()}function FirstPage(){return SAPTableFactory().FirstPage()}function LastPage(){return SAPTableFactory().LastPage()}function CurrentPage(){return SAPTableFactory().GetCurrentPage()}function SelectRow(rowNumber){return SAPTableFactory().SelectRow(rowNumber,eventHandlers.SelectRow,!1)}function DeleteRow(rowNumber){SAPTableFactory().DeleteRow(rowNumber)}function More(){SAPTableFactory().More()}function ExtendSelectRow(rowNumber){return SAPTableFactory().SelectRow(rowNumber,eventHandlers.ExtendSelectRow,!0)}function DeselectRow(rowNumber){return SAPTableFactory().SelectRow(rowNumber,eventHandlers.DeselectRow,!1)}function ExtendDeselectRow(rowNumber){return SAPTableFactory().SelectRow(rowNumber,eventHandlers.ExtendDeselectRow,!0)}function OpenMenu(column){return SAPTableFactory().OpenMenu(column)}function HeaderClick(column){return SAPTableFactory().OpenMenu(column,eventHandlers.HeaderClick)}function Sort(column,sortOrder){return SAPTableFactory().Sort(column,sortOrder)}function ColumnCount(){return SAPTableFactory().ColumnCount()}function RowCount(){return SAPTableFactory().RowCount()}function Move(column,xPos){return SAPTableFactory().Move(column,xPos)}function MoveColumn(fromColumn,toColumn){return SAPTableFactory().MoveColumn(fromColumn,toColumn)}function OnPaginatorClick(page,eventObj){if(!1===isLeftMouseButtonEvent(eventObj))return!0;var table=SAPTableFactory(),trgt=getTargetObjectFromEvent(eventObj);if(trgt=window._uft.$(trgt).closest(\"DIV.sapUiPag\")){var paginator=new SAPUIPaginator({element:trgt,isStandalone:!1}),paginatorHandlers=paginator.OnClick(eventObj),method=\"\",params=null;paginatorHandlers instanceof Array&&(method=paginatorHandlers[0].Method(),params=paginatorHandlers[0].Parameters()),null!==method&&\"\"!==method&&table.Record(method,params)}return!0}function OnRowHeaderClick(row,eventObj){if(!1===isLeftMouseButtonEvent(eventObj))return!0;var Details,handlerMethod=eventHandlers.SelectRow,trgt=getTargetObjectFromEvent(eventObj);if(!trgt)return Details=SAPUI5ControlName.TABLE+\" eventObj target is null.\",_util.Report(micFail,\"OnRowHeaderClick\",toSafeArray([]),Details),!1;row||(row=0);var table=SAPTableFactory();table.InitRowData();var selMode=window.sap.ui.table.SelectionMode.Single,table1=table.GetCoreElement();switch(table1&&(selMode=table1.getSelectionMode()),selMode){case window.sap.ui.table.SelectionMode.None:return!0;case window.sap.ui.table.SelectionMode.Single:case window.sap.ui.table.SelectionMode.Multi:case window.sap.ui.table.SelectionMode.MultiToggle:break;default:return!1}var zeroBased=[row],oneBased=table.ConvertIndicesToUFT(zeroBased),multipleRowsSelected=table.getSelectedIndices().length>1;if(isRowSelected(trgt)){var selAll=window._uft.$(table.Element()).find(\"div.sapUiTableColRowHdr.sapUiTableSelAllEnabled\").get(0);if(selAll){if(!(selAll=window._uft.$(table.Element()).find(\"div.sapUiTableColRowHdr.sapUiTableSelAllEnabled.sapUiTableSelAll\").get(0)))return handlerMethod=!0===eventObj.ctrlKey?eventHandlers.ExtendDeselectRow:eventHandlers.DeselectRow,table.Record(handlerMethod,oneBased,0),!0;if(!0===multipleRowsSelected)return handlerMethod=!0===eventObj.ctrlKey?eventHandlers.ExtendDeselectRow:eventHandlers.DeselectRow,table.Record(handlerMethod,oneBased,0),!0}handlerMethod=!0===eventObj.ctrlKey&&selMode===window.sap.ui.table.SelectionMode.Multi?eventHandlers.ExtendDeselectRow:eventHandlers.DeselectRow}else handlerMethod=!0===eventObj.ctrlKey&&selMode===window.sap.ui.table.SelectionMode.Multi?eventHandlers.ExtendSelectRow:eventHandlers.SelectRow;return table.Record(handlerMethod,oneBased,0),!0}function SAPUITable_AuxMove(){this.m_TableId=null,this.m_ColumnName=null,this.m_fDown=!1,this.m_fMove=!1}function OnColumnHeaderClick(column,eventObj){var table=SAPTableFactory();if(!1===isLeftMouseButtonEvent(eventObj))return!0;var id=_elem.id;if(globalAuxMove.m_TableId===id&&!0===globalAuxMove.m_fMove)return!0;column||(column=0);var zeroBased=column,arr=[];return arr[0]=zeroBased+1,table.Record(eventHandlers.OpenMenu,arr,300),globalAuxMove.Reset(),!0}function OnResizerMousedown(resizer,eventObj){var columnElem=resizer.previousSibling,colWidth=parseInt(columnElem.style.width);if(window._uft.$(columnElem).is(\":visible\"))for(var hiddenCols=window._uft.$(resizer).nextUntil(\".sapUiTableCol:visible\",\":hidden\"),i=hiddenCols.length-1;i>=0;i--)colWidth-=parseInt(hiddenCols[i].style.width);return columnResizeHelper.offset=colWidth-eventObj.clientX,columnResizeHelper.title=window._uft.$(columnElem).text(),!0}function OnResizerMouseup(param,eventObj){if(null===columnResizeHelper.offset)return!0;var width=columnResizeHelper.offset+eventObj.clientX;return columnResizeHelper.offset=null,SAPTableFactory().Record(eventHandlers.ResizeColumn,[columnResizeHelper.title,width]),!0}function ResizeColumn(Column,Width){return SAPTableFactory().ResizeColumn(Column,Width)}function OnColumnHeaderDrag(column,eventObj){globalAuxMove.Reset();var table=SAPTableFactory(),enableColumnReordering=!1,coreElement=table.GetCoreElement();if(null!==coreElement&&(enableColumnReordering=coreElement.getEnableColumnReordering()),!1===enableColumnReordering)return!0;column||(column=0);var fromColumnElem=table.getHeaderCell2(column);return!!fromColumnElem&&(globalAuxMove.m_fDown=!0,globalAuxMove.m_TableId=table.GetHTMLId(),globalAuxMove.m_ColumnName=table.getColumnTitle(fromColumnElem),!0)}function OnColumnHeaderMove(column,eventObj){var id=_elem.id;return globalAuxMove.m_TableId===id&&!0===globalAuxMove.m_fDown&&(globalAuxMove.m_fMove=!0),!0}function OnColumnHeaderDrop(column,eventObj){if(null===globalAuxMove.m_ColumnName)return!1;var table=new SAPUITable,id=table.GetHTMLId();if(globalAuxMove.m_TableId!==id)return globalAuxMove.Reset(),!1;var coreElement=table.GetCoreElement(),enableColumnReordering=!1;if(null!==coreElement&&(enableColumnReordering=coreElement.getEnableColumnReordering()),!1===enableColumnReordering)return globalAuxMove.Reset(),!0;column||(column=0);var columnElem=table.getHeaderCell2(column);if(!columnElem)return!1;var columnName=table.getColumnTitle(columnElem),arr=[];return globalAuxMove.m_ColumnName!==columnName&&(arr[0]=globalAuxMove.m_ColumnName,arr[1]=columnName,table.Record(eventHandlers.MoveColumn,arr)),globalAuxMove.Reset(),!0}function OnScrollBarClick(eventObj){if(!1===isLeftMouseButtonEvent(eventObj))return!0}function isRowSelected(item){return checkElementAttribute(item,\"aria-selected\",SAPUI5ControlName.TABLE)}function OnCellClick(handlerParams,eventObj){if(!handlerParams)return!1;if(!eventObj)return!1;if(!1===isLeftMouseButtonEvent(eventObj))return!0;if(handlerParams.length<2)return!1;var columnTitle=\"\";handlerParams.length>3&&(columnTitle=handlerParams[2]);var table=SAPTableFactory(),oneBased=table.ConvertZeroBasedToOneBased([handlerParams[0],handlerParams[1]]),arr=[oneBased[0],oneBased[1]];return table.Record(eventHandlers.SelectCell,arr,0),!0}function OnButtonClick(handlerParams,eventObj){if(!handlerParams)return!1;if(!eventObj)return!1;if(!1===isLeftMouseButtonEvent(eventObj))return!0;if(handlerParams.length<2)return!1;var table=SAPTableFactory(),oneBased=table.ConvertZeroBasedToOneBased([handlerParams[0],handlerParams[1]]),arr=[oneBased[0],oneBased[1]];return table.Record(eventHandlers.SelectCell,arr,0),!0}function OnLinkClick(handlerParams,eventObj){if(!handlerParams)return!1;if(!eventObj)return!1;if(!1===isLeftMouseButtonEvent(eventObj))return!0;if(handlerParams.length<2)return!1;var table=SAPTableFactory(),oneBased=table.ConvertZeroBasedToOneBased([handlerParams[0],handlerParams[1]]),arr=[oneBased[0],oneBased[1]];return table.Record(eventHandlers.SelectCell,arr,0),!0}function OnCheckBoxClick(handlerParams,eventObj){if(!handlerParams)return!1;if(!eventObj)return!1;if(!1===isLeftMouseButtonEvent(eventObj))return!0;if(handlerParams.length<2)return!1;var checkbox=null;if(null===handlerParams[2]){var trgt=getTargetObjectFromEvent(eventObj);if(isCheckBox(trgt))checkbox=new SAPUICheckBox({element:trgt,isStandalone:!1});else{var par=trgt.parentElement;checkbox=new SAPUICheckBox({element:par,isStandalone:!1})}}else checkbox=new SAPUICheckBox({element:handlerParams[2],isStandalone:!1});var checkboxState=\"\",rc=checkbox.OnClick(eventObj);if(null===rc)return myTrace(\"OnCheckBoxClick null parameter\"),!1;var callBackData=rc[0],itemText=null,method=eventHandlers.SetCellData;switch(callBackData.m_parameters.length){case 1:checkboxState=callBackData.m_parameters[0],checkboxState||(checkboxState=checkbox.GetSetState());break;default:checkboxState=checkbox.GetSetState()}if(null===checkboxState)return myTrace(\"OnCheckBoxClick null checkboxState parameter\"),!1;var Details=SAPUI5ControlName.TABLE+\" record SetCellData ( \"+handlerParams[0].toString()+\",\"+handlerParams[1].toString()+\",\"+checkboxState+\")\";myTrace(Details,LogSeverity_Information,0,SAPUI5_TABLE_CATEGORY);var table=SAPTableFactory(),oneBased=table.ConvertZeroBasedToOneBased([handlerParams[0],handlerParams[1]]),arr=[oneBased[0],oneBased[1],checkboxState];return table.Record(eventHandlers.SetCellData,arr,0),!0}function OnCalendarActivate(handlerParams,eventObj){if(!1===isLeftMouseButtonEvent(eventObj))return!0;CalendarGeneralEventHandler(handlerParams,eventObj,\"activate\")}function OnCalendarFocus(handlerParams,eventObj){if(!1===isLeftMouseButtonEvent(eventObj))return!0;CalendarGeneralEventHandler(handlerParams,eventObj,\"focus\")}function OnCalendarSelect(handlerParams,eventObj){if(!1===isLeftMouseButtonEvent(eventObj))return!0;CalendarGeneralEventHandler(handlerParams,eventObj,\"select\")}function OnCalendarBlur(handlerParams,eventObj){if(!1===isLeftMouseButtonEvent(eventObj))return!0;CalendarGeneralEventHandler(handlerParams,eventObj,\"blur\")}function OnCalendarKeydown(handlerParams,eventObj){13==eventObj.keyCode&&CalendarGeneralEventHandler(handlerParams,eventObj,\"onEnterKeydown\")}function OnCalendarClick(handlerParams,eventObj){if(!1===isLeftMouseButtonEvent(eventObj))return!0;CalendarGeneralEventHandler(handlerParams,eventObj,\"click\")}function CalendarGeneralEventHandler(handlerParams,eventObj,event){var params=SAPUITable.tableSingleElementToRegister.params;if(!params||!eventObj||params.length<3)return!1;if(!1===isLeftMouseButtonEvent(eventObj))return!0;var config={element:params[2],isStandalone:!1},calendar=SAPCalendarFactory(config);if(null===calendar)return myTrace(\"OnCalendarFocus null parameter\"),!1;var rc=calendar.RecordIfChange(event);return null!==rc&&0!=rc.length&&RecordCalendarSetDate(params,rc)}function OnTextEditFocus(handlerParams,eventObj){var params=SAPUITable.tableSingleElementToRegister.params;if(!params||!eventObj||params.length<3)return!1;if(!1===isLeftMouseButtonEvent(eventObj))return!0;var textEdit=GetTextEdit(params,eventObj);if(null===textEdit)return myTrace(\"OnTextEditFocus null parameter\"),!1;var rc=textEdit.OnFocus(null,eventObj);return null===rc||0==rc.length||RecordTextEditSet(params,rc)}function OnTextEditBlur(handlerParams,eventObj){var params=SAPUITable.tableSingleElementToRegister.params;if(!params||!eventObj||params.length<3)return!1;if(!1===isLeftMouseButtonEvent(eventObj))return!0;var textEdit=GetTextEdit(params,eventObj);if(null===textEdit)return myTrace(\"OnTextEditBlur null parameter\"),!1;var rc=textEdit.OnBlur(null,eventObj);return null===rc||0==rc.length?(myTrace(\"OnTextEditBlur null parameter\"),!1):RecordTextEditSet(params,rc)}function OnTextEditKeydown(handlerParams,eventObj){var params=SAPUITable.tableSingleElementToRegister.params;if(!params||!eventObj||params.length<3)return!1;if(13!==eventObj.keyCode&&115!==eventObj.keyCode)return!0;var textEdit=GetTextEdit(params,eventObj);if(null===textEdit)return myTrace(\"OnTextEditKeydown null parameter\"),!1;var rc=textEdit.OnKeydown(null,eventObj);return params&&null!==rc&&0!=rc.length?RecordTextEditSet(params,rc):(myTrace(\"OnTextEditKeydown null parameter\"),!1)}function OnTextEditSubmit(handlerParams,eventObj){var params=SAPUITable.tableSingleElementToRegister.params;if(!params||!eventObj||params.length<3)return!1;var textEdit=GetTextEdit(params,eventObj);if(null===textEdit)return myTrace(\"OnTextEditSubmit null parameter\"),!1;var rc=textEdit.OnSubmit(null,eventObj);return null===rc||0==rc.length?(myTrace(\"OnTextEditSubmit null parameter\"),!1):RecordTextEditSet(params,rc)}function OnTextEditOptionClick(handlerParams,eventObj){var params=SAPUITable.tableSingleElementToRegister.params;if(!params||!eventObj||params.length<3)return!1;var textEdit=GetTextEdit(params,eventObj);if(null===textEdit)return myTrace(\"OnTextEditOptionClick null parameter\"),!1;var rc=textEdit.OnOptionClick(null,eventObj);return null===rc||0==rc.length?(myTrace(\"OnTextEditOptionClick null parameter\"),!1):RecordTextEditSet(params,rc)}function GetTextEdit(handlerParams,eventObj){return GetInnerControl(handlerParams,eventObj,isTextEdit,SAPUITextEdit)}function GetCalendar(handlerParams,eventObj){return GetInnerControl(handlerParams,eventObj,isCalendar,SAPUICalendar)}function GetInnerControl(handlerParams,eventObj,isControlType,ControlType){var innerControl=null;if(null===handlerParams[2]){var trgt=getTargetObjectFromEvent(eventObj);if(isControlType(trgt))innerControl=new ControlType({element:trgt,isStandalone:!1});else{innerControl=new ControlType({element:trgt.parentElement,isStandalone:!1})}}else innerControl=new ControlType({element:handlerParams[2],isStandalone:!1});return innerControl}function RecordTextEditSet(handlerParams,rc){var callBackData=rc[0],itemText=\"\",method=eventHandlers.SetCellData;switch(callBackData.m_parameters.length){case 1:itemText=callBackData.m_parameters[0],itemText||(itemText=\"\");break;default:return myTrace(\"RecordTextEditSet null parameter\"),!1}myTrace(SAPUI5ControlName.TABLE+\" record \"+method+\"( \"+handlerParams[0].toString()+\",\"+handlerParams[1].toString()+\",\"+itemText+\")\",LogSeverity_Information,0,SAPUI5_TABLE_CATEGORY);var table=SAPTableFactory(),oneBased=table.ConvertZeroBasedToOneBased([handlerParams[0],handlerParams[1]]),arr=[oneBased[0],oneBased[1],itemText];return table.Record(method,arr,0),!0}function RecordCalendarSetDate(handlerParams,rc){var callBackData=rc[0],itemText=\"\",method=eventHandlers.SetCellData;switch(callBackData.m_parameters.length){case 1:if(!(itemText=callBackData.m_parameters[0]))return!1;break;default:return!1}myTrace(SAPUI5ControlName.TABLE+\" record \"+method+\"( \"+handlerParams[0].toString()+\",\"+handlerParams[1].toString()+\",\"+itemText+\")\",LogSeverity_Information,0,SAPUI5_TABLE_CATEGORY);var table=SAPTableFactory(),oneBased=table.ConvertZeroBasedToOneBased([handlerParams[0],handlerParams[1]]),arr=[oneBased[0],oneBased[1],itemText];return table.Record(method,arr,0),!0}function OnListClick(handlerParams,eventObj){var params=SAPUITable.tableSingleElementToRegister.params;if(!params||params.length<3||!eventObj)return!1;var comboBoxElem=params[2],itemElement=null,itemSelection=null,method=eventHandlers.SetCellData,combobox=null;if(comboBoxElem){itemElement=getTargetObjectFromEvent(eventObj),combobox=new SAPUIList({element:comboBoxElem,isStandalone:!1});var itemSelectionCallBack=combobox.OnItemClick(itemElement,eventObj);if(itemSelectionCallBack){if(itemSelection=itemSelectionCallBack[0].m_parameters[0],\"Select\"!==itemSelectionCallBack[0].m_callback)return;method=eventHandlers.SetCellData}}var Details=SAPUI5ControlName.TABLE+\" record \"+method+\"( \"+params[0].toString()+\",\"+params[1].toString()+\",\"+itemSelection+\")\";myTrace(Details,LogSeverity_Information,0,SAPUI5_TABLE_CATEGORY);var table=SAPTableFactory(),oneBased=table.ConvertZeroBasedToOneBased([params[0],params[1]]),arr=[oneBased[0],oneBased[1]];return itemSelection&&(arr[2]=itemSelection),table.Record(method,arr,0),!0}function OnRatingClick(params,eventObj){if(!params||params.length<3)return!1;if(!eventObj)return!1;var ratingElem=params[2],method=eventHandlers.SelectItemInCell,itemElement=null,rating=null,itemIndex=null;if(ratingElem){itemElement=getTargetObjectFromEvent(eventObj),rating=new SAPUIRatingIndicator({element:ratingElem,isStandalone:!1});var itemSelectionCallBack=rating.OnSelectItem(itemElement,eventObj);itemSelectionCallBack&&(itemIndex=itemSelectionCallBack[0].m_parameters[0])}if(isNaN(itemIndex))return!1;var table=SAPTableFactory(),oneBased=table.ConvertZeroBasedToOneBased([params[0],params[1]]),arr=[oneBased[0],oneBased[1]];arr[2]=itemIndex,table.Record(method,arr,0)}function OnSelectAllClick(handlerParams,eventObj){if(!eventObj)return!1;if(!1===isLeftMouseButtonEvent(eventObj))return!0;var table=SAPTableFactory(),sapCore=table.GetCoreElement(),method=\"DeselectAll\";if(sapCore){method=window._uft.$(table.Element()).find(\"div.sapUiTableSelAll\").get(0)?eventHandlers.SelectAll:eventHandlers.DeselectAll}return\"\"!==method&&table.Record(method,[],0),!0}function SelectAll(){SAPTableFactory().SelectAll()}function DeselectAll(){SAPTableFactory().DeselectAll()}function SetCellData(row,column,data){var details=\"\",methodName=\"SetCellData\",params=[row,column,data],table=SAPTableFactory();if(\"number\"!=typeof row||null==column||null==row)return details=\"Cell location invalid: \"+row+\",\"+column,_util.Report(micFail,methodName,toSafeArray(params),details),!1;window._uft.$(table.Element()).focus(),table.setRowVisable(row);var promise=new HPPromise;return window.setTimeout(function(){SetCellDataExecuter(table,methodName,row,column,data,params,promise)},promiseTimeout),promise}function getChildrenElementArray(elem){for(var rc=[],childs=window._uft.$(elem).children(),i=0;i<childs.length;i++)rc[i]=childs[i];return rc}function SetCellDataExecuter(table,methodName,row,column,data,params,promise){var ret=GetCell(table,row,column),cellToSelect=ret.cell;if(null===cellToSelect){var details=ret.message;return _util.Report(micFail,methodName,toSafeArray(params),details),void promise.resolve(!1)}var cellElem=table.GetInnerCellElement(cellToSelect);if(null!==cellElem){var childs=getChildrenElementArray(cellElem);if(0===childs.length)return table.SimulateClick(cellToSelect),_util.Report(micFail,methodName,toSafeArray(params),\"Unable to Set cell \"+row+\",\"+column+\" to \"+data+\".\"),void promise.resolve(!1);for(var i=0;i<childs.length;i++){var current=childs[i];if(childs=childs.concat(getChildrenElementArray(current)),isCheckBox(current)){new SAPUICheckBox({element:current,isStandalone:!1}).SetState(\"Set\",data);break}if(isTextEdit(current)){new SAPUITextEdit({element:current,isStandalone:!1}).Set(data);break}if(isComboBox(current)){new SAPUIList({element:current,isStandalone:!1}).Select(data,\"Select\");break}if(isCalendar(current)){SAPCalendarFactory({element:current,isStandalone:!1}).SetDate(data);break}if(isRatingIndicator(current)){new SAPUIRatingIndicator({element:current,isStandalone:!1}).Select(data);break}if(i==childs.length-1)return table.SimulateClick(cellToSelect),_util.Report(micFail,methodName,toSafeArray(params),\"Unable to Set cell \"+row+\",\"+column+\" to \"+data+\".\"),void promise.resolve(!1)}}_util.Report(micDone,methodName,toSafeArray(params),\"Set cell \"+row+\",\"+column+\" to \"+data+\".\"),promise.resolve(!0)}function GetCell(table,Row,Column){var Details=\"\",oneBased=[];if(oneBased[0]=table.ConvertRealRowIndexToVisible(Row),oneBased[1]=\"string\"==typeof Column?table.getColumnIndex(Column):Column,oneBased[1]<=0)return Details=\"Column number is out of range or column name is invalid.\"+Row+\",\"+Column,{cell:null,message:Details};var zeroBased=table.ConvertOneBasedToZeroBased(oneBased),cellToSelect=table.getCell(zeroBased[0],zeroBased[1]);return cellToSelect?{cell:cellToSelect,message:Details}:(Details=\"Cell \"+Row+\",\"+Column+\" not found.\",{cell:null,message:Details})}function SelectCell(Row,Column){var Details=\"\",methodName=\"SelectCell\",params=[Row,Column];if(\"number\"!=typeof Row||null==Column||null==Row)return Details=\"Cell location invalid: \"+Row+\",\"+Column,_util.Report(micFail,methodName,toSafeArray(params),Details),!1;var promise=new HPPromise,table=SAPTableFactory();table.setRowVisable(Row);var performSelectCell=function(){var ret=GetCell(table,Row,Column),cellToSelect=ret.cell;if(null===cellToSelect)return Details=ret.message,_util.Report(micFail,methodName,toSafeArray(params),Details),void promise.resolve(!1);if(table.GetTableType()!==SAPUITable.TableTypesEnum.SAPUITable&&table.GetTableType()!==SAPUITable.TableTypesEnum.SAPMListTbl)_control.ReplayClick(cellToSelect);else{var cellElem=table.GetInnerCellElement(cellToSelect);if(null!=cellElem)for(var childs=window._uft.$(cellElem).children(),current,ctrl,i=0;i<childs.length;i++)current=childs[i],ctrl=null,isButton(current)?ctrl=new SAPUIButton({element:current,isStandalone:!1}):isToggleButton(current)?ctrl=new SAPUIToggleButton({element:current,isStandalone:!1}):isLink(current)?ctrl=new SAPUILink({element:current,isStandalone:!1}):isCheckBox(current)?ctrl=new SAPUICheckBox({element:current,isStandalone:!1}):isRadioButton(current)&&(ctrl=new SAPUIRadioButton({element:current,isStandalone:!1})),ctrl?ctrl.Click(methodName,params):_control.ReplayEvent(cellToSelect,\"click\")}_util.Report(micDone,methodName,toSafeArray(params),\"Select cell \"+Row+\",\"+Column+\" in the table.\"),promise.resolve(!0)};return window.setTimeout(function(){performSelectCell()},promiseTimeout),promise}function SelectItemInCell(Row,Column,Item){return SAPTableFactory().SelectItemInCell(Row,Column,Item)}function GetCellData(Row,Column){var Details=\"\",methodName=\"GetCellData\",params=[Row,Column];if(\"number\"!=typeof Row||null==Column||null==Row)return Details=\"Cell location invalid: \"+Row+\",\"+Column,_util.Report(micFail,methodName,toSafeArray(params),Details),!1;var table=SAPTableFactory();table.InitRowData();var ret=GetCell(table,Row,Column),cell=ret.cell;if(null===cell)return Details=ret.message,_util.Report(micFail,methodName,toSafeArray(params),Details),!1;var cellData=table.getCellData(cell);return null==cellData?(Details=\"Cannot retrieve data from cell: \"+Row+\",\"+Column,_util.Report(micFail,methodName,toSafeArray(params),Details),!1):(Details=\"Retrieved \"+cellData+\" from cell: \"+Row+\",\"+Column,_util.Report(micDone,methodName,toSafeArray(params),Details),cellData)}function GetColumnName(Index){var methodName=\"GetColumnName\",Details=null,params=[Index],IndexNum=null;if(null!=Index&&(IndexNum=toNumber(Index,!0)),null===IndexNum||IndexNum<=0)return Details=\"Column number is out of range or column name is invalid \"+Index+\".\",_util.Report(micFail,methodName,toSafeArray(params),Details),null;var table=SAPTableFactory(),headers=table.GetHeaders(),dataCloumnsCount=headers.length;if(IndexNum<1||IndexNum>dataCloumnsCount)return Details=\"Column number out of range : \"+Index,table.Report(micFail,methodName,params,Details),null;var oneBased=[IndexNum],zeroBased=table.ConvertOneBasedToZeroBased(oneBased),columnName=table.getColumnTitle(headers[zeroBased[0]]);return columnName&&\"\"!==columnName||(columnName=\"#\"+IndexNum),Details=\"The name of column \"+Index+\" is \"+columnName+\".\",table.Report(micDone,methodName,params,Details),columnName}function GetRowWithCellText(Text,Column,StartFromRow){var methodName=\"GetRowWithCellText\",Details,params;return Column=void 0===Column||null===Column?1:Column,void 0===StartFromRow||null===StartFromRow?(StartFromRow=1,params=[Text,Column]):params=[Text,Column,StartFromRow],StartFromRow<=0?(Details=\"StartFromRow number out of range: \"+StartFromRow,_util.Report(micFail,methodName,toSafeArray(params),Details),-1):SAPTableFactory().AsyncGetRowByText(methodName,params,Text,Column,StartFromRow)}function FindRowByCellContent(Column,Text,StartFromRow){var methodName=\"FindRowByCellContent\",Details,params;return void 0===Text||null===Text?(Details=\"Text parameter is undefined. \"+Text,_util.Report(micFail,methodName,toSafeArray(params),Details),-1):(void 0===StartFromRow||null===StartFromRow?(StartFromRow=1,params=[Column,Text]):params=[Column,Text,StartFromRow],StartFromRow<=0?(Details=\"StartFromRow number out of range: \"+StartFromRow,_util.Report(micFail,methodName,toSafeArray(params),Details),-1):(new SAPTableFactory).AsyncGetRowByText(methodName,params,Text,Column,StartFromRow))}function GetCellDataEx(Column,ByColumn,ByValue,StartFromRow){window.console.log(\" GetCellDataEx arguments \"+arguments.length);var methodName=\"GetCellDataEx\",Details,params;return void 0===ByValue||null===ByValue?(Details=\"ByValue parameter is undefined. \"+ByValue,_util.Report(micFail,methodName,toSafeArray(params),Details),-1):(void 0===StartFromRow||null===StartFromRow?(StartFromRow=1,params=[Column,ByColumn,ByValue]):params=[Column,ByColumn,ByValue,StartFromRow],StartFromRow<=0?(Details=\"StartFromRow number out of range: \"+StartFromRow,_util.Report(micFail,methodName,toSafeArray(params),Details),-1):(new SAPTableFactory).AsyncGetCellDataEx(methodName,params,ByValue,ByColumn,StartFromRow,Column))}function SAPUITable(config){null==config&&(config={}),void 0==config.isStandalone&&(config.isStandalone=!0),void 0==config.handlers&&(!1===config.isStandalone?config.handlers=new Array:config.handlers=defaultTableEventHandlers),void 0==config.type&&(config.type=SAPUI5ControlTypeId.TABLE),void 0==config.name&&(config.name=SAPUI5ControlName.TABLE),SAPUI5Control.call(this,config),this.m_currentPageIndex=0,this.m_currentFirstRowIndex=0,this.m_rowsCount=10}function SAPMTable(config){SAPUITable.call(this,config)}function OnGrowingElementClick(){SAPTableFactory().Record(eventHandlers.More)}function OnMobileTableHeaderClick(handlerParams,eventObj){if(!eventObj)return!1;if(!1===isLeftMouseButtonEvent(eventObj))return!0;var table=new SAPMTable,target=getTargetObjectFromEvent(eventObj),selectAllCheckBox=window._uft.$(target).parents(\"TH.sapMListTblSelCol\").get(0);return selectAllCheckBox?table.OnSelectAll(selectAllCheckBox):void 0}function OnMobileTableClick(handlerParams,eventObj){if(!eventObj)return!1;if(!1===isLeftMouseButtonEvent(eventObj))return!0;var table=new SAPMTable,target=getTargetObjectFromEvent(eventObj),cellElem=\"sapMListTblCell\"===window._uft.$(target).attr(\"class\")?target:window._uft.$(target).parents(\"TD.sapMListTblCell\").get(0);if(cellElem)return table.OnCellClick(cellElem,target,eventObj);var navElem=\"sapMListTblNavCol\"===window._uft.$(target).attr(\"class\")?target:window._uft.$(target).parents(\"TD.sapMListTblNavCol\").get(0);if(navElem)return table.OnNavigateClick(navElem);var rowElem=\"sapMListTblSelCol\"===window._uft.$(target).attr(\"class\")?target:window._uft.$(target).parents(\"TD.sapMListTblSelCol\").get(0);if(rowElem)return table.OnRowClick(rowElem);var subRow=\"sapMListTblSubCnt\"===window._uft.$(target).attr(\"class\")?target:window._uft.$(target).parents(\"DIV.sapMListTblSubCnt\").get(0);return subRow?table.OnCellClick(subRow,target,eventObj):void 0}var eventHandlers={SelectCell:\"SelectCell\",ExtendSelectCell:\"ExtendSelectCell\",SelectRow:\"SelectRow\",ExtendSelectRow:\"ExtendSelectRow\",DeselectRow:\"DeselectRow\",DeleteRow:\"DeleteRow\",More:\"More\",ExtendDeselectRow:\"ExtendDeselectRow\",SelectAll:\"SelectAll\",DeselectAll:\"DeselectAll\",GetCellData:\"GetCellData\",GetColumnName:\"GetColumnName\",SetCell:\"SetCell\",SetCellData:\"SetCellData\",ExtendSetCellData:\"ExtendSetCellData\",SelectItemInCell:\"SelectItemInCell\",OpenMenu:\"OpenMenu\",HeaderClick:\"HeaderClick\",Move:\"Move\",MoveColumn:\"MoveColumn\",ResizeColumn:\"ResizeColumn\",Navigate:\"Navigate\"},promiseTimeout=600;SAPUITable_AuxMove.prototype.Reset=function(){this.m_TableId=null,this.m_ColumnName=null,this.m_fDown=!1,this.m_fMove=!1};var globalAuxMove=new SAPUITable_AuxMove,columnResizeHelper={offset:null,title:\"\"},defaultTableEventHandlers=[new EventCallBack(\"click\",\"OnClick\")];SAPUITable.InheritsFrom(SAPUI5Control),SAPUITable.prototype.SelectItemInCell=function(Row,Column,Item){var Details=\"\",methodName=\"SelectItemInCell\",params=[Row,Column,Item],rowNum=toNumber(Row);if(null==Column||null==rowNum)return Details=\"Cell location invalid: \"+Row+\",\"+Column,_util.Report(micFail,methodName,toSafeArray(params),Details),!1;var promise=new HPPromise;this.setRowVisable(rowNum);var currentObject=this,execSelectItemInCell=function(){var ret=GetCell(currentObject,rowNum,Column),cellToSelect=ret.cell;if(null===cellToSelect)return Details=ret.message,_util.Report(micFail,methodName,toSafeArray(params),Details),void promise.resolve(!1);var cellElem=currentObject.GetInnerCellElement(cellToSelect);if(null!=cellElem)for(var childs=window._uft.$(cellElem).children(),i=0;i<childs.length;i++){var current=childs[i];if(isRatingIndicator(current)){var rating=new SAPUIRatingIndicator({element:current,isStandalone:!1});Details=rating.Select(Item)}else _control.ReplayEvent(cellToSelect,\"click\")}\"\"==Details?_util.Report(micDone,methodName,toSafeArray(params),\"Select item \"+Item+\" in \"+Row+\",\"+Column+\".\"):_util.Report(micFail,methodName,toSafeArray(params),Details),promise.resolve(!0)};return window.setTimeout(function(){execSelectItemInCell()},promiseTimeout),promise},SAPUITable.prototype.GetTableData=function(){var tblData=[];tblData[0]=this.GetColumnsTitles();for(var rowsArray=this.GetRowsArray(),i=0;i<rowsArray.length;i++)for(var tableRows=rowsArray[i],j=0;j<tableRows.length;j++){for(var rowIndex=j+1,dataRow=[],row=tableRows[j],columns=this.GetAllColumns(row),k=0;k<columns.length;k++){var cell=columns[k];dataRow.push(this.getCellData(cell))}var array=tblData[rowIndex],equalsDataRow=!0;if(array)for(var l=0;l<array.length;){if(\"\"!=array[l]){equalsDataRow=!1;break}l++}else equalsDataRow=!0;tblData[rowIndex]=equalsDataRow?dataRow:tblData[rowIndex].concat(dataRow)}for(var i=0;i<tblData.length;i++)tblData[i]=toSafeArray(tblData[i]);return toSafeArray(tblData)},SAPUITable.prototype.Record=function(methodName,params,delay){var methodListSecondParameter=[eventHandlers.SelectCell,eventHandlers.ExtendSelectCell,eventHandlers.GetCellData,eventHandlers.SetCellData,eventHandlers.ExtendSetCellData,eventHandlers.SelectItemInCell],methodListFirstParameter=[eventHandlers.OpenMenu];params&&!isNaN(params[0])&&-1!==methodListFirstParameter.indexOf(methodName)&&(params[0]=this.ConvertColumnIndexToTitle(params[0])),params&&!isNaN(params[1])&&-1!==methodListSecondParameter.indexOf(methodName)&&(params[1]=this.ConvertColumnIndexToTitle(params[1])),SAPUI5Control.prototype.Record.call(this,methodName,params,delay)},SAPUITable.prototype.ConvertColumnIndexToTitle=function(columnIndex){var columnsTitles=this.GetColumnsTitles();if(0===columnsTitles.length)return columnIndex;for(var columnIndexZeroBased=columnIndex-1,columnTitle=columnsTitles[columnIndexZeroBased],i=0;i<columnsTitles.length;i++)if(columnsTitles[i]===columnTitle&&i!==columnIndexZeroBased)return columnIndex;return columnTitle},SAPUITable.prototype.ConvertColumnTitleToIndex=function(columnName){for(var tableColumns=this.GetColumnsTitles(),i=0;i<tableColumns.length;i++)if(tableColumns[i]===columnName)return i+1;return toNumber(columnName)},SAPUITable.prototype.GetPropertyValue=function(property){if(\"logical_name\"===property)return this.GetName();if(\"column count\"===property)return this.ColumnCount();if(\"row count\"===property)return this.RowCount();if(\"first row index\"===property)return this.getFirstVisibleRow()+1;if(\"selected rows indices\"===property){var indices=[],indicesInner=[];indices=this.getSelectedIndices();for(var i=0;i<indices.length;i++)indicesInner[i]=indices[i]+1;return indicesInner.join(\";\")}if(\"name\"===property)return this.GetName();if(\"title\"===property)return this.GetTitle();if(\"columns\"===property){return this.GetColumnsTitles().join(\";\")}return\"current page\"===property?this.GetCurrentPage():SAPUI5Control.prototype.GetPropertyValue.call(this,property)},SAPUITable.prototype.GetName=function(){return this.GetTitle()},SAPUITable.prototype.GetHTMLId=function(){return this.Element().parentElement.id},SAPUITable.prototype.GetCurrentPage=function(){return 0===this.m_currentPageIndex&&this.InitRowData(),this.m_currentPageIndex},SAPUITable.prototype.ConvertOneBasedToZeroBased=function(indexArray){for(var rc=[],i=0;i<indexArray.length;i++)rc[i]=indexArray[i]<1?0:indexArray[i]-1;return rc},SAPUITable.prototype.ConvertZeroBasedToOneBased=function(indexArray){for(var rc=[],i=0;i<indexArray.length;i++)rc[i]=indexArray[i]<0?1:indexArray[i]+1;return rc},SAPUITable.prototype.ConvertVisibleRowIndexToReal=function(rowIindex){return this.m_currentFirstRowIndex=this.getFirstVisibleRow(),this.m_currentFirstRowIndex+rowIindex},SAPUITable.prototype.ConvertVisibleColumnIndexToReal=function(columnIindex){return columnIindex},SAPUITable.prototype.ConvertRealColumnIndexToVisible=function(realColumnIindex){return realColumnIindex},SAPUITable.prototype.ConvertRealRowIndexToVisible=function(realRowIindex){return this.m_currentFirstRowIndex=this.getFirstVisibleRow(),realRowIindex-this.m_currentFirstRowIndex},SAPUITable.prototype.GetTitle=function(){var tableCtrl=this.Element(),title=null,parent=window._uft.$(tableCtrl).parent().get(0),titleElem=window._uft.$(parent).find(\".sapUiTableHdrTitle\").get(0);return null!=titleElem&&void 0!=titleElem&&(title=window._uft.$(titleElem).text()),null!==title&&void 0!==title||(title=this.GetHTMLId()),title},SAPUITable.TableTypesEnum={SAPUITable:0,SAPMTable:1,SAPMListTbl:2,SAPMTablePersoDialog:3,SAPMTableSelectDialog:4},SAPUITable.prototype.GetTableType=function(){if(this.tableType)return this.tableType;var elem=window._uft.$(this.Element()),tableClass=elem.attr(\"class\");return-1===tableClass.indexOf(\"sapMListTbl\")?(this.tableType=SAPUITable.TableTypesEnum.SAPUITable,SAPUITable.TableTypesEnum.SAPUITable):-1!==elem.attr(\"id\").indexOf(\"TableSelectDialog\")?(this.tableType=SAPUITable.TableTypesEnum.SAPUITable,SAPUITable.TableTypesEnum.SAPMTableSelectDialog):-1!==tableClass.indexOf(\"sapMListTbl\")?(this.tableType=SAPUITable.TableTypesEnum.SAPUITable,SAPUITable.TableTypesEnum.SAPMListTbl):void 0},SAPUITable.prototype.ColumnCount=function(){var rc=-1,table1=this.GetCoreElement();if(table1&&table1.getColumns){var columns=table1.getColumns();rc=columns?columns.length:-1}if(-1===rc){var columns=this.GetTableColumns();rc=columns?columns.length:-1}return rc},SAPUITable.prototype.RowCount=function(){var tbCore=this.GetCoreElement();if(tbCore&&tbCore.getVisibleRowCount)return tbCore.getVisibleRowCount();var rowsArray=this.GetRowsArray();return rowsArray.length>0?rowsArray[0].length:0},SAPUITable.prototype.getFirstVisibleRow=function(){var tbCore=this.GetCoreElement();return tbCore&&tbCore.getFirstVisibleRow?tbCore.getFirstVisibleRow():0},SAPUITable.prototype.setFirstVisibleRow=function(row){var tbCore=this.GetCoreElement();tbCore&&tbCore.setFirstVisibleRow&&tbCore.setFirstVisibleRow(row)},SAPUITable.prototype.GetPaginator=function(){var parent=this.Element().parentElement,paginator=window._uft.$(parent).find(\"DIV.sapUiTablePaginator\");return paginator&&paginator.length>0?paginator[0].children[0]:null},SAPUITable.prototype.InitRowData=function(){this.m_currentFirstRowIndex=this.getFirstVisibleRow(),this.m_rowsCount=this.RowCount();var domElPag=this.GetPaginator();if(null!==domElPag){var paginator=new SAPUIPaginator({element:domElPag,isStandalone:!1});this.m_currentPageIndex=paginator.GetCurrentPage()}else 0!==this.m_rowsCount&&(this.m_currentPageIndex=Math.floor(this.m_currentFirstRowIndex/this.m_rowsCount)+1)},SAPUITable.prototype.ConvertIndicesToUFT=function(indices){if(!indices)return[];if(0===indices.length)return[];this.InitRowData();var rc=indices;return rc[0]=this.ConvertVisibleRowIndexToReal(indices[0]),indices.length>1&&(rc[1]=this.ConvertVisibleColumnIndexToReal(indices[1])),rc=this.ConvertZeroBasedToOneBased(rc)},SAPUITable.prototype.GetHeaders=function(){return this.CheckNullElement(),this.GetTableColumns()},SAPUITable.prototype.getHeaderCell=function(column){if(column<0)return null;this.CheckNullElement();var headers=this.GetHeaders();return column<headers.length?headers[column]:null},SAPUITable.prototype.getHeaderCell2=function(column){if(column<0)return null;this.CheckNullElement();var headers=this.GetTableColumns();return column<headers.length?headers[column]:null},SAPUITable.prototype.GetColumnsTitles=function(){for(var headers=this.GetHeaders(),columns=[],i=0;i<headers.length;i++){var title=this.getColumnTitle(headers[i]);null===title||\"\"===title?columns.push(\"#\"+this.ConvertZeroBasedToOneBased([i])[0]):columns.push(title)}return columns},SAPUITable.prototype.GetRowsArray=function(){this.CheckNullElement();for(var tableCtrl=this.Element(),tables=window._uft.$(tableCtrl).find(\"TABLE\").get(),rc=[],i=0;i<tables.length;i++)rc[i]=window._uft.$(tables[i]).children(\"TBODY\").children(\"TR\").get();return rc},SAPUITable.prototype.GetRowHeaders=function(){this.CheckNullElement();var tableCtrl=this.Element();return window._uft.$(tableCtrl).find(\".sapUiTableRowHdr\").get()},SAPUITable.prototype.getColumnTitle=function(column){return trim(window._uft.$(column).text())},SAPUITable.prototype.getColumnIndex=function(column){if(\"string\"==typeof column&&\"\"!==column){var columnNum=toNumber(column,!0);if(null!==columnNum)return columnNum;for(var columns=this.GetColumnsTitles(),i=0;i<columns.length;i++)if(column===columns[i])return this.ConvertZeroBasedToOneBased([i])[0]}return-1},SAPUITable.prototype.getCell=function(numRow,numColumn){if(numColumn<0||numRow<0)return null;var rows,rowsArray=this.GetRowsArray(),fixedColumnCount=this.GetFixedColumnCount();if(rowsArray.length>1&&numColumn>=fixedColumnCount?(numColumn-=fixedColumnCount,rows=rowsArray[1]):rows=rowsArray[0],null!=rows&&rows.length>numRow){var cells=window._uft.$(rows[numRow]).children(\"td[id]\");if(null!=cells&&cells.length>numColumn)return cells[numColumn]}return null},SAPUITable.prototype.getCellData=function(cell){var cellElem=this.GetInnerCellElement(cell);if(null!=cellElem){for(var childs=window._uft.$(cellElem).children(),data=[],i=0;i<childs.length;i++){var current=childs[i];if(isTextEdit(current)){var text=new SAPUITextEdit({element:current,isStandalone:!1});data[i]=text.GetValue()}else if(isMTextEdit(current)){var text=new SAPMTextEdit({element:current,isStandalone:!1});data[i]=text.GetValue()}else if(isComboBox(current))if(isElementOfClass(current,\"DIV\",\"sapMSlt\")){var sapMSltelem=window._uft.$(current).children(\"label\")[0];data[i]=window._uft.$(sapMSltelem).text()}else{var list=new SAPUIList({element:current,isStandalone:!1});data[i]=list.GetValue()}else if(isCalendar(current)){var calendar=new SAPUICalendar({element:current,isStandalone:!1});data[i]=calendar.GetDate()}else if(isCheckBox(current)){var checkbox=new SAPUICheckBox({element:current,isStandalone:!1});data[i]=checkbox.GetCurrentState()}else if(isRadioButton(current)){var radiobutton=new SAPUIRadioButton({element:current,isStandalone:!1});data[i]=radiobutton.GetCurrentState()}else if(isRatingIndicator(current)){var rate=new SAPUIRatingIndicator({element:current,isStandalone:!1});data[i]=rate.GetValue()}else data[i]=window._uft.$(current).text()}return data.join(\";\")}return\"\"},SAPUITable.prototype.getCellDataByType=function(cell,type){var cellElem=this.GetInnerCellElement(cell);if(null!=cellElem){for(var childs=window._uft.$(cellElem).children(),data=[],i=0;i<childs.length;i++){var current=childs[i];switch(type){case SAPUI5ControlTypeId.TEXTEDIT:case SAPUI5ControlTypeId.TEXTAREA:var text=new SAPUITextEdit({element:current,isStandalone:!1});data[i]=text.GetValue();break;case SAPUI5ControlTypeId.LIST:var list=new SAPUIList({element:current,isStandalone:!1});data[i]=list.GetValue();break;case SAPUI5ControlTypeId.CALENDAR:var calendar=new SAPUICalendar({element:current,isStandalone:!1});data[i]=calendar.GetDate();break;case SAPUI5ControlTypeId.CHECKBOX:var checkbox=new SAPUICheckBox({element:current,isStandalone:!1});data[i]=checkbox.GetCurrentState();break;case SAPUI5ControlTypeId.RADIOBUTTON:var radiobutton=new SAPUIRadioButton({element:current,isStandalone:!1});data[i]=radiobutton.GetCurrentState();break;case SAPUI5ControlTypeId.RATINGINDICATOR:var rating=new SAPUIRatingIndicator({element:current,isStandalone:!1});data[i]=rating.GetValue();break;default:data[i]=window._uft.$(current).text()}}return data.join(\";\")}return\"\"},SAPUITable.prototype.getCellDataType=function(cell){var cellElem=this.GetInnerCellElement(cell);if(null!=cellElem){var childs=window._uft.$(cellElem).children(),current=childs[0];return isButton(current)?SAPUI5ControlTypeId.BUTTON:isTextEdit(current)?SAPUI5ControlTypeId.TEXTEDIT:isComboBox(current)?SAPUI5ControlTypeId.LIST:isCalendar(current)?SAPUI5ControlTypeId.CALENDAR:isCheckBox(current)?SAPUI5ControlTypeId.CHECKBOX:isRadioButton(current)?SAPUI5ControlTypeId.RADIOBUTTON:isRatingIndicator(current)?SAPUI5ControlTypeId.RATINGINDICATOR:SAPUI5ControlTypeId.UNKNOWN}},SAPUITable.prototype.isRowHeader=function(element){return\"DIV\"===element.tagName&&\"sapUiTableRowHdr\"===element.className},SAPUITable.tableSingleElementToRegister={params:[],element:null,type:null,tableID:\"\"},SAPUITable.prototype.updateTableSingleElementToRegisterObject=function(element,params,type){return SAPUITable.tableSingleElementToRegister.element=element,SAPUITable.tableSingleElementToRegister.params=params,SAPUITable.tableSingleElementToRegister.type=type,SAPUITable.tableSingleElementToRegister.tableID=this.GetHTMLId(),this.singleElementRegisterToEvent(),!0},SAPUITable.prototype.calculateRowIndex=function(row){for(var allRows=window._uft.$(row).parents(\"tbody\").find(\"tr[id]\"),i=0;i<allRows.length;i++)if(row===allRows[i])return myTrace(\"calculateRowIndex - \"+i),i;return-1},SAPUITable.prototype.getColIndexFromCell=function(cellElem){for(var cols=this.GetAllColumns(window._uft.$(cellElem).parents(\"tr\")),col=\"TD\"===cellElem.tagName.toUpperCase()?cellElem:window._uft.$(cellElem).parents(\"td\")[0],fixedColumnCount=this.GetFixedTableCtrlCellsParent(cellElem)?0:this.GetFixedColumnCount(),i=0;i<cols.length;i++)if(col===cols[i])return i+fixedColumnCount|0;return-1},SAPUITable.prototype.GetAllColumns=function(row){return row?window._uft.$(row).children(\"td[id]\"):[]},SAPUITable.prototype.getRowIndexFromCell=function(cellElem){var rowIndex=-1,rowElem=window._uft.$(cellElem).parents(\"tr\").get(0),coreRowElm=getCoreFromElement(rowElem);return rowIndex=coreRowElm&&coreRowElm.getIndex?coreRowElm.getIndex():this.calculateRowIndex(rowElem)+this.getFirstVisibleRow(),window._uft.$.isNumeric(rowIndex)?0|rowIndex:-1},SAPUITable.prototype.GetFixedTableCtrlCells=function(){return window._uft.$(this.Element()).find(\"div.sapUiTableCtrlScrFixed\").get(0)},SAPUITable.prototype.GetFixedTableCtrlCellsParent=function(cell){return window._uft.$(cell).parents(\"div.sapUiTableCtrlScrFixed\").get(0)},SAPUITable.prototype.GetTableCtrlCells=function(){return window._uft.$(this.Element()).find(\"div.sapUiTableCtrlCnt\").get(0)},SAPUITable.prototype.RegisterSingleCalendarElement=function(){var eventHandlers=[],ctrl;return eventHandlers[0]=new EventCallBack(\"focus\",\"OnCalendarFocus\"),eventHandlers[1]=new EventCallBack(\"blur\",\"OnCalendarBlur\"),_util.GetBrowserType()===QtpConstants.FireFox?eventHandlers[2]=new EventCallBack(\"select\",\"OnCalendarSelect\"):eventHandlers[2]=new EventCallBack(\"activate\",\"OnCalendarActivate\"),eventHandlers[3]=new EventCallBack(\"keydown\",\"OnCalendarKeydown\"),ctrl=SAPCalendarFactory({element:SAPUITable.tableSingleElementToRegister.element,isStandalone:!1,handlers:eventHandlers}),ctrl.RegisterForEvents(),!0},SAPUITable.prototype.RegisterSingleTextEditElement=function(){var eventHandlers=[];eventHandlers[0]=new EventCallBack(\"blur\",\"OnTextEditBlur\"),eventHandlers[1]=new EventCallBack(\"keydown\",\"OnTextEditKeydown\"),eventHandlers[2]=new EventCallBack(\"submit\",\"OnTextEditSubmit\");var handlerForOptions=new EventCallBack(\"click\",\"OnTextEditOptionClick\");return new SAPUITextEdit({element:SAPUITable.tableSingleElementToRegister.element,isStandalone:!1,handlers:eventHandlers,handlerForOptions:handlerForOptions}).RegisterForEvents(),!0},SAPUITable.prototype.RegisterSingleListElement=function(){var eventHandler=new EventCallBack(\"click\",\"OnListClick\");return new SAPUIList({element:SAPUITable.tableSingleElementToRegister.element,isStandalone:!1,handlers:[eventHandler]}).RegisterForEvents(),!0},SAPUITable.prototype.singleElementRegisterToEvent=function(){if(this.GetHTMLId()===SAPUITable.tableSingleElementToRegister.tableID)return!(SAPUITable.tableSingleElementToRegister.element&&SAPUITable.tableSingleElementToRegister.type&&SAPUITable.tableSingleElementToRegister.params)||(SAPUITable.tableSingleElementToRegister.type===SAPUI5ControlTypeId.TEXTEDIT?this.RegisterSingleTextEditElement():SAPUITable.tableSingleElementToRegister.type===SAPUI5ControlTypeId.LIST?this.RegisterSingleListElement():SAPUITable.tableSingleElementToRegister.type===SAPUI5ControlTypeId.CALENDAR?this.RegisterSingleCalendarElement():void 0)},SAPUITable.prototype.GetColumnResizers=function(){return window._uft.$(this.Element()).find(\"div.sapUiTableColRsz\").get()},SAPUITable.prototype.GetTableSelectAll=function(){var rc=window._uft.$(this.Element()).find(\"div.sapUiTableColRowHdr\").get();return rc&&(rc=rc[0]),rc},SAPUITable.prototype.RegisterForEvents=function(eventsHandlers){var rowHeaders=this.GetRowHeaders();if(null==rowHeaders||0===rowHeaders.length)return!1;for(var r=0;r<rowHeaders.length;r++){var current=rowHeaders[r],rowIndex=r;_control.RegisterElementToEvent(current,\"click\",\"OnRowHeaderClick\",rowIndex)}var tableSelectAll=this.GetTableSelectAll();tableSelectAll&&_control.RegisterElementToEvent(tableSelectAll,\"click\",\"OnSelectAllClick\");for(var resizers=this.GetColumnResizers(),i=0;i<resizers.length;i++){var current=resizers[i];_control.RegisterElementToEvent(current,\"mousedown\",\"OnResizerMousedown\",current)}for(var colHeaders=this.GetTableColumnHeaders(),i=0;i<colHeaders.length;i++){var current=colHeaders[i];_control.RegisterElementToEvent(current,\"mouseup\",\"OnResizerMouseup\")}var domElPag=this.GetPaginator();if(null!=domElPag){var eventHandler=new EventCallBack(\"click\",\"OnPaginatorClick\");new SAPUIPaginator({element:domElPag,isStandalone:!1,handlers:[eventHandler]}).RegisterForEvents()}var sb=this.GetScrollBar();if(null!==sb)for(var sbIter=0;sbIter<sb.length;sbIter++)_control.RegisterElementToEvent(sb[sbIter],\"mousedown\",\"OnScrollBarClick\"),_control.RegisterElementToEvent(sb[sbIter],\"mouseup\",\"OnScrollBarClick\"),_control.RegisterElementToEvent(sb[sbIter],\"click\",\"OnScrollBarClick\");for(var columnHeaders=this.GetTableColumns(),enableColumnReordering=!1,headersLen=columnHeaders.length,columnIndex=0;columnIndex<headersLen;columnIndex++){var current=columnHeaders[columnIndex];_control.RegisterElementToEvent(current,\"click\",\"OnColumnHeaderClick\",columnIndex),!0===enableColumnReordering&&(_control.RegisterElementToEvent(current,\"mousedown\",\"OnColumnHeaderDrag\",columnIndex),_control.RegisterElementToEvent(current,\"mousemove\",\"OnColumnHeaderMove\",columnIndex),_control.RegisterElementToEvent(current,\"mouseup\",\"OnColumnHeaderDrop\",columnIndex))}var tableCellsCtl=this.GetTableCtrlCells();tableCellsCtl&&_control.RegisterElementToEvent(tableCellsCtl,\"click\",\"OnGeneralCellClick\");var fixedTableCellsCtr=this.GetFixedTableCtrlCells();return fixedTableCellsCtr&&_control.RegisterElementToEvent(fixedTableCellsCtr,\"click\",\"OnGeneralCellClick\"),this.singleElementRegisterToEvent(),!0},SAPUITable.prototype.GetTableColumnHeaders=function(){var colHeaders=window._uft.$(this.Element()).find(\"DIV.sapUiTableColHdr\").get(),len=colHeaders.length;return colHeaders},SAPUITable.prototype.GetTableColumns=function(){var ret=window._uft.$(this.Element()).find(\"DIV.sapUiTableCol\").get();return 0==ret.length&&(ret=window._uft.$(this.Element()).find(\"DIV.sapUiTableColCell\").get()),ret},SAPUITable.prototype.getSelectedIndex=function(){var table=this.GetCoreElement();return table&&table.getSelectedIndex?table.getSelectedIndex():-1},SAPUITable.prototype.getSelectedIndices=function(){var table=this.GetCoreElement();return table&&table.getSelectedIndices?table.getSelectedIndices():-1},SAPUITable.prototype.Sort=function(column,sortOrder){var numColumn=null;if(null===(numColumn=\"string\"==typeof column?this.getColumnIndex(column):column)||numColumn<=0)return this.Report(micFail,\"Sort\",params,\"Column number is out of range or column name is invalid: \"+column),!1;var oneBased=[];oneBased[0]=numColumn;var zeroBased=this.ConvertOneBasedToZeroBased(oneBased),table=this.GetCoreElement();if(table){var uiSortOrder=window.sap.ui.table.SortOrder.Ascending;sortOrder?\"Descending\"===sortOrder&&(uiSortOrder=window.sap.ui.table.SortOrder.Descending):uiSortOrder=window.sap.ui.table.SortOrder.Ascending,table.sort(zeroBased[0],uiSortOrder),table.fireSort()}return!0},SAPUITable.prototype.OpenMenu=function(Column,methodName){var openMenuHandler=methodName||eventHandlers.OpenMenu,Details=null,ColumnNum=null;if(null===(ColumnNum=\"string\"==typeof Column?this.getColumnIndex(Column):\"number\"==typeof Column?Column:null))return Details=\"Cannot \"+openMenuHandler+\" for invalid column number \"+Column+\".\",_util.Report(micFail,openMenuHandler,toSafeArray(new Array),Details),!1;var zeroBased=ColumnNum-1,index=zeroBased,headers=this.GetTableColumns();if(index<0||index>=headers.length)return Details=\"Column number out of range or column name is invalid : \"+Column,this.Report(micFail,openMenuHandler,[Column],Details),!1;var headerLabel=window._uft.$(headers[index]).find(\"label\").get(0);return headerLabel||(headerLabel=window._uft.$(headers[index]).find(\"bdi\").get(0)),window._uft.$(headerLabel).focus(),_control.ReplayClick(headerLabel),_util.Wait(500),this.Report(micDone,openMenuHandler,[Column],\" \"),!0},SAPUITable.prototype.SelectRow=function(rowIndex,handlerMethod,isExtendSelect){var Details=\"\";switch(arguments.length){case 0:return Details='Null input parameter \"Index\"',_util.Report(micFail,handlerMethod,toSafeArray([]),Details),!1;case 1:handlerMethod=eventHandlers.SelectRow;case 2:isExtendSelect=!1}if(rowIndex<1)return Details=\"Row index is out of range.\",_util.Report(micFail,handlerMethod,toSafeArray([rowIndex]),Details),!1;var promise=new HPPromise;this.setRowVisable(rowIndex);var currentObject=this,execSelectRow=function(){var rowIsSelected=!1,multipleRowsSelected=!1,zeroBasedRow=currentObject.ConvertRealRowIndexToVisible(rowIndex),oneBasedRow=currentObject.ConvertOneBasedToZeroBased([zeroBasedRow]),arr=currentObject.GetRowHeaders(),relRowIndex=oneBasedRow[0],rowElem;if(null!==(rowElem=relRowIndex<arr.length?arr[relRowIndex]:null)&&void 0!==rowElem){switch(rowIsSelected=isRowSelected(rowElem),multipleRowsSelected=currentObject.getSelectedIndices().length>1,handlerMethod){case eventHandlers.SelectRow:rowIsSelected?Details=\"The row is selected already.\":(window._uft.$(rowElem).simulate(\"click\"),Details=\"The row is selected.\");break;case eventHandlers.ExtendSelectRow:if(rowIsSelected)Details=\"The row is selected already.\";else{var e=window._uft.jQuery.Event(\"click\");e.ctrlKey=!0,window._uft.$(rowElem).trigger(e),Details=\"The row is selected.\"}break;case eventHandlers.DeselectRow:rowIsSelected?(window._uft.$(rowElem).simulate(\"click\"),Details=\"The row is deselected.\"):Details=\"The row is deselected already.\";break;case eventHandlers.ExtendDeselectRow:if(rowIsSelected){var e=window._uft.jQuery.Event(\"click\");e.ctrlKey=!0,window._uft.$(rowElem).trigger(e),Details=\"The row is deselected.\"}else Details=\"The row is deselected already.\"}return _util.Report(micDone,handlerMethod,toSafeArray([rowIndex]),Details),promise.resolve(!0),!0}return Details=\"Row number out of range: \"+rowIndex,_util.Report(micFail,handlerMethod,toSafeArray([rowIndex]),Details),promise.resolve(!1),!1};return window.setTimeout(function(){execSelectRow()},promiseTimeout),promise},SAPUITable.prototype.SelectRows=function(rowIndicesArray){for(var len=rowIndicesArray.length,i=0;i<len;i++)this.SelectRow(rowIndicesArray[i],eventHandlers.SelectRow,!0)},SAPUITable.prototype.SelectAll=function(){var Details=\"\",tableCore=this.GetCoreElement(),selAll=window._uft.$(this.Element()).find(\"div.sapUiTableSelAllEnabled\").get(0);return selAll?tableCore?(selAll=window._uft.$(this.Element()).find(\"div.sapUiTableSelAll\").get(0),selAll?tableCore.selectAll():Details=\"All rows are selected already.\",_util.Report(micDone,eventHandlers.SelectAll,toSafeArray([]),Details),!0):(Details=\"Failed to get table core element.\",_util.Report(micFail,eventHandlers.SelectAll,toSafeArray([]),Details),!1):(Details=\"All rows selection is not enabled.\",_util.Report(micFail,eventHandlers.SelectAll,toSafeArray([]),Details),!1)},SAPUITable.prototype.DeselectAll=function(){var Details=\"\",tableCore=this.GetCoreElement();if(tableCore){return!0===tableCore.getSelectedIndices().length>0?tableCore.clearSelection():Details=\"There is no selected rows.\",_util.Report(micDone,eventHandlers.DeselectAll,toSafeArray([]),Details),!0}return Details=\"Failed to get table core element\",_util.Report(micFail,eventHandlers.DeselectAll,toSafeArray([]),Details),!1},SAPUITable.prototype.SetPage=function(pageNumber){return this.GoToPage(PaginatorMethods.SetPage,pageNumber)},SAPUITable.prototype.NextPage=function(){return this.GoToPage(PaginatorMethods.NextPage)},SAPUITable.prototype.PreviousPage=function(){return this.GoToPage(PaginatorMethods.PreviousPage)},SAPUITable.prototype.FirstPage=function(){return this.GoToPage(PaginatorMethods.FirstPage)},SAPUITable.prototype.LastPage=function(){return this.GoToPage(PaginatorMethods.LastPage)},SAPUITable.prototype.silentSetPage=function(pageNumber){var paginator=this.GetPaginator(),rc=!1;if(paginator){var paginatorTO=new SAPUIPaginator({element:paginator,isStandalone:!1});if(pageNumber<1||pageNumber>paginatorTO.GetNumberOfPages())return!1;rc=paginatorTO.SetPage(pageNumber),this.m_currentPageIndex=paginatorTO.GetCurrentPage(),this.m_currentPageIndex===pageNumber&&(rc=!0)}return rc},SAPUITable.prototype.setRowVisable=function(row){if(this.m_currentFirstRowIndex=this.getFirstVisibleRow(),this.m_rowsCount=this.RowCount(),row>this.m_currentFirstRowIndex&&row<=this.m_currentFirstRowIndex+this.m_rowsCount)return!0;var firstRow=Math.floor((row-1)/this.m_rowsCount)*this.m_rowsCount;this.setFirstVisibleRow(firstRow)},SAPUITable.prototype.IsFirstRowIndex=function(row){return this.m_currentFirstRowIndex=this.getFirstVisibleRow(),row>this.m_currentFirstRowIndex&&row<=this.m_currentFirstRowIndex+this.m_rowsCount},SAPUITable.prototype.GoToPage=function(method,pageNumber){var rc=!0,result=micDone,details=\"\",arr=[],savedPage=this.m_currentPageIndex,setPage=this.m_currentPageIndex,paginator=this.GetPaginator();if(paginator){var paginatorTO=new SAPUIPaginator({element:paginator,isStandalone:!1});switch(this.m_currentPageIndex=paginatorTO.GetCurrentPage(),savedPage=this.m_currentPageIndex,setPage=this.m_currentPageIndex,method){case PaginatorMethods.LastPage:setPage=paginatorTO.GetNumberOfPages();break;case PaginatorMethods.FirstPage:setPage=1;break;case PaginatorMethods.PreviousPage:setPage=savedPage-1;break;case PaginatorMethods.NextPage:setPage=savedPage+1;break;case PaginatorMethods.SetPage:setPage=pageNumber,null===pageNumber?(rc=!1,details=\"Invalid page number. Page number starts from 1. Total number of pages: \"+paginatorTO.GetNumberOfPages()):(arr[0]=pageNumber,(pageNumber<1||pageNumber>paginatorTO.GetNumberOfPages())&&(rc=!1,details=\"Out of bounds. Page number starts from 1. Total number of pages: \"+paginatorTO.GetNumberOfPages()));break;default:rc=!1,detailes=\"\"}}return!0===rc&&(rc=this.silentSetPage(setPage)),result=rc?micDone:micFail,this.Report(result,method,arr,details),rc},SAPUITable.prototype.GetFixedColumnCount=function(){var core=this.GetCoreElement();if(core&&core.getFixedColumnCount)return core.getFixedColumnCount();var fixed=window._uft.$(this.Element()).children(\"sapUiTableColHdrCnt\").children(\"sapUiTableColHdrFixed\").get();return fixed.length>0?window._uft.$(fixed[0]).find(\"div.sapUiTableCol\").get().length:0},SAPUITable.prototype.SetPageForRow=function(rowIndex){if(this.InitRowData(),0===this.m_rowsCount)return!1;var setPage=Math.ceil(rowIndex/this.m_rowsCount);return this.m_currentPageIndex!==setPage&&this.silentSetPage(setPage)&&this.InitRowData(),!0},SAPUITable.prototype.AsyncFindRowByCellContent=function(numColumn,text,startFromRow,callback){var j=1,currentObject=this,promise=new HPPromise,findRowByTextFunc=function(state){if(!1===state)return void callback(-2,promise);var rows,rowsArray=currentObject.GetRowsArray(),fixedColumnCount=currentObject.GetFixedColumnCount();rowsArray.length>1&&numColumn>=fixedColumnCount?(numColumn-=fixedColumnCount,rows=rowsArray[1]):rows=rowsArray[0];var rc=-1;rows&&(j=j?startFromRow-currentObject.m_currentFirstRowIndex:0,rc=currentObject.IsTextExistInColumnFromRow(rows,j,numColumn,text)),callback(rc,promise)};return this.setRowVisable(startFromRow+1),window.setTimeout(function(){findRowByTextFunc(currentObject.IsFirstRowIndex(startFromRow+1))},promiseTimeout),promise},SAPUITable.prototype.AsyncGetCellDataByCellContent=function(numColumn,text,destColumn,startFromRow,callback){var j=1,currentObject=this,promise=new HPPromise,findRowByTextFunc=function(state){if(!1===state)return void callback(-2,promise);var rows,rowsArray=currentObject.GetRowsArray(),fixedColumnCount=currentObject.GetFixedColumnCount();rowsArray.length>1&&numColumn>=fixedColumnCount?(numColumn-=fixedColumnCount,rows=rowsArray[1]):rows=rowsArray[0],rowsArray.length>1&&destColumn>=fixedColumnCount&&(destColumn-=fixedColumnCount);var rc=-1;rows&&(j=j?startFromRow-currentObject.m_currentFirstRowIndex:0,rc=currentObject.GetCellTextInColumnFromRow(rows,j,numColumn,text,destColumn)),callback(rc,promise)};return this.setRowVisable(startFromRow+1),window.setTimeout(function(){findRowByTextFunc(currentObject.IsFirstRowIndex(startFromRow+1))},promiseTimeout),promise},SAPUITable.prototype.IsTextExistInColumnFromRow=function(rows,startFromRow,numColumn,text){for(var jQueryString=\"td[id]:eq(\"+numColumn+\")\",cell,cellData,i=startFromRow;i<rows.length;i++)if((cell=window._uft.$(rows[i]).children(jQueryString).get(0))&&(cellData=this.getCellData(cell))===text)return i+this.m_currentFirstRowIndex;return-1},SAPUITable.prototype.GetCellTextInColumnFromRow=function(rows,startFromRow,numColumn,text,destColumn){for(var jQueryString=\"td[id]:eq(\"+numColumn+\")\",jQueryStringDest=\"td[id]:eq(\"+destColumn+\")\",cell,cellData,i=startFromRow;i<rows.length;i++)if((cell=window._uft.$(rows[i]).children(jQueryString).get(0))&&(cellData=this.getCellData(cell))===text&&(cell=window._uft.$(rows[i]).children(jQueryStringDest).get(0)))return this.getCellData(cell);return-1},SAPUITable.prototype.AsyncGetRowByText=function(Method,Params,Text,Column,StartFromRow){var methodName=Method,params=Params,Details;if(StartFromRow<=0)return Details=\"StartFromRow number out of range: \"+StartFromRow+\".\",myTrace(Details,LogSeverity_Failure),this.Report(micFail,methodName,params,Details),-1;var oneBased=[StartFromRow];if(\"string\"==typeof Column)oneBased[1]=this.getColumnIndex(Column);else{if(\"number\"!=typeof Column)return Details=\"Invalid column parameter type.\",myTrace(Details,LogSeverity_Failure),void this.Report(micFail,methodName,params,Details);oneBased[1]=Column}var cols=this.ColumnCount();if(oneBased[1]<=0||oneBased[1]>cols)return Details=\"Column number is out of range or column name is invalid: \"+Column+\". Total columns \"+cols,myTrace(Details,LogSeverity_Failure),void this.Report(micFail,methodName,params,Details);var zeroBased=this.ConvertOneBasedToZeroBased(oneBased),tableObj=this,callback=function(row,promise){return-2===row?(Details=\"StartFromRow number out of range: \"+StartFromRow,_util.Report(micFail,methodName,toSafeArray(params),Details),void promise.resolve(-1)):-1===row?(Details=\"Cannot find the specified row.\",tableObj.Report(micDone,methodName,params,Details),void promise.resolve(-1)):(row=tableObj.ConvertZeroBasedToOneBased([row])[0],Details=\"The number of the specified row is \"+row+\".\",myTrace(Details,LogSeverity_Success),_util.Report(micDone,methodName,toSafeArray(params),Details),void promise.resolve(row))};return this.AsyncFindRowByCellContent(zeroBased[1],Text,zeroBased[0],callback)},SAPUITable.prototype.AsyncGetCellDataEx=function(Method,Params,Text,Column,StartFromRow,DestColumn){var methodName=Method,params=Params,Details;if(StartFromRow<=0)return Details=\"StartFromRow number out of range: \"+StartFromRow+\".\",myTrace(Details,LogSeverity_Failure),this.Report(micFail,methodName,params,Details),-1;var oneBased=[StartFromRow];if(\"string\"==typeof Column)oneBased[1]=this.getColumnIndex(Column);else{if(\"number\"!=typeof Column)return Details=\"Invalid column parameter type.\",myTrace(Details,LogSeverity_Failure),void this.Report(micFail,methodName,params,Details);oneBased[1]=Column}if(\"string\"==typeof DestColumn)oneBased[2]=this.getColumnIndex(DestColumn);else{if(\"number\"!=typeof DestColumn)return Details=\"Invalid DestColumn parameter type.\",myTrace(Details,LogSeverity_Failure),void this.Report(micFail,methodName,params,Details);oneBased[2]=DestColumn}var cols=this.ColumnCount();if(oneBased[1]<=0||oneBased[1]>cols||oneBased[2]<=0||oneBased[2]>cols)return Details=\"Column number or destColumn is out of range or column name is invalid: \"+Column+\". Total columns \"+cols,myTrace(Details,LogSeverity_Failure),void this.Report(micFail,methodName,params,Details);var zeroBased=this.ConvertOneBasedToZeroBased(oneBased),tableObj=this,callback=function(rc,promise){return-2===rc?(Details=\"StartFromRow number out of range: \"+StartFromRow,_util.Report(micFail,methodName,toSafeArray(params),Details),void promise.resolve()):-1===rc?(Details=\"Cannot find the specified cell.\",tableObj.Report(micFail,methodName,params,Details),void promise.resolve()):(Details=\"The retrieved cell content is \"+rc+\".\",myTrace(Details,LogSeverity_Success),_util.Report(micDone,methodName,toSafeArray(params),Details),void promise.resolve(rc))};return this.AsyncGetCellDataByCellContent(zeroBased[1],Text,zeroBased[2],zeroBased[0],callback)},SAPUITable.prototype.Move=function(column,xPos){var delta=50,new_x=xPos,params=[];if(params[0]=column,params[1]=xPos,\"number\"!=typeof xPos)return this.Report(micFail,eventHandlers.Move,params,\"Invalid X position : \"+xPos),!1;if(null==column)return this.Report(micFail,eventHandlers.Move,params,\"Column invalid.\"),!1;var coreElem=this.GetCoreElement();if(null!==coreElem){if(!1===coreElem.getEnableColumnReordering())return this.Report(micFail,eventHandlers.Move,params,\"Columns Reopdering Disabled \"),!1}var numColumn=null;if(null===(numColumn=\"string\"==typeof column?this.getColumnIndex(column):column)||numColumn<=0)return this.Report(micFail,eventHandlers.Move,params,\"Column number is out of range or column name is invalid: \"+column),!1;var oneBased=[];oneBased[0]=numColumn;var zeroBased=this.ConvertOneBasedToZeroBased(oneBased),columnElem=this.getHeaderCell2(zeroBased[0]);if(!columnElem)return!1;var headerRect=columnElem.getBoundingClientRect(),_x=headerRect.left+(headerRect.right-headerRect.left)/2,_y=headerRect.top+(headerRect.bottom-headerRect.top)/2,startLeft=parseInt(window._uft.$(columnElem).css(\"left\"),10);startLeft=isNaN(startLeft)?0:startLeft;var position=window._uft.$(columnElem).css(\"position\"),calcOffset=_x-xPos;if(delta=Math.abs(Math.ceil((headerRect.right-headerRect.left)/2)),Math.abs(calcOffset)<=delta)return this.Report(micDone,eventHandlers.Move,params,\"Column \"+params[0]+\" located at \"+params[1]+\" already.\"),!0;var newLeft=calcOffset;\"absolute\"===position?newLeft=calcOffset:\"relative\"===position&&(newLeft=startLeft+calcOffset),window._uft.$(columnElem).focus();var isIE=_QTPUtil.GetBrowserType()===QtpConstants.IE;isIE&&window._uft.$(columnElem).mouseenter(),window._uft.$(columnElem).simulate(\"mousedown\");for(var xPosMove=_x,iterTotal=8,iter=0;iter<iterTotal;iter++)window._uft.$(columnElem).simulate(\"mousemove\",{clientX:xPosMove,clientY:_y}),xPosMove-=calcOffset/iterTotal;window._uft.$(columnElem).simulate(\"mousemove\",{clientX:new_x,clientY:_y}),myTrace(\" mousemove \"+new_x),_util.Wait(100),window._uft.$(columnElem).css(\"left\",newLeft+\"px\"),_util.Wait(300),window._uft.$(columnElem).simulate(\"mousemove\",{clientX:new_x,clientY:_y}),window._uft.$(columnElem).simulate(\"mouseup\"),_util.Wait(300),window._uft.$(columnElem).simulate(\"mouseout\"),isIE&&window._uft.$(columnElem).mouseleave(),_util.Wait(300);var checkPos=parseInt(window._uft.$(columnElem).css(\"left\"),10);checkPos=isNaN(checkPos)?0:checkPos;var rc=!0,status=micDone,details=\"\";return Math.abs(checkPos-startLeft)>=delta?details=\"The column \"+column+\" was moved to position \"+xPos+\".\":(details=\"The column \"+column+\" was not moved  to position =\"+xPos+\".\",rc=!1),this.Report(status,eventHandlers.Move,params,details),_util.Wait(500),rc},SAPUITable.prototype.MoveColumn=function(fromColumn,toColumn){var delta=25,new_x=null,params=[];if(params[0]=fromColumn,params[1]=toColumn,null===fromColumn)return this.Report(micFail,eventHandlers.MoveColumn,params,\"From-column invalid.\"),!1;if(null===toColumn)return this.Report(micFail,eventHandlers.MoveColumn,params,\"To-column invalid.\"),!1;var toNumColumn=-1;if(-1===(toNumColumn=\"string\"==typeof toColumn?this.getColumnIndex(toColumn):toColumn))return this.Report(micFail,eventHandlers.MoveColumn,params,\"Column number is out of range or column name is invalid. Invalid to-position : \"+toColumn),!1;var fromNumColumn=-1;if(-1===(fromNumColumn=\"string\"==typeof fromColumn?this.getColumnIndex(fromColumn):fromColumn))return this.Report(micFail,eventHandlers.MoveColumn,params,\"Column number is out of range or column name is invalid. Invalid from-position : \"+fromColumn),!1;if(fromNumColumn===toNumColumn)return this.Report(micDone,eventHandlers.MoveColumn,params,\"Column \"+params[0]+\" located at \"+params[1]+\" position already.\"),!0;var coreElem=this.GetCoreElement();if(null!==coreElem){if(!1===coreElem.getEnableColumnReordering())return this.Report(micFail,eventHandlers.MoveColumn,params,\"Columns reordering disabled \"),!1}var oneBased=[];oneBased[0]=fromNumColumn,oneBased[1]=toNumColumn;var zeroBased=this.ConvertOneBasedToZeroBased(oneBased),fixedCount=coreElem.getFixedColumnCount();if(zeroBased[0]<fixedCount)return this.Report(micFail,eventHandlers.MoveColumn,params,\"Fixed column \"+params[0]+\" position.\"),!1;if(zeroBased[1]<fixedCount)return this.Report(micFail,eventHandlers.MoveColumn,params,\"Fixed column \"+params[1]+\" position.\"),!1;var fromColumnElem=this.getHeaderCell2(zeroBased[0]);if(!fromColumnElem)return this.Report(micFail,eventHandlers.MoveColumn,params),!1;var toColumnElem=this.getHeaderCell2(zeroBased[1]);if(!toColumnElem)return this.Report(micFail,eventHandlers.MoveColumn,params),!1;var fromColName=this.getColumnTitle(fromColumnElem),toColName=this.getColumnTitle(toColumnElem),toHeaderRect=toColumnElem.getBoundingClientRect();new_x=toHeaderRect.left+(toHeaderRect.right-toHeaderRect.left)/2;var fromHeaderRect=fromColumnElem.getBoundingClientRect(),_x=fromHeaderRect.left+(fromHeaderRect.right-fromHeaderRect.left)/2,_y=fromHeaderRect.top+(fromHeaderRect.bottom-fromHeaderRect.top)/2,startLeft=parseInt(window._uft.$(fromColumnElem).css(\"left\"),10);startLeft=isNaN(startLeft)?0:startLeft;var halfLength=Math.abs(Math.ceil((fromHeaderRect.right-fromHeaderRect.left)/2));if(Math.abs(_x-new_x)<=halfLength)return this.Report(micDone,eventHandlers.MoveColumn,params,\"Column \"+fromColName+\" located at \"+toColName+\" position already.\"),!0;toNumColumn<fromNumColumn?new_x-=delta:new_x+=delta;var calcOffset=_x-new_x,position=window._uft.$(fromColumnElem).css(\"position\"),newLeft=calcOffset;\"absolute\"===position?newLeft=calcOffset:\"relative\"===position&&(newLeft=startLeft+calcOffset),window._uft.$(fromColumnElem).focus();var promise=new HPPromise;return window._uft.$(fromColumnElem).simulate(\"mousedown\",{clientX:_x,clientY:_y}),window.setTimeout(function(){window._uft.$(fromColumnElem).simulate(\"mousemove\",{clientX:new_x,clientY:_y})},1e3),window.setTimeout(function(){window._uft.$(fromColumnElem).simulate(\"mouseup\",{clientX:new_x,clientY:_y}),_util.Report(micDone,eventHandlers.MoveColumn,toSafeArray(params),\"Column \"+params[0]+\" located at \"+params[1]+\" position already.\"),promise.resolve(!0)},2e3),promise},SAPUITable.prototype.ResizeColumn=function(Column,Width){var param=[Column,Width];if(null==Width||\"number\"!=typeof Width)return this.Report(micFail,eventHandlers.ResizeColumn,param,\"Invalid column width.\"),!1;var tbCore=this.GetCoreElement(),colCores=tbCore.getColumns(),colNum=colCores.length,colIndex=null;return\"number\"==typeof Column?colIndex=Column:\"string\"==typeof Column&&(colIndex=this.getColumnIndex(Column)),null==colIndex||colIndex<1||colIndex>colNum?(this.Report(micFail,eventHandlers.ResizeColumn,param,\"Column number is out of range or column name is invalid.\"),!1):(colCores[this.ConvertOneBasedToZeroBased([colIndex])[0]].setWidth(Width+\"px\"),this.Report(micDone,eventHandlers.ResizeColumn,param),!0)},SAPUITable.prototype.GetScrollBar=function(){return window._uft.$(this.Element()).find(\"DIV.sapUiScrollBar\").get()},SAPUITable.prototype.GetInnerCellElement=function(cell){var rc=window._uft.$(cell).find(\"DIV.sapUiTableCell\").get();return 0===rc.length?null:rc},SAPUITable.prototype.Navigate=function(rowIndex){_util.Report(micFail,\"Navigate\",toSafeArray([rowIndex]),\"Irrelevant method.\")},SAPMTable.TableTypesEnum=SAPUITable.TableTypesEnum,SAPUITable.prototype.SimulateClick=function(elem){_control.ReplayClick(elem)},SAPMTable.InheritsFrom(SAPUITable),SAPMTable.prototype.GetHeaders=function(){return this.CheckNullElement(),window._uft.$(this.Element()).find(\"THEAD > TR > TH[data-sap-width]\").get()},SAPMTable.prototype.GetHTMLId=function(){return this.Element().id},SAPMTable.prototype.Element=function(){return this.m_elementDOM.parentElement},SAPMTable.prototype.GetTitle=function(){return this.GetTableType()===SAPUITable.TableTypesEnum.SAPMListTbl?this.GetMTblListTitle():this.GetTableType()===SAPUITable.TableTypesEnum.SAPMTableSelectDialog?this.GetMTableDialogTitle():\"\"},SAPMTable.prototype.GetMTableDialogTitle=function(){var tableParent=window._uft.$(this.Element()).parents(\"div.sapMDialog\").get(0);if(tableParent){var listHeader=window._uft.$(tableParent).find(\"header.sapMDialogTitle\").get(0);return window._uft.$(listHeader).text()}return\"\"},SAPMTable.prototype.GetMTblListTitle=function(){var childrenArray=objectToArrayTransform(window._uft.$(this.Element()).children()),listHeader=childrenArray.filter(function(el){return/sapMListHdr/.test(el.className)});return window._uft.$(listHeader[0]).text()},SAPMTable.prototype.ConvertRealRowIndexToVisible=function(realRowIindex){return realRowIindex},SAPMTable.prototype.GetFixedColumnCount=function(){return 0},SAPMTable.prototype.getCell=function(numRow,numColumn){if(numColumn<0||numRow<0)return null;var rows=this.GetRowsArray()[0];return null!=rows&&rows.length>numRow?this.GetCellFromRow(rows[numRow],numColumn):null},SAPMTable.prototype.GetCellFromRow=function(row,ColumnNumber){return this.GetAllColumns(row).get(ColumnNumber)},SAPMTable.prototype.GetRowsArray=function(){var tableCtrl=this.Element();return[window._uft.$(tableCtrl).find(\"TBODY > TR[id]\").get()]},SAPMTable.prototype.getFirstVisibleRow=function(){return 0},SAPMTable.prototype.setRowVisable=function(){},SAPMTable.prototype.GetAllColumns=function(row){return row?window._uft.$(row).hasClass(\"sapMListTblSubRow\")?window._uft.$(row).children(\"td\").not(\".sapMListTblHighlightCell\"):window._uft.$(row).children(\"td.sapMListTblCell\"):[]},SAPMTable.prototype.getCellData=function(cell){return this.GetCellDataArray(cell).join(\";\")},SAPMTable.prototype.GetCellDataArray=function(cell){var children=window._uft.$(cell).children().get(0);if(isRatingIndicator(children)){return[new SAPUIRatingIndicator({element:children,isStandalone:!1}).GetValue()]}if(isCheckBox(children)){return[new SAPUICheckBox({element:children,isStandalone:!1}).GetCurrentState()]}var leaves=window._uft.$(cell).find(\":not(:has(*))\");return leaves=0===leaves.length?[cell[0]]:leaves,this.GetTextOfLeavesElements(leaves)},SAPMTable.prototype.IsTextExistInColumnFromRow=function(rows,startFromRow,columnNum,text){for(var cell,cellData,i=startFromRow;i<rows.length;i++)if((cell=this.GetCellFromRow(rows[i],columnNum))&&(cellData=this.GetCellDataArray(cell),this.IsTextExistInCellLine(cellData,text)))return i;return-1},SAPMTable.prototype.GetCellTextInColumnFromRow=function(rows,startFromRow,columnNum,text,destColumn){for(var cell,cellData,i=startFromRow;i<rows.length;i++)if((cell=this.GetCellFromRow(rows[i],columnNum))&&(cellData=this.GetCellDataArray(cell),this.IsTextExistInCellLine(cellData,text)&&(cell=this.GetCellFromRow(rows[i],destColumn)))){cellData=this.GetCellDataArray(cell);for(var rc=\"\",i=0;i<cellData.length;i++)rc+=cellData[i];return rc}return-1},SAPMTable.prototype.IsTextExistInCellLine=function(cellLines,text){if(!cellLines||!text)return!1;for(var i=0;i<cellLines.length;i++)if(cellLines[i]===text)return!0;return!1},SAPMTable.prototype.GetTableColumns=function(){return window._uft.$(this.Element()).find(\"TH.sapMListTblHeaderCell\").get()},SAPMTable.prototype.RegisterForEvents=function(eventsHandlers){var growingElement=this.GetGrowingListElement();growingElement&&_control.RegisterElementToEvent(growingElement,\"click\",\"OnGrowingElementClick\");var tableCellsCtl=this.GetTableCtrlCells();tableCellsCtl&&_control.RegisterElementToEvent(tableCellsCtl,\"click\",\"OnMobileTableClick\");var tableHeadersCnt=this.GetTableHeadersCnt();return tableHeadersCnt&&_control.RegisterElementToEvent(tableHeadersCnt,\"click\",\"OnMobileTableHeaderClick\"),this.singleElementRegisterToEvent(),!0},SAPMTable.prototype.GetGrowingListElement=function(){var growingElement=window._uft.$(this.Element()).find(\"ul.sapMGrowingList >li\").get(0);return growingElement||(growingElement=window._uft.$(this.Element()).find(\"div.sapMGrowingList > div\").get(0)),growingElement},SAPMTable.prototype.GetTableCtrlCells=function(){return window._uft.$(this.Element()).find(\"TBODY\").get(0)},SAPMTable.prototype.GetTableHeadersCnt=function(){return window._uft.$(this.Element()).find(\"THEAD >  TR.sapMListTblHeader\").get(0)},SAPMTable.prototype.OnCellClick=function(cellElem,target,eventObj){var params=[this.getRowIndexFromCell(cellElem),this.getColIndexFromCell(cellElem)],ctrl;if(params[0]<0||params[1]<0)return!1;var ret=this.TargetToElementAndType(target);switch(ret.type){case SAPUI5ControlTypeId.LINK:this.OnLinkClick(ret.element,params);break;case SAPUI5ControlTypeId.CHECKBOX:this.OnCheckBoxClick(ret.element,params);break;case SAPUI5ControlTypeId.CALENDAR:params[2]=ret.element,this.updateTableSingleElementToRegisterObject(ret.element.parentElement,params,SAPUI5ControlTypeId.CALENDAR);break;case SAPUI5ControlTypeId.RATINGINDICATOR:params[2]=ret.element,OnRatingClick(params,eventObj);break;case SAPUI5ControlTypeId.TEXTEDIT:params[2]=ret.element,ctrl=new SAPUITextEdit({element:ret.element,isStandalone:!1});var currentValue=ctrl.GetValue();ctrl.SetTextBeforeChange(currentValue),this.updateTableSingleElementToRegisterObject(ret.element,params,SAPUI5ControlTypeId.TEXTEDIT);break;case SAPUI5ControlTypeId.LIST:params[2]=ret.element,this.updateTableSingleElementToRegisterObject(ret.element,params,SAPUI5ControlTypeId.LIST);break;case SAPUI5ControlTypeId.UNKNOWN:var oneBased=this.ConvertZeroBasedToOneBased([params[0],params[1]]);this.Record(eventHandlers.SelectCell,oneBased,0)}},SAPMTable.prototype.OnCheckBoxClick=function(element,params){var handlerParams=this.ConvertZeroBasedToOneBased([params[0],params[1]]);0!==window._uft.$(element).find(\".sapMCbMarkChecked\").length?(handlerParams[2]=\"OFF\",this.Record(eventHandlers.SetCellData,handlerParams)):0!==window._uft.$(element).find(\".sapMCbMark\").length&&(handlerParams[2]=\"ON\",this.Record(eventHandlers.SetCellData,handlerParams))},SAPMTable.prototype.OnLinkClick=function(element,params){var itemText=getControlText(element),handlerParams=this.ConvertZeroBasedToOneBased([params[0],params[1]]);handlerParams.push(itemText),this.Record(eventHandlers.SelectItemInCell,handlerParams,0)},SAPMTable.prototype.TargetToElementAndType=function(target){var elementsArray=objectToArrayTransform(window._uft.$(target).parentsUntil(\"TD.sapMListTblCell\"));elementsArray.unshift(target);for(var ret={element:target,type:SAPUI5ControlTypeId.UNKNOWN},i=elementsArray.length-1;i>=0;i--){var current=elementsArray[i];if(isRatingIndicator(current))return ret.element=current,ret.type=SAPUI5ControlTypeId.RATINGINDICATOR,ret;if(isLink(current))return ret.element=current,ret.type=SAPUI5ControlTypeId.LINK,ret;if(isCheckBox(current))return ret.element=current,ret.type=SAPUI5ControlTypeId.CHECKBOX,ret;if(isCalendar(current))return ret.element=current,ret.type=SAPUI5ControlTypeId.CALENDAR,ret;if(isComboBox(current))return ret.element=current,ret.type=SAPUI5ControlTypeId.LIST,ret;if(isTextEdit(current))return ret.element=current,ret.type=SAPUI5ControlTypeId.TEXTEDIT,ret}return ret},SAPMTable.prototype.SelectItemInCell=function(row,col,item){var zeroBased,cell,testObjects,Details,params=[row,col,item],methodName=\"SelectItemInCell\";if(null===item||void 0===item)return Details=\"Item argument  is invalid: \"+row+\",\"+col,_util.Report(micFail,methodName,toSafeArray(params),Details),!1;if(!row||!col)return Details=\"Cell location invalid: \"+row+\",\"+col,_util.Report(micFail,methodName,toSafeArray(params),Details),!1;if(isNaN(col)&&(col=this.ConvertColumnTitleToIndex(col)),zeroBased=this.ConvertOneBasedToZeroBased([row,col]),!(cell=this.getCell(zeroBased[0],zeroBased[1])))return Details=\"Cell location invalid: \"+row+\",\"+col,_util.Report(micFail,methodName,toSafeArray(params),Details),!1;var itemControl=this.GetItemTestObject(this.CellToTestObjectsArray(cell),item),rc=this.ReplaySelectedItem(itemControl,item);return _util.Report(rc.status,methodName,toSafeArray(params),rc.details),!0},SAPMTable.prototype.ReplaySelectedItem=function(itemControl,item){var rc={details:\"Item ,\"+item+\", not found.\",status:micFail};if(!itemControl||!itemControl.type||!itemControl.element)return rc;switch(itemControl.type){case SAPUI5ControlTypeId.LINK:return this.SimulateClick(itemControl.element),rc.details=\"\",rc.status=micDone,rc;case SAPUI5ControlTypeId.RATINGINDICATOR:var rating=new SAPUIRatingIndicator({element:itemControl.element,isStandalone:!1});rc.details=rating.Select(item),rc.details||(rc.status=micDone)}return rc},SAPMTable.prototype.GetItemTestObject=function(testObjects,item){for(var i=0;i<testObjects.length;i++){var singleTestObject=testObjects[i];switch(singleTestObject.type){case SAPUI5ControlTypeId.LINK:if(item===getControlText(singleTestObject.element))return singleTestObject;break;case SAPUI5ControlTypeId.RATINGINDICATOR:var numberItem=toNumber(item);if(!isNaN(numberItem)&&0<=numberItem)return singleTestObject}}return{type:SAPUI5ControlTypeId.UNKNOWN,element:null}},SAPMTable.prototype.CellToTestObjectsArray=function(cell){var result=[];if(!cell)return result;for(var children=objectToArrayTransform(window._uft.$(cell).children()),i=0;i<children.length;i++){var testObject=this.GetChildrenType(children[i]);testObject.type!==SAPUI5ControlTypeId.UNKNOWN?result.push(testObject):children=children.concat(objectToArrayTransform(window._uft.$(children[i]).children()))}return result},SAPMTable.prototype.GetChildrenType=function(child){var ret={element:child,type:SAPUI5ControlTypeId.UNKNOWN};return isLink(child)?(ret.element=child,ret.type=SAPUI5ControlTypeId.LINK,ret):isRatingIndicator(child)?(ret.element=child,ret.type=SAPUI5ControlTypeId.RATINGINDICATOR,ret):ret},SAPMTable.prototype.OnNavigateClick=function(cellElem){if(!cellElem)return!1;var table=new SAPMTable,params=[table.getRowIndexFromCell(cellElem)];if(params[0]<0)return!1;myTrace(\"OnNavigateClick - \"+params[0]);var oneBased=table.ConvertZeroBasedToOneBased(params);this.Record(eventHandlers.Navigate,oneBased,0)},SAPMTable.prototype.OnRowClick=function(cellElem){if(!cellElem)return!1;var table=new SAPMTable,params=[table.getRowIndexFromCell(cellElem)];if(params[0]<0)return!1;myTrace(\"OnRowClick - \"+params[0]);var oneBased=table.ConvertZeroBasedToOneBased(params);return 0!==window._uft.$(cellElem).find(\".sapMCbMarkChecked\").length?(this.Record(eventHandlers.DeselectRow,oneBased,0),!0):0!==window._uft.$(cellElem).find(\".sapMCbMark\").length||0!==window._uft.$(cellElem).find(\".sapMLIBSelectS\").length||0!==window._uft.$(cellElem).find(\".sapMLIBSelectSL\").length?(this.Record(eventHandlers.SelectRow,oneBased,0),!0):0!==window._uft.$(cellElem).find(\".sapMLIBSelectD\").length?(this.Record(eventHandlers.DeleteRow,oneBased,0),!0):void 0},SAPMTable.prototype.OnSelectAll=function(elem){var selectElem=window._uft.$(elem).find(\".sapMCbMark\");return window._uft.$(selectElem).hasClass(\"sapMCbMarkChecked\")?this.Record(eventHandlers.DeselectAll,[],0):this.Record(eventHandlers.SelectAll,[],0),!0},SAPMTable.prototype.GetInnerCellElement=function(cell){if(!cell)return null;if(window._uft.$(cell).hasClass(\"sapMListTblCell\"))return cell;var rc=window._uft.$(cell).find(\"TD.sapMListTblCell\").get();return 0===rc.length?null:rc},SAPMTable.prototype.Navigate=function(rowIndex){var Details,handlerMethod=eventHandlers.Navigate;if(!rowIndex)return Details='Null input parameter \"Index\"',_util.Report(micFail,handlerMethod,toSafeArray([]),Details),!1;var zeroBasedRow=this.ConvertOneBasedToZeroBased([rowIndex])[0],rowsArray=this.GetRowsArray()[0],rowElem=zeroBasedRow<rowsArray.length&&zeroBasedRow>=0?rowsArray[zeroBasedRow]:null;if(!rowElem)return Details=\"Row number out of range: \"+rowIndex,_util.Report(micFail,handlerMethod,toSafeArray([rowIndex]),Details),!1;var navCol=window._uft.$(rowElem).find(\"td.sapMListTblNavCol\").get(0);if(!navCol)return Details=\"Navigation column do not exist.\",_util.Report(micFail,handlerMethod,toSafeArray([rowIndex]),Details),!1;var innerControl=window._uft.$(navCol).find(\"span\").get(0)||navCol;return this.SimulateClick(innerControl),_util.Report(micDone,handlerMethod,toSafeArray([rowIndex])),!0},SAPMTable.prototype.SelectRow=function(rowIndex,handlerMethod,isExtendSelect){var Details,result;if(handlerMethod||(handlerMethod=eventHandlers.SelectRow),!rowIndex||rowIndex<0)return Details='invalid input parameter \"Index\"'+rowIndex,void _util.Report(micFail,handlerMethod,toSafeArray([rowIndex]),Details);if(isExtendSelect)return Details=\"Irrelevant method.\",void _util.Report(micFail,handlerMethod,toSafeArray([rowIndex]),Details);var zeroBasedRow=this.ConvertOneBasedToZeroBased([rowIndex])[0],rowsArray=this.GetRowsArray()[0],rowElem=zeroBasedRow<rowsArray.length&&zeroBasedRow>=0?rowsArray[zeroBasedRow]:null;if(!rowElem)return Details=\"Row number out of range: \"+rowIndex,void _util.Report(micFail,handlerMethod,toSafeArray([rowIndex]),Details);var selectedColumn=window._uft.$(rowElem).find(\".sapMListTblSelCol\").find(\".sapMCbMark\").get(0);return selectedColumn?(result=this.HandleCheckBoxSelection(selectedColumn,handlerMethod,rowIndex),void this.Report(result.status,handlerMethod,[rowIndex],result.details)):(selectedColumn=window._uft.$(rowElem).find(\".sapMLIBSelectS\").get(0)||window._uft.$(rowElem).find(\".sapMLIBSelectSL\").get(0))?(result=this.HandleRadioButtonSelection(selectedColumn,handlerMethod,rowIndex),void this.Report(result.status,handlerMethod,[rowIndex],result.details)):(Details=\"The table isn't selectable.\",void this.Report(micFail,handlerMethod,[rowIndex],Details))},SAPMTable.prototype.More=function(){var growingControl=this.GetGrowingListElement();growingControl?(this.SimulateClick(growingControl),this.Report(micDone,eventHandlers.More,[],\"\")):this.Report(micFail,eventHandlers.More,[],\"Table can't be expanded.\")},SAPMTable.prototype.DeleteRow=function(rowIndex){var Details;if(!rowIndex||rowIndex<0)return Details='invalid input parameter \"Index\"'+rowIndex,_util.Report(micFail,eventHandlers.DeleteRow,toSafeArray([rowIndex]),Details),!1;var zeroBasedRow=this.ConvertOneBasedToZeroBased([rowIndex])[0],rowsArray=this.GetRowsArray()[0],rowElem=zeroBasedRow<rowsArray.length&&zeroBasedRow>=0?rowsArray[zeroBasedRow]:null;if(!rowElem)return Details=\"Row number out of range: \"+rowIndex,_util.Report(micFail,eventHandlers.DeleteRow,toSafeArray([rowIndex]),Details),!1;var deleteButton=window._uft.$(rowElem).find(\".sapMListTblSelCol\").find(\".sapMLIBSelectD\").get(0);if(!deleteButton)return Details=\"The row \"+rowIndex+\" cannot be deleted.\",_util.Report(micFail,eventHandlers.DeleteRow,toSafeArray([rowIndex]),Details),!1;this.SimulateClick(window._uft.$(deleteButton).children().get(0)),_util.Report(micDone,eventHandlers.DeleteRow,toSafeArray([rowIndex]))},SAPMTable.prototype.HandleRadioButtonSelection=function(selectedColumn,handlerMethod,rowIndex){var result={status:micDone,details:\"\"};return handlerMethod===eventHandlers.DeselectRow?(result.status=micFail,result.details=\"Table doesn't support deselect Row operation.\"):window._uft.$(selectedColumn).find(\".sapMRbSel\").get(0)?result.details=\"Row \"+rowIndex+\" is already selected .\":this.SimulateClick(window._uft.$(selectedColumn).find(\".sapMRbBInn\").get(0)),result},SAPMTable.prototype.HandleCheckBoxSelection=function(selectedColumn,handlerMethod,rowIndex){var result={status:micDone,details:\"\"};return window._uft.$(selectedColumn).hasClass(\"sapMCbMarkChecked\")?handlerMethod===eventHandlers.SelectRow?result.details=\"Row \"+rowIndex+\" is already selected .\":handlerMethod===eventHandlers.DeselectRow&&this.SimulateClick(selectedColumn):handlerMethod===eventHandlers.DeselectRow?result.details=\"Row \"+rowIndex+\" is already not selected .\":handlerMethod===eventHandlers.SelectRow&&this.SimulateClick(selectedColumn),result},SAPMTable.prototype.SelectAll=function(){var selectAllElem=window._uft.$(this.GetTableHeadersCnt()).find(\".sapMCbMark\").get(0);return selectAllElem&&0!==selectAllElem.length?window._uft.$(selectAllElem).hasClass(\"sapMCbMarkChecked\")?void _util.Report(micDone,eventHandlers.SelectAll,toSafeArray([]),\"The rows are already selected \"):(this.SimulateClick(selectAllElem),void _util.Report(micDone,eventHandlers.SelectAll,toSafeArray([]))):void _util.Report(micFail,eventHandlers.SelectAll,toSafeArray([]),\"SelectAll is not available in this table.\")},SAPMTable.prototype.DeselectAll=function(){var selectAllElem=window._uft.$(this.GetTableHeadersCnt()).find(\".sapMCbMark\").get(0);return selectAllElem&&0!==selectAllElem.length?window._uft.$(selectAllElem).hasClass(\"sapMCbMarkChecked\")?(this.SimulateClick(selectAllElem),void _util.Report(micDone,eventHandlers.DeselectAll,toSafeArray([]))):void(-1===this.getSelectedIndex()?_util.Report(micDone,eventHandlers.DeselectAll,toSafeArray([]),\"All rows are already deselected.\"):_util.Report(micFail,eventHandlers.DeselectAll,toSafeArray([]),\"Deselect All rows is unavailable.\")):void _util.Report(micFail,eventHandlers.SelectAll,toSafeArray([]),\"DeselectAll is not available in this table.\")},SAPMTable.prototype.getSelectedIndices=function(){for(var indices=[],rows=this.GetRowsArray()[0],i=0;i<rows.length;i++){var selectionCol=window._uft.$(rows[i]).find(\".sapMListTblSelCol\");0===window._uft.$(selectionCol).find(\".sapMCbMarkChecked\").length&&0===window._uft.$(selectionCol).find(\".sapMRbSel\").length||indices.push(i)}return indices},SAPMTable.prototype.getSelectedIndex=function(){var rc=-1,indices=this.getSelectedIndices();return indices.length>0&&(rc=indices[0]),rc},SAPMTable.prototype.PreviousPage=function(){_util.Report(micFail,\"PreviousPage\",toSafeArray([]),\"Irrelevant method.\")},SAPMTable.prototype.SetPage=function(){_util.Report(micFail,\"SetPage\",toSafeArray([]),\"Irrelevant method.\")},SAPMTable.prototype.NextPage=function(){_util.Report(micFail,\"NextPage\",toSafeArray([]),\"Irrelevant method.\")},SAPMTable.prototype.FirstPage=function(){_util.Report(micFail,\"FirstPage\",toSafeArray([]),\"Irrelevant method.\")},SAPMTable.prototype.LastPage=function(){_util.Report(micFail,\"LastPage\",toSafeArray([]),\"Irrelevant method.\")},SAPMTable.prototype.GetCurrentPage=function(){_util.Report(micFail,\"CurrentPage\",toSafeArray([]),\"Irrelevant method.\")},SAPMTable.prototype.OpenMenu=function(column,eventHandler){eventHandler||(eventHandler=eventHandlers.OpenMenu),_util.Report(micFail,eventHandler,toSafeArray([column]),\"Irrelevant method.\")},SAPMTable.prototype.Sort=function(column,sortOrder){_util.Report(micFail,\"Sort\",toSafeArray([column,sortOrder]),\"Irrelevant method.\")},SAPMTable.prototype.Move=function(column,xPos){_util.Report(micFail,\"Move\",toSafeArray([column,xPos]),\"Irrelevant method.\")},SAPMTable.prototype.MoveColumn=function(fromColumn,toColumn){_util.Report(micFail,\"MoveColumn\",toSafeArray([fromColumn,toColumn]),\"Irrelevant method.\")},SAPMTable.prototype.ResizeColumn=function(Column,Width){_util.Report(micFail,\"ResizeColumn\",toSafeArray([Column,Width]),\"Irrelevant method.\")};", 
            "function ListenToEvents(){return(new SAPUITabStrip).RegisterForEvents(),!0}function get_property_value(property){return(new SAPUITabStrip).GetPropertyValue(property)}function Select(tabName){return(new SAPUITabStrip).Select(tabName,\"Select\")}function Deselect(tabName){return(new SAPUITabStrip).Select(tabName,\"Deselect\")}function Remove(tabName){return(new SAPUITabStrip).Remove(tabName)}function OnTabClick(selectedItem,eventObj){return(new SAPUITabStrip).OnTabClick(selectedItem,eventObj)}function OnTabRemove(removedItem,eventObj){return(new SAPUITabStrip).OnTabRemove(removedItem,eventObj)}function SAPUITabStrip(config){null==config&&(config={}),void 0==config.handlers&&(config.handlers=[]),void 0==config.type&&(config.type=SAPUI5ControlTypeId.TABSTRIP),void 0==config.name&&(config.name=SAPUI5ControlName.TABSTRIP),SAPUI5Control.call(this,config)}SAPUITabStrip.InheritsFrom(SAPUI5Control),SAPUITabStrip.prototype.GetName=function(){var tabStripElem=this.Element(),name=window._uft.$(tabStripElem).attr(\"title\");if(!name){var parent=window._uft.$(tabStripElem).parent();parent=parent[0],parent&&(name=parent.title),name||(name=\"\")}return name},SAPUITabStrip.prototype.GetPropertyValue=function(property){if(\"html id\"===property||\"id\"===property)return this.Element().parentNode.id;if(\"all items\"==property)return this.GetAllItems();if(\"items count\"==property){return this.GetTabs().length}if(\"selected item\"==property){var selectedTab=this.GetSelectedTab();return this.GetItemName(selectedTab)}return SAPUI5Control.prototype.GetPropertyValue.call(this,property)},SAPUITabStrip.prototype.GetAllItems=function(){for(var allItemsStr=[],tabs=this.GetTabs(),i=0;i<tabs.length;i++)allItemsStr.push(this.GetItemName(tabs[i]));return allItemsStr.join(\";\")},SAPUITabStrip.prototype.GetTabs=function(){var tabs;return tabs=this.IsMobile()?window._uft.$(this.Element()).children(\".sapMITBAll,.sapMITBFilter\").get():window._uft.$(this.Element()).find(\"LI\").get()},SAPUITabStrip.prototype.GetAdjustedTab=function(tabItem){return tabItem},SAPUITabStrip.prototype.GetSelectedTab=function(){var tabs=this.GetTabs();return this.IsMobile()?window._uft.$(tabs).filter(\".sapMITBSelected\").get(0):window._uft.$(tabs).filter(\".sapUiTabSel\").get(0)},SAPUITabStrip.prototype.GetItemName=function(tabItem){var txt=\"\";if(\"\"===(txt=this.IsMobile()?window._uft.$(tabItem).find(\"DIV.sapMITBText\").text():window._uft.$(tabItem).text()))for(var tabs=this.GetTabs(),i=0;i<tabs.length;i++)tabs[i]===tabItem&&(txt=\"#\"+(i+1));return txt},SAPUITabStrip.prototype.IsItemDisabled=function(tabItem){var attr=window._uft.$(tabItem).attr(\"aria-disabled\");return void 0!=attr&&\"true\"===attr},SAPUITabStrip.prototype.GetTabItemByTitle=function(tabName){var tabs=this.GetTabs();if(\"string\"==typeof tabName)for(var tabname=tabName.toLowerCase(),i=0;i<tabs.length;i++)if(tabname===this.GetItemName(tabs[i]).toLowerCase())return{tab:tabs[i],details:\"\"};var index=toNumber(tabName);return null!==index?index<1||index>tabs.length?{tab:null,details:\"Out of Range.\"}:{tab:tabs[index-1],details:\"\"}:{tab:null,details:\"Tab item \"+tabName+\" does not exist.\"}},SAPUITabStrip.prototype.GetTabCloseBtn=function(tab){return tab?window._uft.$(tab).children(\"button.sapUiTabClose\").get(0):null},SAPUITabStrip.prototype.RegisterForEvents=function(){for(var tabs=this.GetTabs(),isM=this.IsMobile(),i=0;i<tabs.length;i++){var elem=tabs[i];if(isM)elem=this.GetAdjustedTab(elem);else{var clsBtn=this.GetTabCloseBtn(tabs[i]);if(clsBtn){var handler=new EventCallBack(\"click\",\"OnTabRemove\",tabs[i]);new SAPUIButton({element:clsBtn,isStandalone:!1,handlers:[handler]}).RegisterForEvents()}}DeviceType.IsMobile()?_control.RegisterElementToEvent(elem,\"click\",\"OnTabClick\",tabs[i]):_control.RegisterElementToEvent(elem,\"mousedown\",\"OnTabClick\",tabs[i])}},SAPUITabStrip.prototype.Select=function(tabName,method){var methodName;methodName=method||\"Select\";var isFiori=this.IsMobile();if(!isFiori&&\"Deselect\"===methodName)return this.Report(micFail,methodName,tabName,\"Irrelevant method.\"),!1;var obj=this.GetTabItemByTitle(tabName);if(null!==obj.tab){var tab=this.GetAdjustedTab(obj.tab),parent=window._uft.$(tab).closest(\"DIV.sapUiTabStrip\")[0]||window._uft.$(tab).closest(\"DIV.sapMITB\")[0];if(parent&&window._uft.$(parent).focus(),this.IsItemDisabled(tab))return this.Report(micFail,methodName,tabName,\"Tab item \"+tabName+\" is disabled.\"),!1;if(isFiori){var SelectTabFromCore=function(core,tabId){if(core){var tabFilter=core.byId(tabId);tabFilter&&tabFilter.getParent().setSelectedKey(tabFilter.getKey())}},core=this.GetCore();if(\"Deselect\"===methodName&&parent&&core){var sapMIconTabBar=core.byId(parent.id);if(sapMIconTabBar&&!sapMIconTabBar.getExpandable())return this.Report(micFail,methodName,tabName,\"Do not support Deselect.\"),!1}\"Select\"===methodName^window._uft.$(tab).hasClass(\"sapMITBSelected\")&&_control.ReplayEvent(tab,\"click\"),\"Select\"===methodName^window._uft.$(tab).hasClass(\"sapMITBSelected\")&&SelectTabFromCore(core,tab.id)}else _control.ReplayEvent(tab,\"click\");return this.Report(micDone,methodName,tabName,methodName+\" tab \"+tabName+\" in the tab strip.\"),!0}return this.Report(micFail,methodName,tabName,obj.details),!1},SAPUITabStrip.prototype.Remove=function(tabName){var methodName=\"Remove\";if(this.IsMobile())return this.Report(micFail,methodName,tabName,\"Irrelevant method.\"),!1;var obj=this.GetTabItemByTitle(tabName);if(null!==obj.tab){var tab=obj.tab,btn=this.GetTabCloseBtn(tab);if(btn){var parent=window._uft.$(tab).closest(\"DIV.sapUiTabStrip\");return parent&&parent.focus(),_control.ReplayEvent(btn,\"click\"),this.Report(micDone,methodName,tabName,\"Remove tab \"+tabName+\" in the tab strip.\"),!0}return this.Report(micFail,methodName,tabName,\"Tab item \"+tabName+\" could not be removed.\"),!1}return this.Report(micFail,methodName,tabName,obj.details),!1},SAPUITabStrip.prototype.OnTabClick=function(selectedItem,eventObj){if(!1===isLeftMouseButtonEvent(eventObj))return!0;var trgt=getTargetObjectFromEvent(eventObj);if(\"BUTTON\"===trgt.tagName&&\"sapUiTabClose\"===trgt.className)return!0;if(this.IsItemDisabled(selectedItem))return!1;var method=\"Select\",tabLabel=this.GetItemName(selectedItem);return this.IsMobile()&&selectedItem===this.GetSelectedTab()&&!0===this.IsExpandable()&&(method=\"Deselect\"),!!tabLabel&&(this.Record(method,tabLabel,0),!0)},SAPUITabStrip.prototype.OnTabRemove=function(removedItem,eventObj){if(!1===isLeftMouseButtonEvent(eventObj))return!0;var tabLabel=window._uft.$(removedItem).text();return!!tabLabel&&(this.Record(\"Remove\",tabLabel,0),!0)},SAPUITabStrip.prototype.GetCoreElement=function(){var id,core=this.GetCore();return null===core?null:(id=this.IsMobile()?window._uft.$(this.Element()).parents(\".sapMITB\").get(0).id:this.Element().parentNode.id,core.byId(id))},SAPUITabStrip.prototype.IsExpandable=function(){var coreElem=this.GetCoreElement();try{return coreElem.getExpandable()}catch(err){return!1}};", 
            "function get_property_value(property){return SAPTextEditFactory().GetPropertyValue(property)}function ListenToEvents(){return SAPTextEditFactory().RegisterForEvents(),!0}function getTextEditBaseElem(){return SAPTextEditFactory().Element()}function OnSearchFieldSelect(handlerParam,eventObj){var textEdit=SAPTextEditFactory();return myTrace(textEdit.SAPUIControlName()+\".\"+textEdit.GetName()+\".OnSearchFieldSelect\",LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY),textEdit.OnSearchFieldSelect(handlerParam,eventObj)}function OnFocus(handlerParam,eventObj){var textEdit=SAPTextEditFactory();return myTrace(textEdit.SAPUIControlName()+\".\"+textEdit.GetName()+\".OnFocus\",LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY),textEdit.OnFocus(handlerParam,eventObj)}function OnBlur(handlerParam,eventObj){var textEdit=SAPTextEditFactory();return myTrace(textEdit.SAPUIControlName()+\".\"+textEdit.GetName()+\".OnBlur\",LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY),textEdit.OnBlur(handlerParam,eventObj)}function OnOptionClick(handlerParam,eventObj){return(new SAPUITextEdit).OnOptionClick(handlerParam,eventObj)}function OnKeydown(handlerParam,eventObj){if(13==eventObj.keyCode||115==eventObj.keyCode){var textEdit=SAPTextEditFactory();return myTrace(textEdit.SAPUIControlName()+\".\"+textEdit.GetName()+\".OnKeydown\",LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY),textEdit.OnKeydown(handlerParam,eventObj)}}function OnSubmit(handlerParam,eventObj){var textEdit=SAPTextEditFactory();return myTrace(textEdit.SAPUIControlName()+\".\"+textEdit.GetName()+\".OnSubmit\",LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY),textEdit.OnSubmit(handlerParam,eventObj)}function OnButtonClick(handlerParam,eventObj){var textEdit=SAPTextEditFactory();return myTrace(textEdit.SAPUIControlName()+\".\"+textEdit.GetName()+\".OnButtonClick\",LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY),textEdit.OnButtonClick(handlerParam,eventObj)}function Set(text){var textEdit=SAPTextEditFactory();return myTrace(textEdit.SAPUIControlName()+\".\"+textEdit.GetName()+\".Set\",LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY),textEdit.Set(text)}function Submit(){var textEdit=SAPTextEditFactory();return myTrace(textEdit.SAPUIControlName()+\".\"+textEdit.GetName()+\".Submit\",LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY),textEdit.Submit()}function Search(text){var textEdit=SAPTextEditFactory();return myTrace(textEdit.SAPUIControlName()+\".\"+textEdit.GetName()+\".Search\",LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY),textEdit.Search(text)}function Clear(){var textEdit=SAPTextEditFactory();return myTrace(textEdit.SAPUIControlName()+\".\"+textEdit.GetName()+\".Clear\",LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY),textEdit.Clear()}function Refresh(){return(new SAPMTextEdit).Refresh()}function OpenPossibleEntries(){var textEdit=SAPTextEditFactory();return myTrace(textEdit.SAPUIControlName()+\".\"+textEdit.GetName()+\".OpenPossibleEntries\",LogSeverity_Information,0,SAPUI5_TEXTEDIT_CATEGORY),textEdit.OpenPossibleEntries()}function CheckIfHasVal(){return(new SAPMTextEdit).CheckIfHasVal()}function IsNotSAPUIPassword(elem){return elem||(elem=_elem),\"DIV\"!==elem.tagName&&\"password\"!==elem.type?elem:!window._uft.$(elem).find(\"INPUT[type='password']\").get(0)&&elem}", 
            "function SAPUITile(config){null==config&&(config={}),void 0==config.handlers&&(config.handlers=defaultTileEventHandlers),void 0==config.type&&(config.type=SAPUI5ControlTypeId.TILE),void 0==config.name&&(config.name=SAPUI5ControlName.TILE),SAPUI5Control.call(this,config)}function get_property_value(property){return(new SAPUITile).GetPropertyValue(property)}function ListenToEvents(){return(new SAPUITile).RegisterForEvents(),!0}function OnClick(handlerParam,eventObj){return new SAPUITile({element:_elem,isStandalone:!0,handlers:[new EventCallBack(\"click\",\"Click\")]}).OnClick(eventObj)}function HoverTap(){return mClick(\"HoverTap\")}function mClick(type){return(new SAPUITile).Click(type||\"Click\")}function Click(){return mClick(\"Click\")}function Submit(){return mClick(\"Submit\")}var defaultTileEventHandlers=[new EventCallBack(\"click\",\"OnClick\")];SAPUITile.InheritsFrom(SAPUI5Control),SAPUITile.prototype.OnClick=function(eventObj){var rc=null;if(!this.ShouldIgnoreEvent(eventObj)){rc=this.EventsHandlers();var method=rc[0].Method();this.Record(method)}return!!this.IsStandalone()||rc},SAPUITile.prototype.GetName=function(){return window._uft.$(this.Element()).find(\".sapUshellTileBaseTitle\").eq(0).text()||window._uft.$(this.Element()).find(\"div.sapMStdTileTitle\").eq(0).text()},SAPUITile.prototype.Click=function(methodName,paramsArray,details){switch(arguments.length){case 0:methodName=\"Click\";case 1:paramsArray=new Array;case 2:details=\"\"}try{this.CheckNullElement(),this.PreventReplayMethod(methodName);var elem=window._uft.$(this.Element()).eq(0);if(this.IsUi())for(var innerClasses=[\".sapFTItemCenter\",\".sapUshellTileBase\",\".sapMGT\",\".sapSuiteGT\"],i=0,len=innerClasses.length,$elem=window._uft.$(this.Element());i<len&&(elem=$elem.find(innerClasses[i]).eq(0),1!==elem.length);i++);if(0===elem.length&&(details=\"Tile item not found\",this.Report(micFail,methodName,paramsArray,details)),1===elem.length){var tileElem=new SAPUI5Control({element:elem[0]});setTimeout(function(){tileElem.ReplayClick()},100),this.Report(micDone,methodName,paramsArray,details)}}catch(err){}},SAPUITile.prototype.IsUi=function(elem){elem||(elem=this.Element());var sapUiRegex=/^sapU/;return testClassName(elem.className,sapUiRegex)};", 
            "function get_property_value(property){return(new SAPUIToggleButton).GetPropertyValue(property)}function ListenToEvents(){return(new SAPUIToggleButton).RegisterForEvents(),!0}function OnToggle(handlerParam,eventObj){var handler=new EventCallBack(\"click\",\"Set\",handlerParam);return new SAPUIToggleButton({element:_elem,isStandalone:!0,handlers:[handler]}).OnToggle(eventObj)}function Set(State){var button=new SAPUIToggleButton;return myTrace(button.SAPUIControlName()+\".Set\",LogSeverity_Information,0,SAPUI5_BUTTON_CATEGORY),button.SetState(\"Set\",State)}function Submit(){var button=new SAPUIToggleButton;button.ReplayEvent(\"click\"),button.Report(micDone,\"Submit\",[])}", 
            "function get_property_value(property){return(new SAPUIToolbar).GetPropertyValue(property)}function ListenToEvents(){return(new SAPUIToolbar).RegisterForEvents(),!0}function OnOverflowButtonClick(handlerParam,eventObj){return(new SAPUIToolbar).OnOverflowButtonClick(eventObj)}function OpenOverflow(){return(new SAPUIToolbar).OpenOverflow()}function SAPUIToolbar(config){null==config&&(config={}),void 0==config.handlers&&(config.handlers=defaultToolBarEventHandlers),void 0==config.type&&(config.type=SAPUI5ControlTypeId.TOOLBAR),void 0==config.name&&(config.name=SAPUI5ControlName.TOOLBAR),SAPUI5Control.call(this,config)}var defaultToolBarEventHandlers=[];SAPUIToolbar.InheritsFrom(SAPUI5Control),SAPUIToolbar.prototype.GetName=function(){this.CheckNullElement();var name=this.Element().title;return name||(name=\"\"),name},SAPUIToolbar.prototype.IsVisible=function(){var core=this.GetCoreElement();return core?core.getVisible():window._uft.$(this.Element()).find(\"div.sapUiTbInner\").length>0},SAPUIToolbar.prototype.GetPropertyValue=function(property){return\"design\"===property?this.GetDesign():\"items count\"===property?this.GetItemsCount():\"left items count\"===property?this.GetLeftItemsCount():\"right items count\"===property?this.GetRightItemsCount():\"middle items count\"===property?this.GetMiddleItemsCount():\"standalone\"===property?this.GetStandalone():SAPUI5Control.prototype.GetPropertyValue.call(this,property)},SAPUIToolbar.prototype.RegisterForEvents=function(){if(this.IsMobile())return!0;var innerCtrl=this.GetOverflowButton(),handler,ctrl;return null!==innerCtrl&&(handler=new EventCallBack(\"click\",\"OnOverflowButtonClick\",innerCtrl),ctrl=new SAPUI5Control({element:innerCtrl,isStandalone:!1,handlers:[handler]}),ctrl.RegisterForEvents()),!0},SAPUIToolbar.prototype.ShouldIgnoreEvent=function(eventObj){return 0==isLeftMouseButtonEvent(eventObj)},SAPUIToolbar.prototype.GetDesign=function(){var elem=this.Element(),design=\"\";return this.IsUi()?isElementOfClass(elem,\"DIV\",\"sapUiTbDesignFlat\")?design=\"Flat\":isElementOfClass(elem,\"DIV\",\"sapUiTbDesignStandard\")?design=\"Standard\":isElementOfClass(elem,\"DIV\",\"sapUiTbDesignTransparent\")&&(design=\"Transparent\"):this.IsMobile()&&(isElementOfClass(elem,\"DIV\",\"sapMTB-Solid-CTX\")?design=\"Solid\":isElementOfClass(elem,\"DIV\",\"sapMTB-Transparent-CTX\")?design=\"Transparent\":isElementOfClass(elem,\"DIV\",\"sapMTB-Auto-CTX\")?design=\"Auto\":isElementOfClass(elem,\"DIV\",\"sapMTB-Info-CTX\")?design=\"Info\":isElementOfClass(elem,\"FOOTER\",\"sapMFooter-CTX\")?design=\"Footer\":isElementOfClass(elem,\"HEADER\",\"sapMHeader-CTX\")?design=\"Header\":isElementOfClass(elem,\"HEADER\",\"sapMSubHeader-CTX\")?design=\"SubHeader\":isElementOfClass(elem,\"DIV\",\"sapMBar-CTX\")&&(design=\"Auto\")),design},SAPUIToolbar.prototype.GetStandalone=function(){var core=this.GetCoreElement();return core&&\"function\"==typeof core.getStandalone?core.getStandalone():this.IsUi()?isElementOfClass(this.Element(),\"DIV\",\"sapUiTbStandalone\"):!!this.IsMobile()||void 0},SAPUIToolbar.prototype.GetItemsCount=function(){var core=this.GetCoreElement(),itemCount=0;if(core&&\"function\"==typeof core.getItems&&\"function\"==typeof core.getRightItems)itemCount=core.getItems().length+core.getRightItems().length;else if(this.IsUi()){var inner=window._uft.$(this.Element()).find(\"div.sapUiTbInner\").get(0),barRight=window._uft.$(this.Element()).find(\"div.sapUiTbInnerRight\").eq(0);inner&&barRight&&(itemCount=window._uft.$(inner).children(\":not(div.sapUiTbOB)\").length+window._uft.$(barRight).children(\":not(div.sapUiTbOB)\").length)}else if(this.IsMobile()&&(itemCount=window._uft.$(this.Element()).find(\".sapMBarChild:not(div.sapMTBSpacer)\").length))return itemCount;return itemCount},SAPUIToolbar.prototype.GetLeftItemsCount=function(){var core=this.GetCoreElement(),itemCount=0;if(core&&\"function\"==typeof core.getItems)itemCount=core.getItems().length;else if(this.IsUi()){var inner=window._uft.$(this.Element()).find(\"div.sapUiTbInner\").get(0);inner&&(itemCount=window._uft.$(inner).children(\":not(div.sapUiTbOB)\").length)}else if(this.IsMobile()){var barleft=window._uft.$(this.Element()).find(\"div.sapMBarLeft\").eq(0);barleft&&(itemCount=barleft.find(\"*.sapMBarChild:not(div.sapMTBSpacer)\").length)}return itemCount},SAPUIToolbar.prototype.GetRightItemsCount=function(){var core=this.GetCoreElement(),itemCount=0,barRight;return core&&\"function\"==typeof core.getRightItems?itemCount=core.getRightItems().length:this.IsUi()?(barRight=window._uft.$(this.Element()).find(\"div.sapUiTbInnerRight\").eq(0))&&(itemCount=barRight.children(\":not(div.sapUiTbOB)\").length):this.IsMobile()&&(barRight=window._uft.$(this.Element()).find(\"div.sapMBarRight\").eq(0))&&(itemCount=barRight.find(\"*.sapMBarChild:not(div.sapMTBSpacer)\").length),itemCount},SAPUIToolbar.prototype.GetMiddleItemsCount=function(){var itemCount=0;if(this.IsMobile()){var barMiddle=window._uft.$(this.Element()).find(\"div.sapMBarMiddle\").eq(0);barMiddle&&(itemCount=barMiddle.find(\"*.sapMBarChild:not(div.sapMTBSpacer)\").length)}return itemCount},SAPUIToolbar.prototype.GetOverflowButton=function(){var button=window._uft.$(this.Element()).find(\"div.sapUiTbOB\").get(0);return button||(button=null),button},SAPUIToolbar.prototype.OnOverflowButtonClick=function(eventObj){return!!this.ShouldIgnoreEvent(eventObj)||(this.Record(\"OpenOverflow\"),!0)},SAPUIToolbar.prototype.OpenOverflow=function(){var methodName=\"OpenOverflow\",ctrl=this.GetOverflowButton();return ctrl?\"none\"===ctrl.style.display?(this.Report(micDone,methodName,[],\"Overflow button is invisible.\"),!0):(_control.ReplayClick(ctrl),this.Report(micDone,methodName,[]),!0):(this.Report(micFail,methodName,[],\"Overflow button cannot found.\"),!1)};", 
            "///////////////////////////////////////////////////////////////////////////////\n//\n// common.js\n//===========\n//\n// Common javascript functions and objects for Web Extensibility.\n//\n///////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////\n// Log Severity constants\n//////////////////////////////////////////////////////////////////////\nvar LogSeverity_Success = 0;\nvar LogSeverity_Information = 1;\nvar LogSeverity_Warning = 2;\nvar LogSeverity_Failure = 3;\nvar LogSeverity_Error = 4;\n/////////////////////////////////////////////////////////////////////\n// Report status constants\n//////////////////////////\nvar micPass = 0;\nvar micFail = 1;\nvar micDone = 2;\nvar micWarning = 3;\nvar micInfo = 4;\n\nvar ToolkitState = {\n    UNKNOWN: 0, \t\t\t/* Means the kit does not implement the ability to know what is the kit's state */\n    NOT_PRESENT: 1, \t\t/* kit is not present on the current page */\n    PRESENT: 2, \t\t\t/* kit is present on the page but there is no information about its readyness */\n    NOT_READY: 3, \t\t\t/* kit is present but the page still processing the toolkit. */\n    READY: 4\t\t\t\t/* kit is ready */\n};\n\n\n//Constants to use in the Extensibility toolkit.\nvar QtpConstants = {\n    FireFox: \"Mozilla Firefox\",\n    IE: \"internet explorer\",\n    Chrome: \"Chrome\",\n    IS_W3C_COMPATIBLE_IE: function () {\n        if (this.IE == _util.GetBrowserType()) {\n            if (document.documentMode) {\n                return (document.documentMode >= 9);\n            }\n        }\n\n        return false;\n    },\n    ACTUAL_IE_VERSION: function () {\n        if (this.IE != _util.GetBrowserType())\n            return -1;\n\n        if (document.documentMode)\n            return document.documentMode;\n        else\n            return _util.GetBrowserVersion();\n    },\n    LEFT_BUTTON: function () {\n        if (this.IE == _util.GetBrowserType()) {\n            // According to MSDN, in IE the LEFT mouse button pressed during \n            // event generation has value of 1 only for onmousedown, onmouseup and onmousemove.  \n            // Refer to http://msdn.microsoft.com/en-us/library/ms533544%28VS.85%29.aspx\n            // The generated event object is available (only in IE) in the browser's \n            // global name space, therefore we can check the event type and return the appropriate value.\n            // \n            if ((window.event) &&\n\t\t\t\t(event.type == \"mousedown\" ||\n\t\t\t\tevent.type == \"mouseup\" ||\n\t\t\t\tevent.type == \"mousemove\"))\n                return 1;\n            else\n                return 0;\n        }\n        else\n            // In FireFox the left button is always 0.\n            return 0;\n    },\n    MIDDLE_BUTTON: function () {\n        return (this.FireFox == _util.GetBrowserType()) ? 1 : 4;\n    },\n    RIGHT_BUTTON: function () { return 2; },// This value is the same for both browsers: IE and FF.\n    IsFirefoxLegacyAgent: function () {\n        return typeof (XPCNativeWrapper) !== \"undefined\";\n    }\n};\n\n//This is a wrapper for the _util that is exposed by QTP , we\n//need it since FireFox does not allow optional arguments so we\n//wrap QTP's util object with this javascript object and handle the \n//optional parameters in JavaScript.\nvar _util = {\n    Alert: function (s) {\n        _QTPUtil.Alert(s);\n    },\n    RegisterForEvent: function (element, eventName, handler, handlerParam) {\n        if (!handlerParam)\n            handlerParam = null;\n        _QTPUtil.RegisterForEvent(element, eventName, handler, handlerParam);\n\t},\n\tRegisterForGesture: function(element, gestureName, handler, handlerParam){\n\t\tif (!handlerParam)\n\t\t\thandlerParam = null;\n\t\t_QTPUtil.RegisterForGesture(element, gestureName, handler, handlerParam);\n    },\n    Record: function (methodName, parameters, delay) {\n        if (parameters == undefined || parameters == null)\n            parameters = new Array();\n        if (!delay)\n            delay = 0;\n        _QTPUtil.Record(methodName, parameters, delay);\n    },\n    Report: function (status, method, parameters, details) {\n        if (!details)\n            details = \"\";\n        if (parameters == undefined || parameters == null)\n            parameters = new Array();\n        _QTPUtil.Report(status, method, parameters, details);\n    },\n    ReportEvent: function (status, method, parameters, details) {\n        if (!details)\n            details = \"\";\n        if (parameters == undefined || parameters == null)\n            parameters = new Array();\n        _QTPUtil.ReportEvent(status, method, parameters, details);\n    },\n    LogLine: function (text, severity, Id, category) {\n        if (!category)\n            category = 0;\n        if (!Id)\n            Id = 0;\n        try {\n            _QTPUtil.LogLine(text, severity, Id, category);\n        }\n        catch (e) {\n            return false;\n        }\n        return true;\n    },\n    Wait: function (milliseconds) {\n        _QTPUtil.Wait(milliseconds);\n    },\n    GetBrowserType: function () {\n        return _QTPUtil.GetBrowserType();\n    },\n    GetBrowserVersion: function () {\n        return _QTPUtil.GetBrowserVersion();\n    },\n    FireEvent: function (element, eventName, eventObj) {\n        switch (this.GetBrowserType()) {\n            case QtpConstants.IE:\n                element.fireEvent(eventName, eventObj);\n                break;\n            case QtpConstants.FireFox:\n                //if Firefox Legacy Agent will use the XPCNativeWrapper to wrap the dom element here;\n                //if Firefox Agent will goto case of Chrome to use the dom element directly.\n                if (QtpConstants.IsFirefoxLegacyAgent()) {\n                    var wrappedElem = new XPCNativeWrapper(element);\n                    wrappedElem.dispatchEvent(eventObj);\n                    break;\n                }\n            case QtpConstants.Chrome:\n            default:\n                element.dispatchEvent(eventObj);\n                break;\n        }\n\n    }\n};\n\n\n/********************************************************************/\n/********************************************************************/\n/*\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   \t*/\n/*\t\t\t\tSafeArray functions and objects\t\t\t\t\t\t*/\n/*\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   \t*/\n/********************************************************************/\n/********************************************************************/\n\n///////////////////////////////////////////////////////////////////////////////\n// \n// toSafeArray\n//-------------\n//\n// Converts a javascript Array object to COM safe array.\n// \n// Usage example:\n//----------------\n//\n//\tvar arr = new Array();\n//\n//\t// Add objects to the array.\n//\tarr[0] = \"item1\";\n//\tarr[1] = \"item2\";\n//\tarr[4] = \"item3\";\n//\t\n//\t// Return a UFT array with the following items:\n//\t//  { \"item1\", \"item2\", null, null, \"item3\" }\n//\treturn toSafeArray(arr);\t\n//\n///////////////////////////////////////////////////////////////////////////////\nfunction toSafeArray(inArr) {\n    //Only in IE we need to construct SafeArray. \n    //In Mozilla FireFox we know how to handle javascript arrays.\n    if (_QTPUtil.GetBrowserType() == QtpConstants.IE) {\n        var outArr = new SafeArrayWrapper();\n\n        for (var i = 0; i < inArr.length; i++)\n            outArr.add(i, inArr[i]);\n\n        return outArr.ret();\n    }else{\n        inArr = Array.prototype.slice.call(inArr);\n    }\n    return inArr;\n}\n\n///////////////////////////////////////////////////////////////////////////////\n// SafeArrayWrapper\n//==================\n//\n// This object should be used when returning COM safe arrays. \n// \n// Usage example:\n//----------------\n//\n//\tvar size = 0;\n//\n//\t// Create the array.\n//  var arr = new SafeArrayWrapper();\n//\n//\t// Add objects to the array.\n//\tarr.add(0, \"item1\");\n//\tarr.add(1, \"item2\");\n//\tsize = arr.count();\t\t// size == 2\n//\n//\tarr.add(4, \"item3\");\n//\tsize = arr.count();\t\t// size == 5 \n//\n// \t// Return the array\n//\t// The returned array: { \"item1\", \"item2\", null, null, \"item3\" }\n//\treturn arr.ret();\n//\n///////////////////////////////////////////////////////////////////////////////\n\n\n\n///////////////////////////////////////////////////////////////////////////////\n// \n// SafeArrayWrapper Constructor\n//\n///////////////////////////////////////////////////////////////////////////////\nfunction SafeArrayWrapper() {\n    // The 'arr' member will hold the script array.\n    this.arr = new ActiveXObject(\"Mercury.QTP.ScriptArray\");\n}\n\n///////////////////////////////////////////////////////////////////////////////\n// \n// SafeArrayWrapper.add()\n//\n// Add an item at a specified index in the array.\n// If any items with lower indexes do not exist, they are added as null.\n//\n///////////////////////////////////////////////////////////////////////////////\nfunction SafeArrayWrapper_add(index, item) {\n    this.arr.Insert(index, item);\n}\nSafeArrayWrapper.prototype.add = SafeArrayWrapper_add;\n\n///////////////////////////////////////////////////////////////////////////////\n// \n// SafeArrayWrapper.count()\n//\n// Get the current size of the array.\n//\n///////////////////////////////////////////////////////////////////////////////\nfunction SafeArrayWrapper_count() {\n    return this.arr.Count;\n}\nSafeArrayWrapper.prototype.count = SafeArrayWrapper_count;\n\n///////////////////////////////////////////////////////////////////////////////\n// \n// SafeArrayWrapper.ret()\n//\n// Call this when returning the array.\n//\n///////////////////////////////////////////////////////////////////////////////\nfunction SafeArrayWrapper_ret() {\n    return this.arr.Items;\n}\nSafeArrayWrapper.prototype.ret = SafeArrayWrapper_ret;\n\n\n\n\n/********************************************************************/\n/********************************************************************/\n/*\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   \t*/\n/*\t\t\t\tAbstract Web Table functions \t\t\t\t\t\t*/\n/*\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   \t*/\n/********************************************************************/\n/********************************************************************/\n\n///////////////////////////////////////////////////////////////////////////////\n// \n// AbstractTable_GetChildrenToLearn\n//----------------------------------\n//\n// Returns an array of the abstract table's children that should be learned.\n// We want to learn all children except first level <TR> and <TD> elements.\n// Uses the helper recursive function AbstractTable_GetChildrenToLearnRec().\n//\n///////////////////////////////////////////////////////////////////////////////\nfunction AbstractTable_GetChildrenToLearn() {\n    var arr = new Array();\n    AbstractTable_GetChildrenToLearnRec(_elem, arr, true, true);\n    return toSafeArray(arr);\n}\n\n///////////////////////////////////////////////////////////////////////////////\n// \n// AbstractTable_GetChildrenToLearnRec\n//-------------------------------------\n//\n// A recursive helper function that returns an array of all the children of \n//\ta table excluding the first level <TR> and <TD> elements.\n//\n///////////////////////////////////////////////////////////////////////////////\nfunction AbstractTable_GetChildrenToLearnRec(elm, arr, bTRFirstLevel, bTDFirstLevel) {\n    for (var i = 0 ; i < elm.children.length ; ++i) {\n        var curElem = elm.children[i];\n        if (bTRFirstLevel && (curElem.tagName == \"TR\" || curElem.tagName == \"tr\")) {\n            // Do not insert this <TR>, but continue traversing the tree \n            AbstractTable_GetChildrenToLearnRec(curElem, arr, false, bTDFirstLevel);\n        }\n        else if (bTDFirstLevel && (curElem.tagName == \"TD\" || curElem.tagName == \"td\")) {\n            // Do not insert this <TD>, but continue traversing the tree \n            AbstractTable_GetChildrenToLearnRec(curElem, arr, bTRFirstLevel, false);\n        }\n        else {\n            // Insert this element to the array:\n            arr[arr.length] = curElem;\n\n            // Recursive call to AbstractTable_GetChildrenToLearnRec for the children of this element\n            AbstractTable_GetChildrenToLearnRec(curElem, arr, bTRFirstLevel, bTDFirstLevel);\n        }\n    }\n}\n\n\n\n\n/********************************************************************/\n/********************************************************************/\n/*\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   \t*/\n/*\t\t\t\t\t\tIE Floating ComboBox \t\t\t\t\t\t*/\n/*\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   \t*/\n/********************************************************************/\n/********************************************************************/\n\n/////////////////////////////////////////////////////////////////////////////////////////\n// \n// function IsInIE7FloatingComboBoxWindow\n//\n// In IE7, the drop-down control of the ComboBox control (SELECT element) is implemented \n//\tas a temporary floating window with a copy of the SELECT control inside it. \n// This function checks whether the input html element resides in such a floating window.\n//\n/////////////////////////////////////////////////////////////////////////////////////////\nfunction IsInIE7FloatingComboBoxWindow(element) {\n    // If the element is in a top level window it is not in a floating ComboBox window.\n    if (element.document.parentWindow == element.document.parentWindow.top)\n        return false;\n\n    // If the element is not in a top level window, check if it is directly inside a frame.\n    // If it is directly inside a frame then it is not in a floating ComboBox window.\n    //\n    // Check this by going to the current window's parent and asking for all of its frames.\n    // If we are in one of them then the element is directly inside a frame.\n    var i;\n    var directlyInsideFrame = false;\n    for (i = 0; i < element.document.parentWindow.parent.frames.length; i++) {\n        if (element.document.parentWindow.parent.frames.item(i) == element.document.parentWindow)\n            directlyInsideFrame = true;\n    }\n\n    return !directlyInsideFrame;\n}\n\n// This function trims leading and following spaces from of a string.\n//\n// Parameters:\n//             str - The string to trim\n// Returns the trimmed string.\nfunction trim(str) {\n    return str.replace(/^\\s*/, \"\").replace(/\\s+$/, \"\");\n}\n\n// This function returns the frame element that contains the _elem element.\n//\n// Returns The frame element, NULL if there is no frame element.\nfunction getFrameElement() {\n    var frame;\n    try {\n        frame = window.frameElement;\n    }\n    catch (e) { }\n    return frame;\n}\n\n// This function compares versions like 1.8.16 > 1.7.20, 1.10.4 > 1.8.16\n//\n// Parameters:\n//             v1, v2 versions to compare.\n// Returns 0 if equal, 1 if v1 > v2, -1 if v1 < v2.\nfunction versionCompare(v1, v2) {\n    var v1parts = v1.split('.');\n    var v2parts = v2.split('.');\n\n    for (var i = 0; i < v1parts.length; ++i) {\n        if (v2parts.length == i) {\n            return 1;\n        }\n\n        if (parseInt(v1parts[i]) == parseInt(v2parts[i])) {\n            continue;\n        }\n        else if (parseInt(v1parts[i]) > parseInt(v2parts[i])) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    }\n\n    if (v1parts.length != v2parts.length) {\n        return -1;\n    }\n\n    return 0;\n}\n\nfunction HPPromise() {  \n    this.isPromise = true; \n    this.cookie = 0x7FFF & Math.round((new Date()).getTime() + (1 << 15) * Math.random());\n    this._QTPUtilCache = _QTPUtil;\n}\n\nHPPromise.prototype = {\n    cookie: null,\n    isPromise: true,\n    resolve: function (value) {\n        this._QTPUtilCache.ResolveAsyncCall(this.cookie, value);\n    },\n    reject: function (error, line, file) {\n        var errorMessage, lineNumber, fileName;\n        if (error instanceof Error) {\n            errorMessage = error.message || error.stack || error.stacktrace;\n        }\n        else {\n            errorMessage = (error || \"\").toString();\n        }\n        lineNumber = line || -1;\n        fileName = file || \"\";\n        this._QTPUtilCache.RejectAsyncCall(this.cookie, errorMessage, lineNumber, fileName);\n    }\n};/*!\n * jQuery JavaScript Library v1.12.4\n * http://jquery.com/\n *\n * Includes Sizzle.js\n * http://sizzlejs.com/\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2016-05-20T17:17Z\n */\n\n(function( global, factory ) {\n    // Prevent multiple injection.\n    if (typeof (_uft) != 'undefined' && typeof (_uft.$) != 'undefined')\n        return;\n\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\t\t// For CommonJS and CommonJS-like environments where a proper `window`\n\t\t// is present, execute the factory and get jQuery.\n\t\t// For environments that do not have a `window` with a `document`\n\t\t// (such as Node.js), expose a factory as module.exports.\n\t\t// This accentuates the need for the creation of a real `window`.\n\t\t// e.g. var jQuery = require(\"jquery\")(window);\n\t\t// See ticket #14549 for more info.\n\t\tmodule.exports = global.document ?\n\t\t\tfactory( global, true ) :\n\t\t\tfunction( w ) {\n\t\t\t\tif ( !w.document ) {\n\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n\t\t\t\t}\n\t\t\t\treturn factory( w );\n\t\t\t};\n\t} else {\n\t\tfactory( global );\n\t}\n\n// Pass this if window is not defined yet\n}(typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n\n// Support: Firefox 18+\n// Can't be in strict mode, several libs including ASP.NET trace\n// the stack via arguments.caller.callee and Firefox dies if\n// you try to trace through \"use strict\" call chains. (#13335)\n//\"use strict\";\nvar deletedIds = [];\n\nvar document = window.document;\n\nvar slice = deletedIds.slice;\n\nvar concat = deletedIds.concat;\n\nvar push = deletedIds.push;\n\nvar indexOf = deletedIds.indexOf;\n\nvar class2type = {};\n\nvar toString = class2type.toString;\n\nvar hasOwn = class2type.hasOwnProperty;\n\nvar support = {};\n\n\n\nvar\n\tversion = \"1.12.4\",\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\t// Need init if jQuery is called (just allow error to be thrown if not included)\n\t\treturn new jQuery.fn.init( selector, context );\n\t},\n\n\t// Support: Android<4.1, IE<9\n\t// Make sure we trim BOM and NBSP\n\trtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\n\n\t// Matches dashed string for camelizing\n\trmsPrefix = /^-ms-/,\n\trdashAlpha = /-([\\da-z])/gi,\n\n\t// Used by jQuery.camelCase as callback to replace()\n\tfcamelCase = function( all, letter ) {\n\t\treturn letter.toUpperCase();\n\t};\n\njQuery.fn = jQuery.prototype = {\n\n\t// The current version of jQuery being used\n\tjquery: version,\n\n\tconstructor: jQuery,\n\n\t// Start with an empty selector\n\tselector: \"\",\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\ttoArray: function() {\n\t\treturn slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\t\treturn num != null ?\n\n\t\t\t// Return just the one element from the set\n\t\t\t( num < 0 ? this[ num + this.length ] : this[ num ] ) :\n\n\t\t\t// Return all the elements in a clean array\n\t\t\tslice.call( this );\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\t\tret.context = this.context;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\teach: function( callback ) {\n\t\treturn jQuery.each( this, callback );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map( this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t} ) );\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor();\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: push,\n\tsort: deletedIds.sort,\n\tsplice: deletedIds.splice\n};\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar src, copyIsArray, copy, name, options, clone,\n\t\ttarget = arguments[ 0 ] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\n\t\t// skip the boolean and the target\n\t\ttarget = arguments[ i ] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !jQuery.isFunction( target ) ) {\n\t\ttarget = {};\n\t}\n\n\t// extend jQuery itself if only one argument is passed\n\tif ( i === length ) {\n\t\ttarget = this;\n\t\ti--;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\n\t\t// Only deal with non-null/undefined values\n\t\tif ( ( options = arguments[ i ] ) != null ) {\n\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tsrc = target[ name ];\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject( copy ) ||\n\t\t\t\t\t( copyIsArray = jQuery.isArray( copy ) ) ) ) {\n\n\t\t\t\t\tif ( copyIsArray ) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && jQuery.isArray( src ) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && jQuery.isPlainObject( src ) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend( {\n\n\t// Unique for each copy of jQuery on the page\n\texpando: \"jQuery\" + ( version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// Assume jQuery is ready without the ready module\n\tisReady: true,\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\tnoop: function() {},\n\n\t// See test/unit/core.js for details concerning isFunction.\n\t// Since version 1.3, DOM methods and functions like alert\n\t// aren't supported. They return false on IE (#2968).\n\tisFunction: function( obj ) {\n\t\treturn jQuery.type( obj ) === \"function\";\n\t},\n\n\tisArray: Array.isArray || function( obj ) {\n\t\treturn jQuery.type( obj ) === \"array\";\n\t},\n\n\tisWindow: function( obj ) {\n\t\t/* jshint eqeqeq: false */\n\t\treturn obj != null && obj == obj.window;\n\t},\n\n\tisNumeric: function( obj ) {\n\n\t\t// parseFloat NaNs numeric-cast false positives (null|true|false|\"\")\n\t\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n\t\t// subtraction forces infinities to NaN\n\t\t// adding 1 corrects loss of precision from parseFloat (#15100)\n\t\tvar realStringObj = obj && obj.toString();\n\t\treturn !jQuery.isArray( obj ) && ( realStringObj - parseFloat( realStringObj ) + 1 ) >= 0;\n\t},\n\n\tisEmptyObject: function( obj ) {\n\t\tvar name;\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\tisPlainObject: function( obj ) {\n\t\tvar key;\n\n\t\t// Must be an Object.\n\t\t// Because of IE, we also have to check the presence of the constructor property.\n\t\t// Make sure that DOM nodes and window objects don't pass through, as well\n\t\tif ( !obj || jQuery.type( obj ) !== \"object\" || obj.nodeType || jQuery.isWindow( obj ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\ttry {\n\n\t\t\t// Not own constructor property must be Object\n\t\t\tif ( obj.constructor &&\n\t\t\t\t!hasOwn.call( obj, \"constructor\" ) &&\n\t\t\t\t!hasOwn.call( obj.constructor.prototype, \"isPrototypeOf\" ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} catch ( e ) {\n\n\t\t\t// IE8,9 Will throw exceptions on certain host objects #9897\n\t\t\treturn false;\n\t\t}\n\n\t\t// Support: IE<9\n\t\t// Handle iteration over inherited properties before own properties.\n\t\tif ( !support.ownFirst ) {\n\t\t\tfor ( key in obj ) {\n\t\t\t\treturn hasOwn.call( obj, key );\n\t\t\t}\n\t\t}\n\n\t\t// Own properties are enumerated firstly, so to speed up,\n\t\t// if last one is own, then all properties are own.\n\t\tfor ( key in obj ) {}\n\n\t\treturn key === undefined || hasOwn.call( obj, key );\n\t},\n\n\ttype: function( obj ) {\n\t\tif ( obj == null ) {\n\t\t\treturn obj + \"\";\n\t\t}\n\t\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\t\tclass2type[ toString.call( obj ) ] || \"object\" :\n\t\t\ttypeof obj;\n\t},\n\n\t// Workarounds based on findings by Jim Driscoll\n\t// http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context\n\tglobalEval: function( data ) {\n\t\tif ( data && jQuery.trim( data ) ) {\n\n\t\t\t// We use execScript on Internet Explorer\n\t\t\t// We use an anonymous function so that context is window\n\t\t\t// rather than jQuery in Firefox\n\t\t\t( window.execScript || function( data ) {\n\t\t\t\twindow[ \"eval\" ].call( window, data ); // jscs:ignore requireDotNotation\n\t\t\t} )( data );\n\t\t}\n\t},\n\n\t// Convert dashed to camelCase; used by the css and data modules\n\t// Microsoft forgot to hump their vendor prefix (#9572)\n\tcamelCase: function( string ) {\n\t\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n\t},\n\n\tnodeName: function( elem, name ) {\n\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\t},\n\n\teach: function( obj, callback ) {\n\t\tvar length, i = 0;\n\n\t\tif ( isArrayLike( obj ) ) {\n\t\t\tlength = obj.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( i in obj ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\t// Support: Android<4.1, IE<9\n\ttrim: function( text ) {\n\t\treturn text == null ?\n\t\t\t\"\" :\n\t\t\t( text + \"\" ).replace( rtrim, \"\" );\n\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArrayLike( Object( arr ) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpush.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\tvar len;\n\n\t\tif ( arr ) {\n\t\t\tif ( indexOf ) {\n\t\t\t\treturn indexOf.call( arr, elem, i );\n\t\t\t}\n\n\t\t\tlen = arr.length;\n\t\t\ti = i ? i < 0 ? Math.max( 0, len + i ) : i : 0;\n\n\t\t\tfor ( ; i < len; i++ ) {\n\n\t\t\t\t// Skip accessing in sparse arrays\n\t\t\t\tif ( i in arr && arr[ i ] === elem ) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t},\n\n\tmerge: function( first, second ) {\n\t\tvar len = +second.length,\n\t\t\tj = 0,\n\t\t\ti = first.length;\n\n\t\twhile ( j < len ) {\n\t\t\tfirst[ i++ ] = second[ j++ ];\n\t\t}\n\n\t\t// Support: IE<9\n\t\t// Workaround casting of .length to NaN on otherwise arraylike objects (e.g., NodeLists)\n\t\tif ( len !== len ) {\n\t\t\twhile ( second[ j ] !== undefined ) {\n\t\t\t\tfirst[ i++ ] = second[ j++ ];\n\t\t\t}\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, invert ) {\n\t\tvar callbackInverse,\n\t\t\tmatches = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tcallbackExpect = !invert;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tcallbackInverse = !callback( elems[ i ], i );\n\t\t\tif ( callbackInverse !== callbackExpect ) {\n\t\t\t\tmatches.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar length, value,\n\t\t\ti = 0,\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their new values\n\t\tif ( isArrayLike( elems ) ) {\n\t\t\tlength = elems.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn concat.apply( [], ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// Bind a function to a context, optionally partially applying any\n\t// arguments.\n\tproxy: function( fn, context ) {\n\t\tvar args, proxy, tmp;\n\n\t\tif ( typeof context === \"string\" ) {\n\t\t\ttmp = fn[ context ];\n\t\t\tcontext = fn;\n\t\t\tfn = tmp;\n\t\t}\n\n\t\t// Quick check to determine if target is callable, in the spec\n\t\t// this throws a TypeError, but we will just return undefined.\n\t\tif ( !jQuery.isFunction( fn ) ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Simulated bind\n\t\targs = slice.call( arguments, 2 );\n\t\tproxy = function() {\n\t\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n\t\t};\n\n\t\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\t\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\t\treturn proxy;\n\t},\n\n\tnow: function() {\n\t\treturn +( new Date() );\n\t},\n\n\t// jQuery.support is not used in Core but other projects attach their\n\t// properties to it so it needs to exist.\n\tsupport: support\n} );\n\n// JSHint would error on this code due to the Symbol not being defined in ES5.\n// Defining this global in .jshintrc would create a danger of using the global\n// unguarded in another place, it seems safer to just disable JSHint for these\n// three lines.\n/* jshint ignore: start */\nif ( typeof Symbol === \"function\" ) {\n\tjQuery.fn[ Symbol.iterator ] = deletedIds[ Symbol.iterator ];\n}\n/* jshint ignore: end */\n\n// Populate the class2type map\njQuery.each( \"Boolean Number String Function Array Date RegExp Object Error Symbol\".split( \" \" ),\nfunction( i, name ) {\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n} );\n\nfunction isArrayLike( obj ) {\n\n\t// Support: iOS 8.2 (not reproducible in simulator)\n\t// `in` check used to prevent JIT error (gh-2145)\n\t// hasOwn isn't used here due to false negatives\n\t// regarding Nodelist length in IE\n\tvar length = !!obj && \"length\" in obj && obj.length,\n\t\ttype = jQuery.type( obj );\n\n\tif ( type === \"function\" || jQuery.isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\treturn type === \"array\" || length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n}\nvar Sizzle =\n/*!\n * Sizzle CSS Selector Engine v2.2.1\n * http://sizzlejs.com/\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2015-10-17\n */\n(function( window ) {\n\nvar i,\n\tsupport,\n\tExpr,\n\tgetText,\n\tisXML,\n\ttokenize,\n\tcompile,\n\tselect,\n\toutermostContext,\n\tsortInput,\n\thasDuplicate,\n\n\t// Local document vars\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsHTML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\n\t// Instance-specific data\n\texpando = \"sizzle\" + 1 * new Date(),\n\tpreferredDoc = window.document,\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\tsortOrder = function( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn 0;\n\t},\n\n\t// General-purpose constants\n\tMAX_NEGATIVE = 1 << 31,\n\n\t// Instance methods\n\thasOwn = ({}).hasOwnProperty,\n\tarr = [],\n\tpop = arr.pop,\n\tpush_native = arr.push,\n\tpush = arr.push,\n\tslice = arr.slice,\n\t// Use a stripped-down indexOf as it's faster than native\n\t// http://jsperf.com/thor-indexof-vs-for/5\n\tindexOf = function( list, elem ) {\n\t\tvar i = 0,\n\t\t\tlen = list.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( list[i] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",\n\n\t// Regular expressions\n\n\t// http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\n\t// http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\n\tidentifier = \"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",\n\n\t// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + identifier + \")(?:\" + whitespace +\n\t\t// Operator (capture 2)\n\t\t\"*([*^$|!~]?=)\" + whitespace +\n\t\t// \"Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]\"\n\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" + whitespace +\n\t\t\"*\\\\]\",\n\n\tpseudos = \":(\" + identifier + \")(?:\\\\((\" +\n\t\t// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n\t\t// 1. quoted (capture 3; capture 4 or capture 5)\n\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\n\t\t// 2. simple (capture 6)\n\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\n\t\t// 3. anything else (capture 2)\n\t\t\".*\" +\n\t\t\")\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\" ),\n\n\trattributeQuotes = new RegExp( \"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\", \"g\" ),\n\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + identifier + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + identifier + \")\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + identifier + \"|[*])\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +\n\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\n\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +\n\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trnative = /^[^{]+\\{\\s*\\[native \\w/,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trsibling = /[+~]/,\n\trescape = /'|\\\\/g,\n\n\t// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = new RegExp( \"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\" ),\n\tfunescape = function( _, escaped, escapedWhitespace ) {\n\t\tvar high = \"0x\" + escaped - 0x10000;\n\t\t// NaN means non-codepoint\n\t\t// Support: Firefox<24\n\t\t// Workaround erroneous numeric interpretation of +\"0x\"\n\t\treturn high !== high || escapedWhitespace ?\n\t\t\tescaped :\n\t\t\thigh < 0 ?\n\t\t\t\t// BMP codepoint\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\t// Supplemental Plane codepoint (surrogate pair)\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t},\n\n\t// Used for iframes\n\t// See setDocument()\n\t// Removing the function wrapper causes a \"Permission Denied\"\n\t// error in IE\n\tunloadHandler = function() {\n\t\tsetDocument();\n\t};\n\n// Optimize for push.apply( _, NodeList )\ntry {\n\tpush.apply(\n\t\t(arr = slice.call( preferredDoc.childNodes )),\n\t\tpreferredDoc.childNodes\n\t);\n\t// Support: Android<4.0\n\t// Detect silently failing push.apply\n\tarr[ preferredDoc.childNodes.length ].nodeType;\n} catch ( e ) {\n\tpush = { apply: arr.length ?\n\n\t\t// Leverage slice if possible\n\t\tfunction( target, els ) {\n\t\t\tpush_native.apply( target, slice.call(els) );\n\t\t} :\n\n\t\t// Support: IE<9\n\t\t// Otherwise append directly\n\t\tfunction( target, els ) {\n\t\t\tvar j = target.length,\n\t\t\t\ti = 0;\n\t\t\t// Can't trust NodeList.length\n\t\t\twhile ( (target[j++] = els[i++]) ) {}\n\t\t\ttarget.length = j - 1;\n\t\t}\n\t};\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar m, i, elem, nid, nidselect, match, groups, newSelector,\n\t\tnewContext = context && context.ownerDocument,\n\n\t\t// nodeType defaults to 9, since context defaults to document\n\t\tnodeType = context ? context.nodeType : 9;\n\n\tresults = results || [];\n\n\t// Return early from calls with invalid selector or context\n\tif ( typeof selector !== \"string\" || !selector ||\n\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\n\n\t\treturn results;\n\t}\n\n\t// Try to shortcut find operations (as opposed to filters) in HTML documents\n\tif ( !seed ) {\n\n\t\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {\n\t\t\tsetDocument( context );\n\t\t}\n\t\tcontext = context || document;\n\n\t\tif ( documentIsHTML ) {\n\n\t\t\t// If the selector is sufficiently simple, try using a \"get*By*\" DOM method\n\t\t\t// (excepting DocumentFragment context, where the methods don't exist)\n\t\t\tif ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {\n\n\t\t\t\t// ID selector\n\t\t\t\tif ( (m = match[1]) ) {\n\n\t\t\t\t\t// Document context\n\t\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\t\tif ( (elem = context.getElementById( m )) ) {\n\n\t\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t// Element context\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\tif ( newContext && (elem = newContext.getElementById( m )) &&\n\t\t\t\t\t\t\tcontains( context, elem ) &&\n\t\t\t\t\t\t\telem.id === m ) {\n\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t// Type selector\n\t\t\t\t} else if ( match[2] ) {\n\t\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\t\treturn results;\n\n\t\t\t\t// Class selector\n\t\t\t\t} else if ( (m = match[3]) && support.getElementsByClassName &&\n\t\t\t\t\tcontext.getElementsByClassName ) {\n\n\t\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\t\treturn results;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Take advantage of querySelectorAll\n\t\t\tif ( support.qsa &&\n\t\t\t\t!compilerCache[ selector + \" \" ] &&\n\t\t\t\t(!rbuggyQSA || !rbuggyQSA.test( selector )) ) {\n\n\t\t\t\tif ( nodeType !== 1 ) {\n\t\t\t\t\tnewContext = context;\n\t\t\t\t\tnewSelector = selector;\n\n\t\t\t\t// qSA looks outside Element context, which is not what we want\n\t\t\t\t// Thanks to Andrew Dupont for this workaround technique\n\t\t\t\t// Support: IE <=8\n\t\t\t\t// Exclude object elements\n\t\t\t\t} else if ( context.nodeName.toLowerCase() !== \"object\" ) {\n\n\t\t\t\t\t// Capture the context ID, setting it first if necessary\n\t\t\t\t\tif ( (nid = context.getAttribute( \"id\" )) ) {\n\t\t\t\t\t\tnid = nid.replace( rescape, \"\\\\$&\" );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontext.setAttribute( \"id\", (nid = expando) );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prefix every selector in the list\n\t\t\t\t\tgroups = tokenize( selector );\n\t\t\t\t\ti = groups.length;\n\t\t\t\t\tnidselect = ridentifier.test( nid ) ? \"#\" + nid : \"[id='\" + nid + \"']\";\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tgroups[i] = nidselect + \" \" + toSelector( groups[i] );\n\t\t\t\t\t}\n\t\t\t\t\tnewSelector = groups.join( \",\" );\n\n\t\t\t\t\t// Expand context for sibling selectors\n\t\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) ||\n\t\t\t\t\t\tcontext;\n\t\t\t\t}\n\n\t\t\t\tif ( newSelector ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t} catch ( qsaError ) {\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif ( nid === expando ) {\n\t\t\t\t\t\t\tcontext.removeAttribute( \"id\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {function(string, object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar keys = [];\n\n\tfunction cache( key, value ) {\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn (cache[ key + \" \" ] = value);\n\t}\n\treturn cache;\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created div and expects a boolean result\n */\nfunction assert( fn ) {\n\tvar div = document.createElement(\"div\");\n\n\ttry {\n\t\treturn !!fn( div );\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\t// Remove from its parent by default\n\t\tif ( div.parentNode ) {\n\t\t\tdiv.parentNode.removeChild( div );\n\t\t}\n\t\t// release memory in IE\n\t\tdiv = null;\n\t}\n}\n\n/**\n * Adds the same handler for all of the specified attrs\n * @param {String} attrs Pipe-separated list of attributes\n * @param {Function} handler The method that will be applied\n */\nfunction addHandle( attrs, handler ) {\n\tvar arr = attrs.split(\"|\"),\n\t\ti = arr.length;\n\n\twhile ( i-- ) {\n\t\tExpr.attrHandle[ arr[i] ] = handler;\n\t}\n}\n\n/**\n * Checks document order of two siblings\n * @param {Element} a\n * @param {Element} b\n * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n */\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n\t\t\t( ~b.sourceIndex || MAX_NEGATIVE ) -\n\t\t\t( ~a.sourceIndex || MAX_NEGATIVE );\n\n\t// Use IE sourceIndex if available on both nodes\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\t// Check if b follows a\n\tif ( cur ) {\n\t\twhile ( (cur = cur.nextSibling) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n/**\n * Returns a function to use in pseudos for input types\n * @param {String} type\n */\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for buttons\n * @param {String} type\n */\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for positionals\n * @param {Function} fn\n */\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction(function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction(function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\n\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Checks a node for validity as a Sizzle context\n * @param {Element|Object=} context\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n */\nfunction testContext( context ) {\n\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\n}\n\n// Expose support vars for convenience\nsupport = Sizzle.support = {};\n\n/**\n * Detects XML nodes\n * @param {Element|Object} elem An element or a document\n * @returns {Boolean} True iff elem is a non-HTML XML node\n */\nisXML = Sizzle.isXML = function( elem ) {\n\t// documentElement is verified for cases where it doesn't yet exist\n\t// (such as loading iframes in IE - #4833)\n\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar hasCompare, parent,\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\n\n\t// Return early if doc is invalid or already selected\n\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Update global variables\n\tdocument = doc;\n\tdocElem = document.documentElement;\n\tdocumentIsHTML = !isXML( document );\n\n\t// Support: IE 9-11, Edge\n\t// Accessing iframe documents after unload throws \"permission denied\" errors (jQuery #13936)\n\tif ( (parent = document.defaultView) && parent.top !== parent ) {\n\t\t// Support: IE 11\n\t\tif ( parent.addEventListener ) {\n\t\t\tparent.addEventListener( \"unload\", unloadHandler, false );\n\n\t\t// Support: IE 9 - 10 only\n\t\t} else if ( parent.attachEvent ) {\n\t\t\tparent.attachEvent( \"onunload\", unloadHandler );\n\t\t}\n\t}\n\n\t/* Attributes\n\t---------------------------------------------------------------------- */\n\n\t// Support: IE<8\n\t// Verify that getAttribute really returns attributes and not properties\n\t// (excepting IE8 booleans)\n\tsupport.attributes = assert(function( div ) {\n\t\tdiv.className = \"i\";\n\t\treturn !div.getAttribute(\"className\");\n\t});\n\n\t/* getElement(s)By*\n\t---------------------------------------------------------------------- */\n\n\t// Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.getElementsByTagName = assert(function( div ) {\n\t\tdiv.appendChild( document.createComment(\"\") );\n\t\treturn !div.getElementsByTagName(\"*\").length;\n\t});\n\n\t// Support: IE<9\n\tsupport.getElementsByClassName = rnative.test( document.getElementsByClassName );\n\n\t// Support: IE<10\n\t// Check if getElementById returns elements by name\n\t// The broken getElementById methods don't pick up programatically-set names,\n\t// so use a roundabout getElementsByName test\n\tsupport.getById = assert(function( div ) {\n\t\tdocElem.appendChild( div ).id = expando;\n\t\treturn !document.getElementsByName || !document.getElementsByName( expando ).length;\n\t});\n\n\t// ID find and filter\n\tif ( support.getById ) {\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar m = context.getElementById( id );\n\t\t\t\treturn m ? [ m ] : [];\n\t\t\t}\n\t\t};\n\t\tExpr.filter[\"ID\"] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute(\"id\") === attrId;\n\t\t\t};\n\t\t};\n\t} else {\n\t\t// Support: IE6/7\n\t\t// getElementById is not reliable as a find shortcut\n\t\tdelete Expr.find[\"ID\"];\n\n\t\tExpr.filter[\"ID\"] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" &&\n\t\t\t\t\telem.getAttributeNode(\"id\");\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find[\"TAG\"] = support.getElementsByTagName ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\n\t\t\t// DocumentFragment nodes don't have gEBTN\n\t\t\t} else if ( support.qsa ) {\n\t\t\t\treturn context.querySelectorAll( tag );\n\t\t\t}\n\t\t} :\n\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\t\t\t\t// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( (elem = results[i++]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t// Class\n\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function( className, context ) {\n\t\tif ( typeof context.getElementsByClassName !== \"undefined\" && documentIsHTML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t/* QSA/matchesSelector\n\t---------------------------------------------------------------------- */\n\n\t// QSA and matchesSelector support\n\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = [];\n\n\t// qSa(:focus) reports false when true (Chrome 21)\n\t// We allow this because of a bug in IE8/9 that throws an error\n\t// whenever `document.activeElement` is accessed on an iframe\n\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\n\t// See http://bugs.jquery.com/ticket/13378\n\trbuggyQSA = [];\n\n\tif ( (support.qsa = rnative.test( document.querySelectorAll )) ) {\n\t\t// Build QSA regex\n\t\t// Regex strategy adopted from Diego Perini\n\t\tassert(function( div ) {\n\t\t\t// Select is set to empty string on purpose\n\t\t\t// This is to test IE's treatment of not explicitly\n\t\t\t// setting a boolean content attribute,\n\t\t\t// since its presence should be enough\n\t\t\t// http://bugs.jquery.com/ticket/12359\n\t\t\tdocElem.appendChild( div ).innerHTML = \"<a id='\" + expando + \"'></a>\" +\n\t\t\t\t\"<select id='\" + expando + \"-\\r\\\\' msallowcapture=''>\" +\n\t\t\t\t\"<option selected=''></option></select>\";\n\n\t\t\t// Support: IE8, Opera 11-12.16\n\t\t\t// Nothing should be selected when empty strings follow ^= or $= or *=\n\t\t\t// The test attribute must be unknown in Opera but \"safe\" for WinRT\n\t\t\t// http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\n\t\t\tif ( div.querySelectorAll(\"[msallowcapture^='']\").length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Support: IE8\n\t\t\t// Boolean attributes and \"value\" are not treated correctly\n\t\t\tif ( !div.querySelectorAll(\"[selected]\").length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t\t}\n\n\t\t\t// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+\n\t\t\tif ( !div.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\n\t\t\t\trbuggyQSA.push(\"~=\");\n\t\t\t}\n\n\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !div.querySelectorAll(\":checked\").length ) {\n\t\t\t\trbuggyQSA.push(\":checked\");\n\t\t\t}\n\n\t\t\t// Support: Safari 8+, iOS 8+\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=136851\n\t\t\t// In-page `selector#id sibing-combinator selector` fails\n\t\t\tif ( !div.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\n\t\t\t\trbuggyQSA.push(\".#.+[+~]\");\n\t\t\t}\n\t\t});\n\n\t\tassert(function( div ) {\n\t\t\t// Support: Windows 8 Native Apps\n\t\t\t// The type and name attributes are restricted during .innerHTML assignment\n\t\t\tvar input = document.createElement(\"input\");\n\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\t\tdiv.appendChild( input ).setAttribute( \"name\", \"D\" );\n\n\t\t\t// Support: IE8\n\t\t\t// Enforce case-sensitivity of name attribute\n\t\t\tif ( div.querySelectorAll(\"[name=d]\").length ) {\n\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\n\t\t\t}\n\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !div.querySelectorAll(\":enabled\").length ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\tdiv.querySelectorAll(\"*,:x\");\n\t\t\trbuggyQSA.push(\",.*:\");\n\t\t});\n\t}\n\n\tif ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||\n\t\tdocElem.webkitMatchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector) )) ) {\n\n\t\tassert(function( div ) {\n\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t// on a disconnected node (IE 9)\n\t\t\tsupport.disconnectedMatch = matches.call( div, \"div\" );\n\n\t\t\t// This should fail with an exception\n\t\t\t// Gecko does not error, returns false instead\n\t\t\tmatches.call( div, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t});\n\t}\n\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join(\"|\") );\n\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join(\"|\") );\n\n\t/* Contains\n\t---------------------------------------------------------------------- */\n\thasCompare = rnative.test( docElem.compareDocumentPosition );\n\n\t// Element contains another\n\t// Purposefully self-exclusive\n\t// As in, an element does not contain itself\n\tcontains = hasCompare || rnative.test( docElem.contains ) ?\n\t\tfunction( a, b ) {\n\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t));\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( (b = b.parentNode) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t/* Sorting\n\t---------------------------------------------------------------------- */\n\n\t// Document order sorting\n\tsortOrder = hasCompare ?\n\tfunction( a, b ) {\n\n\t\t// Flag for duplicate removal\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Sort on method existence if only one input has compareDocumentPosition\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\t\tif ( compare ) {\n\t\t\treturn compare;\n\t\t}\n\n\t\t// Calculate position if both inputs belong to the same document\n\t\tcompare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?\n\t\t\ta.compareDocumentPosition( b ) :\n\n\t\t\t// Otherwise we know they are disconnected\n\t\t\t1;\n\n\t\t// Disconnected nodes\n\t\tif ( compare & 1 ||\n\t\t\t(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {\n\n\t\t\t// Choose the first element that is related to our preferred document\n\t\t\tif ( a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif ( b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\t// Maintain original order\n\t\t\treturn sortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\t\t}\n\n\t\treturn compare & 4 ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\t\t// Exit early if the nodes are identical\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\t// Parentless nodes are either documents or disconnected\n\t\tif ( !aup || !bup ) {\n\t\t\treturn a === document ? -1 :\n\t\t\t\tb === document ? 1 :\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\tsortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\n\t\t// If the nodes are siblings, we can do a quick check\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\tcur = a;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\t// Walk down the tree looking for a discrepancy\n\t\twhile ( ap[i] === bp[i] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\tsiblingCheck( ap[i], bp[i] ) :\n\n\t\t\t// Otherwise nodes in our document sort first\n\t\t\tap[i] === preferredDoc ? -1 :\n\t\t\tbp[i] === preferredDoc ? 1 :\n\t\t\t0;\n\t};\n\n\treturn document;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\t// Make sure that attribute selectors are quoted\n\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\n\n\tif ( support.matchesSelector && documentIsHTML &&\n\t\t!compilerCache[ expr + \" \" ] &&\n\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\t\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t\t// fragment in IE 9\n\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch (e) {}\n\t}\n\n\treturn Sizzle( expr, document, null, [ elem ] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\t// Set document vars if needed\n\tif ( ( context.ownerDocument || context ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\t\t// Don't get fooled by Object.prototype properties (jQuery #13807)\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\tundefined;\n\n\treturn val !== undefined ?\n\t\tval :\n\t\tsupport.attributes || !documentIsHTML ?\n\t\t\telem.getAttribute( name ) :\n\t\t\t(val = elem.getAttributeNode(name)) && val.specified ?\n\t\t\t\tval.value :\n\t\t\t\tnull;\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n/**\n * Document sorting and removing duplicates\n * @param {ArrayLike} results\n */\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;\n\tsortInput = !support.sortStable && results.slice( 0 );\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( (elem = results[i++]) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\t// Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;\n\n\treturn results;\n};\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\t\t// If no nodeType, this is expected to be an array\n\t\twhile ( (node = elem[i++]) ) {\n\t\t\t// Do not traverse comment nodes\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\t\t// Use textContent for elements\n\t\t// innerText usage removed for consistency of new lines (jQuery #11153)\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\t\t\t// Traverse its children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\t// Do not include comment or processing instruction nodes\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tattrHandle: {},\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[1] = match[1].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[3] = ( match[3] || match[4] || match[5] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[2] === \"~=\" ) {\n\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[1] = match[1].toLowerCase();\n\n\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[3] ) {\n\t\t\t\t\tSizzle.error( match[0] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );\n\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );\n\n\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[3] ) {\n\t\t\t\tSizzle.error( match[0] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[6] && match[2];\n\n\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[3] ) {\n\t\t\t\tmatch[2] = match[4] || match[5] || \"\";\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t(excess = tokenize( unquoted, true )) &&\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[0] = match[0].slice( 0, excess );\n\t\t\t\tmatch[2] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeNameSelector ) {\n\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\tfunction() { return true; } :\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\n\t\t\t\tclassCache( className, function( elem ) {\n\t\t\t\t\treturn pattern.test( typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== \"undefined\" && elem.getAttribute(\"class\") || \"\" );\n\t\t\t\t});\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tvar cache, uniqueCache, outerCache, node, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType,\n\t\t\t\t\t\tdiff = false;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) {\n\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\n\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\tnode = parent;\n\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\tdiff = nodeIndex && cache[ 2 ];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\t\tdiff = nodeIndex;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// xml :nth-child(...)\n\t\t\t\t\t\t\t// or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t\tif ( diff === false ) {\n\t\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t\tif ( ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) &&\n\t\t\t\t\t\t\t\t\t\t++diff ) {\n\n\t\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as Sizzle does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction(function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf( seed, matched[i] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\t\t// Potentially complex pseudos\n\t\t\"not\": markFunction(function( selector ) {\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\n\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}) :\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tinput[0] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\t\t\t\t\t// Don't keep the element (issue #299)\n\t\t\t\t\tinput[0] = null;\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t}),\n\n\t\t\"has\": markFunction(function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t}),\n\n\t\t\"contains\": markFunction(function( text ) {\n\t\t\ttext = text.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t}),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\"lang\": markFunction( function( lang ) {\n\t\t\t// lang value must be a valid identifier\n\t\t\tif ( !ridentifier.test(lang || \"\") ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( (elemLang = documentIsHTML ?\n\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}),\n\n\t\t// Miscellaneous\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n\t\t},\n\n\t\t// Boolean properties\n\t\t\"enabled\": function( elem ) {\n\t\t\treturn elem.disabled === false;\n\t\t},\n\n\t\t\"disabled\": function( elem ) {\n\t\t\treturn elem.disabled === true;\n\t\t},\n\n\t\t\"checked\": function( elem ) {\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\t\"empty\": function( elem ) {\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n\t\t\t//   but not by others (comment: 8; processing instruction: 7; etc.)\n\t\t\t// nodeType < 6 works because attributes (2) do not appear as children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeType < 6 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\n\t\t\t\t// Support: IE<8\n\t\t\t\t// New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\" );\n\t\t},\n\n\t\t// Position-in-collection\n\t\t\"first\": createPositionalPseudo(function() {\n\t\t\treturn [ 0 ];\n\t\t}),\n\n\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t}),\n\n\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t}),\n\n\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t})\n\t}\n};\n\nExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nsetFilters.prototype = Expr.filters = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\ntokenize = Sizzle.tokenize = function( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\n\t\t\tif ( match ) {\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( (tokens = []) );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( (match = rcombinators.exec( soFar )) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push({\n\t\t\t\tvalue: matched,\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[0].replace( rtrim, \" \" )\n\t\t\t});\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\n\t\t\t\t(match = preFilters[ type ]( match ))) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push({\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t});\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\t\t\t// Cache the tokens\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n};\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[i].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tcheckNonElements = base && dir === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar oldCache, uniqueCache, outerCache,\n\t\t\t\tnewCache = [ dirruns, doneName ];\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});\n\n\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\tuniqueCache = outerCache[ elem.uniqueID ] || (outerCache[ elem.uniqueID ] = {});\n\n\t\t\t\t\t\tif ( (oldCache = uniqueCache[ dir ]) &&\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n\n\t\t\t\t\t\t\t// Assign to newCache so results back-propagate to previous elements\n\t\t\t\t\t\t\treturn (newCache[ 2 ] = oldCache[ 2 ]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Reuse newcache so results back-propagate to previous elements\n\t\t\t\t\t\t\tuniqueCache[ dir ] = newCache;\n\n\t\t\t\t\t\t\t// A match means we're done; a fail means we have to keep checking\n\t\t\t\t\t\t\tif ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[0];\n}\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[i], results );\n\t}\n\treturn results;\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (elem = unmatched[i]) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction(function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t[] :\n\n\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\t// Find primary matches\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( (elem = temp[i]) ) {\n\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( (elem = matcherOut[i]) &&\n\t\t\t\t\t\t(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {\n\n\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[0].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\tvar ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t(checkContext = context).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\t\t\t// Avoid hanging onto element (issue #299)\n\t\t\tcheckContext = null;\n\t\t\treturn ret;\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\n\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector(\n\t\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\t\t\t\t\t\ttokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" })\n\t\t\t\t\t).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\tvar bySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\tsetMatched = [],\n\t\t\t\tcontextBackup = outermostContext,\n\t\t\t\t// We must always have either seed elements or outermost context\n\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", outermost ),\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),\n\t\t\t\tlen = elems.length;\n\n\t\t\tif ( outermost ) {\n\t\t\t\toutermostContext = context === document || context || outermost;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Support: IE<9, Safari\n\t\t\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n\t\t\tfor ( ; i !== len && (elem = elems[i]) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\tif ( !context && elem.ownerDocument !== document ) {\n\t\t\t\t\t\tsetDocument( elem );\n\t\t\t\t\t\txml = !documentIsHTML;\n\t\t\t\t\t}\n\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {\n\t\t\t\t\t\tif ( matcher( elem, context || document, xml) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( (elem = !matcher && elem) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// `i` is now the count of elements visited above, and adding it to `matchedCount`\n\t\t\t// makes the latter nonnegative.\n\t\t\tmatchedCount += i;\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\t// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`\n\t\t\t// equals `i`), unless we didn't visit _any_ elements in the above loop because we have\n\t\t\t// no element matchers and no seed.\n\t\t\t// Incrementing an initially-string \"0\" `i` allows `i` to remain a string only in that\n\t\t\t// case, which will result in a \"00\" `matchedCount` that differs from `i` but is also\n\t\t\t// numerically zero.\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\n\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !match ) {\n\t\t\tmatch = tokenize( selector );\n\t\t}\n\t\ti = match.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( match[i] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\n\n\t\t// Save selector and tokenization\n\t\tcached.selector = selector;\n\t}\n\treturn cached;\n};\n\n/**\n * A low-level selection function that works with Sizzle's compiled\n *  selector functions\n * @param {String|Function} selector A selector or a pre-compiled\n *  selector function built with Sizzle.compile\n * @param {Element} context\n * @param {Array} [results]\n * @param {Array} [seed] A set of elements to match against\n */\nselect = Sizzle.select = function( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tcompiled = typeof selector === \"function\" && selector,\n\t\tmatch = !seed && tokenize( (selector = compiled.selector || selector) );\n\n\tresults = results || [];\n\n\t// Try to minimize operations if there is only one selector in the list and no seed\n\t// (the latter of which guarantees us context)\n\tif ( match.length === 1 ) {\n\n\t\t// Reduce context if the leading compound selector is an ID\n\t\ttokens = match[0] = match[0].slice( 0 );\n\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\n\t\t\t\tsupport.getById && context.nodeType === 9 && documentIsHTML &&\n\t\t\t\tExpr.relative[ tokens[1].type ] ) {\n\n\t\t\tcontext = ( Expr.find[\"ID\"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];\n\t\t\tif ( !context ) {\n\t\t\t\treturn results;\n\n\t\t\t// Precompiled matchers will still verify ancestry, so step up a level\n\t\t\t} else if ( compiled ) {\n\t\t\t\tcontext = context.parentNode;\n\t\t\t}\n\n\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t}\n\n\t\t// Fetch a seed set for right-to-left matching\n\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;\n\t\twhile ( i-- ) {\n\t\t\ttoken = tokens[i];\n\n\t\t\t// Abort if we hit a combinator\n\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( (find = Expr.find[ type ]) ) {\n\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\tif ( (seed = find(\n\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),\n\t\t\t\t\trsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context\n\t\t\t\t)) ) {\n\n\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function if one is not provided\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\t( compiled || compile( selector, match ) )(\n\t\tseed,\n\t\tcontext,\n\t\t!documentIsHTML,\n\t\tresults,\n\t\t!context || rsibling.test( selector ) && testContext( context.parentNode ) || context\n\t);\n\treturn results;\n};\n\n// One-time assignments\n\n// Sort stability\nsupport.sortStable = expando.split(\"\").sort( sortOrder ).join(\"\") === expando;\n\n// Support: Chrome 14-35+\n// Always assume duplicates if they aren't passed to the comparison function\nsupport.detectDuplicates = !!hasDuplicate;\n\n// Initialize against the default document\nsetDocument();\n\n// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n// Detached nodes confoundingly follow *each other*\nsupport.sortDetached = assert(function( div1 ) {\n\t// Should return 1, but returns 4 (following)\n\treturn div1.compareDocumentPosition( document.createElement(\"div\") ) & 1;\n});\n\n// Support: IE<8\n// Prevent attribute/property \"interpolation\"\n// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !assert(function( div ) {\n\tdiv.innerHTML = \"<a href='#'></a>\";\n\treturn div.firstChild.getAttribute(\"href\") === \"#\" ;\n}) ) {\n\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n\t\tif ( !isXML ) {\n\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use defaultValue in place of getAttribute(\"value\")\nif ( !support.attributes || !assert(function( div ) {\n\tdiv.innerHTML = \"<input/>\";\n\tdiv.firstChild.setAttribute( \"value\", \"\" );\n\treturn div.firstChild.getAttribute( \"value\" ) === \"\";\n}) ) {\n\taddHandle( \"value\", function( elem, name, isXML ) {\n\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\treturn elem.defaultValue;\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use getAttributeNode to fetch booleans when getAttribute lies\nif ( !assert(function( div ) {\n\treturn div.getAttribute(\"disabled\") == null;\n}) ) {\n\taddHandle( booleans, function( elem, name, isXML ) {\n\t\tvar val;\n\t\tif ( !isXML ) {\n\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\n\t\t\t\t\t(val = elem.getAttributeNode( name )) && val.specified ?\n\t\t\t\t\tval.value :\n\t\t\t\tnull;\n\t\t}\n\t});\n}\n\nreturn Sizzle;\n\n})( window );\n\n\n\njQuery.find = Sizzle;\njQuery.expr = Sizzle.selectors;\njQuery.expr[ \":\" ] = jQuery.expr.pseudos;\njQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;\njQuery.text = Sizzle.getText;\njQuery.isXMLDoc = Sizzle.isXML;\njQuery.contains = Sizzle.contains;\n\n\n\nvar dir = function( elem, dir, until ) {\n\tvar matched = [],\n\t\ttruncate = until !== undefined;\n\n\twhile ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {\n\t\tif ( elem.nodeType === 1 ) {\n\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatched.push( elem );\n\t\t}\n\t}\n\treturn matched;\n};\n\n\nvar siblings = function( n, elem ) {\n\tvar matched = [];\n\n\tfor ( ; n; n = n.nextSibling ) {\n\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\tmatched.push( n );\n\t\t}\n\t}\n\n\treturn matched;\n};\n\n\nvar rneedsContext = jQuery.expr.match.needsContext;\n\nvar rsingleTag = ( /^<([\\w-]+)\\s*\\/?>(?:<\\/\\1>|)$/ );\n\n\n\nvar risSimple = /^.[^:#\\[\\.,]*$/;\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, not ) {\n\tif ( jQuery.isFunction( qualifier ) ) {\n\t\treturn jQuery.grep( elements, function( elem, i ) {\n\t\t\t/* jshint -W018 */\n\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n\t\t} );\n\n\t}\n\n\tif ( qualifier.nodeType ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) !== not;\n\t\t} );\n\n\t}\n\n\tif ( typeof qualifier === \"string\" ) {\n\t\tif ( risSimple.test( qualifier ) ) {\n\t\t\treturn jQuery.filter( qualifier, elements, not );\n\t\t}\n\n\t\tqualifier = jQuery.filter( qualifier, elements );\n\t}\n\n\treturn jQuery.grep( elements, function( elem ) {\n\t\treturn ( jQuery.inArray( elem, qualifier ) > -1 ) !== not;\n\t} );\n}\n\njQuery.filter = function( expr, elems, not ) {\n\tvar elem = elems[ 0 ];\n\n\tif ( not ) {\n\t\texpr = \":not(\" + expr + \")\";\n\t}\n\n\treturn elems.length === 1 && elem.nodeType === 1 ?\n\t\tjQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :\n\t\tjQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n\t\t\treturn elem.nodeType === 1;\n\t\t} ) );\n};\n\njQuery.fn.extend( {\n\tfind: function( selector ) {\n\t\tvar i,\n\t\t\tret = [],\n\t\t\tself = this,\n\t\t\tlen = self.length;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\treturn this.pushStack( jQuery( selector ).filter( function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} ) );\n\t\t}\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, self[ i ], ret );\n\t\t}\n\n\t\t// Needed because $( selector, context ) becomes $( context ).find( selector )\n\t\tret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );\n\t\tret.selector = this.selector ? this.selector + \" \" + selector : selector;\n\t\treturn ret;\n\t},\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], false ) );\n\t},\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], true ) );\n\t},\n\tis: function( selector ) {\n\t\treturn !!winnow(\n\t\t\tthis,\n\n\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n\t\t\t\tjQuery( selector ) :\n\t\t\t\tselector || [],\n\t\t\tfalse\n\t\t).length;\n\t}\n} );\n\n\n// Initialize a jQuery object\n\n\n// A central reference to the root jQuery(document)\nvar rootjQuery,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\n\t// Strict HTML recognition (#11290: must start with <)\n\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,\n\n\tinit = jQuery.fn.init = function( selector, context, root ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// init accepts an alternate rootjQuery\n\t\t// so migrate can support jQuery.sub (gh-2101)\n\t\troot = root || rootjQuery;\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector.charAt( 0 ) === \"<\" &&\n\t\t\t\tselector.charAt( selector.length - 1 ) === \">\" &&\n\t\t\t\tselector.length >= 3 ) {\n\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && ( match[ 1 ] || !context ) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[ 1 ] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[ 0 ] : context;\n\n\t\t\t\t\t// scripts is true for back-compat\n\t\t\t\t\t// Intentionally let the error be thrown if parseHTML is not present\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[ 1 ],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( jQuery.isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[ 2 ] );\n\n\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t\t// nodes that are no longer in the document #6963\n\t\t\t\t\tif ( elem && elem.parentNode ) {\n\n\t\t\t\t\t\t// Handle the case where IE and Opera return items\n\t\t\t\t\t\t// by name instead of ID\n\t\t\t\t\t\tif ( elem.id !== match[ 2 ] ) {\n\t\t\t\t\t\t\treturn rootjQuery.find( selector );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Otherwise, we inject the element directly into the jQuery object\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t\tthis[ 0 ] = elem;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.context = document;\n\t\t\t\t\tthis.selector = selector;\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || root ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis.context = this[ 0 ] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( jQuery.isFunction( selector ) ) {\n\t\t\treturn typeof root.ready !== \"undefined\" ?\n\t\t\t\troot.ready( selector ) :\n\n\t\t\t\t// Execute immediately if ready is not present\n\t\t\t\tselector( jQuery );\n\t\t}\n\n\t\tif ( selector.selector !== undefined ) {\n\t\t\tthis.selector = selector.selector;\n\t\t\tthis.context = selector.context;\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t};\n\n// Give the init function the jQuery prototype for later instantiation\ninit.prototype = jQuery.fn;\n\n// Initialize central reference\nrootjQuery = jQuery( document );\n\n\nvar rparentsprev = /^(?:parents|prev(?:Until|All))/,\n\n\t// methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.fn.extend( {\n\thas: function( target ) {\n\t\tvar i,\n\t\t\ttargets = jQuery( target, this ),\n\t\t\tlen = targets.length;\n\n\t\treturn this.filter( function() {\n\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[ i ] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tmatched = [],\n\t\t\tpos = rneedsContext.test( selectors ) || typeof selectors !== \"string\" ?\n\t\t\t\tjQuery( selectors, context || this.context ) :\n\t\t\t\t0;\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tfor ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {\n\n\t\t\t\t// Always skip document fragments\n\t\t\t\tif ( cur.nodeType < 11 && ( pos ?\n\t\t\t\t\tpos.index( cur ) > -1 :\n\n\t\t\t\t\t// Don't pass non-elements to Sizzle\n\t\t\t\t\tcur.nodeType === 1 &&\n\t\t\t\t\t\tjQuery.find.matchesSelector( cur, selectors ) ) ) {\n\n\t\t\t\t\tmatched.push( cur );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );\n\t},\n\n\t// Determine the position of an element within\n\t// the matched set of elements\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn jQuery.inArray( this[ 0 ], jQuery( elem ) );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn jQuery.inArray(\n\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[ 0 ] : elem, this );\n\t},\n\n\tadd: function( selector, context ) {\n\t\treturn this.pushStack(\n\t\t\tjQuery.uniqueSort(\n\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n\t\t\t)\n\t\t);\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t}\n} );\n\nfunction sibling( cur, dir ) {\n\tdo {\n\t\tcur = cur[ dir ];\n\t} while ( cur && cur.nodeType !== 1 );\n\n\treturn cur;\n}\n\n// Use of jQuery.browser is deprecated.\n// It's included for backwards compatibility and plugins,\n// although they should work to migrate away.\nvar userAgent = navigator.userAgent.toLowerCase();\n\n// Figure out what browser is being used\njQuery.browser = {\n    version: (userAgent.match(/.+(?:rv|it|ra|ie)[\\/: ]([\\d.]+)/) || [0, '0'])[1],\n    safari: /webkit/.test(userAgent),\n    opera: /opera/.test(userAgent),\n    msie: /msie/.test(userAgent) && !/opera/.test(userAgent),\n    mozilla: /mozilla/.test(userAgent) && !/(compatible|webkit)/.test(userAgent)\n};\n\njQuery.each( {\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn siblings( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn siblings( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n\t\treturn jQuery.nodeName( elem, \"iframe\" ) ?\n\t\t\telem.contentDocument || elem.contentWindow.document :\n\t\t\tjQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar ret = jQuery.map( this, fn, until );\n\n\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tret = jQuery.filter( selector, ret );\n\t\t}\n\n\t\tif ( this.length > 1 ) {\n\n\t\t\t// Remove duplicates\n\t\t\tif ( !guaranteedUnique[ name ] ) {\n\t\t\t\tret = jQuery.uniqueSort( ret );\n\t\t\t}\n\n\t\t\t// Reverse order for parents* and prev-derivatives\n\t\t\tif ( rparentsprev.test( name ) ) {\n\t\t\t\tret = ret.reverse();\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n} );\nvar rnotwhite = ( /\\S+/g );\n\n\n\n// Convert String-formatted options into Object-formatted ones\nfunction createOptions( options ) {\n\tvar object = {};\n\tjQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t} );\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\tcreateOptions( options ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Flag to know if list is currently firing\n\t\tfiring,\n\n\t\t// Last fire value for non-forgettable lists\n\t\tmemory,\n\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\n\t\t// Flag to prevent firing\n\t\tlocked,\n\n\t\t// Actual callback list\n\t\tlist = [],\n\n\t\t// Queue of execution data for repeatable lists\n\t\tqueue = [],\n\n\t\t// Index of currently firing callback (modified by add/remove as needed)\n\t\tfiringIndex = -1,\n\n\t\t// Fire callbacks\n\t\tfire = function() {\n\n\t\t\t// Enforce single-firing\n\t\t\tlocked = options.once;\n\n\t\t\t// Execute callbacks for all pending executions,\n\t\t\t// respecting firingIndex overrides and runtime changes\n\t\t\tfired = firing = true;\n\t\t\tfor ( ; queue.length; firingIndex = -1 ) {\n\t\t\t\tmemory = queue.shift();\n\t\t\t\twhile ( ++firingIndex < list.length ) {\n\n\t\t\t\t\t// Run callback and check for early termination\n\t\t\t\t\tif ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&\n\t\t\t\t\t\toptions.stopOnFalse ) {\n\n\t\t\t\t\t\t// Jump to end and forget the data so .add doesn't re-fire\n\t\t\t\t\t\tfiringIndex = list.length;\n\t\t\t\t\t\tmemory = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Forget the data if we're done with it\n\t\t\tif ( !options.memory ) {\n\t\t\t\tmemory = false;\n\t\t\t}\n\n\t\t\tfiring = false;\n\n\t\t\t// Clean up if we're done firing for good\n\t\t\tif ( locked ) {\n\n\t\t\t\t// Keep an empty list if we have data for future add calls\n\t\t\t\tif ( memory ) {\n\t\t\t\t\tlist = [];\n\n\t\t\t\t// Otherwise, this object is spent\n\t\t\t\t} else {\n\t\t\t\t\tlist = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Actual Callbacks object\n\t\tself = {\n\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\n\t\t\t\t\t// If we have memory from a past run, we should fire after adding\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfiringIndex = list.length - 1;\n\t\t\t\t\t\tqueue.push( memory );\n\t\t\t\t\t}\n\n\t\t\t\t\t( function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tif ( jQuery.isFunction( arg ) ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && jQuery.type( arg ) !== \"string\" ) {\n\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} )( arguments );\n\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\tvar index;\n\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\tlist.splice( index, 1 );\n\n\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ?\n\t\t\t\t\tjQuery.inArray( fn, list ) > -1 :\n\t\t\t\t\tlist.length > 0;\n\t\t\t},\n\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Disable .fire and .add\n\t\t\t// Abort any current/pending executions\n\t\t\t// Clear all callbacks and values\n\t\t\tdisable: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tlist = memory = \"\";\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\n\t\t\t// Disable .fire\n\t\t\t// Also disable .add unless we have memory (since it would have no effect)\n\t\t\t// Abort any pending executions\n\t\t\tlock: function() {\n\t\t\t\tlocked = true;\n\t\t\t\tif ( !memory ) {\n\t\t\t\t\tself.disable();\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tlocked: function() {\n\t\t\t\treturn !!locked;\n\t\t\t},\n\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\tif ( !locked ) {\n\t\t\t\t\targs = args || [];\n\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\t\tqueue.push( args );\n\t\t\t\t\tif ( !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\n\n\njQuery.extend( {\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\n\t\t\t\t// action, add listener, listener list, final state\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks( \"once memory\" ), \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks( \"once memory\" ), \"rejected\" ],\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks( \"memory\" ) ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\tthen: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\t\t\t\t\tvar fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];\n\n\t\t\t\t\t\t\t// deferred[ done | fail | progress ] for forwarding actions to newDefer\n\t\t\t\t\t\t\tdeferred[ tuple[ 1 ] ]( function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && jQuery.isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify )\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ](\n\t\t\t\t\t\t\t\t\t\tthis === promise ? newDefer.promise() : this,\n\t\t\t\t\t\t\t\t\t\tfn ? [ returned ] : arguments\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Keep pipe for back-compat\n\t\tpromise.pipe = promise.then;\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 3 ];\n\n\t\t\t// promise[ done | fail | progress ] = list.add\n\t\t\tpromise[ tuple[ 1 ] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add( function() {\n\n\t\t\t\t\t// state = [ resolved | rejected ]\n\t\t\t\t\tstate = stateString;\n\n\t\t\t\t// [ reject_list | resolve_list ].disable; progress_list.lock\n\t\t\t\t}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );\n\t\t\t}\n\n\t\t\t// deferred[ resolve | reject | notify ]\n\t\t\tdeferred[ tuple[ 0 ] ] = function() {\n\t\t\t\tdeferred[ tuple[ 0 ] + \"With\" ]( this === deferred ? promise : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\t\t\tdeferred[ tuple[ 0 ] + \"With\" ] = list.fireWith;\n\t\t} );\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( subordinate /* , ..., subordinateN */ ) {\n\t\tvar i = 0,\n\t\t\tresolveValues = slice.call( arguments ),\n\t\t\tlength = resolveValues.length,\n\n\t\t\t// the count of uncompleted subordinates\n\t\t\tremaining = length !== 1 ||\n\t\t\t\t( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,\n\n\t\t\t// the master Deferred.\n\t\t\t// If resolveValues consist of only a single Deferred, just use that.\n\t\t\tdeferred = remaining === 1 ? subordinate : jQuery.Deferred(),\n\n\t\t\t// Update function for both resolve and progress values\n\t\t\tupdateFunc = function( i, contexts, values ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tcontexts[ i ] = this;\n\t\t\t\t\tvalues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n\t\t\t\t\tif ( values === progressValues ) {\n\t\t\t\t\t\tdeferred.notifyWith( contexts, values );\n\n\t\t\t\t\t} else if ( !( --remaining ) ) {\n\t\t\t\t\t\tdeferred.resolveWith( contexts, values );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tprogressValues, progressContexts, resolveContexts;\n\n\t\t// add listeners to Deferred subordinates; treat others as resolved\n\t\tif ( length > 1 ) {\n\t\t\tprogressValues = new Array( length );\n\t\t\tprogressContexts = new Array( length );\n\t\t\tresolveContexts = new Array( length );\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {\n\t\t\t\t\tresolveValues[ i ].promise()\n\t\t\t\t\t\t.progress( updateFunc( i, progressContexts, progressValues ) )\n\t\t\t\t\t\t.done( updateFunc( i, resolveContexts, resolveValues ) )\n\t\t\t\t\t\t.fail( deferred.reject );\n\t\t\t\t} else {\n\t\t\t\t\t--remaining;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// if we're not waiting on anything, resolve the master\n\t\tif ( !remaining ) {\n\t\t\tdeferred.resolveWith( resolveContexts, resolveValues );\n\t\t}\n\n\t\treturn deferred.promise();\n\t}\n} );\n\n\n// The deferred used on DOM ready\nvar readyList;\n\njQuery.fn.ready = function( fn ) {\n\n\t// Add the callback\n\tjQuery.ready.promise().done( fn );\n\n\treturn this;\n};\n\njQuery.extend( {\n\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See #6781\n\treadyWait: 1,\n\n\t// Hold (or release) the ready event\n\tholdReady: function( hold ) {\n\t\tif ( hold ) {\n\t\t\tjQuery.readyWait++;\n\t\t} else {\n\t\t\tjQuery.ready( true );\n\t\t}\n\t},\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\n\t\t// Trigger any bound ready events\n\t\tif ( jQuery.fn.triggerHandler ) {\n\t\t\tjQuery( document ).triggerHandler( \"ready\" );\n\t\t\tjQuery( document ).off( \"ready\" );\n\t\t}\n\t}\n} );\n\n/**\n * Clean-up method for dom ready events\n */\nfunction detach() {\n\tif ( document.addEventListener ) {\n\t\tdocument.removeEventListener( \"DOMContentLoaded\", completed );\n\t\twindow.removeEventListener( \"load\", completed );\n\n\t} else {\n\t\tdocument.detachEvent( \"onreadystatechange\", completed );\n\t\twindow.detachEvent( \"onload\", completed );\n\t}\n}\n\n/**\n * The ready event handler and self cleanup method\n */\nfunction completed() {\n\n\t// readyState === \"complete\" is good enough for us to call the dom ready in oldIE\n\tif ( document.addEventListener ||\n\t\twindow.event.type === \"load\" ||\n\t\tdocument.readyState === \"complete\" ) {\n\n\t\tdetach();\n\t\tjQuery.ready();\n\t}\n}\n\njQuery.ready.promise = function( obj ) {\n\tif ( !readyList ) {\n\n\t\treadyList = jQuery.Deferred();\n\n\t\t// Catch cases where $(document).ready() is called\n\t\t// after the browser event has already occurred.\n\t\t// Support: IE6-10\n\t\t// Older IE sometimes signals \"interactive\" too soon\n\t\tif ( document.readyState === \"complete\" ||\n\t\t\t( document.readyState !== \"loading\" && !document.documentElement.doScroll ) ) {\n\n\t\t\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\t\t\twindow.setTimeout( jQuery.ready );\n\n\t\t// Standards-based browsers support DOMContentLoaded\n\t\t} else if ( document.addEventListener ) {\n\n\t\t\t// Use the handy event callback\n\t\t\tdocument.addEventListener( \"DOMContentLoaded\", completed );\n\n\t\t\t// A fallback to window.onload, that will always work\n\t\t\twindow.addEventListener( \"load\", completed );\n\n\t\t// If IE event model is used\n\t\t} else {\n\n\t\t\t// Ensure firing before onload, maybe late but safe also for iframes\n\t\t\tdocument.attachEvent( \"onreadystatechange\", completed );\n\n\t\t\t// A fallback to window.onload, that will always work\n\t\t\twindow.attachEvent( \"onload\", completed );\n\n\t\t\t// If IE and not a frame\n\t\t\t// continually check to see if the document is ready\n\t\t\tvar top = false;\n\n\t\t\ttry {\n\t\t\t\ttop = window.frameElement == null && document.documentElement;\n\t\t\t} catch ( e ) {}\n\n\t\t\tif ( top && top.doScroll ) {\n\t\t\t\t( function doScrollCheck() {\n\t\t\t\t\tif ( !jQuery.isReady ) {\n\n\t\t\t\t\t\ttry {\n\n\t\t\t\t\t\t\t// Use the trick by Diego Perini\n\t\t\t\t\t\t\t// http://javascript.nwbox.com/IEContentLoaded/\n\t\t\t\t\t\t\ttop.doScroll( \"left\" );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn window.setTimeout( doScrollCheck, 50 );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// detach all dom ready events\n\t\t\t\t\t\tdetach();\n\n\t\t\t\t\t\t// and execute any waiting functions\n\t\t\t\t\t\tjQuery.ready();\n\t\t\t\t\t}\n\t\t\t\t} )();\n\t\t\t}\n\t\t}\n\t}\n\treturn readyList.promise( obj );\n};\n\n// Kick off the DOM ready check even if the user does not\njQuery.ready.promise();\n\n\n\n\n// Support: IE<9\n// Iteration over object's inherited properties before its own\nvar i;\nfor ( i in jQuery( support ) ) {\n\tbreak;\n}\nsupport.ownFirst = i === \"0\";\n\n// Note: most support tests are defined in their respective modules.\n// false until the test is run\nsupport.inlineBlockNeedsLayout = false;\n\n// Execute ASAP in case we need to set body.style.zoom\njQuery( function() {\n\n\t// Minified: var a,b,c,d\n\tvar val, div, body, container;\n\n\tbody = document.getElementsByTagName( \"body\" )[ 0 ];\n\tif ( !body || !body.style ) {\n\n\t\t// Return for frameset docs that don't have a body\n\t\treturn;\n\t}\n\n\t// Setup\n\tdiv = document.createElement( \"div\" );\n\tcontainer = document.createElement( \"div\" );\n\tcontainer.style.cssText = \"position:absolute;border:0;width:0;height:0;top:0;left:-9999px\";\n\tbody.appendChild( container ).appendChild( div );\n\n\tif ( typeof div.style.zoom !== \"undefined\" ) {\n\n\t\t// Support: IE<8\n\t\t// Check if natively block-level elements act like inline-block\n\t\t// elements when setting their display to 'inline' and giving\n\t\t// them layout\n\t\tdiv.style.cssText = \"display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1\";\n\n\t\tsupport.inlineBlockNeedsLayout = val = div.offsetWidth === 3;\n\t\tif ( val ) {\n\n\t\t\t// Prevent IE 6 from affecting layout for positioned elements #11048\n\t\t\t// Prevent IE from shrinking the body in IE 7 mode #12869\n\t\t\t// Support: IE<8\n\t\t\tbody.style.zoom = 1;\n\t\t}\n\t}\n\n\tbody.removeChild( container );\n} );\n\n\n( function() {\n\tvar div = document.createElement( \"div\" );\n\n\t// Support: IE<9\n\tsupport.deleteExpando = true;\n\ttry {\n\t\tdelete div.test;\n\t} catch ( e ) {\n\t\tsupport.deleteExpando = false;\n\t}\n\n\t// Null elements to avoid leaks in IE.\n\tdiv = null;\n} )();\nvar acceptData = function( elem ) {\n\tvar noData = jQuery.noData[ ( elem.nodeName + \" \" ).toLowerCase() ],\n\t\tnodeType = +elem.nodeType || 1;\n\n\t// Do not set data on non-element DOM nodes because it will not be cleared (#8335).\n\treturn nodeType !== 1 && nodeType !== 9 ?\n\t\tfalse :\n\n\t\t// Nodes accept data unless otherwise specified; rejection can be conditional\n\t\t!noData || noData !== true && elem.getAttribute( \"classid\" ) === noData;\n};\n\n\n\n\nvar rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\n\trmultiDash = /([A-Z])/g;\n\nfunction dataAttr( elem, key, data ) {\n\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\n\t\tvar name = \"data-\" + key.replace( rmultiDash, \"-$1\" ).toLowerCase();\n\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = data === \"true\" ? true :\n\t\t\t\t\tdata === \"false\" ? false :\n\t\t\t\t\tdata === \"null\" ? null :\n\n\t\t\t\t\t// Only convert to a number if it doesn't change the string\n\t\t\t\t\t+data + \"\" === data ? +data :\n\t\t\t\t\trbrace.test( data ) ? jQuery.parseJSON( data ) :\n\t\t\t\t\tdata;\n\t\t\t} catch ( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tjQuery.data( elem, key, data );\n\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\n\treturn data;\n}\n\n// checks a cache object for emptiness\nfunction isEmptyDataObject( obj ) {\n\tvar name;\n\tfor ( name in obj ) {\n\n\t\t// if the public data object is empty, the private is still empty\n\t\tif ( name === \"data\" && jQuery.isEmptyObject( obj[ name ] ) ) {\n\t\t\tcontinue;\n\t\t}\n\t\tif ( name !== \"toJSON\" ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction internalData( elem, name, data, pvt /* Internal Use Only */ ) {\n\tif ( !acceptData( elem ) ) {\n\t\treturn;\n\t}\n\n\tvar ret, thisCache,\n\t\tinternalKey = jQuery.expando,\n\n\t\t// We have to handle DOM nodes and JS objects differently because IE6-7\n\t\t// can't GC object references properly across the DOM-JS boundary\n\t\tisNode = elem.nodeType,\n\n\t\t// Only DOM nodes need the global jQuery cache; JS object data is\n\t\t// attached directly to the object so GC can occur automatically\n\t\tcache = isNode ? jQuery.cache : elem,\n\n\t\t// Only defining an ID for JS objects if its cache already exists allows\n\t\t// the code to shortcut on the same path as a DOM node with no cache\n\t\tid = isNode ? elem[ internalKey ] : elem[ internalKey ] && internalKey;\n\n\t// Avoid doing any more work than we need to when trying to get data on an\n\t// object that has no data at all\n\tif ( ( !id || !cache[ id ] || ( !pvt && !cache[ id ].data ) ) &&\n\t\tdata === undefined && typeof name === \"string\" ) {\n\t\treturn;\n\t}\n\n\tif ( !id ) {\n\n\t\t// Only DOM nodes need a new unique ID for each element since their data\n\t\t// ends up in the global cache\n\t\tif ( isNode ) {\n\t\t\tid = elem[ internalKey ] = deletedIds.pop() || jQuery.guid++;\n\t\t} else {\n\t\t\tid = internalKey;\n\t\t}\n\t}\n\n\tif ( !cache[ id ] ) {\n\n\t\t// Avoid exposing jQuery metadata on plain JS objects when the object\n\t\t// is serialized using JSON.stringify\n\t\tcache[ id ] = isNode ? {} : { toJSON: jQuery.noop };\n\t}\n\n\t// An object can be passed to jQuery.data instead of a key/value pair; this gets\n\t// shallow copied over onto the existing cache\n\tif ( typeof name === \"object\" || typeof name === \"function\" ) {\n\t\tif ( pvt ) {\n\t\t\tcache[ id ] = jQuery.extend( cache[ id ], name );\n\t\t} else {\n\t\t\tcache[ id ].data = jQuery.extend( cache[ id ].data, name );\n\t\t}\n\t}\n\n\tthisCache = cache[ id ];\n\n\t// jQuery data() is stored in a separate object inside the object's internal data\n\t// cache in order to avoid key collisions between internal data and user-defined\n\t// data.\n\tif ( !pvt ) {\n\t\tif ( !thisCache.data ) {\n\t\t\tthisCache.data = {};\n\t\t}\n\n\t\tthisCache = thisCache.data;\n\t}\n\n\tif ( data !== undefined ) {\n\t\tthisCache[ jQuery.camelCase( name ) ] = data;\n\t}\n\n\t// Check for both converted-to-camel and non-converted data property names\n\t// If a data property was specified\n\tif ( typeof name === \"string\" ) {\n\n\t\t// First Try to find as-is property data\n\t\tret = thisCache[ name ];\n\n\t\t// Test for null|undefined property data\n\t\tif ( ret == null ) {\n\n\t\t\t// Try to find the camelCased property\n\t\t\tret = thisCache[ jQuery.camelCase( name ) ];\n\t\t}\n\t} else {\n\t\tret = thisCache;\n\t}\n\n\treturn ret;\n}\n\nfunction internalRemoveData( elem, name, pvt ) {\n\tif ( !acceptData( elem ) ) {\n\t\treturn;\n\t}\n\n\tvar thisCache, i,\n\t\tisNode = elem.nodeType,\n\n\t\t// See jQuery.data for more information\n\t\tcache = isNode ? jQuery.cache : elem,\n\t\tid = isNode ? elem[ jQuery.expando ] : jQuery.expando;\n\n\t// If there is already no cache entry for this object, there is no\n\t// purpose in continuing\n\tif ( !cache[ id ] ) {\n\t\treturn;\n\t}\n\n\tif ( name ) {\n\n\t\tthisCache = pvt ? cache[ id ] : cache[ id ].data;\n\n\t\tif ( thisCache ) {\n\n\t\t\t// Support array or space separated string names for data keys\n\t\t\tif ( !jQuery.isArray( name ) ) {\n\n\t\t\t\t// try the string as a key before any manipulation\n\t\t\t\tif ( name in thisCache ) {\n\t\t\t\t\tname = [ name ];\n\t\t\t\t} else {\n\n\t\t\t\t\t// split the camel cased version by spaces unless a key with the spaces exists\n\t\t\t\t\tname = jQuery.camelCase( name );\n\t\t\t\t\tif ( name in thisCache ) {\n\t\t\t\t\t\tname = [ name ];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tname = name.split( \" \" );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// If \"name\" is an array of keys...\n\t\t\t\t// When data is initially created, via (\"key\", \"val\") signature,\n\t\t\t\t// keys will be converted to camelCase.\n\t\t\t\t// Since there is no way to tell _how_ a key was added, remove\n\t\t\t\t// both plain key and camelCase key. #12786\n\t\t\t\t// This will only penalize the array argument path.\n\t\t\t\tname = name.concat( jQuery.map( name, jQuery.camelCase ) );\n\t\t\t}\n\n\t\t\ti = name.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tdelete thisCache[ name[ i ] ];\n\t\t\t}\n\n\t\t\t// If there is no data left in the cache, we want to continue\n\t\t\t// and let the cache object itself get destroyed\n\t\t\tif ( pvt ? !isEmptyDataObject( thisCache ) : !jQuery.isEmptyObject( thisCache ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t// See jQuery.data for more information\n\tif ( !pvt ) {\n\t\tdelete cache[ id ].data;\n\n\t\t// Don't destroy the parent cache unless the internal data object\n\t\t// had been the only thing left in it\n\t\tif ( !isEmptyDataObject( cache[ id ] ) ) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\t// Destroy the cache\n\tif ( isNode ) {\n\t\tjQuery.cleanData( [ elem ], true );\n\n\t// Use delete when supported for expandos or `cache` is not a window per isWindow (#10080)\n\t/* jshint eqeqeq: false */\n\t} else if ( support.deleteExpando || cache != cache.window ) {\n\t\t/* jshint eqeqeq: true */\n\t\tdelete cache[ id ];\n\n\t// When all else fails, undefined\n\t} else {\n\t\tcache[ id ] = undefined;\n\t}\n}\n\njQuery.extend( {\n\tcache: {},\n\n\t// The following elements (space-suffixed to avoid Object.prototype collisions)\n\t// throw uncatchable exceptions if you attempt to set expando properties\n\tnoData: {\n\t\t\"applet \": true,\n\t\t\"embed \": true,\n\n\t\t// ...but Flash objects (which have this classid) *can* handle expandos\n\t\t\"object \": \"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"\n\t},\n\n\thasData: function( elem ) {\n\t\telem = elem.nodeType ? jQuery.cache[ elem[ jQuery.expando ] ] : elem[ jQuery.expando ];\n\t\treturn !!elem && !isEmptyDataObject( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn internalData( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\treturn internalRemoveData( elem, name );\n\t},\n\n\t// For internal use only.\n\t_data: function( elem, name, data ) {\n\t\treturn internalData( elem, name, data, true );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\treturn internalRemoveData( elem, name, true );\n\t}\n} );\n\njQuery.fn.extend( {\n\tdata: function( key, value ) {\n\t\tvar i, name, data,\n\t\t\telem = this[ 0 ],\n\t\t\tattrs = elem && elem.attributes;\n\n\t\t// Special expections of .data basically thwart jQuery.access,\n\t\t// so implement the relevant behavior ourselves\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = jQuery.data( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !jQuery._data( elem, \"parsedAttrs\" ) ) {\n\t\t\t\t\ti = attrs.length;\n\t\t\t\t\twhile ( i-- ) {\n\n\t\t\t\t\t\t// Support: IE11+\n\t\t\t\t\t\t// The attrs elements can be null (#14894)\n\t\t\t\t\t\tif ( attrs[ i ] ) {\n\t\t\t\t\t\t\tname = attrs[ i ].name;\n\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n\t\t\t\t\t\t\t\tname = jQuery.camelCase( name.slice( 5 ) );\n\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tjQuery._data( elem, \"parsedAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tjQuery.data( this, key );\n\t\t\t} );\n\t\t}\n\n\t\treturn arguments.length > 1 ?\n\n\t\t\t// Sets one value\n\t\t\tthis.each( function() {\n\t\t\t\tjQuery.data( this, key, value );\n\t\t\t} ) :\n\n\t\t\t// Gets one value\n\t\t\t// Try to fetch any internally stored data first\n\t\t\telem ? dataAttr( elem, key, jQuery.data( elem, key ) ) : undefined;\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.removeData( this, key );\n\t\t} );\n\t}\n} );\n\n\njQuery.extend( {\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = jQuery._data( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || jQuery.isArray( data ) ) {\n\t\t\t\t\tqueue = jQuery._data( elem, type, jQuery.makeArray( data ) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// not intended for public consumption - generates a queueHooks object,\n\t// or returns the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn jQuery._data( elem, key ) || jQuery._data( elem, key, {\n\t\t\tempty: jQuery.Callbacks( \"once memory\" ).add( function() {\n\t\t\t\tjQuery._removeData( elem, type + \"queue\" );\n\t\t\t\tjQuery._removeData( elem, key );\n\t\t\t} )\n\t\t} );\n\t}\n} );\n\njQuery.fn.extend( {\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[ 0 ], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each( function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[ 0 ] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t} );\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t} );\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile ( i-- ) {\n\t\t\ttmp = jQuery._data( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n} );\n\n\n( function() {\n\tvar shrinkWrapBlocksVal;\n\n\tsupport.shrinkWrapBlocks = function() {\n\t\tif ( shrinkWrapBlocksVal != null ) {\n\t\t\treturn shrinkWrapBlocksVal;\n\t\t}\n\n\t\t// Will be changed later if needed.\n\t\tshrinkWrapBlocksVal = false;\n\n\t\t// Minified: var b,c,d\n\t\tvar div, body, container;\n\n\t\tbody = document.getElementsByTagName( \"body\" )[ 0 ];\n\t\tif ( !body || !body.style ) {\n\n\t\t\t// Test fired too early or in an unsupported environment, exit.\n\t\t\treturn;\n\t\t}\n\n\t\t// Setup\n\t\tdiv = document.createElement( \"div\" );\n\t\tcontainer = document.createElement( \"div\" );\n\t\tcontainer.style.cssText = \"position:absolute;border:0;width:0;height:0;top:0;left:-9999px\";\n\t\tbody.appendChild( container ).appendChild( div );\n\n\t\t// Support: IE6\n\t\t// Check if elements with layout shrink-wrap their children\n\t\tif ( typeof div.style.zoom !== \"undefined\" ) {\n\n\t\t\t// Reset CSS: box-sizing; display; margin; border\n\t\t\tdiv.style.cssText =\n\n\t\t\t\t// Support: Firefox<29, Android 2.3\n\t\t\t\t// Vendor-prefix box-sizing\n\t\t\t\t\"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;\" +\n\t\t\t\t\"box-sizing:content-box;display:block;margin:0;border:0;\" +\n\t\t\t\t\"padding:1px;width:1px;zoom:1\";\n\t\t\tdiv.appendChild( document.createElement( \"div\" ) ).style.width = \"5px\";\n\t\t\tshrinkWrapBlocksVal = div.offsetWidth !== 3;\n\t\t}\n\n\t\tbody.removeChild( container );\n\n\t\treturn shrinkWrapBlocksVal;\n\t};\n\n} )();\nvar pnum = ( /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/ ).source;\n\nvar rcssNum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" );\n\n\nvar cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n\nvar isHidden = function( elem, el ) {\n\n\t\t// isHidden might be called from jQuery#filter function;\n\t\t// in that case, element will be second argument\n\t\telem = el || elem;\n\t\treturn jQuery.css( elem, \"display\" ) === \"none\" ||\n\t\t\t!jQuery.contains( elem.ownerDocument, elem );\n\t};\n\n\n\nfunction adjustCSS( elem, prop, valueParts, tween ) {\n\tvar adjusted,\n\t\tscale = 1,\n\t\tmaxIterations = 20,\n\t\tcurrentValue = tween ?\n\t\t\tfunction() { return tween.cur(); } :\n\t\t\tfunction() { return jQuery.css( elem, prop, \"\" ); },\n\t\tinitial = currentValue(),\n\t\tunit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n\n\t\t// Starting value computation is required for potential unit mismatches\n\t\tinitialInUnit = ( jQuery.cssNumber[ prop ] || unit !== \"px\" && +initial ) &&\n\t\t\trcssNum.exec( jQuery.css( elem, prop ) );\n\n\tif ( initialInUnit && initialInUnit[ 3 ] !== unit ) {\n\n\t\t// Trust units reported by jQuery.css\n\t\tunit = unit || initialInUnit[ 3 ];\n\n\t\t// Make sure we update the tween properties later on\n\t\tvalueParts = valueParts || [];\n\n\t\t// Iteratively approximate from a nonzero starting point\n\t\tinitialInUnit = +initial || 1;\n\n\t\tdo {\n\n\t\t\t// If previous iteration zeroed out, double until we get *something*.\n\t\t\t// Use string for doubling so we don't accidentally see scale as unchanged below\n\t\t\tscale = scale || \".5\";\n\n\t\t\t// Adjust and apply\n\t\t\tinitialInUnit = initialInUnit / scale;\n\t\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\n\t\t// Update scale, tolerating zero or NaN from tween.cur()\n\t\t// Break the loop if scale is unchanged or perfect, or if we've just had enough.\n\t\t} while (\n\t\t\tscale !== ( scale = currentValue() / initial ) && scale !== 1 && --maxIterations\n\t\t);\n\t}\n\n\tif ( valueParts ) {\n\t\tinitialInUnit = +initialInUnit || +initial || 0;\n\n\t\t// Apply relative offset (+=/-=) if specified\n\t\tadjusted = valueParts[ 1 ] ?\n\t\t\tinitialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :\n\t\t\t+valueParts[ 2 ];\n\t\tif ( tween ) {\n\t\t\ttween.unit = unit;\n\t\t\ttween.start = initialInUnit;\n\t\t\ttween.end = adjusted;\n\t\t}\n\t}\n\treturn adjusted;\n}\n\n\n// Multifunctional method to get and set values of a collection\n// The value/s can optionally be executed if it's a function\nvar access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\tvar i = 0,\n\t\tlength = elems.length,\n\t\tbulk = key == null;\n\n\t// Sets many values\n\tif ( jQuery.type( key ) === \"object\" ) {\n\t\tchainable = true;\n\t\tfor ( i in key ) {\n\t\t\taccess( elems, fn, i, key[ i ], true, emptyGet, raw );\n\t\t}\n\n\t// Sets one value\n\t} else if ( value !== undefined ) {\n\t\tchainable = true;\n\n\t\tif ( !jQuery.isFunction( value ) ) {\n\t\t\traw = true;\n\t\t}\n\n\t\tif ( bulk ) {\n\n\t\t\t// Bulk operations run against the entire set\n\t\t\tif ( raw ) {\n\t\t\t\tfn.call( elems, value );\n\t\t\t\tfn = null;\n\n\t\t\t// ...except when executing function values\n\t\t\t} else {\n\t\t\t\tbulk = fn;\n\t\t\t\tfn = function( elem, key, value ) {\n\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( fn ) {\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tfn(\n\t\t\t\t\telems[ i ],\n\t\t\t\t\tkey,\n\t\t\t\t\traw ? value : value.call( elems[ i ], i, fn( elems[ i ], key ) )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn chainable ?\n\t\telems :\n\n\t\t// Gets\n\t\tbulk ?\n\t\t\tfn.call( elems ) :\n\t\t\tlength ? fn( elems[ 0 ], key ) : emptyGet;\n};\nvar rcheckableType = ( /^(?:checkbox|radio)$/i );\n\nvar rtagName = ( /<([\\w:-]+)/ );\n\nvar rscriptType = ( /^$|\\/(?:java|ecma)script/i );\n\nvar rleadingWhitespace = ( /^\\s+/ );\n\nvar nodeNames = \"abbr|article|aside|audio|bdi|canvas|data|datalist|\" +\n\t\t\"details|dialog|figcaption|figure|footer|header|hgroup|main|\" +\n\t\t\"mark|meter|nav|output|picture|progress|section|summary|template|time|video\";\n\n\n\nfunction createSafeFragment( document ) {\n\tvar list = nodeNames.split( \"|\" ),\n\t\tsafeFrag = document.createDocumentFragment();\n\n\tif ( safeFrag.createElement ) {\n\t\twhile ( list.length ) {\n\t\t\tsafeFrag.createElement(\n\t\t\t\tlist.pop()\n\t\t\t);\n\t\t}\n\t}\n\treturn safeFrag;\n}\n\n\n( function() {\n\tvar div = document.createElement( \"div\" ),\n\t\tfragment = document.createDocumentFragment(),\n\t\tinput = document.createElement( \"input\" );\n\n\t// Setup\n\tdiv.innerHTML = \"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\";\n\n\t// IE strips leading whitespace when .innerHTML is used\n\tsupport.leadingWhitespace = div.firstChild.nodeType === 3;\n\n\t// Make sure that tbody elements aren't automatically inserted\n\t// IE will insert them into empty tables\n\tsupport.tbody = !div.getElementsByTagName( \"tbody\" ).length;\n\n\t// Make sure that link elements get serialized correctly by innerHTML\n\t// This requires a wrapper element in IE\n\tsupport.htmlSerialize = !!div.getElementsByTagName( \"link\" ).length;\n\n\t// Makes sure cloning an html5 element does not cause problems\n\t// Where outerHTML is undefined, this still works\n\tsupport.html5Clone =\n\t\tdocument.createElement( \"nav\" ).cloneNode( true ).outerHTML !== \"<:nav></:nav>\";\n\n\t// Check if a disconnected checkbox will retain its checked\n\t// value of true after appended to the DOM (IE6/7)\n\tinput.type = \"checkbox\";\n\tinput.checked = true;\n\tfragment.appendChild( input );\n\tsupport.appendChecked = input.checked;\n\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\n\t// Support: IE6-IE11+\n\tdiv.innerHTML = \"<textarea>x</textarea>\";\n\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n\n\t// #11217 - WebKit loses check when the name is after the checked attribute\n\tfragment.appendChild( div );\n\n\t// Support: Windows Web Apps (WWA)\n\t// `name` and `type` must use .setAttribute for WWA (#14901)\n\tinput = document.createElement( \"input\" );\n\tinput.setAttribute( \"type\", \"radio\" );\n\tinput.setAttribute( \"checked\", \"checked\" );\n\tinput.setAttribute( \"name\", \"t\" );\n\n\tdiv.appendChild( input );\n\n\t// Support: Safari 5.1, iOS 5.1, Android 4.x, Android 2.3\n\t// old WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Support: IE<9\n\t// Cloned elements keep attachEvent handlers, we use addEventListener on IE9+\n\tsupport.noCloneEvent = !!div.addEventListener;\n\n\t// Support: IE<9\n\t// Since attributes and properties are the same in IE,\n\t// cleanData must set properties to undefined rather than use removeAttribute\n\tdiv[ jQuery.expando ] = 1;\n\tsupport.attributes = !div.getAttribute( jQuery.expando );\n} )();\n\n\n// We have to close these tags to support XHTML (#13200)\nvar wrapMap = {\n\toption: [ 1, \"<select multiple='multiple'>\", \"</select>\" ],\n\tlegend: [ 1, \"<fieldset>\", \"</fieldset>\" ],\n\tarea: [ 1, \"<map>\", \"</map>\" ],\n\n\t// Support: IE8\n\tparam: [ 1, \"<object>\", \"</object>\" ],\n\tthead: [ 1, \"<table>\", \"</table>\" ],\n\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\tcol: [ 2, \"<table><tbody></tbody><colgroup>\", \"</colgroup></table>\" ],\n\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t// IE6-8 can't serialize link, script, style, or any html5 (NoScope) tags,\n\t// unless wrapped in a div with non-breaking characters in front of it.\n\t_default: support.htmlSerialize ? [ 0, \"\", \"\" ] : [ 1, \"X<div>\", \"</div>\" ]\n};\n\n// Support: IE8-IE9\nwrapMap.optgroup = wrapMap.option;\n\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\n\nfunction getAll( context, tag ) {\n\tvar elems, elem,\n\t\ti = 0,\n\t\tfound = typeof context.getElementsByTagName !== \"undefined\" ?\n\t\t\tcontext.getElementsByTagName( tag || \"*\" ) :\n\t\t\ttypeof context.querySelectorAll !== \"undefined\" ?\n\t\t\t\tcontext.querySelectorAll( tag || \"*\" ) :\n\t\t\t\tundefined;\n\n\tif ( !found ) {\n\t\tfor ( found = [], elems = context.childNodes || context;\n\t\t\t( elem = elems[ i ] ) != null;\n\t\t\ti++\n\t\t) {\n\t\t\tif ( !tag || jQuery.nodeName( elem, tag ) ) {\n\t\t\t\tfound.push( elem );\n\t\t\t} else {\n\t\t\t\tjQuery.merge( found, getAll( elem, tag ) );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn tag === undefined || tag && jQuery.nodeName( context, tag ) ?\n\t\tjQuery.merge( [ context ], found ) :\n\t\tfound;\n}\n\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar elem,\n\t\ti = 0;\n\tfor ( ; ( elem = elems[ i ] ) != null; i++ ) {\n\t\tjQuery._data(\n\t\t\telem,\n\t\t\t\"globalEval\",\n\t\t\t!refElements || jQuery._data( refElements[ i ], \"globalEval\" )\n\t\t);\n\t}\n}\n\n\nvar rhtml = /<|&#?\\w+;/,\n\trtbody = /<tbody/i;\n\nfunction fixDefaultChecked( elem ) {\n\tif ( rcheckableType.test( elem.type ) ) {\n\t\telem.defaultChecked = elem.checked;\n\t}\n}\n\nfunction buildFragment( elems, context, scripts, selection, ignored ) {\n\tvar j, elem, contains,\n\t\ttmp, tag, tbody, wrap,\n\t\tl = elems.length,\n\n\t\t// Ensure a safe fragment\n\t\tsafe = createSafeFragment( context ),\n\n\t\tnodes = [],\n\t\ti = 0;\n\n\tfor ( ; i < l; i++ ) {\n\t\telem = elems[ i ];\n\n\t\tif ( elem || elem === 0 ) {\n\n\t\t\t// Add nodes directly\n\t\t\tif ( jQuery.type( elem ) === \"object\" ) {\n\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t// Convert non-html into a text node\n\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t// Convert html into DOM nodes\n\t\t\t} else {\n\t\t\t\ttmp = tmp || safe.appendChild( context.createElement( \"div\" ) );\n\n\t\t\t\t// Deserialize a standard representation\n\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\n\t\t\t\ttmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];\n\n\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\tj = wrap[ 0 ];\n\t\t\t\twhile ( j-- ) {\n\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t}\n\n\t\t\t\t// Manually add leading whitespace removed by IE\n\t\t\t\tif ( !support.leadingWhitespace && rleadingWhitespace.test( elem ) ) {\n\t\t\t\t\tnodes.push( context.createTextNode( rleadingWhitespace.exec( elem )[ 0 ] ) );\n\t\t\t\t}\n\n\t\t\t\t// Remove IE's autoinserted <tbody> from table fragments\n\t\t\t\tif ( !support.tbody ) {\n\n\t\t\t\t\t// String was a <table>, *may* have spurious <tbody>\n\t\t\t\t\telem = tag === \"table\" && !rtbody.test( elem ) ?\n\t\t\t\t\t\ttmp.firstChild :\n\n\t\t\t\t\t\t// String was a bare <thead> or <tfoot>\n\t\t\t\t\t\twrap[ 1 ] === \"<table>\" && !rtbody.test( elem ) ?\n\t\t\t\t\t\t\ttmp :\n\t\t\t\t\t\t\t0;\n\n\t\t\t\t\tj = elem && elem.childNodes.length;\n\t\t\t\t\twhile ( j-- ) {\n\t\t\t\t\t\tif ( jQuery.nodeName( ( tbody = elem.childNodes[ j ] ), \"tbody\" ) &&\n\t\t\t\t\t\t\t!tbody.childNodes.length ) {\n\n\t\t\t\t\t\t\telem.removeChild( tbody );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t// Fix #12392 for WebKit and IE > 9\n\t\t\t\ttmp.textContent = \"\";\n\n\t\t\t\t// Fix #12392 for oldIE\n\t\t\t\twhile ( tmp.firstChild ) {\n\t\t\t\t\ttmp.removeChild( tmp.firstChild );\n\t\t\t\t}\n\n\t\t\t\t// Remember the top-level container for proper cleanup\n\t\t\t\ttmp = safe.lastChild;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Fix #11356: Clear elements from fragment\n\tif ( tmp ) {\n\t\tsafe.removeChild( tmp );\n\t}\n\n\t// Reset defaultChecked for any radios and checkboxes\n\t// about to be appended to the DOM in IE 6/7 (#8060)\n\tif ( !support.appendChecked ) {\n\t\tjQuery.grep( getAll( nodes, \"input\" ), fixDefaultChecked );\n\t}\n\n\ti = 0;\n\twhile ( ( elem = nodes[ i++ ] ) ) {\n\n\t\t// Skip elements already in the context collection (trac-4087)\n\t\tif ( selection && jQuery.inArray( elem, selection ) > -1 ) {\n\t\t\tif ( ignored ) {\n\t\t\t\tignored.push( elem );\n\t\t\t}\n\n\t\t\tcontinue;\n\t\t}\n\n\t\tcontains = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t// Append to fragment\n\t\ttmp = getAll( safe.appendChild( elem ), \"script\" );\n\n\t\t// Preserve script evaluation history\n\t\tif ( contains ) {\n\t\t\tsetGlobalEval( tmp );\n\t\t}\n\n\t\t// Capture executables\n\t\tif ( scripts ) {\n\t\t\tj = 0;\n\t\t\twhile ( ( elem = tmp[ j++ ] ) ) {\n\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\tscripts.push( elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\ttmp = null;\n\n\treturn safe;\n}\n\n\n( function() {\n\tvar i, eventName,\n\t\tdiv = document.createElement( \"div\" );\n\n\t// Support: IE<9 (lack submit/change bubble), Firefox (lack focus(in | out) events)\n\tfor ( i in { submit: true, change: true, focusin: true } ) {\n\t\teventName = \"on\" + i;\n\n\t\tif ( !( support[ i ] = eventName in window ) ) {\n\n\t\t\t// Beware of CSP restrictions (https://developer.mozilla.org/en/Security/CSP)\n\t\t\tdiv.setAttribute( eventName, \"t\" );\n\t\t\tsupport[ i ] = div.attributes[ eventName ].expando === false;\n\t\t}\n\t}\n\n\t// Null elements to avoid leaks in IE.\n\tdiv = null;\n} )();\n\n\nvar rformElems = /^(?:input|select|textarea)$/i,\n\trkeyEvent = /^key/,\n\trmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,\n\trfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\n\trtypenamespace = /^([^.]*)(?:\\.(.+)|)/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\n// Support: IE9\n// See #13393 for more info\nfunction safeActiveElement() {\n\ttry {\n\t\treturn document.activeElement;\n\t} catch ( err ) { }\n}\n\nfunction on( elem, types, selector, data, fn, one ) {\n\tvar origFn, type;\n\n\t// Types can be a map of types/handlers\n\tif ( typeof types === \"object\" ) {\n\n\t\t// ( types-Object, selector, data )\n\t\tif ( typeof selector !== \"string\" ) {\n\n\t\t\t// ( types-Object, data )\n\t\t\tdata = data || selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tfor ( type in types ) {\n\t\t\ton( elem, type, selector, data, types[ type ], one );\n\t\t}\n\t\treturn elem;\n\t}\n\n\tif ( data == null && fn == null ) {\n\n\t\t// ( types, fn )\n\t\tfn = selector;\n\t\tdata = selector = undefined;\n\t} else if ( fn == null ) {\n\t\tif ( typeof selector === \"string\" ) {\n\n\t\t\t// ( types, selector, fn )\n\t\t\tfn = data;\n\t\t\tdata = undefined;\n\t\t} else {\n\n\t\t\t// ( types, data, fn )\n\t\t\tfn = data;\n\t\t\tdata = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t}\n\tif ( fn === false ) {\n\t\tfn = returnFalse;\n\t} else if ( !fn ) {\n\t\treturn elem;\n\t}\n\n\tif ( one === 1 ) {\n\t\torigFn = fn;\n\t\tfn = function( event ) {\n\n\t\t\t// Can use an empty set, since event contains the info\n\t\t\tjQuery().off( event );\n\t\t\treturn origFn.apply( this, arguments );\n\t\t};\n\n\t\t// Use same guid so caller can remove using origFn\n\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t}\n\treturn elem.each( function() {\n\t\tjQuery.event.add( this, types, fn, data, selector );\n\t} );\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\t\tvar tmp, events, t, handleObjIn,\n\t\t\tspecial, eventHandle, handleObj,\n\t\t\thandlers, type, namespaces, origType,\n\t\t\telemData = jQuery._data( elem );\n\n\t\t// Don't attach events to noData or text/comment nodes (but allow plain objects)\n\t\tif ( !elemData ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !( events = elemData.events ) ) {\n\t\t\tevents = elemData.events = {};\n\t\t}\n\t\tif ( !( eventHandle = elemData.handle ) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== \"undefined\" &&\n\t\t\t\t\t( !e || jQuery.event.triggered !== e.type ) ?\n\t\t\t\t\tjQuery.event.dispatch.apply( eventHandle.elem, arguments ) :\n\t\t\t\t\tundefined;\n\t\t\t};\n\n\t\t\t// Add elem as a property of the handle fn to prevent a memory leak\n\t\t\t// with IE non-native events\n\t\t\teventHandle.elem = elem;\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\ttypes = ( types || \"\" ).match( rnotwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// There *must* be a type, no attaching namespace-only handlers\n\t\t\tif ( !type ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend( {\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join( \".\" )\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !( handlers = events[ type ] ) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener/attachEvent if the special events handler returns false\n\t\t\t\tif ( !special.setup ||\n\t\t\t\t\tspecial.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\n\t\t\t\t\t// Bind the global event handler to the element\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle, false );\n\n\t\t\t\t\t} else if ( elem.attachEvent ) {\n\t\t\t\t\t\telem.attachEvent( \"on\" + type, eventHandle );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t\t// Nullify elem to prevent memory leaks in IE\n\t\telem = null;\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\t\tvar j, handleObj, tmp,\n\t\t\torigCount, t, events,\n\t\t\tspecial, handlers, type,\n\t\t\tnamespaces, origType,\n\t\t\telemData = jQuery.hasData( elem ) && jQuery._data( elem );\n\n\t\tif ( !elemData || !( events = elemData.events ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( rnotwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[ 2 ] &&\n\t\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector ||\n\t\t\t\t\t\tselector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown ||\n\t\t\t\t\tspecial.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdelete elemData.handle;\n\n\t\t\t// removeData also checks for emptiness and clears the expando if empty\n\t\t\t// so use it instead of delete\n\t\t\tjQuery._removeData( elem, \"events\" );\n\t\t}\n\t},\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\t\tvar handle, ontype, cur,\n\t\t\tbubbleType, special, tmp, i,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split( \".\" ) : [];\n\n\t\tcur = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf( \".\" ) > -1 ) {\n\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split( \".\" );\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf( \":\" ) < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n\t\tevent.namespace = namespaces.join( \".\" );\n\t\tevent.rnamespace = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === ( elem.ownerDocument || document ) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {\n\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( jQuery._data( cur, \"events\" ) || {} )[ event.type ] &&\n\t\t\t\tjQuery._data( cur, \"handle\" );\n\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && handle.apply && acceptData( cur ) ) {\n\t\t\t\tevent.result = handle.apply( cur, data );\n\t\t\t\tif ( event.result === false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif (\n\t\t\t\t( !special._default ||\n\t\t\t\t special._default.apply( eventPath.pop(), data ) === false\n\t\t\t\t) && acceptData( elem )\n\t\t\t) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name name as the event.\n\t\t\t\t// Can't use an .isFunction() check here because IE6/7 fails that test.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\n\t\t\t\tif ( ontype && elem[ type ] && !jQuery.isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\t\t\t\t\ttry {\n\t\t\t\t\t\telem[ type ]();\n\t\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t\t// IE<9 dies on focus/blur to hidden element (#1486,#12518)\n\t\t\t\t\t\t// only reproducible on winXP IE8 native, not IE9 in IE8 mode\n\t\t\t\t\t}\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\tdispatch: function( event ) {\n\n\t\t// Make a writable jQuery.Event from the native event object\n\t\tevent = jQuery.event.fix( event );\n\n\t\tvar i, j, ret, matched, handleObj,\n\t\t\thandlerQueue = [],\n\t\t\targs = slice.call( arguments ),\n\t\t\thandlers = ( jQuery._data( this, \"events\" ) || {} )[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[ 0 ] = event;\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( ( handleObj = matched.handlers[ j++ ] ) &&\n\t\t\t\t!event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// Triggered event must either 1) have no namespace, or 2) have namespace(s)\n\t\t\t\t// a subset or equal to those in the bound event (both can have no namespace).\n\t\t\t\tif ( !event.rnamespace || event.rnamespace.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||\n\t\t\t\t\t\thandleObj.handler ).apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( ( event.result = ret ) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar i, matches, sel, handleObj,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Support (at least): Chrome, IE9\n\t\t// Find delegate handlers\n\t\t// Black-hole SVG <use> instance trees (#13180)\n\t\t//\n\t\t// Support: Firefox<=42+\n\t\t// Avoid non-left-click in FF but don't block IE radio events (#3861, gh-2343)\n\t\tif ( delegateCount && cur.nodeType &&\n\t\t\t( event.type !== \"click\" || isNaN( event.button ) || event.button < 1 ) ) {\n\n\t\t\t/* jshint eqeqeq: false */\n\t\t\tfor ( ; cur != this; cur = cur.parentNode || this ) {\n\t\t\t\t/* jshint eqeqeq: true */\n\n\t\t\t\t// Don't check non-elements (#13208)\n\t\t\t\t// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\n\t\t\t\tif ( cur.nodeType === 1 && ( cur.disabled !== true || event.type !== \"click\" ) ) {\n\t\t\t\t\tmatches = [];\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (#13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matches[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatches[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) > -1 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matches[ sel ] ) {\n\t\t\t\t\t\t\tmatches.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matches.length ) {\n\t\t\t\t\t\thandlerQueue.push( { elem: cur, handlers: matches } );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push( { elem: this, handlers: handlers.slice( delegateCount ) } );\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\tfix: function( event ) {\n\t\tif ( event[ jQuery.expando ] ) {\n\t\t\treturn event;\n\t\t}\n\n\t\t// Create a writable copy of the event object and normalize some properties\n\t\tvar i, prop, copy,\n\t\t\ttype = event.type,\n\t\t\toriginalEvent = event,\n\t\t\tfixHook = this.fixHooks[ type ];\n\n\t\tif ( !fixHook ) {\n\t\t\tthis.fixHooks[ type ] = fixHook =\n\t\t\t\trmouseEvent.test( type ) ? this.mouseHooks :\n\t\t\t\trkeyEvent.test( type ) ? this.keyHooks :\n\t\t\t\t{};\n\t\t}\n\t\tcopy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;\n\n\t\tevent = new jQuery.Event( originalEvent );\n\n\t\ti = copy.length;\n\t\twhile ( i-- ) {\n\t\t\tprop = copy[ i ];\n\t\t\tevent[ prop ] = originalEvent[ prop ];\n\t\t}\n\n\t\t// Support: IE<9\n\t\t// Fix target property (#1925)\n\t\tif ( !event.target ) {\n\t\t\tevent.target = originalEvent.srcElement || document;\n\t\t}\n\n\t\t// Support: Safari 6-8+\n\t\t// Target should not be a text node (#504, #13143)\n\t\tif ( event.target.nodeType === 3 ) {\n\t\t\tevent.target = event.target.parentNode;\n\t\t}\n\n\t\t// Support: IE<9\n\t\t// For mouse/key events, metaKey==false if it's undefined (#3368, #11328)\n\t\tevent.metaKey = !!event.metaKey;\n\n\t\treturn fixHook.filter ? fixHook.filter( event, originalEvent ) : event;\n\t},\n\n\t// Includes some event props shared by KeyEvent and MouseEvent\n\tprops: ( \"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase \" +\n\t\t\"metaKey relatedTarget shiftKey target timeStamp view which\" ).split( \" \" ),\n\n\tfixHooks: {},\n\n\tkeyHooks: {\n\t\tprops: \"char charCode key keyCode\".split( \" \" ),\n\t\tfilter: function( event, original ) {\n\n\t\t\t// Add which for key events\n\t\t\tif ( event.which == null ) {\n\t\t\t\tevent.which = original.charCode != null ? original.charCode : original.keyCode;\n\t\t\t}\n\n\t\t\treturn event;\n\t\t}\n\t},\n\n\tmouseHooks: {\n\t\tprops: ( \"button buttons clientX clientY fromElement offsetX offsetY \" +\n\t\t\t\"pageX pageY screenX screenY toElement\" ).split( \" \" ),\n\t\tfilter: function( event, original ) {\n\t\t\tvar body, eventDoc, doc,\n\t\t\t\tbutton = original.button,\n\t\t\t\tfromElement = original.fromElement;\n\n\t\t\t// Calculate pageX/Y if missing and clientX/Y available\n\t\t\tif ( event.pageX == null && original.clientX != null ) {\n\t\t\t\teventDoc = event.target.ownerDocument || document;\n\t\t\t\tdoc = eventDoc.documentElement;\n\t\t\t\tbody = eventDoc.body;\n\n\t\t\t\tevent.pageX = original.clientX +\n\t\t\t\t\t( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) -\n\t\t\t\t\t( doc && doc.clientLeft || body && body.clientLeft || 0 );\n\t\t\t\tevent.pageY = original.clientY +\n\t\t\t\t\t( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) -\n\t\t\t\t\t( doc && doc.clientTop  || body && body.clientTop  || 0 );\n\t\t\t}\n\n\t\t\t// Add relatedTarget, if necessary\n\t\t\tif ( !event.relatedTarget && fromElement ) {\n\t\t\t\tevent.relatedTarget = fromElement === event.target ?\n\t\t\t\t\toriginal.toElement :\n\t\t\t\t\tfromElement;\n\t\t\t}\n\n\t\t\t// Add which for click: 1 === left; 2 === middle; 3 === right\n\t\t\t// Note: button is not normalized, so don't use it\n\t\t\tif ( !event.which && button !== undefined ) {\n\t\t\t\tevent.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\n\t\t\t}\n\n\t\t\treturn event;\n\t\t}\n\t},\n\n\tspecial: {\n\t\tload: {\n\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tfocus: {\n\n\t\t\t// Fire native event if possible so blur/focus sequence is correct\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this !== safeActiveElement() && this.focus ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t\t// Support: IE<9\n\t\t\t\t\t\t// If we error on focus to hidden element (#1486, #12518),\n\t\t\t\t\t\t// let .trigger() run the handlers\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusin\"\n\t\t},\n\t\tblur: {\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this === safeActiveElement() && this.blur ) {\n\t\t\t\t\tthis.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusout\"\n\t\t},\n\t\tclick: {\n\n\t\t\t// For checkbox, fire native event so checked state will be right\n\t\t\ttrigger: function() {\n\t\t\t\tif ( jQuery.nodeName( this, \"input\" ) && this.type === \"checkbox\" && this.click ) {\n\t\t\t\t\tthis.click();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// For cross-browser consistency, don't fire native .click() on links\n\t\t\t_default: function( event ) {\n\t\t\t\treturn jQuery.nodeName( event.target, \"a\" );\n\t\t\t}\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Support: Firefox 20+\n\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\n\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Piggyback on a donor event to simulate a different one\n\tsimulate: function( type, elem, event ) {\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{\n\t\t\t\ttype: type,\n\t\t\t\tisSimulated: true\n\n\t\t\t\t// Previously, `originalEvent: {}` was set here, so stopPropagation call\n\t\t\t\t// would not be triggered on donor event, since in our own\n\t\t\t\t// jQuery.event.stopPropagation function we had a check for existence of\n\t\t\t\t// originalEvent.stopPropagation method, so, consequently it would be a noop.\n\t\t\t\t//\n\t\t\t\t// Guard for simulated events was moved to jQuery.event.stopPropagation function\n\t\t\t\t// since `originalEvent` should point to the original event for the\n\t\t\t\t// constancy with other events and for more focused logic\n\t\t\t}\n\t\t);\n\n\t\tjQuery.event.trigger( e, null, elem );\n\n\t\tif ( e.isDefaultPrevented() ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n};\n\njQuery.removeEvent = document.removeEventListener ?\n\tfunction( elem, type, handle ) {\n\n\t\t// This \"if\" is needed for plain objects\n\t\tif ( elem.removeEventListener ) {\n\t\t\telem.removeEventListener( type, handle );\n\t\t}\n\t} :\n\tfunction( elem, type, handle ) {\n\t\tvar name = \"on\" + type;\n\n\t\tif ( elem.detachEvent ) {\n\n\t\t\t// #8545, #7054, preventing memory leaks for custom events in IE6-8\n\t\t\t// detachEvent needed property on element, by name of that event,\n\t\t\t// to properly expose it to GC\n\t\t\tif ( typeof elem[ name ] === \"undefined\" ) {\n\t\t\t\telem[ name ] = null;\n\t\t\t}\n\n\t\t\telem.detachEvent( name, handle );\n\t\t}\n\t};\n\njQuery.Event = function( src, props ) {\n\n\t// Allow instantiation without the 'new' keyword\n\tif ( !( this instanceof jQuery.Event ) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n\t\t\t\tsrc.defaultPrevented === undefined &&\n\n\t\t\t\t// Support: IE < 9, Android < 4.0\n\t\t\t\tsrc.returnValue === false ?\n\t\t\treturnTrue :\n\t\t\treturnFalse;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || jQuery.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tconstructor: jQuery.Event,\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\t\tif ( !e ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If preventDefault exists, run it on the original event\n\t\tif ( e.preventDefault ) {\n\t\t\te.preventDefault();\n\n\t\t// Support: IE\n\t\t// Otherwise set the returnValue property of the original event to false\n\t\t} else {\n\t\t\te.returnValue = false;\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\n\t\tif ( !e || this.isSimulated ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If stopPropagation exists, run it on the original event\n\t\tif ( e.stopPropagation ) {\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\t// Support: IE\n\t\t// Set the cancelBubble property of the original event to true\n\t\te.cancelBubble = true;\n\t},\n\tstopImmediatePropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\n\t\tif ( e && e.stopImmediatePropagation ) {\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\n// so that event delegation works in jQuery.\n// Do the same for pointerenter/pointerleave and pointerover/pointerout\n//\n// Support: Safari 7 only\n// Safari sends mouseenter too often; see:\n// https://code.google.com/p/chromium/issues/detail?id=470258\n// for the description of the bug (it existed in older Chrome versions as well).\njQuery.each( {\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\",\n\tpointerenter: \"pointerover\",\n\tpointerleave: \"pointerout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mouseenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n} );\n\n// IE submit delegation\nif ( !support.submit ) {\n\n\tjQuery.event.special.submit = {\n\t\tsetup: function() {\n\n\t\t\t// Only need this for delegated form submit events\n\t\t\tif ( jQuery.nodeName( this, \"form\" ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Lazy-add a submit handler when a descendant form may potentially be submitted\n\t\t\tjQuery.event.add( this, \"click._submit keypress._submit\", function( e ) {\n\n\t\t\t\t// Node name check avoids a VML-related crash in IE (#9807)\n\t\t\t\tvar elem = e.target,\n\t\t\t\t\tform = jQuery.nodeName( elem, \"input\" ) || jQuery.nodeName( elem, \"button\" ) ?\n\n\t\t\t\t\t\t// Support: IE <=8\n\t\t\t\t\t\t// We use jQuery.prop instead of elem.form\n\t\t\t\t\t\t// to allow fixing the IE8 delegated submit issue (gh-2332)\n\t\t\t\t\t\t// by 3rd party polyfills/workarounds.\n\t\t\t\t\t\tjQuery.prop( elem, \"form\" ) :\n\t\t\t\t\t\tundefined;\n\n\t\t\t\tif ( form && !jQuery._data( form, \"submit\" ) ) {\n\t\t\t\t\tjQuery.event.add( form, \"submit._submit\", function( event ) {\n\t\t\t\t\t\tevent._submitBubble = true;\n\t\t\t\t\t} );\n\t\t\t\t\tjQuery._data( form, \"submit\", true );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// return undefined since we don't need an event listener\n\t\t},\n\n\t\tpostDispatch: function( event ) {\n\n\t\t\t// If form was submitted by the user, bubble the event up the tree\n\t\t\tif ( event._submitBubble ) {\n\t\t\t\tdelete event._submitBubble;\n\t\t\t\tif ( this.parentNode && !event.isTrigger ) {\n\t\t\t\t\tjQuery.event.simulate( \"submit\", this.parentNode, event );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tteardown: function() {\n\n\t\t\t// Only need this for delegated form submit events\n\t\t\tif ( jQuery.nodeName( this, \"form\" ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Remove delegated handlers; cleanData eventually reaps submit handlers attached above\n\t\t\tjQuery.event.remove( this, \"._submit\" );\n\t\t}\n\t};\n}\n\n// IE change delegation and checkbox/radio fix\nif ( !support.change ) {\n\n\tjQuery.event.special.change = {\n\n\t\tsetup: function() {\n\n\t\t\tif ( rformElems.test( this.nodeName ) ) {\n\n\t\t\t\t// IE doesn't fire change on a check/radio until blur; trigger it on click\n\t\t\t\t// after a propertychange. Eat the blur-change in special.change.handle.\n\t\t\t\t// This still fires onchange a second time for check/radio after blur.\n\t\t\t\tif ( this.type === \"checkbox\" || this.type === \"radio\" ) {\n\t\t\t\t\tjQuery.event.add( this, \"propertychange._change\", function( event ) {\n\t\t\t\t\t\tif ( event.originalEvent.propertyName === \"checked\" ) {\n\t\t\t\t\t\t\tthis._justChanged = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t\tjQuery.event.add( this, \"click._change\", function( event ) {\n\t\t\t\t\t\tif ( this._justChanged && !event.isTrigger ) {\n\t\t\t\t\t\t\tthis._justChanged = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Allow triggered, simulated change events (#11500)\n\t\t\t\t\t\tjQuery.event.simulate( \"change\", this, event );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Delegated event; lazy-add a change handler on descendant inputs\n\t\t\tjQuery.event.add( this, \"beforeactivate._change\", function( e ) {\n\t\t\t\tvar elem = e.target;\n\n\t\t\t\tif ( rformElems.test( elem.nodeName ) && !jQuery._data( elem, \"change\" ) ) {\n\t\t\t\t\tjQuery.event.add( elem, \"change._change\", function( event ) {\n\t\t\t\t\t\tif ( this.parentNode && !event.isSimulated && !event.isTrigger ) {\n\t\t\t\t\t\t\tjQuery.event.simulate( \"change\", this.parentNode, event );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t\tjQuery._data( elem, \"change\", true );\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\n\t\thandle: function( event ) {\n\t\t\tvar elem = event.target;\n\n\t\t\t// Swallow native change events from checkbox/radio, we already triggered them above\n\t\t\tif ( this !== elem || event.isSimulated || event.isTrigger ||\n\t\t\t\t( elem.type !== \"radio\" && elem.type !== \"checkbox\" ) ) {\n\n\t\t\t\treturn event.handleObj.handler.apply( this, arguments );\n\t\t\t}\n\t\t},\n\n\t\tteardown: function() {\n\t\t\tjQuery.event.remove( this, \"._change\" );\n\n\t\t\treturn !rformElems.test( this.nodeName );\n\t\t}\n\t};\n}\n\n// Support: Firefox\n// Firefox doesn't have focus(in | out) events\n// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787\n//\n// Support: Chrome, Safari\n// focus(in | out) events fire after focus & blur events,\n// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order\n// Related ticket - https://code.google.com/p/chromium/issues/detail?id=449857\nif ( !support.focusin ) {\n\tjQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t// Attach a single capturing handler on the document while someone wants focusin/focusout\n\t\tvar handler = function( event ) {\n\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );\n\t\t};\n\n\t\tjQuery.event.special[ fix ] = {\n\t\t\tsetup: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = jQuery._data( doc, fix );\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.addEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t\tjQuery._data( doc, fix, ( attaches || 0 ) + 1 );\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = jQuery._data( doc, fix ) - 1;\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.removeEventListener( orig, handler, true );\n\t\t\t\t\tjQuery._removeData( doc, fix );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery._data( doc, fix, attaches );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t} );\n}\n\njQuery.fn.extend( {\n\n\ton: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn );\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ?\n\t\t\t\t\thandleObj.origType + \".\" + handleObj.namespace :\n\t\t\t\t\thandleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t} );\n\t},\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t} );\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[ 0 ];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n} );\n\n\nvar rinlinejQuery = / jQuery\\d+=\"(?:null|\\d+)\"/g,\n\trnoshimcache = new RegExp( \"<(?:\" + nodeNames + \")[\\\\s/>]\", \"i\" ),\n\trxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:-]+)[^>]*)\\/>/gi,\n\n\t// Support: IE 10-11, Edge 10240+\n\t// In IE/Edge using regex groups here causes severe slowdowns.\n\t// See https://connect.microsoft.com/IE/feedback/details/1736512/\n\trnoInnerhtml = /<script|<style|<link/i,\n\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\trscriptTypeMasked = /^true\\/(.*)/,\n\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,\n\tsafeFragment = createSafeFragment( document ),\n\tfragmentDiv = safeFragment.appendChild( document.createElement( \"div\" ) );\n\n// Support: IE<8\n// Manipulating tables requires a tbody\nfunction manipulationTarget( elem, content ) {\n\treturn jQuery.nodeName( elem, \"table\" ) &&\n\t\tjQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ?\n\n\t\telem.getElementsByTagName( \"tbody\" )[ 0 ] ||\n\t\t\telem.appendChild( elem.ownerDocument.createElement( \"tbody\" ) ) :\n\t\telem;\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\telem.type = ( jQuery.find.attr( elem, \"type\" ) !== null ) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tvar match = rscriptTypeMasked.exec( elem.type );\n\tif ( match ) {\n\t\telem.type = match[ 1 ];\n\t} else {\n\t\telem.removeAttribute( \"type\" );\n\t}\n\treturn elem;\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\tif ( dest.nodeType !== 1 || !jQuery.hasData( src ) ) {\n\t\treturn;\n\t}\n\n\tvar type, i, l,\n\t\toldData = jQuery._data( src ),\n\t\tcurData = jQuery._data( dest, oldData ),\n\t\tevents = oldData.events;\n\n\tif ( events ) {\n\t\tdelete curData.handle;\n\t\tcurData.events = {};\n\n\t\tfor ( type in events ) {\n\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t}\n\t\t}\n\t}\n\n\t// make the cloned public data object a copy from the original\n\tif ( curData.data ) {\n\t\tcurData.data = jQuery.extend( {}, curData.data );\n\t}\n}\n\nfunction fixCloneNodeIssues( src, dest ) {\n\tvar nodeName, e, data;\n\n\t// We do not need to do anything for non-Elements\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\tnodeName = dest.nodeName.toLowerCase();\n\n\t// IE6-8 copies events bound via attachEvent when using cloneNode.\n\tif ( !support.noCloneEvent && dest[ jQuery.expando ] ) {\n\t\tdata = jQuery._data( dest );\n\n\t\tfor ( e in data.events ) {\n\t\t\tjQuery.removeEvent( dest, e, data.handle );\n\t\t}\n\n\t\t// Event data gets referenced instead of copied if the expando gets copied too\n\t\tdest.removeAttribute( jQuery.expando );\n\t}\n\n\t// IE blanks contents when cloning scripts, and tries to evaluate newly-set text\n\tif ( nodeName === \"script\" && dest.text !== src.text ) {\n\t\tdisableScript( dest ).text = src.text;\n\t\trestoreScript( dest );\n\n\t// IE6-10 improperly clones children of object elements using classid.\n\t// IE10 throws NoModificationAllowedError if parent is null, #12132.\n\t} else if ( nodeName === \"object\" ) {\n\t\tif ( dest.parentNode ) {\n\t\t\tdest.outerHTML = src.outerHTML;\n\t\t}\n\n\t\t// This path appears unavoidable for IE9. When cloning an object\n\t\t// element in IE9, the outerHTML strategy above is not sufficient.\n\t\t// If the src has innerHTML and the destination does not,\n\t\t// copy the src.innerHTML into the dest.innerHTML. #10324\n\t\tif ( support.html5Clone && ( src.innerHTML && !jQuery.trim( dest.innerHTML ) ) ) {\n\t\t\tdest.innerHTML = src.innerHTML;\n\t\t}\n\n\t} else if ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n\n\t\t// IE6-8 fails to persist the checked state of a cloned checkbox\n\t\t// or radio button. Worse, IE6-7 fail to give the cloned element\n\t\t// a checked appearance if the defaultChecked value isn't also set\n\n\t\tdest.defaultChecked = dest.checked = src.checked;\n\n\t\t// IE6-7 get confused and end up setting the value of a cloned\n\t\t// checkbox/radio button to an empty string instead of \"on\"\n\t\tif ( dest.value !== src.value ) {\n\t\t\tdest.value = src.value;\n\t\t}\n\n\t// IE6-8 fails to return the selected option to the default selected\n\t// state when cloning options\n\t} else if ( nodeName === \"option\" ) {\n\t\tdest.defaultSelected = dest.selected = src.defaultSelected;\n\n\t// IE6-8 fails to set the defaultValue to the correct value when\n\t// cloning other types of input fields\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\nfunction domManip( collection, args, callback, ignored ) {\n\n\t// Flatten any nested arrays\n\targs = concat.apply( [], args );\n\n\tvar first, node, hasScripts,\n\t\tscripts, doc, fragment,\n\t\ti = 0,\n\t\tl = collection.length,\n\t\tiNoClone = l - 1,\n\t\tvalue = args[ 0 ],\n\t\tisFunction = jQuery.isFunction( value );\n\n\t// We can't cloneNode fragments that contain checked, in WebKit\n\tif ( isFunction ||\n\t\t\t( l > 1 && typeof value === \"string\" &&\n\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n\t\treturn collection.each( function( index ) {\n\t\t\tvar self = collection.eq( index );\n\t\t\tif ( isFunction ) {\n\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n\t\t\t}\n\t\t\tdomManip( self, args, callback, ignored );\n\t\t} );\n\t}\n\n\tif ( l ) {\n\t\tfragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );\n\t\tfirst = fragment.firstChild;\n\n\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\tfragment = first;\n\t\t}\n\n\t\t// Require either new content or an interest in ignored elements to invoke the callback\n\t\tif ( first || ignored ) {\n\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\thasScripts = scripts.length;\n\n\t\t\t// Use the original fragment for the last item\n\t\t\t// instead of the first because it can end up\n\t\t\t// being emptied incorrectly in certain situations (#8070).\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tnode = fragment;\n\n\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\tif ( hasScripts ) {\n\n\t\t\t\t\t\t// Support: Android<4.1, PhantomJS<2\n\t\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcallback.call( collection[ i ], node, i );\n\t\t\t}\n\n\t\t\tif ( hasScripts ) {\n\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t// Reenable scripts\n\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t!jQuery._data( node, \"globalEval\" ) &&\n\t\t\t\t\t\tjQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\tif ( node.src ) {\n\n\t\t\t\t\t\t\t// Optional AJAX dependency, but won't run scripts if not present\n\t\t\t\t\t\t\tif ( jQuery._evalUrl ) {\n\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tjQuery.globalEval(\n\t\t\t\t\t\t\t\t( node.text || node.textContent || node.innerHTML || \"\" )\n\t\t\t\t\t\t\t\t\t.replace( rcleanScript, \"\" )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Fix #11809: Avoid leaking memory\n\t\t\tfragment = first = null;\n\t\t}\n\t}\n\n\treturn collection;\n}\n\nfunction remove( elem, selector, keepData ) {\n\tvar node,\n\t\telems = selector ? jQuery.filter( selector, elem ) : elem,\n\t\ti = 0;\n\n\tfor ( ; ( node = elems[ i ] ) != null; i++ ) {\n\n\t\tif ( !keepData && node.nodeType === 1 ) {\n\t\t\tjQuery.cleanData( getAll( node ) );\n\t\t}\n\n\t\tif ( node.parentNode ) {\n\t\t\tif ( keepData && jQuery.contains( node.ownerDocument, node ) ) {\n\t\t\t\tsetGlobalEval( getAll( node, \"script\" ) );\n\t\t\t}\n\t\t\tnode.parentNode.removeChild( node );\n\t\t}\n\t}\n\n\treturn elem;\n}\n\njQuery.extend( {\n\thtmlPrefilter: function( html ) {\n\t\treturn html.replace( rxhtmlTag, \"<$1></$2>\" );\n\t},\n\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar destElements, node, clone, i, srcElements,\n\t\t\tinPage = jQuery.contains( elem.ownerDocument, elem );\n\n\t\tif ( support.html5Clone || jQuery.isXMLDoc( elem ) ||\n\t\t\t!rnoshimcache.test( \"<\" + elem.nodeName + \">\" ) ) {\n\n\t\t\tclone = elem.cloneNode( true );\n\n\t\t// IE<=8 does not properly clone detached, unknown element nodes\n\t\t} else {\n\t\t\tfragmentDiv.innerHTML = elem.outerHTML;\n\t\t\tfragmentDiv.removeChild( clone = fragmentDiv.firstChild );\n\t\t}\n\n\t\tif ( ( !support.noCloneEvent || !support.noCloneChecked ) &&\n\t\t\t\t( elem.nodeType === 1 || elem.nodeType === 11 ) && !jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\t// Fix all IE cloning issues\n\t\t\tfor ( i = 0; ( node = srcElements[ i ] ) != null; ++i ) {\n\n\t\t\t\t// Ensure that the destination node is not null; Fixes #9587\n\t\t\t\tif ( destElements[ i ] ) {\n\t\t\t\t\tfixCloneNodeIssues( node, destElements[ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0; ( node = srcElements[ i ] ) != null; i++ ) {\n\t\t\t\t\tcloneCopyEvent( node, destElements[ i ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\tdestElements = srcElements = node = null;\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tcleanData: function( elems, /* internal */ forceAcceptData ) {\n\t\tvar elem, type, id, data,\n\t\t\ti = 0,\n\t\t\tinternalKey = jQuery.expando,\n\t\t\tcache = jQuery.cache,\n\t\t\tattributes = support.attributes,\n\t\t\tspecial = jQuery.event.special;\n\n\t\tfor ( ; ( elem = elems[ i ] ) != null; i++ ) {\n\t\t\tif ( forceAcceptData || acceptData( elem ) ) {\n\n\t\t\t\tid = elem[ internalKey ];\n\t\t\t\tdata = id && cache[ id ];\n\n\t\t\t\tif ( data ) {\n\t\t\t\t\tif ( data.events ) {\n\t\t\t\t\t\tfor ( type in data.events ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove cache only if it was not already removed by jQuery.event.remove\n\t\t\t\t\tif ( cache[ id ] ) {\n\n\t\t\t\t\t\tdelete cache[ id ];\n\n\t\t\t\t\t\t// Support: IE<9\n\t\t\t\t\t\t// IE does not allow us to delete expando properties from nodes\n\t\t\t\t\t\t// IE creates expando attributes along with the property\n\t\t\t\t\t\t// IE does not have a removeAttribute function on Document nodes\n\t\t\t\t\t\tif ( !attributes && typeof elem.removeAttribute !== \"undefined\" ) {\n\t\t\t\t\t\t\telem.removeAttribute( internalKey );\n\n\t\t\t\t\t\t// Webkit & Blink performance suffers when deleting properties\n\t\t\t\t\t\t// from DOM nodes, so set to undefined instead\n\t\t\t\t\t\t// https://code.google.com/p/chromium/issues/detail?id=378607\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telem[ internalKey ] = undefined;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdeletedIds.push( id );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} );\n\njQuery.fn.extend( {\n\n\t// Keep domManip exposed until 3.0 (gh-2225)\n\tdomManip: domManip,\n\n\tdetach: function( selector ) {\n\t\treturn remove( this, selector, true );\n\t},\n\n\tremove: function( selector ) {\n\t\treturn remove( this, selector );\n\t},\n\n\ttext: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().append(\n\t\t\t\t\t( this[ 0 ] && this[ 0 ].ownerDocument || document ).createTextNode( value )\n\t\t\t\t);\n\t\t}, null, value, arguments.length );\n\t},\n\n\tappend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.appendChild( elem );\n\t\t\t}\n\t\t} );\n\t},\n\n\tprepend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n\t\t\t}\n\t\t} );\n\t},\n\n\tbefore: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t} );\n\t},\n\n\tafter: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t} );\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = this[ i ] ) != null; i++ ) {\n\n\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t}\n\n\t\t\t// Remove any remaining nodes\n\t\t\twhile ( elem.firstChild ) {\n\t\t\t\telem.removeChild( elem.firstChild );\n\t\t\t}\n\n\t\t\t// If this is a select, ensure that it displays empty (#12336)\n\t\t\t// Support: IE<9\n\t\t\tif ( elem.options && jQuery.nodeName( elem, \"select\" ) ) {\n\t\t\t\telem.options.length = 0;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map( function() {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t} );\n\t},\n\n\thtml: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\tvar elem = this[ 0 ] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined ) {\n\t\t\t\treturn elem.nodeType === 1 ?\n\t\t\t\t\telem.innerHTML.replace( rinlinejQuery, \"\" ) :\n\t\t\t\t\tundefined;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t( support.htmlSerialize || !rnoshimcache.test( value )  ) &&\n\t\t\t\t( support.leadingWhitespace || !rleadingWhitespace.test( value ) ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n\n\t\t\t\tvalue = jQuery.htmlPrefilter( value );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor ( ; i < l; i++ ) {\n\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\telem = this[ i ] || {};\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch ( e ) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function() {\n\t\tvar ignored = [];\n\n\t\t// Make the changes, replacing each non-ignored context element with the new content\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tvar parent = this.parentNode;\n\n\t\t\tif ( jQuery.inArray( this, ignored ) < 0 ) {\n\t\t\t\tjQuery.cleanData( getAll( this ) );\n\t\t\t\tif ( parent ) {\n\t\t\t\t\tparent.replaceChild( elem, this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Force callback invocation\n\t\t}, ignored );\n\t}\n} );\n\njQuery.each( {\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\ti = 0,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone( true );\n\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n\n\t\t\t// Modern browsers can apply jQuery collections as arrays, but oldIE needs a .get()\n\t\t\tpush.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n} );\n\n\nvar iframe,\n\telemdisplay = {\n\n\t\t// Support: Firefox\n\t\t// We have to pre-define these values for FF (#10227)\n\t\tHTML: \"block\",\n\t\tBODY: \"block\"\n\t};\n\n/**\n * Retrieve the actual display of a element\n * @param {String} name nodeName of the element\n * @param {Object} doc Document object\n */\n\n// Called only from within defaultDisplay\nfunction actualDisplay( name, doc ) {\n\tvar elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),\n\n\t\tdisplay = jQuery.css( elem[ 0 ], \"display\" );\n\n\t// We don't have any data stored on the element,\n\t// so use \"detach\" method as fast way to get rid of the element\n\telem.detach();\n\n\treturn display;\n}\n\n/**\n * Try to determine the default display value of an element\n * @param {String} nodeName\n */\nfunction defaultDisplay( nodeName ) {\n\tvar doc = document,\n\t\tdisplay = elemdisplay[ nodeName ];\n\n\tif ( !display ) {\n\t\tdisplay = actualDisplay( nodeName, doc );\n\n\t\t// If the simple way fails, read from inside an iframe\n\t\tif ( display === \"none\" || !display ) {\n\n\t\t\t// Use the already-created iframe if possible\n\t\t\tiframe = ( iframe || jQuery( \"<iframe frameborder='0' width='0' height='0'/>\" ) )\n\t\t\t\t.appendTo( doc.documentElement );\n\n\t\t\t// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse\n\t\t\tdoc = ( iframe[ 0 ].contentWindow || iframe[ 0 ].contentDocument ).document;\n\n\t\t\t// Support: IE\n\t\t\tdoc.write();\n\t\t\tdoc.close();\n\n\t\t\tdisplay = actualDisplay( nodeName, doc );\n\t\t\tiframe.detach();\n\t\t}\n\n\t\t// Store the correct default display\n\t\telemdisplay[ nodeName ] = display;\n\t}\n\n\treturn display;\n}\nvar rmargin = ( /^margin/ );\n\nvar rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n\nvar swap = function( elem, options, callback, args ) {\n\tvar ret, name,\n\t\told = {};\n\n\t// Remember the old values, and insert the new ones\n\tfor ( name in options ) {\n\t\told[ name ] = elem.style[ name ];\n\t\telem.style[ name ] = options[ name ];\n\t}\n\n\tret = callback.apply( elem, args || [] );\n\n\t// Revert the old values\n\tfor ( name in options ) {\n\t\telem.style[ name ] = old[ name ];\n\t}\n\n\treturn ret;\n};\n\n\nvar documentElement = document.documentElement;\n\n\n\n( function() {\n\tvar pixelPositionVal, pixelMarginRightVal, boxSizingReliableVal,\n\t\treliableHiddenOffsetsVal, reliableMarginRightVal, reliableMarginLeftVal,\n\t\tcontainer = document.createElement( \"div\" ),\n\t\tdiv = document.createElement( \"div\" );\n\n\t// Finish early in limited (non-browser) environments\n\tif ( !div.style ) {\n\t\treturn;\n\t}\n\n\tdiv.style.cssText = \"float:left;opacity:.5\";\n\n\t// Support: IE<9\n\t// Make sure that element opacity exists (as opposed to filter)\n\tsupport.opacity = div.style.opacity === \"0.5\";\n\n\t// Verify style float existence\n\t// (IE uses styleFloat instead of cssFloat)\n\tsupport.cssFloat = !!div.style.cssFloat;\n\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\tcontainer = document.createElement( \"div\" );\n\tcontainer.style.cssText = \"border:0;width:8px;height:0;top:0;left:-9999px;\" +\n\t\t\"padding:0;margin-top:1px;position:absolute\";\n\tdiv.innerHTML = \"\";\n\tcontainer.appendChild( div );\n\n\t// Support: Firefox<29, Android 2.3\n\t// Vendor-prefix box-sizing\n\tsupport.boxSizing = div.style.boxSizing === \"\" || div.style.MozBoxSizing === \"\" ||\n\t\tdiv.style.WebkitBoxSizing === \"\";\n\n\tjQuery.extend( support, {\n\t\treliableHiddenOffsets: function() {\n\t\t\tif ( pixelPositionVal == null ) {\n\t\t\t\tcomputeStyleTests();\n\t\t\t}\n\t\t\treturn reliableHiddenOffsetsVal;\n\t\t},\n\n\t\tboxSizingReliable: function() {\n\n\t\t\t// We're checking for pixelPositionVal here instead of boxSizingReliableVal\n\t\t\t// since that compresses better and they're computed together anyway.\n\t\t\tif ( pixelPositionVal == null ) {\n\t\t\t\tcomputeStyleTests();\n\t\t\t}\n\t\t\treturn boxSizingReliableVal;\n\t\t},\n\n\t\tpixelMarginRight: function() {\n\n\t\t\t// Support: Android 4.0-4.3\n\t\t\tif ( pixelPositionVal == null ) {\n\t\t\t\tcomputeStyleTests();\n\t\t\t}\n\t\t\treturn pixelMarginRightVal;\n\t\t},\n\n\t\tpixelPosition: function() {\n\t\t\tif ( pixelPositionVal == null ) {\n\t\t\t\tcomputeStyleTests();\n\t\t\t}\n\t\t\treturn pixelPositionVal;\n\t\t},\n\n\t\treliableMarginRight: function() {\n\n\t\t\t// Support: Android 2.3\n\t\t\tif ( pixelPositionVal == null ) {\n\t\t\t\tcomputeStyleTests();\n\t\t\t}\n\t\t\treturn reliableMarginRightVal;\n\t\t},\n\n\t\treliableMarginLeft: function() {\n\n\t\t\t// Support: IE <=8 only, Android 4.0 - 4.3 only, Firefox <=3 - 37\n\t\t\tif ( pixelPositionVal == null ) {\n\t\t\t\tcomputeStyleTests();\n\t\t\t}\n\t\t\treturn reliableMarginLeftVal;\n\t\t}\n\t} );\n\n\tfunction computeStyleTests() {\n\t\tvar contents, divStyle,\n\t\t\tdocumentElement = document.documentElement;\n\n\t\t// Setup\n\t\tdocumentElement.appendChild( container );\n\n\t\tdiv.style.cssText =\n\n\t\t\t// Support: Android 2.3\n\t\t\t// Vendor-prefix box-sizing\n\t\t\t\"-webkit-box-sizing:border-box;box-sizing:border-box;\" +\n\t\t\t\"position:relative;display:block;\" +\n\t\t\t\"margin:auto;border:1px;padding:1px;\" +\n\t\t\t\"top:1%;width:50%\";\n\n\t\t// Support: IE<9\n\t\t// Assume reasonable values in the absence of getComputedStyle\n\t\tpixelPositionVal = boxSizingReliableVal = reliableMarginLeftVal = false;\n\t\tpixelMarginRightVal = reliableMarginRightVal = true;\n\n\t\t// Check for getComputedStyle so that this code is not run in IE<9.\n\t\tif ( window.getComputedStyle ) {\n\t\t\tdivStyle = window.getComputedStyle( div );\n\t\t\tpixelPositionVal = ( divStyle || {} ).top !== \"1%\";\n\t\t\treliableMarginLeftVal = ( divStyle || {} ).marginLeft === \"2px\";\n\t\t\tboxSizingReliableVal = ( divStyle || { width: \"4px\" } ).width === \"4px\";\n\n\t\t\t// Support: Android 4.0 - 4.3 only\n\t\t\t// Some styles come back with percentage values, even though they shouldn't\n\t\t\tdiv.style.marginRight = \"50%\";\n\t\t\tpixelMarginRightVal = ( divStyle || { marginRight: \"4px\" } ).marginRight === \"4px\";\n\n\t\t\t// Support: Android 2.3 only\n\t\t\t// Div with explicit width and no margin-right incorrectly\n\t\t\t// gets computed margin-right based on width of container (#3333)\n\t\t\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\n\t\t\tcontents = div.appendChild( document.createElement( \"div\" ) );\n\n\t\t\t// Reset CSS: box-sizing; display; margin; border; padding\n\t\t\tcontents.style.cssText = div.style.cssText =\n\n\t\t\t\t// Support: Android 2.3\n\t\t\t\t// Vendor-prefix box-sizing\n\t\t\t\t\"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;\" +\n\t\t\t\t\"box-sizing:content-box;display:block;margin:0;border:0;padding:0\";\n\t\t\tcontents.style.marginRight = contents.style.width = \"0\";\n\t\t\tdiv.style.width = \"1px\";\n\n\t\t\treliableMarginRightVal =\n\t\t\t\t!parseFloat( ( window.getComputedStyle( contents ) || {} ).marginRight );\n\n\t\t\tdiv.removeChild( contents );\n\t\t}\n\n\t\t// Support: IE6-8\n\t\t// First check that getClientRects works as expected\n\t\t// Check if table cells still have offsetWidth/Height when they are set\n\t\t// to display:none and there are still other visible table cells in a\n\t\t// table row; if so, offsetWidth/Height are not reliable for use when\n\t\t// determining if an element has been hidden directly using\n\t\t// display:none (it is still safe to use offsets if a parent element is\n\t\t// hidden; don safety goggles and see bug #4512 for more information).\n\t\tdiv.style.display = \"none\";\n\t\treliableHiddenOffsetsVal = div.getClientRects().length === 0;\n\t\tif ( reliableHiddenOffsetsVal ) {\n\t\t\tdiv.style.display = \"\";\n\t\t\tdiv.innerHTML = \"<table><tr><td></td><td>t</td></tr></table>\";\n\t\t\tdiv.childNodes[ 0 ].style.borderCollapse = \"separate\";\n\t\t\tcontents = div.getElementsByTagName( \"td\" );\n\t\t\tcontents[ 0 ].style.cssText = \"margin:0;border:0;padding:0;display:none\";\n\t\t\treliableHiddenOffsetsVal = contents[ 0 ].offsetHeight === 0;\n\t\t\tif ( reliableHiddenOffsetsVal ) {\n\t\t\t\tcontents[ 0 ].style.display = \"\";\n\t\t\t\tcontents[ 1 ].style.display = \"none\";\n\t\t\t\treliableHiddenOffsetsVal = contents[ 0 ].offsetHeight === 0;\n\t\t\t}\n\t\t}\n\n\t\t// Teardown\n\t\tdocumentElement.removeChild( container );\n\t}\n\n} )();\n\n\nvar getStyles, curCSS,\n\trposition = /^(top|right|bottom|left)$/;\n\nif ( window.getComputedStyle ) {\n\tgetStyles = function( elem ) {\n\n\t\t// Support: IE<=11+, Firefox<=30+ (#15098, #14150)\n\t\t// IE throws on elements created in popups\n\t\t// FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n\t\tvar view = elem.ownerDocument.defaultView;\n\n\t\tif ( !view || !view.opener ) {\n\t\t\tview = window;\n\t\t}\n\n\t\treturn view.getComputedStyle( elem );\n\t};\n\n\tcurCSS = function( elem, name, computed ) {\n\t\tvar width, minWidth, maxWidth, ret,\n\t\t\tstyle = elem.style;\n\n\t\tcomputed = computed || getStyles( elem );\n\n\t\t// getPropertyValue is only needed for .css('filter') in IE9, see #12537\n\t\tret = computed ? computed.getPropertyValue( name ) || computed[ name ] : undefined;\n\n\t\t// Support: Opera 12.1x only\n\t\t// Fall back to style even without computed\n\t\t// computed is undefined for elems on document fragments\n\t\tif ( ( ret === \"\" || ret === undefined ) && !jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\tret = jQuery.style( elem, name );\n\t\t}\n\n\t\tif ( computed ) {\n\n\t\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t\t// Chrome < 17 and Safari 5.0 uses \"computed value\"\n\t\t\t// instead of \"used value\" for margin-right\n\t\t\t// Safari 5.1.7 (at least) returns percentage for a larger set of values,\n\t\t\t// but width seems to be reliably pixels\n\t\t\t// this is against the CSSOM draft spec:\n\t\t\t// http://dev.w3.org/csswg/cssom/#resolved-values\n\t\t\tif ( !support.pixelMarginRight() && rnumnonpx.test( ret ) && rmargin.test( name ) ) {\n\n\t\t\t\t// Remember the original values\n\t\t\t\twidth = style.width;\n\t\t\t\tminWidth = style.minWidth;\n\t\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t\t// Put in the new values to get a computed value out\n\t\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\t\tret = computed.width;\n\n\t\t\t\t// Revert the changed values\n\t\t\t\tstyle.width = width;\n\t\t\t\tstyle.minWidth = minWidth;\n\t\t\t\tstyle.maxWidth = maxWidth;\n\t\t\t}\n\t\t}\n\n\t\t// Support: IE\n\t\t// IE returns zIndex value as an integer.\n\t\treturn ret === undefined ?\n\t\t\tret :\n\t\t\tret + \"\";\n\t};\n} else if ( documentElement.currentStyle ) {\n\tgetStyles = function( elem ) {\n\t\treturn elem.currentStyle;\n\t};\n\n\tcurCSS = function( elem, name, computed ) {\n\t\tvar left, rs, rsLeft, ret,\n\t\t\tstyle = elem.style;\n\n\t\tcomputed = computed || getStyles( elem );\n\t\tret = computed ? computed[ name ] : undefined;\n\n\t\t// Avoid setting ret to empty string here\n\t\t// so we don't default to auto\n\t\tif ( ret == null && style && style[ name ] ) {\n\t\t\tret = style[ name ];\n\t\t}\n\n\t\t// From the awesome hack by Dean Edwards\n\t\t// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291\n\n\t\t// If we're not dealing with a regular pixel number\n\t\t// but a number that has a weird ending, we need to convert it to pixels\n\t\t// but not position css attributes, as those are\n\t\t// proportional to the parent element instead\n\t\t// and we can't measure the parent instead because it\n\t\t// might trigger a \"stacking dolls\" problem\n\t\tif ( rnumnonpx.test( ret ) && !rposition.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\tleft = style.left;\n\t\t\trs = elem.runtimeStyle;\n\t\t\trsLeft = rs && rs.left;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tif ( rsLeft ) {\n\t\t\t\trs.left = elem.currentStyle.left;\n\t\t\t}\n\t\t\tstyle.left = name === \"fontSize\" ? \"1em\" : ret;\n\t\t\tret = style.pixelLeft + \"px\";\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.left = left;\n\t\t\tif ( rsLeft ) {\n\t\t\t\trs.left = rsLeft;\n\t\t\t}\n\t\t}\n\n\t\t// Support: IE\n\t\t// IE returns zIndex value as an integer.\n\t\treturn ret === undefined ?\n\t\t\tret :\n\t\t\tret + \"\" || \"auto\";\n\t};\n}\n\n\n\n\nfunction addGetHookIf( conditionFn, hookFn ) {\n\n\t// Define the hook, we'll check on the first run if it's really needed.\n\treturn {\n\t\tget: function() {\n\t\t\tif ( conditionFn() ) {\n\n\t\t\t\t// Hook not needed (or it's not possible to use it due\n\t\t\t\t// to missing dependency), remove it.\n\t\t\t\tdelete this.get;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Hook needed; redefine it so that the support test is not executed again.\n\t\t\treturn ( this.get = hookFn ).apply( this, arguments );\n\t\t}\n\t};\n}\n\n\nvar\n\n\t\tralpha = /alpha\\([^)]*\\)/i,\n\tropacity = /opacity\\s*=\\s*([^)]*)/i,\n\n\t// swappable if display is none or starts with table except\n\t// \"table\", \"table-cell\", or \"table-caption\"\n\t// see here for display values:\n\t// https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\trnumsplit = new RegExp( \"^(\" + pnum + \")(.*)$\", \"i\" ),\n\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: \"0\",\n\t\tfontWeight: \"400\"\n\t},\n\n\tcssPrefixes = [ \"Webkit\", \"O\", \"Moz\", \"ms\" ],\n\temptyStyle = document.createElement( \"div\" ).style;\n\n\n// return a css property mapped to a potentially vendor prefixed property\nfunction vendorPropName( name ) {\n\n\t// shortcut for names that are not vendor prefixed\n\tif ( name in emptyStyle ) {\n\t\treturn name;\n\t}\n\n\t// check for vendor prefixed names\n\tvar capName = name.charAt( 0 ).toUpperCase() + name.slice( 1 ),\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in emptyStyle ) {\n\t\t\treturn name;\n\t\t}\n\t}\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem, hidden,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvalues[ index ] = jQuery._data( elem, \"olddisplay\" );\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\n\t\t\t// Reset the inline display of this element to learn if it is\n\t\t\t// being hidden by cascaded rules or not\n\t\t\tif ( !values[ index ] && display === \"none\" ) {\n\t\t\t\telem.style.display = \"\";\n\t\t\t}\n\n\t\t\t// Set elements which have been overridden with display: none\n\t\t\t// in a stylesheet to whatever the default browser style is\n\t\t\t// for such an element\n\t\t\tif ( elem.style.display === \"\" && isHidden( elem ) ) {\n\t\t\t\tvalues[ index ] =\n\t\t\t\t\tjQuery._data( elem, \"olddisplay\", defaultDisplay( elem.nodeName ) );\n\t\t\t}\n\t\t} else {\n\t\t\thidden = isHidden( elem );\n\n\t\t\tif ( display && display !== \"none\" || !hidden ) {\n\t\t\t\tjQuery._data(\n\t\t\t\t\telem,\n\t\t\t\t\t\"olddisplay\",\n\t\t\t\t\thidden ? display : jQuery.css( elem, \"display\" )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of most of the elements in a second loop\n\t// to avoid the constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\t\tif ( !show || elem.style.display === \"none\" || elem.style.display === \"\" ) {\n\t\t\telem.style.display = show ? values[ index ] || \"\" : \"none\";\n\t\t}\n\t}\n\n\treturn elements;\n}\n\nfunction setPositiveNumber( elem, value, subtract ) {\n\tvar matches = rnumsplit.exec( value );\n\treturn matches ?\n\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {\n\tvar i = extra === ( isBorderBox ? \"border\" : \"content\" ) ?\n\n\t\t// If we already have the right measurement, avoid augmentation\n\t\t4 :\n\n\t\t// Otherwise initialize for horizontal or vertical properties\n\t\tname === \"width\" ? 1 : 0,\n\n\t\tval = 0;\n\n\tfor ( ; i < 4; i += 2 ) {\n\n\t\t// both box models exclude margin, so add it if we want it\n\t\tif ( extra === \"margin\" ) {\n\t\t\tval += jQuery.css( elem, extra + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\tif ( isBorderBox ) {\n\n\t\t\t// border-box includes padding, so remove it if we want content\n\t\t\tif ( extra === \"content\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// at this point, extra isn't border nor margin, so remove border\n\t\t\tif ( extra !== \"margin\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t} else {\n\n\t\t\t// at this point, extra isn't content, so add padding\n\t\t\tval += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// at this point, extra isn't content nor padding, so add border\n\t\t\tif ( extra !== \"padding\" ) {\n\t\t\t\tval += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn val;\n}\n\nfunction getWidthOrHeight( elem, name, extra ) {\n\n\t// Start with offset property, which is equivalent to the border-box value\n\tvar valueIsBorderBox = true,\n\t\tval = name === \"width\" ? elem.offsetWidth : elem.offsetHeight,\n\t\tstyles = getStyles( elem ),\n\t\tisBorderBox = support.boxSizing &&\n\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n\n\t// some non-html elements return undefined for offsetWidth, so check for null/undefined\n\t// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285\n\t// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668\n\tif ( val <= 0 || val == null ) {\n\n\t\t// Fall back to computed then uncomputed css if necessary\n\t\tval = curCSS( elem, name, styles );\n\t\tif ( val < 0 || val == null ) {\n\t\t\tval = elem.style[ name ];\n\t\t}\n\n\t\t// Computed unit is not pixels. Stop here and return.\n\t\tif ( rnumnonpx.test( val ) ) {\n\t\t\treturn val;\n\t\t}\n\n\t\t// we need the check for style in case a browser which returns unreliable values\n\t\t// for getComputedStyle silently falls back to the reliable elem.style\n\t\tvalueIsBorderBox = isBorderBox &&\n\t\t\t( support.boxSizingReliable() || val === elem.style[ name ] );\n\n\t\t// Normalize \"\", auto, and prepare for extra\n\t\tval = parseFloat( val ) || 0;\n\t}\n\n\t// use the active box-sizing model to add/subtract irrelevant styles\n\treturn ( val +\n\t\taugmentWidthOrHeight(\n\t\t\telem,\n\t\t\tname,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles\n\t\t)\n\t) + \"px\";\n}\n\njQuery.extend( {\n\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Don't automatically add \"px\" to these possibly-unitless properties\n\tcssNumber: {\n\t\t\"animationIterationCount\": true,\n\t\t\"columnCount\": true,\n\t\t\"fillOpacity\": true,\n\t\t\"flexGrow\": true,\n\t\t\"flexShrink\": true,\n\t\t\"fontWeight\": true,\n\t\t\"lineHeight\": true,\n\t\t\"opacity\": true,\n\t\t\"order\": true,\n\t\t\"orphans\": true,\n\t\t\"widows\": true,\n\t\t\"zIndex\": true,\n\t\t\"zoom\": true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {\n\n\t\t// normalize float css property\n\t\t\"float\": support.cssFloat ? \"cssFloat\" : \"styleFloat\"\n\t},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = jQuery.camelCase( name ),\n\t\t\tstyle = elem.style;\n\n\t\tname = jQuery.cssProps[ origName ] ||\n\t\t\t( jQuery.cssProps[ origName ] = vendorPropName( origName ) || origName );\n\n\t\t// gets hook for the prefixed version\n\t\t// followed by the unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// Convert \"+=\" or \"-=\" to relative numbers (#7345)\n\t\t\tif ( type === \"string\" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {\n\t\t\t\tvalue = adjustCSS( elem, name, ret );\n\n\t\t\t\t// Fixes bug #9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that null and NaN values aren't set. See: #7116\n\t\t\tif ( value == null || value !== value ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number was passed in, add the unit (except for certain CSS properties)\n\t\t\tif ( type === \"number\" ) {\n\t\t\t\tvalue += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? \"\" : \"px\" );\n\t\t\t}\n\n\t\t\t// Fixes #8908, it can be done more correctly by specifing setters in cssHooks,\n\t\t\t// but it would mean to define eight\n\t\t\t// (for every problematic property) identical functions\n\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !( \"set\" in hooks ) ||\n\t\t\t\t( value = hooks.set( elem, value, extra ) ) !== undefined ) {\n\n\t\t\t\t// Support: IE\n\t\t\t\t// Swallow errors from 'invalid' CSS values (#5509)\n\t\t\t\ttry {\n\t\t\t\t\tstyle[ name ] = value;\n\t\t\t\t} catch ( e ) {}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks &&\n\t\t\t\t( ret = hooks.get( elem, false, extra ) ) !== undefined ) {\n\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar num, val, hooks,\n\t\t\torigName = jQuery.camelCase( name );\n\n\t\t// Make sure that we're working with the right name\n\t\tname = jQuery.cssProps[ origName ] ||\n\t\t\t( jQuery.cssProps[ origName ] = vendorPropName( origName ) || origName );\n\n\t\t// gets hook for the prefixed version\n\t\t// followed by the unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t//convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Return, converting to number if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || isFinite( num ) ? num || 0 : val;\n\t\t}\n\t\treturn val;\n\t}\n} );\n\njQuery.each( [ \"height\", \"width\" ], function( i, name ) {\n\tjQuery.cssHooks[ name ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\n\t\t\t\t// certain elements can have dimension info if we invisibly show them\n\t\t\t\t// however, it must have a current display style that would benefit from this\n\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) &&\n\t\t\t\t\telem.offsetWidth === 0 ?\n\t\t\t\t\t\tswap( elem, cssShow, function() {\n\t\t\t\t\t\t\treturn getWidthOrHeight( elem, name, extra );\n\t\t\t\t\t\t} ) :\n\t\t\t\t\t\tgetWidthOrHeight( elem, name, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar styles = extra && getStyles( elem );\n\t\t\treturn setPositiveNumber( elem, value, extra ?\n\t\t\t\taugmentWidthOrHeight(\n\t\t\t\t\telem,\n\t\t\t\t\tname,\n\t\t\t\t\textra,\n\t\t\t\t\tsupport.boxSizing &&\n\t\t\t\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\t\tstyles\n\t\t\t\t) : 0\n\t\t\t);\n\t\t}\n\t};\n} );\n\nif ( !support.opacity ) {\n\tjQuery.cssHooks.opacity = {\n\t\tget: function( elem, computed ) {\n\n\t\t\t// IE uses filters for opacity\n\t\t\treturn ropacity.test( ( computed && elem.currentStyle ?\n\t\t\t\telem.currentStyle.filter :\n\t\t\t\telem.style.filter ) || \"\" ) ?\n\t\t\t\t\t( 0.01 * parseFloat( RegExp.$1 ) ) + \"\" :\n\t\t\t\t\tcomputed ? \"1\" : \"\";\n\t\t},\n\n\t\tset: function( elem, value ) {\n\t\t\tvar style = elem.style,\n\t\t\t\tcurrentStyle = elem.currentStyle,\n\t\t\t\topacity = jQuery.isNumeric( value ) ? \"alpha(opacity=\" + value * 100 + \")\" : \"\",\n\t\t\t\tfilter = currentStyle && currentStyle.filter || style.filter || \"\";\n\n\t\t\t// IE has trouble with opacity if it does not have layout\n\t\t\t// Force it by setting the zoom level\n\t\t\tstyle.zoom = 1;\n\n\t\t\t// if setting opacity to 1, and no other filters exist -\n\t\t\t// attempt to remove filter attribute #6652\n\t\t\t// if value === \"\", then remove inline opacity #12685\n\t\t\tif ( ( value >= 1 || value === \"\" ) &&\n\t\t\t\t\tjQuery.trim( filter.replace( ralpha, \"\" ) ) === \"\" &&\n\t\t\t\t\tstyle.removeAttribute ) {\n\n\t\t\t\t// Setting style.filter to null, \"\" & \" \" still leave \"filter:\" in the cssText\n\t\t\t\t// if \"filter:\" is present at all, clearType is disabled, we want to avoid this\n\t\t\t\t// style.removeAttribute is IE Only, but so apparently is this code path...\n\t\t\t\tstyle.removeAttribute( \"filter\" );\n\n\t\t\t\t// if there is no filter style applied in a css rule\n\t\t\t\t// or unset inline opacity, we are done\n\t\t\t\tif ( value === \"\" || currentStyle && !currentStyle.filter ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// otherwise, set new filter values\n\t\t\tstyle.filter = ralpha.test( filter ) ?\n\t\t\t\tfilter.replace( ralpha, opacity ) :\n\t\t\t\tfilter + \" \" + opacity;\n\t\t}\n\t};\n}\n\njQuery.cssHooks.marginRight = addGetHookIf( support.reliableMarginRight,\n\tfunction( elem, computed ) {\n\t\tif ( computed ) {\n\t\t\treturn swap( elem, { \"display\": \"inline-block\" },\n\t\t\t\tcurCSS, [ elem, \"marginRight\" ] );\n\t\t}\n\t}\n);\n\njQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,\n\tfunction( elem, computed ) {\n\t\tif ( computed ) {\n\t\t\treturn (\n\t\t\t\tparseFloat( curCSS( elem, \"marginLeft\" ) ) ||\n\n\t\t\t\t// Support: IE<=11+\n\t\t\t\t// Running getBoundingClientRect on a disconnected node in IE throws an error\n\t\t\t\t// Support: IE8 only\n\t\t\t\t// getClientRects() errors on disconnected elems\n\t\t\t\t( jQuery.contains( elem.ownerDocument, elem ) ?\n\t\t\t\t\telem.getBoundingClientRect().left -\n\t\t\t\t\t\tswap( elem, { marginLeft: 0 }, function() {\n\t\t\t\t\t\t\treturn elem.getBoundingClientRect().left;\n\t\t\t\t\t\t} ) :\n\t\t\t\t\t0\n\t\t\t\t)\n\t\t\t) + \"px\";\n\t\t}\n\t}\n);\n\n// These hooks are used by animate to expand properties\njQuery.each( {\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split( \" \" ) : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( !rmargin.test( prefix ) ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n} );\n\njQuery.fn.extend( {\n\tcss: function( name, value ) {\n\t\treturn access( this, function( elem, name, value ) {\n\t\t\tvar styles, len,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( jQuery.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t},\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tif ( typeof state === \"boolean\" ) {\n\t\t\treturn state ? this.show() : this.hide();\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tif ( isHidden( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t} );\n\t}\n} );\n\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || jQuery.easing._default;\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\t// Use a property on the element directly when it is not a DOM element,\n\t\t\t// or when there is no matching style property that exists.\n\t\t\tif ( tween.elem.nodeType !== 1 ||\n\t\t\t\ttween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails\n\t\t\t// so, simple values such as \"10px\" are parsed to Float.\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\n\t\t\t// use step hook for back compat - use cssHook if its there - use .style if its\n\t\t\t// available and use plain properties where available\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.nodeType === 1 &&\n\t\t\t\t( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null ||\n\t\t\t\t\tjQuery.cssHooks[ tween.prop ] ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Support: IE <=9\n// Panic based approach to setting things on disconnected nodes\n\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p * Math.PI ) / 2;\n\t},\n\t_default: \"swing\"\n};\n\njQuery.fx = Tween.prototype.init;\n\n// Back Compat <1.8 extension point\njQuery.fx.step = {};\n\n\n\n\nvar\n\tfxNow, timerId,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trrun = /queueHooks$/;\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\twindow.setTimeout( function() {\n\t\tfxNow = undefined;\n\t} );\n\treturn ( fxNow = jQuery.now() );\n}\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\tattrs = { height: type },\n\t\ti = 0;\n\n\t// if we include width, step value is 1 to do all cssExpand values,\n\t// if we don't include width, step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth ? 1 : 0;\n\tfor ( ; i < 4 ; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\nfunction createTween( value, prop, animation ) {\n\tvar tween,\n\t\tcollection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ \"*\" ] ),\n\t\tindex = 0,\n\t\tlength = collection.length;\n\tfor ( ; index < length; index++ ) {\n\t\tif ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {\n\n\t\t\t// we're done with this property\n\t\t\treturn tween;\n\t\t}\n\t}\n}\n\nfunction defaultPrefilter( elem, props, opts ) {\n\t/* jshint validthis: true */\n\tvar prop, value, toggle, tween, hooks, oldfire, display, checkDisplay,\n\t\tanim = this,\n\t\torig = {},\n\t\tstyle = elem.style,\n\t\thidden = elem.nodeType && isHidden( elem ),\n\t\tdataShow = jQuery._data( elem, \"fxshow\" );\n\n\t// handle queue: false promises\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always( function() {\n\n\t\t\t// doing this makes sure that the complete handler will be called\n\t\t\t// before this completes\n\t\t\tanim.always( function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\t// height/width overflow pass\n\tif ( elem.nodeType === 1 && ( \"height\" in props || \"width\" in props ) ) {\n\n\t\t// Make sure that nothing sneaks out\n\t\t// Record all 3 overflow attributes because IE does not\n\t\t// change the overflow attribute when overflowX and\n\t\t// overflowY are set to the same value\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Set display property to inline-block for height/width\n\t\t// animations on inline elements that are having width/height animated\n\t\tdisplay = jQuery.css( elem, \"display\" );\n\n\t\t// Test default display if display is currently \"none\"\n\t\tcheckDisplay = display === \"none\" ?\n\t\t\tjQuery._data( elem, \"olddisplay\" ) || defaultDisplay( elem.nodeName ) : display;\n\n\t\tif ( checkDisplay === \"inline\" && jQuery.css( elem, \"float\" ) === \"none\" ) {\n\n\t\t\t// inline-level elements accept inline-block;\n\t\t\t// block-level elements need to be inline with layout\n\t\t\tif ( !support.inlineBlockNeedsLayout || defaultDisplay( elem.nodeName ) === \"inline\" ) {\n\t\t\t\tstyle.display = \"inline-block\";\n\t\t\t} else {\n\t\t\t\tstyle.zoom = 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tif ( !support.shrinkWrapBlocks() ) {\n\t\t\tanim.always( function() {\n\t\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t\t} );\n\t\t}\n\t}\n\n\t// show/hide pass\n\tfor ( prop in props ) {\n\t\tvalue = props[ prop ];\n\t\tif ( rfxtypes.exec( value ) ) {\n\t\t\tdelete props[ prop ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\n\t\t\t\t// If there is dataShow left over from a stopped hide or show\n\t\t\t\t// and we are going to proceed with show, we should pretend to be hidden\n\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n\t\t\t\t\thidden = true;\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n\n\t\t// Any non-fx value stops us from restoring the original display value\n\t\t} else {\n\t\t\tdisplay = undefined;\n\t\t}\n\t}\n\n\tif ( !jQuery.isEmptyObject( orig ) ) {\n\t\tif ( dataShow ) {\n\t\t\tif ( \"hidden\" in dataShow ) {\n\t\t\t\thidden = dataShow.hidden;\n\t\t\t}\n\t\t} else {\n\t\t\tdataShow = jQuery._data( elem, \"fxshow\", {} );\n\t\t}\n\n\t\t// store state if its toggle - enables .stop().toggle() to \"reverse\"\n\t\tif ( toggle ) {\n\t\t\tdataShow.hidden = !hidden;\n\t\t}\n\t\tif ( hidden ) {\n\t\t\tjQuery( elem ).show();\n\t\t} else {\n\t\t\tanim.done( function() {\n\t\t\t\tjQuery( elem ).hide();\n\t\t\t} );\n\t\t}\n\t\tanim.done( function() {\n\t\t\tvar prop;\n\t\t\tjQuery._removeData( elem, \"fxshow\" );\n\t\t\tfor ( prop in orig ) {\n\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t}\n\t\t} );\n\t\tfor ( prop in orig ) {\n\t\t\ttween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n\n\t\t\tif ( !( prop in dataShow ) ) {\n\t\t\t\tdataShow[ prop ] = tween.start;\n\t\t\t\tif ( hidden ) {\n\t\t\t\t\ttween.end = tween.start;\n\t\t\t\t\ttween.start = prop === \"width\" || prop === \"height\" ? 1 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t// If this is a noop like .hide().hide(), restore an overwritten display value\n\t} else if ( ( display === \"none\" ? defaultDisplay( elem.nodeName ) : display ) === \"inline\" ) {\n\t\tstyle.display = display;\n\t}\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar index, name, easing, value, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = jQuery.camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( jQuery.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// not quite $.extend, this wont overwrite keys already present.\n\t\t\t// also - reusing 'index' from above because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = Animation.prefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\n\t\t\t// don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t} ),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\n\t\t\t\t// Support: Android 2.3\n\t\t\t\t// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ] );\n\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t} else {\n\t\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tanimation = deferred.promise( {\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, {\n\t\t\t\tspecialEasing: {},\n\t\t\t\teasing: jQuery.easing._default\n\t\t\t}, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\n\t\t\t\t\t// if we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// resolve when we played the last frame\n\t\t\t\t// otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t} ),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length ; index++ ) {\n\t\tresult = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\tif ( jQuery.isFunction( result.stop ) ) {\n\t\t\t\tjQuery._queueHooks( animation.elem, animation.opts.queue ).stop =\n\t\t\t\t\tjQuery.proxy( result.stop, result );\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tjQuery.map( props, createTween, animation );\n\n\tif ( jQuery.isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t} )\n\t);\n\n\t// attach callbacks from options\n\treturn animation.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweeners: {\n\t\t\"*\": [ function( prop, value ) {\n\t\t\tvar tween = this.createTween( prop, value );\n\t\t\tadjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );\n\t\t\treturn tween;\n\t\t} ]\n\t},\n\n\ttweener: function( props, callback ) {\n\t\tif ( jQuery.isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.match( rnotwhite );\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length ; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\tAnimation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];\n\t\t\tAnimation.tweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilters: [ defaultPrefilter ],\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tAnimation.prefilters.unshift( callback );\n\t\t} else {\n\t\t\tAnimation.prefilters.push( callback );\n\t\t}\n\t}\n} );\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tjQuery.isFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !jQuery.isFunction( easing ) && easing\n\t};\n\n\topt.duration = jQuery.fx.off ? 0 : typeof opt.duration === \"number\" ? opt.duration :\n\t\topt.duration in jQuery.fx.speeds ?\n\t\t\tjQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;\n\n\t// normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( jQuery.isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.fn.extend( {\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHidden ).css( \"opacity\", 0 ).show()\n\n\t\t\t// animate to the value specified\n\t\t\t.end().animate( { opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || jQuery._data( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\t\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue && type !== false ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = jQuery._data( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this &&\n\t\t\t\t\t( type == null || timers[ index ].queue === type ) ) {\n\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// start the next in the queue if the last step wasn't forced\n\t\t\t// timers currently will call their complete callbacks, which will dequeue\n\t\t\t// but only if they were gotoEnd\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t} );\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tvar index,\n\t\t\t\tdata = jQuery._data( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.stop ) {\n\t\t\t\thooks.stop.call( this, true );\n\t\t\t}\n\n\t\t\t// look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t} );\n\t}\n} );\n\njQuery.each( [ \"toggle\", \"show\", \"hide\" ], function( i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n} );\n\n// Generate shortcuts for custom animations\njQuery.each( {\n\tslideDown: genFx( \"show\" ),\n\tslideUp: genFx( \"hide\" ),\n\tslideToggle: genFx( \"toggle\" ),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n} );\n\njQuery.timers = [];\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ttimers = jQuery.timers,\n\t\ti = 0;\n\n\tfxNow = jQuery.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\n\t\t// Checks the timer has not already been removed\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tjQuery.timers.push( timer );\n\tif ( timer() ) {\n\t\tjQuery.fx.start();\n\t} else {\n\t\tjQuery.timers.pop();\n\t}\n};\n\njQuery.fx.interval = 13;\n\njQuery.fx.start = function() {\n\tif ( !timerId ) {\n\t\ttimerId = window.setInterval( jQuery.fx.tick, jQuery.fx.interval );\n\t}\n};\n\njQuery.fx.stop = function() {\n\twindow.clearInterval( timerId );\n\ttimerId = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\n\t// Default speed\n\t_default: 400\n};\n\n\n// Based off of the plugin by Clint Helfers, with permission.\n// http://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/\njQuery.fn.delay = function( time, type ) {\n\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\ttype = type || \"fx\";\n\n\treturn this.queue( type, function( next, hooks ) {\n\t\tvar timeout = window.setTimeout( next, time );\n\t\thooks.stop = function() {\n\t\t\twindow.clearTimeout( timeout );\n\t\t};\n\t} );\n};\n\n\n( function() {\n\tvar a,\n\t\tinput = document.createElement( \"input\" ),\n\t\tdiv = document.createElement( \"div\" ),\n\t\tselect = document.createElement( \"select\" ),\n\t\topt = select.appendChild( document.createElement( \"option\" ) );\n\n\t// Setup\n\tdiv = document.createElement( \"div\" );\n\tdiv.setAttribute( \"className\", \"t\" );\n\tdiv.innerHTML = \"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\";\n\ta = div.getElementsByTagName( \"a\" )[ 0 ];\n\n\t// Support: Windows Web Apps (WWA)\n\t// `type` must use .setAttribute for WWA (#14901)\n\tinput.setAttribute( \"type\", \"checkbox\" );\n\tdiv.appendChild( input );\n\n\ta = div.getElementsByTagName( \"a\" )[ 0 ];\n\n\t// First batch of tests.\n\ta.style.cssText = \"top:1px\";\n\n\t// Test setAttribute on camelCase class.\n\t// If it works, we need attrFixes when doing get/setAttribute (ie6/7)\n\tsupport.getSetAttribute = div.className !== \"t\";\n\n\t// Get the style information from getAttribute\n\t// (IE uses .cssText instead)\n\tsupport.style = /top/.test( a.getAttribute( \"style\" ) );\n\n\t// Make sure that URLs aren't manipulated\n\t// (IE normalizes it by default)\n\tsupport.hrefNormalized = a.getAttribute( \"href\" ) === \"/a\";\n\n\t// Check the default checkbox/radio value (\"\" on WebKit; \"on\" elsewhere)\n\tsupport.checkOn = !!input.value;\n\n\t// Make sure that a selected-by-default option has a working selected property.\n\t// (WebKit defaults to false instead of true, IE too, if it's in an optgroup)\n\tsupport.optSelected = opt.selected;\n\n\t// Tests for enctype support on a form (#6743)\n\tsupport.enctype = !!document.createElement( \"form\" ).enctype;\n\n\t// Make sure that the options inside disabled selects aren't marked as disabled\n\t// (WebKit marks them as disabled)\n\tselect.disabled = true;\n\tsupport.optDisabled = !opt.disabled;\n\n\t// Support: IE8 only\n\t// Check if we can trust getAttribute(\"value\")\n\tinput = document.createElement( \"input\" );\n\tinput.setAttribute( \"value\", \"\" );\n\tsupport.input = input.getAttribute( \"value\" ) === \"\";\n\n\t// Check if an input maintains its value after becoming a radio\n\tinput.value = \"t\";\n\tinput.setAttribute( \"type\", \"radio\" );\n\tsupport.radioValue = input.value === \"t\";\n} )();\n\n\nvar rreturn = /\\r/g,\n\trspaces = /[\\x20\\t\\r\\n\\f]+/g;\n\njQuery.fn.extend( {\n\tval: function( value ) {\n\t\tvar hooks, ret, isFunction,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] ||\n\t\t\t\t\tjQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif (\n\t\t\t\t\thooks &&\n\t\t\t\t\t\"get\" in hooks &&\n\t\t\t\t\t( ret = hooks.get( elem, \"value\" ) ) !== undefined\n\t\t\t\t) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\treturn typeof ret === \"string\" ?\n\n\t\t\t\t\t// handle most common string cases\n\t\t\t\t\tret.replace( rreturn, \"\" ) :\n\n\t\t\t\t\t// handle cases where value is null/undef or number\n\t\t\t\t\tret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tisFunction = jQuery.isFunction( value );\n\n\t\treturn this.each( function( i ) {\n\t\t\tvar val;\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isFunction ) {\n\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\t\t\t} else if ( jQuery.isArray( val ) ) {\n\t\t\t\tval = jQuery.map( val, function( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !( \"set\" in hooks ) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tvalHooks: {\n\t\toption: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\n\t\t\t\treturn val != null ?\n\t\t\t\t\tval :\n\n\t\t\t\t\t// Support: IE10-11+\n\t\t\t\t\t// option.text throws exceptions (#14686, #14858)\n\t\t\t\t\t// Strip and collapse whitespace\n\t\t\t\t\t// https://html.spec.whatwg.org/#strip-and-collapse-whitespace\n\t\t\t\t\tjQuery.trim( jQuery.text( elem ) ).replace( rspaces, \" \" );\n\t\t\t}\n\t\t},\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\" || index < 0,\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length,\n\t\t\t\t\ti = index < 0 ?\n\t\t\t\t\t\tmax :\n\t\t\t\t\t\tone ? index : 0;\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// oldIE doesn't update selected after form reset (#2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t( support.optDisabled ?\n\t\t\t\t\t\t\t\t!option.disabled :\n\t\t\t\t\t\t\t\toption.getAttribute( \"disabled\" ) === null ) &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled ||\n\t\t\t\t\t\t\t\t!jQuery.nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar optionSet, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tvalues = jQuery.makeArray( value ),\n\t\t\t\t\ti = options.length;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\tif ( jQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1 ) {\n\n\t\t\t\t\t\t// Support: IE6\n\t\t\t\t\t\t// When new option element is added to select box we need to\n\t\t\t\t\t\t// force reflow of newly added node in order to workaround delay\n\t\t\t\t\t\t// of initialization properties\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\toption.selected = optionSet = true;\n\n\t\t\t\t\t\t} catch ( _ ) {\n\n\t\t\t\t\t\t\t// Will be executed only in IE6\n\t\t\t\t\t\t\toption.scrollHeight;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\toption.selected = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Force browsers to behave consistently when non-matching value is set\n\t\t\t\tif ( !optionSet ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\n\t\t\t\treturn options;\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Radios and checkboxes getter/setter\njQuery.each( [ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = {\n\t\tset: function( elem, value ) {\n\t\t\tif ( jQuery.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );\n\t\t\t}\n\t\t}\n\t};\n\tif ( !support.checkOn ) {\n\t\tjQuery.valHooks[ this ].get = function( elem ) {\n\t\t\treturn elem.getAttribute( \"value\" ) === null ? \"on\" : elem.value;\n\t\t};\n\t}\n} );\n\n\n\n\nvar nodeHook, boolHook,\n\tattrHandle = jQuery.expr.attrHandle,\n\truseDefault = /^(?:checked|selected)$/i,\n\tgetSetAttribute = support.getSetAttribute,\n\tgetSetInput = support.input;\n\njQuery.fn.extend( {\n\tattr: function( name, value ) {\n\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tattr: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set attributes on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === \"undefined\" ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\t// All attributes are lowercase\n\t\t// Grab necessary hook if one is defined\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\t\t\tname = name.toLowerCase();\n\t\t\thooks = jQuery.attrHooks[ name ] ||\n\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\treturn value;\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\tret = jQuery.find.attr( elem, name );\n\n\t\t// Non-existent attributes return null, we normalize to undefined\n\t\treturn ret == null ? undefined : ret;\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n\t\t\t\t\tjQuery.nodeName( elem, \"input\" ) ) {\n\n\t\t\t\t\t// Setting the type on a radio button after the value resets the value in IE8-9\n\t\t\t\t\t// Reset value to default in case type is set after value during creation\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name, propName,\n\t\t\ti = 0,\n\t\t\tattrNames = value && value.match( rnotwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( ( name = attrNames[ i++ ] ) ) {\n\t\t\t\tpropName = jQuery.propFix[ name ] || name;\n\n\t\t\t\t// Boolean attributes get special treatment (#10870)\n\t\t\t\tif ( jQuery.expr.match.bool.test( name ) ) {\n\n\t\t\t\t\t// Set corresponding property to false\n\t\t\t\t\tif ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {\n\t\t\t\t\t\telem[ propName ] = false;\n\n\t\t\t\t\t// Support: IE<9\n\t\t\t\t\t// Also clear defaultChecked/defaultSelected (if appropriate)\n\t\t\t\t\t} else {\n\t\t\t\t\t\telem[ jQuery.camelCase( \"default-\" + name ) ] =\n\t\t\t\t\t\t\telem[ propName ] = false;\n\t\t\t\t\t}\n\n\t\t\t\t// See #9699 for explanation of this approach (setting first, then removal)\n\t\t\t\t} else {\n\t\t\t\t\tjQuery.attr( elem, name, \"\" );\n\t\t\t\t}\n\n\t\t\t\telem.removeAttribute( getSetAttribute ? name : propName );\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Hooks for boolean attributes\nboolHook = {\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {\n\n\t\t\t// IE<8 needs the *property* name\n\t\t\telem.setAttribute( !getSetAttribute && jQuery.propFix[ name ] || name, name );\n\n\t\t} else {\n\n\t\t\t// Support: IE<9\n\t\t\t// Use defaultChecked and defaultSelected for oldIE\n\t\t\telem[ jQuery.camelCase( \"default-\" + name ) ] = elem[ name ] = true;\n\t\t}\n\t\treturn name;\n\t}\n};\n\njQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( i, name ) {\n\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n\n\tif ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {\n\t\tattrHandle[ name ] = function( elem, name, isXML ) {\n\t\t\tvar ret, handle;\n\t\t\tif ( !isXML ) {\n\n\t\t\t\t// Avoid an infinite loop by temporarily removing this function from the getter\n\t\t\t\thandle = attrHandle[ name ];\n\t\t\t\tattrHandle[ name ] = ret;\n\t\t\t\tret = getter( elem, name, isXML ) != null ?\n\t\t\t\t\tname.toLowerCase() :\n\t\t\t\t\tnull;\n\t\t\t\tattrHandle[ name ] = handle;\n\t\t\t}\n\t\t\treturn ret;\n\t\t};\n\t} else {\n\t\tattrHandle[ name ] = function( elem, name, isXML ) {\n\t\t\tif ( !isXML ) {\n\t\t\t\treturn elem[ jQuery.camelCase( \"default-\" + name ) ] ?\n\t\t\t\t\tname.toLowerCase() :\n\t\t\t\t\tnull;\n\t\t\t}\n\t\t};\n\t}\n} );\n\n// fix oldIE attroperties\nif ( !getSetInput || !getSetAttribute ) {\n\tjQuery.attrHooks.value = {\n\t\tset: function( elem, value, name ) {\n\t\t\tif ( jQuery.nodeName( elem, \"input\" ) ) {\n\n\t\t\t\t// Does not return so that setAttribute is also used\n\t\t\t\telem.defaultValue = value;\n\t\t\t} else {\n\n\t\t\t\t// Use nodeHook if defined (#1954); otherwise setAttribute is fine\n\t\t\t\treturn nodeHook && nodeHook.set( elem, value, name );\n\t\t\t}\n\t\t}\n\t};\n}\n\n// IE6/7 do not support getting/setting some attributes with get/setAttribute\nif ( !getSetAttribute ) {\n\n\t// Use this for any attribute in IE6/7\n\t// This fixes almost every IE6/7 issue\n\tnodeHook = {\n\t\tset: function( elem, value, name ) {\n\n\t\t\t// Set the existing or create a new attribute node\n\t\t\tvar ret = elem.getAttributeNode( name );\n\t\t\tif ( !ret ) {\n\t\t\t\telem.setAttributeNode(\n\t\t\t\t\t( ret = elem.ownerDocument.createAttribute( name ) )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tret.value = value += \"\";\n\n\t\t\t// Break association with cloned elements by also using setAttribute (#9646)\n\t\t\tif ( name === \"value\" || value === elem.getAttribute( name ) ) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t};\n\n\t// Some attributes are constructed with empty-string values when not defined\n\tattrHandle.id = attrHandle.name = attrHandle.coords =\n\t\tfunction( elem, name, isXML ) {\n\t\t\tvar ret;\n\t\t\tif ( !isXML ) {\n\t\t\t\treturn ( ret = elem.getAttributeNode( name ) ) && ret.value !== \"\" ?\n\t\t\t\t\tret.value :\n\t\t\t\t\tnull;\n\t\t\t}\n\t\t};\n\n\t// Fixing value retrieval on a button requires this module\n\tjQuery.valHooks.button = {\n\t\tget: function( elem, name ) {\n\t\t\tvar ret = elem.getAttributeNode( name );\n\t\t\tif ( ret && ret.specified ) {\n\t\t\t\treturn ret.value;\n\t\t\t}\n\t\t},\n\t\tset: nodeHook.set\n\t};\n\n\t// Set contenteditable to false on removals(#10429)\n\t// Setting to empty string throws an error as an invalid value\n\tjQuery.attrHooks.contenteditable = {\n\t\tset: function( elem, value, name ) {\n\t\t\tnodeHook.set( elem, value === \"\" ? false : value, name );\n\t\t}\n\t};\n\n\t// Set width and height to auto instead of 0 on empty string( Bug #8150 )\n\t// This is for removals\n\tjQuery.each( [ \"width\", \"height\" ], function( i, name ) {\n\t\tjQuery.attrHooks[ name ] = {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( value === \"\" ) {\n\t\t\t\t\telem.setAttribute( name, \"auto\" );\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t} );\n}\n\nif ( !support.style ) {\n\tjQuery.attrHooks.style = {\n\t\tget: function( elem ) {\n\n\t\t\t// Return undefined in the case of empty string\n\t\t\t// Note: IE uppercases css property names, but if we were to .toLowerCase()\n\t\t\t// .cssText, that would destroy case sensitivity in URL's, like in \"background\"\n\t\t\treturn elem.style.cssText || undefined;\n\t\t},\n\t\tset: function( elem, value ) {\n\t\t\treturn ( elem.style.cssText = value + \"\" );\n\t\t}\n\t};\n}\n\n\n\n\nvar rfocusable = /^(?:input|select|textarea|button|object)$/i,\n\trclickable = /^(?:a|area)$/i;\n\njQuery.fn.extend( {\n\tprop: function( name, value ) {\n\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\tname = jQuery.propFix[ name ] || name;\n\t\treturn this.each( function() {\n\n\t\t\t// try/catch handles cases where IE balks (such as removing a property on window)\n\t\t\ttry {\n\t\t\t\tthis[ name ] = undefined;\n\t\t\t\tdelete this[ name ];\n\t\t\t} catch ( e ) {}\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set properties on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\treturn ( elem[ name ] = value );\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\treturn elem[ name ];\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\t// elem.tabIndex doesn't always return the\n\t\t\t\t// correct value when it hasn't been explicitly set\n\t\t\t\t// http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/\n\t\t\t\t// Use proper attribute retrieval(#12072)\n\t\t\t\tvar tabindex = jQuery.find.attr( elem, \"tabindex\" );\n\n\t\t\t\treturn tabindex ?\n\t\t\t\t\tparseInt( tabindex, 10 ) :\n\t\t\t\t\trfocusable.test( elem.nodeName ) ||\n\t\t\t\t\t\trclickable.test( elem.nodeName ) && elem.href ?\n\t\t\t\t\t\t\t0 :\n\t\t\t\t\t\t\t-1;\n\t\t\t}\n\t\t}\n\t},\n\n\tpropFix: {\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\"\n\t}\n} );\n\n// Some attributes require a special call on IE\n// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !support.hrefNormalized ) {\n\n\t// href/src property should get the full normalized URL (#10299/#12915)\n\tjQuery.each( [ \"href\", \"src\" ], function( i, name ) {\n\t\tjQuery.propHooks[ name ] = {\n\t\t\tget: function( elem ) {\n\t\t\t\treturn elem.getAttribute( name, 4 );\n\t\t\t}\n\t\t};\n\t} );\n}\n\n// Support: Safari, IE9+\n// Accessing the selectedIndex property\n// forces the browser to respect setting selected\n// on the option\n// The getter ensures a default option is selected\n// when in an optgroup\nif ( !support.optSelected ) {\n\tjQuery.propHooks.selected = {\n\t\tget: function( elem ) {\n\t\t\tvar parent = elem.parentNode;\n\n\t\t\tif ( parent ) {\n\t\t\t\tparent.selectedIndex;\n\n\t\t\t\t// Make sure that it also works with optgroups, see #5701\n\t\t\t\tif ( parent.parentNode ) {\n\t\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tset: function( elem ) {\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent ) {\n\t\t\t\tparent.selectedIndex;\n\n\t\t\t\tif ( parent.parentNode ) {\n\t\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\njQuery.each( [\n\t\"tabIndex\",\n\t\"readOnly\",\n\t\"maxLength\",\n\t\"cellSpacing\",\n\t\"cellPadding\",\n\t\"rowSpan\",\n\t\"colSpan\",\n\t\"useMap\",\n\t\"frameBorder\",\n\t\"contentEditable\"\n], function() {\n\tjQuery.propFix[ this.toLowerCase() ] = this;\n} );\n\n// IE6/7 call enctype encoding\nif ( !support.enctype ) {\n\tjQuery.propFix.enctype = \"encoding\";\n}\n\n\n\n\nvar rclass = /[\\t\\r\\n\\f]/g;\n\nfunction getClass( elem ) {\n\treturn jQuery.attr( elem, \"class\" ) || \"\";\n}\n\njQuery.fn.extend( {\n\taddClass: function( value ) {\n\t\tvar classes, elem, cur, curValue, clazz, j, finalValue,\n\t\t\ti = 0;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( typeof value === \"string\" && value ) {\n\t\t\tclasses = value.match( rnotwhite ) || [];\n\n\t\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\t\tcurValue = getClass( elem );\n\t\t\t\tcur = elem.nodeType === 1 &&\n\t\t\t\t\t( \" \" + curValue + \" \" ).replace( rclass, \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( ( clazz = classes[ j++ ] ) ) {\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + clazz + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += clazz + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = jQuery.trim( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\tjQuery.attr( elem, \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classes, elem, cur, curValue, clazz, j, finalValue,\n\t\t\ti = 0;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( !arguments.length ) {\n\t\t\treturn this.attr( \"class\", \"\" );\n\t\t}\n\n\t\tif ( typeof value === \"string\" && value ) {\n\t\t\tclasses = value.match( rnotwhite ) || [];\n\n\t\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\t\tcurValue = getClass( elem );\n\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = elem.nodeType === 1 &&\n\t\t\t\t\t( \" \" + curValue + \" \" ).replace( rclass, \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( ( clazz = classes[ j++ ] ) ) {\n\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + clazz + \" \" ) > -1 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + clazz + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = jQuery.trim( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\tjQuery.attr( elem, \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar type = typeof value;\n\n\t\tif ( typeof stateVal === \"boolean\" && type === \"string\" ) {\n\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n\t\t}\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).toggleClass(\n\t\t\t\t\tvalue.call( this, i, getClass( this ), stateVal ),\n\t\t\t\t\tstateVal\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar className, i, self, classNames;\n\n\t\t\tif ( type === \"string\" ) {\n\n\t\t\t\t// Toggle individual class names\n\t\t\t\ti = 0;\n\t\t\t\tself = jQuery( this );\n\t\t\t\tclassNames = value.match( rnotwhite ) || [];\n\n\t\t\t\twhile ( ( className = classNames[ i++ ] ) ) {\n\n\t\t\t\t\t// Check each className given, space separated list\n\t\t\t\t\tif ( self.hasClass( className ) ) {\n\t\t\t\t\t\tself.removeClass( className );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.addClass( className );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( value === undefined || type === \"boolean\" ) {\n\t\t\t\tclassName = getClass( this );\n\t\t\t\tif ( className ) {\n\n\t\t\t\t\t// store className if set\n\t\t\t\t\tjQuery._data( this, \"__className__\", className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed \"false\",\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tjQuery.attr( this, \"class\",\n\t\t\t\t\tclassName || value === false ?\n\t\t\t\t\t\"\" :\n\t\t\t\t\tjQuery._data( this, \"__className__\" ) || \"\"\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className, elem,\n\t\t\ti = 0;\n\n\t\tclassName = \" \" + selector + \" \";\n\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\tif ( elem.nodeType === 1 &&\n\t\t\t\t( \" \" + getClass( elem ) + \" \" ).replace( rclass, \" \" )\n\t\t\t\t\t.indexOf( className ) > -1\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n} );\n\n\n\n\n// Return jQuery for attributes-only inclusion\n\n\njQuery.each( ( \"blur focus focusin focusout load resize scroll unload click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup error contextmenu\" ).split( \" \" ),\n\tfunction( i, name ) {\n\n\t// Handle event binding\n\tjQuery.fn[ name ] = function( data, fn ) {\n\t\treturn arguments.length > 0 ?\n\t\t\tthis.on( name, null, data, fn ) :\n\t\t\tthis.trigger( name );\n\t};\n} );\n\njQuery.fn.extend( {\n\thover: function( fnOver, fnOut ) {\n\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n\t}\n} );\n\n\nvar location = window.location;\n\nvar nonce = jQuery.now();\n\nvar rquery = ( /\\?/ );\n\n\n\nvar rvalidtokens = /(,)|(\\[|{)|(}|])|\"(?:[^\"\\\\\\r\\n]|\\\\[\"\\\\\\/bfnrt]|\\\\u[\\da-fA-F]{4})*\"\\s*:?|true|false|null|-?(?!0\\d)\\d+(?:\\.\\d+|)(?:[eE][+-]?\\d+|)/g;\n\njQuery.parseJSON = function( data ) {\n\n\t// Attempt to parse using the native JSON parser first\n\tif ( window.JSON && window.JSON.parse ) {\n\n\t\t// Support: Android 2.3\n\t\t// Workaround failure to string-cast null input\n\t\treturn window.JSON.parse( data + \"\" );\n\t}\n\n\tvar requireNonComma,\n\t\tdepth = null,\n\t\tstr = jQuery.trim( data + \"\" );\n\n\t// Guard against invalid (and possibly dangerous) input by ensuring that nothing remains\n\t// after removing valid tokens\n\treturn str && !jQuery.trim( str.replace( rvalidtokens, function( token, comma, open, close ) {\n\n\t\t// Force termination if we see a misplaced comma\n\t\tif ( requireNonComma && comma ) {\n\t\t\tdepth = 0;\n\t\t}\n\n\t\t// Perform no more replacements after returning to outermost depth\n\t\tif ( depth === 0 ) {\n\t\t\treturn token;\n\t\t}\n\n\t\t// Commas must not follow \"[\", \"{\", or \",\"\n\t\trequireNonComma = open || comma;\n\n\t\t// Determine new depth\n\t\t// array/object open (\"[\" or \"{\"): depth += true - false (increment)\n\t\t// array/object close (\"]\" or \"}\"): depth += false - true (decrement)\n\t\t// other cases (\",\" or primitive): depth += true - true (numeric cast)\n\t\tdepth += !close - !open;\n\n\t\t// Remove this token\n\t\treturn \"\";\n\t} ) ) ?\n\t\t( Function( \"return \" + str ) )() :\n\t\tjQuery.error( \"Invalid JSON: \" + data );\n};\n\n\n// Cross-browser xml parsing\njQuery.parseXML = function( data ) {\n\tvar xml, tmp;\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\ttry {\n\t\tif ( window.DOMParser ) { // Standard\n\t\t\ttmp = new window.DOMParser();\n\t\t\txml = tmp.parseFromString( data, \"text/xml\" );\n\t\t} else { // IE\n\t\t\txml = new window.ActiveXObject( \"Microsoft.XMLDOM\" );\n\t\t\txml.async = \"false\";\n\t\t\txml.loadXML( data );\n\t\t}\n\t} catch ( e ) {\n\t\txml = undefined;\n\t}\n\tif ( !xml || !xml.documentElement || xml.getElementsByTagName( \"parsererror\" ).length ) {\n\t\tjQuery.error( \"Invalid XML: \" + data );\n\t}\n\treturn xml;\n};\n\n\nvar\n\trhash = /#.*$/,\n\trts = /([?&])_=[^&]*/,\n\n\t// IE leaves an \\r character at EOL\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/mg,\n\n\t// #7653, #8125, #8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\trurl = /^([\\w.+-]+:)(?:\\/\\/(?:[^\\/?#]*@|)([^\\/?#:]*)(?::(\\d+)|)|)/,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat( \"*\" ),\n\n\t// Document location\n\tajaxLocation = location.href,\n\n\t// Segment location into parts\n\tajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];\n\n\t\tif ( jQuery.isFunction( func ) ) {\n\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( ( dataType = dataTypes[ i++ ] ) ) {\n\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType.charAt( 0 ) === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif ( typeof dataTypeOrTransport === \"string\" &&\n\t\t\t\t!seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t} );\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes #9887\nfunction ajaxExtend( target, src ) {\n\tvar deep, key,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\n/* Handles responses to an ajax request:\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\tvar firstDataType, ct, finalDataType, type,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes;\n\n\t// Remove auto dataType and get content-type in the process\n\twhile ( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader( \"Content-Type\" );\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[ 0 ] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n/* Chain conversions given the request and the original response\n * Also sets the responseXXX fields on the jqXHR instance\n */\nfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\n\tvar conv2, current, conv, tmp, prev,\n\t\tconverters = {},\n\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice();\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\tcurrent = dataTypes.shift();\n\n\t// Convert to each sequential dataType\n\twhile ( current ) {\n\n\t\tif ( s.responseFields[ current ] ) {\n\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n\t\t}\n\n\t\t// Apply the dataFilter if provided\n\t\tif ( !prev && isSuccess && s.dataFilter ) {\n\t\t\tresponse = s.dataFilter( response, s.dataType );\n\t\t}\n\n\t\tprev = current;\n\t\tcurrent = dataTypes.shift();\n\n\t\tif ( current ) {\n\n\t\t\t// There's only work to do if current dataType is non-auto\n\t\t\tif ( current === \"*\" ) {\n\n\t\t\t\tcurrent = prev;\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split( \" \" );\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s[ \"throws\" ] ) { // jscs:ignore requireDotNotation\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tstate: \"parsererror\",\n\t\t\t\t\t\t\t\terror: conv ? e : \"No conversion from \" + prev + \" to \" + current\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n\njQuery.extend( {\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: ajaxLocation,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /\\bxml\\b/,\n\t\t\thtml: /\\bhtml/,\n\t\t\tjson: /\\bjson\\b/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\",\n\t\t\tjson: \"responseJSON\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": jQuery.parseJSON,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar\n\n\t\t\t// Cross-domain detection vars\n\t\t\tparts,\n\n\t\t\t// Loop variable\n\t\t\ti,\n\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\n\t\t\t// Response headers as string\n\t\t\tresponseHeadersString,\n\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\n\t\t\ttransport,\n\n\t\t\t// Response headers\n\t\t\tresponseHeaders,\n\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context &&\n\t\t\t\t( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\t\tjQuery.event,\n\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks( \"once memory\" ),\n\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\n\t\t\t// The jqXHR state\n\t\t\tstate = 0,\n\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( state === 2 ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( ( match = rheaders.exec( responseHeadersString ) ) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[ 1 ].toLowerCase() ] = match[ 2 ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match;\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn state === 2 ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tvar lname = name.toLowerCase();\n\t\t\t\t\tif ( !state ) {\n\t\t\t\t\t\tname = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( !state ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( state < 2 ) {\n\t\t\t\t\t\t\tfor ( code in map ) {\n\n\t\t\t\t\t\t\t\t// Lazy-add the new callback in a way that preserves old ones\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR ).complete = completeDeferred.add;\n\t\tjqXHR.success = jqXHR.done;\n\t\tjqXHR.error = jqXHR.fail;\n\n\t\t// Remove hash character (#7531: and string promotion)\n\t\t// Add protocol if not provided (#5866: IE7 issue with protocol-less urls)\n\t\t// Handle falsy url in the settings object (#10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || ajaxLocation ) + \"\" )\n\t\t\t.replace( rhash, \"\" )\n\t\t\t.replace( rprotocol, ajaxLocParts[ 1 ] + \"//\" );\n\n\t\t// Alias method option to type as per ticket #12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = jQuery.trim( s.dataType || \"*\" ).toLowerCase().match( rnotwhite ) || [ \"\" ];\n\n\t\t// A cross-domain request is in order when we have a protocol:host:port mismatch\n\t\tif ( s.crossDomain == null ) {\n\t\t\tparts = rurl.exec( s.url.toLowerCase() );\n\t\t\ts.crossDomain = !!( parts &&\n\t\t\t\t( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||\n\t\t\t\t\t( parts[ 3 ] || ( parts[ 1 ] === \"http:\" ? \"80\" : \"443\" ) ) !==\n\t\t\t\t\t\t( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === \"http:\" ? \"80\" : \"443\" ) ) )\n\t\t\t);\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( state === 2 ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\t// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)\n\t\tfireGlobals = jQuery.event && s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger( \"ajaxStart\" );\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\tcacheURL = s.url;\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// If data is available, append data to url\n\t\t\tif ( s.data ) {\n\t\t\t\tcacheURL = ( s.url += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data );\n\n\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add anti-cache in url if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\ts.url = rts.test( cacheURL ) ?\n\n\t\t\t\t\t// If there is already a '_' parameter, set its value\n\t\t\t\t\tcacheURL.replace( rts, \"$1_=\" + nonce++ ) :\n\n\t\t\t\t\t// Otherwise add one to the end\n\t\t\t\t\tcacheURL + ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + nonce++;\n\t\t\t}\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[ 0 ] ] +\n\t\t\t\t\t( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend &&\n\t\t\t( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {\n\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tfor ( i in { success: 1, error: 1, complete: 1 } ) {\n\t\t\tjqXHR[ i ]( s[ i ] );\n\t\t}\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\n\t\t\t// If request was aborted inside ajaxSend, stop there\n\t\t\tif ( state === 2 ) {\n\t\t\t\treturn jqXHR;\n\t\t\t}\n\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = window.setTimeout( function() {\n\t\t\t\t\tjqXHR.abort( \"timeout\" );\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tstate = 1;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// Propagate exception as error if not done\n\t\t\t\tif ( state < 2 ) {\n\t\t\t\t\tdone( -1, e );\n\n\t\t\t\t// Simply rethrow otherwise\n\t\t\t\t} else {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Called once\n\t\t\tif ( state === 2 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// State is \"done\" now\n\t\t\tstate = 2;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\twindow.clearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Determine if successful\n\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// Convert no matter what (that way responseXXX fields are always set)\n\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( isSuccess ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"Last-Modified\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"etag\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tstatusText = response.state;\n\t\t\t\t\tsuccess = response.data;\n\t\t\t\t\terror = response.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// We extract error from statusText\n\t\t\t\t// then normalize statusText and status for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger( \"ajaxStop\" );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t}\n} );\n\njQuery.each( [ \"get\", \"post\" ], function( i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\n\t\t// shift arguments if data argument was omitted\n\t\tif ( jQuery.isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\t// The url can be an options object (which then must have .url)\n\t\treturn jQuery.ajax( jQuery.extend( {\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t}, jQuery.isPlainObject( url ) && url ) );\n\t};\n} );\n\n\njQuery._evalUrl = function( url ) {\n\treturn jQuery.ajax( {\n\t\turl: url,\n\n\t\t// Make this explicit, since user can override this through ajaxSetup (#11264)\n\t\ttype: \"GET\",\n\t\tdataType: \"script\",\n\t\tcache: true,\n\t\tasync: false,\n\t\tglobal: false,\n\t\t\"throws\": true\n\t} );\n};\n\n\njQuery.fn.extend( {\n\twrapAll: function( html ) {\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).wrapAll( html.call( this, i ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( this[ 0 ] ) {\n\n\t\t\t// The elements to wrap the target around\n\t\t\tvar wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n\n\t\t\tif ( this[ 0 ].parentNode ) {\n\t\t\t\twrap.insertBefore( this[ 0 ] );\n\t\t\t}\n\n\t\t\twrap.map( function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstChild && elem.firstChild.nodeType === 1 ) {\n\t\t\t\t\telem = elem.firstChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t} ).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).wrapInner( html.call( this, i ) );\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t} );\n\t},\n\n\twrap: function( html ) {\n\t\tvar isFunction = jQuery.isFunction( html );\n\n\t\treturn this.each( function( i ) {\n\t\t\tjQuery( this ).wrapAll( isFunction ? html.call( this, i ) : html );\n\t\t} );\n\t},\n\n\tunwrap: function() {\n\t\treturn this.parent().each( function() {\n\t\t\tif ( !jQuery.nodeName( this, \"body\" ) ) {\n\t\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t\t}\n\t\t} ).end();\n\t}\n} );\n\n\nfunction getDisplay( elem ) {\n\treturn elem.style && elem.style.display || jQuery.css( elem, \"display\" );\n}\n\nfunction filterHidden( elem ) {\n\n\t// Disconnected elements are considered hidden\n\tif ( !jQuery.contains( elem.ownerDocument || document, elem ) ) {\n\t\treturn true;\n\t}\n\twhile ( elem && elem.nodeType === 1 ) {\n\t\tif ( getDisplay( elem ) === \"none\" || elem.type === \"hidden\" ) {\n\t\t\treturn true;\n\t\t}\n\t\telem = elem.parentNode;\n\t}\n\treturn false;\n}\n\njQuery.expr.filters.hidden = function( elem ) {\n\n\t// Support: Opera <= 12.12\n\t// Opera reports offsetWidths and offsetHeights less than zero on some elements\n\treturn support.reliableHiddenOffsets() ?\n\t\t( elem.offsetWidth <= 0 && elem.offsetHeight <= 0 &&\n\t\t\t!elem.getClientRects().length ) :\n\t\t\tfilterHidden( elem );\n};\n\njQuery.expr.filters.visible = function( elem ) {\n\treturn !jQuery.expr.filters.hidden( elem );\n};\n\n\n\n\nvar r20 = /%20/g,\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( jQuery.isArray( obj ) ) {\n\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams(\n\t\t\t\t\tprefix + \"[\" + ( typeof v === \"object\" && v != null ? i : \"\" ) + \"]\",\n\t\t\t\t\tv,\n\t\t\t\t\ttraditional,\n\t\t\t\t\tadd\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t} else if ( !traditional && jQuery.type( obj ) === \"object\" ) {\n\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\n\n// Serialize an array of form elements or a set of\n// key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, value ) {\n\n\t\t\t// If value is a function, invoke it and return its value\n\t\t\tvalue = jQuery.isFunction( value ) ? value() : ( value == null ? \"\" : value );\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" + encodeURIComponent( value );\n\t\t};\n\n\t// Set traditional to true for jQuery <= 1.3.2 behavior.\n\tif ( traditional === undefined ) {\n\t\ttraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;\n\t}\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t} );\n\n\t} else {\n\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" ).replace( r20, \"+\" );\n};\n\njQuery.fn.extend( {\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map( function() {\n\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t} )\n\t\t.filter( function() {\n\t\t\tvar type = this.type;\n\n\t\t\t// Use .is(\":disabled\") so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n\t\t} )\n\t\t.map( function( i, elem ) {\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\treturn val == null ?\n\t\t\t\tnull :\n\t\t\t\tjQuery.isArray( val ) ?\n\t\t\t\t\tjQuery.map( val, function( val ) {\n\t\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t\t} ) :\n\t\t\t\t\t{ name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t} ).get();\n\t}\n} );\n\n\n// Create the request object\n// (This is still attached to ajaxSettings for backward compatibility)\njQuery.ajaxSettings.xhr = window.ActiveXObject !== undefined ?\n\n\t// Support: IE6-IE8\n\tfunction() {\n\n\t\t// XHR cannot access local files, always use ActiveX for that case\n\t\tif ( this.isLocal ) {\n\t\t\treturn createActiveXHR();\n\t\t}\n\n\t\t// Support: IE 9-11\n\t\t// IE seems to error on cross-domain PATCH requests when ActiveX XHR\n\t\t// is used. In IE 9+ always use the native XHR.\n\t\t// Note: this condition won't catch Edge as it doesn't define\n\t\t// document.documentMode but it also doesn't support ActiveX so it won't\n\t\t// reach this code.\n\t\tif ( document.documentMode > 8 ) {\n\t\t\treturn createStandardXHR();\n\t\t}\n\n\t\t// Support: IE<9\n\t\t// oldIE XHR does not support non-RFC2616 methods (#13240)\n\t\t// See http://msdn.microsoft.com/en-us/library/ie/ms536648(v=vs.85).aspx\n\t\t// and http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9\n\t\t// Although this check for six methods instead of eight\n\t\t// since IE also does not support \"trace\" and \"connect\"\n\t\treturn /^(get|post|head|put|delete|options)$/i.test( this.type ) &&\n\t\t\tcreateStandardXHR() || createActiveXHR();\n\t} :\n\n\t// For all other browsers, use the standard XMLHttpRequest object\n\tcreateStandardXHR;\n\nvar xhrId = 0,\n\txhrCallbacks = {},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\n// Support: IE<10\n// Open requests must be manually aborted on unload (#5280)\n// See https://support.microsoft.com/kb/2856746 for more info\nif ( window.attachEvent ) {\n\twindow.attachEvent( \"onunload\", function() {\n\t\tfor ( var key in xhrCallbacks ) {\n\t\t\txhrCallbacks[ key ]( undefined, true );\n\t\t}\n\t} );\n}\n\n// Determine support properties\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nxhrSupported = support.ajax = !!xhrSupported;\n\n// Create transport if the browser can provide an xhr\nif ( xhrSupported ) {\n\n\tjQuery.ajaxTransport( function( options ) {\n\n\t\t// Cross domain only allowed if supported through XMLHttpRequest\n\t\tif ( !options.crossDomain || support.cors ) {\n\n\t\t\tvar callback;\n\n\t\t\treturn {\n\t\t\t\tsend: function( headers, complete ) {\n\t\t\t\t\tvar i,\n\t\t\t\t\t\txhr = options.xhr(),\n\t\t\t\t\t\tid = ++xhrId;\n\n\t\t\t\t\t// Open the socket\n\t\t\t\t\txhr.open(\n\t\t\t\t\t\toptions.type,\n\t\t\t\t\t\toptions.url,\n\t\t\t\t\t\toptions.async,\n\t\t\t\t\t\toptions.username,\n\t\t\t\t\t\toptions.password\n\t\t\t\t\t);\n\n\t\t\t\t\t// Apply custom fields if provided\n\t\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Override mime type if needed\n\t\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t\t}\n\n\t\t\t\t\t// X-Requested-With header\n\t\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n\t\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n\t\t\t\t\t}\n\n\t\t\t\t\t// Set headers\n\t\t\t\t\tfor ( i in headers ) {\n\n\t\t\t\t\t\t// Support: IE<9\n\t\t\t\t\t\t// IE's ActiveXObject throws a 'Type Mismatch' exception when setting\n\t\t\t\t\t\t// request header to a null-value.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// To keep consistent with other XHR implementations, cast the value\n\t\t\t\t\t\t// to string and ignore `undefined`.\n\t\t\t\t\t\tif ( headers[ i ] !== undefined ) {\n\t\t\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] + \"\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Do send the request\n\t\t\t\t\t// This may raise an exception which is actually\n\t\t\t\t\t// handled in jQuery.ajax (so no try/catch here)\n\t\t\t\t\txhr.send( ( options.hasContent && options.data ) || null );\n\n\t\t\t\t\t// Listener\n\t\t\t\t\tcallback = function( _, isAbort ) {\n\t\t\t\t\t\tvar status, statusText, responses;\n\n\t\t\t\t\t\t// Was never called and is aborted or complete\n\t\t\t\t\t\tif ( callback && ( isAbort || xhr.readyState === 4 ) ) {\n\n\t\t\t\t\t\t\t// Clean up\n\t\t\t\t\t\t\tdelete xhrCallbacks[ id ];\n\t\t\t\t\t\t\tcallback = undefined;\n\t\t\t\t\t\t\txhr.onreadystatechange = jQuery.noop;\n\n\t\t\t\t\t\t\t// Abort manually if needed\n\t\t\t\t\t\t\tif ( isAbort ) {\n\t\t\t\t\t\t\t\tif ( xhr.readyState !== 4 ) {\n\t\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tresponses = {};\n\t\t\t\t\t\t\t\tstatus = xhr.status;\n\n\t\t\t\t\t\t\t\t// Support: IE<10\n\t\t\t\t\t\t\t\t// Accessing binary-data responseText throws an exception\n\t\t\t\t\t\t\t\t// (#11426)\n\t\t\t\t\t\t\t\tif ( typeof xhr.responseText === \"string\" ) {\n\t\t\t\t\t\t\t\t\tresponses.text = xhr.responseText;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Firefox throws an exception when accessing\n\t\t\t\t\t\t\t\t// statusText for faulty cross-domain requests\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tstatusText = xhr.statusText;\n\t\t\t\t\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t\t\t\t\t// We normalize with Webkit giving an empty statusText\n\t\t\t\t\t\t\t\t\tstatusText = \"\";\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Filter status for non standard behaviors\n\n\t\t\t\t\t\t\t\t// If the request is local and we have data: assume a success\n\t\t\t\t\t\t\t\t// (success with no data won't get notified, that's the best we\n\t\t\t\t\t\t\t\t// can do given current implementations)\n\t\t\t\t\t\t\t\tif ( !status && options.isLocal && !options.crossDomain ) {\n\t\t\t\t\t\t\t\t\tstatus = responses.text ? 200 : 404;\n\n\t\t\t\t\t\t\t\t// IE - #1450: sometimes returns 1223 when it should be 204\n\t\t\t\t\t\t\t\t} else if ( status === 1223 ) {\n\t\t\t\t\t\t\t\t\tstatus = 204;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Call complete if needed\n\t\t\t\t\t\tif ( responses ) {\n\t\t\t\t\t\t\tcomplete( status, statusText, responses, xhr.getAllResponseHeaders() );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Do send the request\n\t\t\t\t\t// `xhr.send` may raise an exception, but it will be\n\t\t\t\t\t// handled in jQuery.ajax (so no try/catch here)\n\t\t\t\t\tif ( !options.async ) {\n\n\t\t\t\t\t\t// If we're in sync mode we fire the callback\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t} else if ( xhr.readyState === 4 ) {\n\n\t\t\t\t\t\t// (IE6 & IE7) if it's in cache and has been\n\t\t\t\t\t\t// retrieved directly we need to fire the callback\n\t\t\t\t\t\twindow.setTimeout( callback );\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Register the callback, but delay it in case `xhr.send` throws\n\t\t\t\t\t\t// Add to the list of active xhr callbacks\n\t\t\t\t\t\txhr.onreadystatechange = xhrCallbacks[ id ] = callback;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tabort: function() {\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback( undefined, true );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t} );\n}\n\n// Functions to create xhrs\nfunction createStandardXHR() {\n\ttry {\n\t\treturn new window.XMLHttpRequest();\n\t} catch ( e ) {}\n}\n\nfunction createActiveXHR() {\n\ttry {\n\t\treturn new window.ActiveXObject( \"Microsoft.XMLHTTP\" );\n\t} catch ( e ) {}\n}\n\n\n\n\n// Install script dataType\njQuery.ajaxSetup( {\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, \" +\n\t\t\t\"application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /\\b(?:java|ecma)script\\b/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n} );\n\n// Handle cache's special case and global\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t\ts.global = false;\n\t}\n} );\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function( s ) {\n\n\t// This transport only deals with cross domain requests\n\tif ( s.crossDomain ) {\n\n\t\tvar script,\n\t\t\thead = document.head || jQuery( \"head\" )[ 0 ] || document.documentElement;\n\n\t\treturn {\n\n\t\t\tsend: function( _, callback ) {\n\n\t\t\t\tscript = document.createElement( \"script\" );\n\n\t\t\t\tscript.async = true;\n\n\t\t\t\tif ( s.scriptCharset ) {\n\t\t\t\t\tscript.charset = s.scriptCharset;\n\t\t\t\t}\n\n\t\t\t\tscript.src = s.url;\n\n\t\t\t\t// Attach handlers for all browsers\n\t\t\t\tscript.onload = script.onreadystatechange = function( _, isAbort ) {\n\n\t\t\t\t\tif ( isAbort || !script.readyState || /loaded|complete/.test( script.readyState ) ) {\n\n\t\t\t\t\t\t// Handle memory leak in IE\n\t\t\t\t\t\tscript.onload = script.onreadystatechange = null;\n\n\t\t\t\t\t\t// Remove the script\n\t\t\t\t\t\tif ( script.parentNode ) {\n\t\t\t\t\t\t\tscript.parentNode.removeChild( script );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Dereference the script\n\t\t\t\t\t\tscript = null;\n\n\t\t\t\t\t\t// Callback if not abort\n\t\t\t\t\t\tif ( !isAbort ) {\n\t\t\t\t\t\t\tcallback( 200, \"success\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Circumvent IE6 bugs with base elements (#2709 and #4378) by prepending\n\t\t\t\t// Use native DOM manipulation to avoid our domManip AJAX trickery\n\t\t\t\thead.insertBefore( script, head.firstChild );\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( script ) {\n\t\t\t\t\tscript.onload( undefined, true );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup( {\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n} );\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" &&\n\t\t\t\t( s.contentType || \"\" )\n\t\t\t\t\t.indexOf( \"application/x-www-form-urlencoded\" ) === 0 &&\n\t\t\t\trjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[ \"script json\" ] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always( function() {\n\n\t\t\t// If previous value didn't exist - remove it\n\t\t\tif ( overwritten === undefined ) {\n\t\t\t\tjQuery( window ).removeProp( callbackName );\n\n\t\t\t// Otherwise restore preexisting value\n\t\t\t} else {\n\t\t\t\twindow[ callbackName ] = overwritten;\n\t\t\t}\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\n\t\t\t\t// make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && jQuery.isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t} );\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n} );\n\n\n\n\n// data: string of html\n// context (optional): If specified, the fragment will be created in this context,\n// defaults to document\n// keepScripts (optional): If true, will include scripts passed in the html string\njQuery.parseHTML = function( data, context, keepScripts ) {\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\tif ( typeof context === \"boolean\" ) {\n\t\tkeepScripts = context;\n\t\tcontext = false;\n\t}\n\tcontext = context || document;\n\n\tvar parsed = rsingleTag.exec( data ),\n\t\tscripts = !keepScripts && [];\n\n\t// Single tag\n\tif ( parsed ) {\n\t\treturn [ context.createElement( parsed[ 1 ] ) ];\n\t}\n\n\tparsed = buildFragment( [ data ], context, scripts );\n\n\tif ( scripts && scripts.length ) {\n\t\tjQuery( scripts ).remove();\n\t}\n\n\treturn jQuery.merge( [], parsed.childNodes );\n};\n\n\n// Keep a copy of the old load method\nvar _load = jQuery.fn.load;\n\n/**\n * Load a url into a page\n */\njQuery.fn.load = function( url, params, callback ) {\n\tif ( typeof url !== \"string\" && _load ) {\n\t\treturn _load.apply( this, arguments );\n\t}\n\n\tvar selector, type, response,\n\t\tself = this,\n\t\toff = url.indexOf( \" \" );\n\n\tif ( off > -1 ) {\n\t\tselector = jQuery.trim( url.slice( off, url.length ) );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( jQuery.isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax( {\n\t\t\turl: url,\n\n\t\t\t// If \"type\" variable is undefined, then \"GET\" method will be used.\n\t\t\t// Make value of this field explicit since\n\t\t\t// user can override it through ajaxSetup method\n\t\t\ttype: type || \"GET\",\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t} ).done( function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery( \"<div>\" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t// If the request succeeds, this function gets \"data\", \"status\", \"jqXHR\"\n\t\t// but they are ignored because response was set above.\n\t\t// If it fails, this function gets \"jqXHR\", \"status\", \"error\"\n\t\t} ).always( callback && function( jqXHR, status ) {\n\t\t\tself.each( function() {\n\t\t\t\tcallback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t\t} );\n\t\t} );\n\t}\n\n\treturn this;\n};\n\n\n\n\n// Attach a bunch of functions for handling common AJAX events\njQuery.each( [\n\t\"ajaxStart\",\n\t\"ajaxStop\",\n\t\"ajaxComplete\",\n\t\"ajaxError\",\n\t\"ajaxSuccess\",\n\t\"ajaxSend\"\n], function( i, type ) {\n\tjQuery.fn[ type ] = function( fn ) {\n\t\treturn this.on( type, fn );\n\t};\n} );\n\n\n\n\njQuery.expr.filters.animated = function( elem ) {\n\treturn jQuery.grep( jQuery.timers, function( fn ) {\n\t\treturn elem === fn.elem;\n\t} ).length;\n};\n\n\n\n\n\n/**\n * Gets a window from an element\n */\nfunction getWindow( elem ) {\n\treturn jQuery.isWindow( elem ) ?\n\t\telem :\n\t\telem.nodeType === 9 ?\n\t\t\telem.defaultView || elem.parentWindow :\n\t\t\tfalse;\n}\n\njQuery.offset = {\n\tsetOffset: function( elem, options, i ) {\n\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n\t\t\tposition = jQuery.css( elem, \"position\" ),\n\t\t\tcurElem = jQuery( elem ),\n\t\t\tprops = {};\n\n\t\t// set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tcurOffset = curElem.offset();\n\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n\t\t\tjQuery.inArray( \"auto\", [ curCSSTop, curCSSLeft ] ) > -1;\n\n\t\t// need to be able to calculate position if either top or left\n\t\t// is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( jQuery.isFunction( options ) ) {\n\n\t\t\t// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)\n\t\t\toptions = options.call( elem, i, jQuery.extend( {}, curOffset ) );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\njQuery.fn.extend( {\n\toffset: function( options ) {\n\t\tif ( arguments.length ) {\n\t\t\treturn options === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each( function( i ) {\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t\t} );\n\t\t}\n\n\t\tvar docElem, win,\n\t\t\tbox = { top: 0, left: 0 },\n\t\t\telem = this[ 0 ],\n\t\t\tdoc = elem && elem.ownerDocument;\n\n\t\tif ( !doc ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdocElem = doc.documentElement;\n\n\t\t// Make sure it's not a disconnected DOM node\n\t\tif ( !jQuery.contains( docElem, elem ) ) {\n\t\t\treturn box;\n\t\t}\n\n\t\t// If we don't have gBCR, just use 0,0 rather than error\n\t\t// BlackBerry 5, iOS 3 (original iPhone)\n\t\tif ( typeof elem.getBoundingClientRect !== \"undefined\" ) {\n\t\t\tbox = elem.getBoundingClientRect();\n\t\t}\n\t\twin = getWindow( doc );\n\t\treturn {\n\t\t\ttop: box.top  + ( win.pageYOffset || docElem.scrollTop )  - ( docElem.clientTop  || 0 ),\n\t\t\tleft: box.left + ( win.pageXOffset || docElem.scrollLeft ) - ( docElem.clientLeft || 0 )\n\t\t};\n\t},\n\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset,\n\t\t\tparentOffset = { top: 0, left: 0 },\n\t\t\telem = this[ 0 ];\n\n\t\t// Fixed elements are offset from window (parentOffset = {top:0, left: 0},\n\t\t// because it is its only offset parent\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\n\t\t\t// we assume that getBoundingClientRect is available when computed position is fixed\n\t\t\toffset = elem.getBoundingClientRect();\n\t\t} else {\n\n\t\t\t// Get *real* offsetParent\n\t\t\toffsetParent = this.offsetParent();\n\n\t\t\t// Get correct offsets\n\t\t\toffset = this.offset();\n\t\t\tif ( !jQuery.nodeName( offsetParent[ 0 ], \"html\" ) ) {\n\t\t\t\tparentOffset = offsetParent.offset();\n\t\t\t}\n\n\t\t\t// Add offsetParent borders\n\t\t\tparentOffset.top  += jQuery.css( offsetParent[ 0 ], \"borderTopWidth\", true );\n\t\t\tparentOffset.left += jQuery.css( offsetParent[ 0 ], \"borderLeftWidth\", true );\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\t// note: when an element has margin: auto the offsetLeft and marginLeft\n\t\t// are the same in Safari causing offset.left to incorrectly be 0\n\t\treturn {\n\t\t\ttop:  offset.top  - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n\t\t};\n\t},\n\n\toffsetParent: function() {\n\t\treturn this.map( function() {\n\t\t\tvar offsetParent = this.offsetParent;\n\n\t\t\twhile ( offsetParent && ( !jQuery.nodeName( offsetParent, \"html\" ) &&\n\t\t\t\tjQuery.css( offsetParent, \"position\" ) === \"static\" ) ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\t\t\treturn offsetParent || documentElement;\n\t\t} );\n\t}\n} );\n\n// Create scrollLeft and scrollTop methods\njQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n\tvar top = /Y/.test( prop );\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn access( this, function( elem, method, val ) {\n\t\t\tvar win = getWindow( elem );\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? ( prop in win ) ? win[ prop ] :\n\t\t\t\t\twin.document.documentElement[ method ] :\n\t\t\t\t\telem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : jQuery( win ).scrollLeft(),\n\t\t\t\t\ttop ? val : jQuery( win ).scrollTop()\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length, null );\n\t};\n} );\n\n// Support: Safari<7-8+, Chrome<37-44+\n// Add the top/left cssHooks using jQuery.fn.position\n// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n// getComputedStyle returns percent when specified for top/left/bottom/right\n// rather than make the css module depend on the offset module, we just check for it here\njQuery.each( [ \"top\", \"left\" ], function( i, prop ) {\n\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n\t\tfunction( elem, computed ) {\n\t\t\tif ( computed ) {\n\t\t\t\tcomputed = curCSS( elem, prop );\n\n\t\t\t\t// if curCSS returns percentage, fallback to offset\n\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\tcomputed;\n\t\t\t}\n\t\t}\n\t);\n} );\n\n\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( { padding: \"inner\" + name, content: type, \"\": \"outer\" + name },\n\tfunction( defaultExtra, funcName ) {\n\n\t\t// margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( jQuery.isWindow( elem ) ) {\n\n\t\t\t\t\t// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there\n\t\t\t\t\t// isn't a whole lot we can do. See pull request at this URL for discussion:\n\t\t\t\t\t// https://github.com/jquery/jquery/pull/764\n\t\t\t\t\treturn elem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t\t\t\t\t// whichever is greatest\n\t\t\t\t\t// unfortunately, this causes bug #3838 in IE6/8 only,\n\t\t\t\t\t// but there is currently no good, small way to fix it.\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable, null );\n\t\t};\n\t} );\n} );\n\n\njQuery.fn.extend( {\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ?\n\t\t\tthis.off( selector, \"**\" ) :\n\t\t\tthis.off( types, selector || \"**\", fn );\n\t}\n} );\n\n// The number of elements contained in the matched element set\njQuery.fn.size = function() {\n\treturn this.length;\n};\n\njQuery.fn.andSelf = jQuery.fn.addBack;\n\n\n\n\n// Register as a named AMD module, since jQuery can be concatenated with other\n// files that may use define, but not via a proper concatenation script that\n// understands anonymous AMD modules. A named AMD is safest and most robust\n// way to register. Lowercase jquery is used because AMD module names are\n// derived from file names, and jQuery is normally delivered in a lowercase\n// file name. Do this after creating the global so that if an AMD module wants\n// to call noConflict to hide this version of jQuery, it will work.\n\n// Note that for maximum portability, libraries that are not jQuery should\n// declare themselves as anonymous modules, and avoid setting a global if an\n// AMD loader is present. jQuery is a special case. For more information, see\n// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\n\nif ( typeof define === \"function\" && define.amd ) {\n\tdefine( \"jquery\", [], function() {\n\t\treturn jQuery;\n\t} );\n}\n\n\n\nvar\n\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$;\n\njQuery.noConflict = function( deep ) {\n\tif ( window.$ === jQuery ) {\n\t\twindow.$ = _$;\n\t}\n\n\tif ( deep && window.jQuery === jQuery ) {\n\t\twindow.jQuery = _jQuery;\n\t}\n\n\treturn jQuery;\n};\n    // Encapsulate jQuery with _uft.jQuery and _uft.$\n    window._uft = window._uft || {};\n    window._uft.jQuery = window._uft.$ = jQuery;\n\n// Expose jQuery and $ identifiers, even in\n// AMD (#7102#comment:10, https://github.com/jquery/jquery/pull/557)\n// and CommonJS for browser emulators (#13566)\n//if ( !noGlobal ) {\n//\twindow.jQuery = window.$ = jQuery;\n//}\n\nreturn jQuery;\n})); /*!\n * jQuery Simulate v@VERSION - simulate browser mouse and keyboard events\n * https://github.com/jquery/jquery-simulate\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * Date: @DATE\n */\n\n;(function( $, undefined ) {\n\nvar inject = function($) {\n\nif (typeof($.simulate) != 'undefined') \n\treturn;\n\nvar rkeyEvent = /^key/,\n\trmouseEvent = /^(?:mouse|contextmenu)|click/;\n\n$.fn.simulate = function( type, options ) {\n\treturn this.each(function() {\n\t\tnew $.simulate( this, type, options );\n\t});\n};\n\n$.simulate = function( elem, type, options ) {\n\tvar method = $.camelCase( \"simulate-\" + type );\n\n\tthis.target = elem;\n\tthis.options = options;\n\n\tif ( this[ method ] ) {\n\t\tthis[ method ]();\n\t} else {\n\t\tthis.simulateEvent( elem, type, options );\n\t}\n};\n\n$.extend( $.simulate, {\n\n\tkeyCode: {\n\t\tBACKSPACE: 8,\n\t\tCOMMA: 188,\n\t\tDELETE: 46,\n\t\tDOWN: 40,\n\t\tEND: 35,\n\t\tENTER: 13,\n\t\tESCAPE: 27,\n\t\tHOME: 36,\n\t\tLEFT: 37,\n\t\tNUMPAD_ADD: 107,\n\t\tNUMPAD_DECIMAL: 110,\n\t\tNUMPAD_DIVIDE: 111,\n\t\tNUMPAD_ENTER: 108,\n\t\tNUMPAD_MULTIPLY: 106,\n\t\tNUMPAD_SUBTRACT: 109,\n\t\tPAGE_DOWN: 34,\n\t\tPAGE_UP: 33,\n\t\tPERIOD: 190,\n\t\tRIGHT: 39,\n\t\tSPACE: 32,\n\t\tTAB: 9,\n\t\tUP: 38\n\t},\n\n\tbuttonCode: {\n\t\tLEFT: 0,\n\t\tMIDDLE: 1,\n\t\tRIGHT: 2\n\t},\n\t\n\tdefaults: {\n\t\tspeed: 'sync'\n\t},\n\tVK_TAB: 9,\n\tVK_ENTER: 13,\n\tVK_ESC: 27,\n\tVK_PGUP: 33,\n\tVK_PGDN: 34,\n\tVK_END: 35,\n\tVK_HOME: 36,\n\tVK_LEFT: 37,\n\tVK_UP: 38,\n\tVK_RIGHT: 39,\n\tVK_DOWN: 40\n});\n\n$.extend( $.simulate.prototype, {\n\n\tsimulateEvent: function( elem, type, options ) {\n\t\tvar event = this.createEvent( type, options );\n\t\tthis.dispatchEvent( elem, type, event, options );\n\t},\n\n\tcreateEvent: function( type, options ) {\n\t\tif ( rkeyEvent.test( type ) ) {\n\t\t\treturn this.keyboardEvent( type, options );\n\t\t}\n\n\t\tif ( rmouseEvent.test(type) || /^pointer(over|out|down|up)$/.test(type) ) {\n\t\t\treturn this.mouseEvent( type, options );\n\t\t}\n\t},\n\n\tmouseEvent: function( type, options ) {\n\t\tvar event, eventDoc, doc, body;\n\t\toptions = $.extend({\n\t\t\tbubbles: true,\n\t\t\tcancelable: (type !== \"mousemove\"),\n\t\t\tview: window,\n\t\t\tdetail: 0,\n\t\t\tscreenX: 0,\n\t\t\tscreenY: 0,\n\t\t\tclientX: 1,\n\t\t\tclientY: 1,\n\t\t\tctrlKey: false,\n\t\t\taltKey: false,\n\t\t\tshiftKey: false,\n\t\t\tmetaKey: false,\n\t\t\tbutton: 0,\n\t\t\trelatedTarget: undefined\n\t\t}, options );\n\n\t\tif ( document.createEvent ) {\n\t\t\tevent = document.createEvent( \"MouseEvents\" );\n\t\t\tevent.initMouseEvent( type, options.bubbles, options.cancelable,\n\t\t\t\toptions.view, options.detail,\n\t\t\t\toptions.screenX, options.screenY, options.clientX, options.clientY,\n\t\t\t\toptions.ctrlKey, options.altKey, options.shiftKey, options.metaKey,\n\t\t\t\toptions.button, options.relatedTarget || document.body.parentNode );\n\n\t\t\t// IE 9+ creates events with pageX and pageY set to 0.\n\t\t\t// Trying to modify the properties throws an error,\n\t\t\t// so we define getters to return the correct values.\n\t\t\tif ( event.pageX === 0 && event.pageY === 0 && Object.defineProperty ) {\n\t\t\t\teventDoc = event.relatedTarget.ownerDocument || document;\n\t\t\t\tdoc = eventDoc.documentElement;\n\t\t\t\tbody = eventDoc.body;\n\n\t\t\t\tObject.defineProperty( event, \"pageX\", {\n\t\t\t\t\tget: function() {\n\t\t\t\t\t\treturn options.clientX +\n\t\t\t\t\t\t\t( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) -\n\t\t\t\t\t\t\t( doc && doc.clientLeft || body && body.clientLeft || 0 );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tObject.defineProperty( event, \"pageY\", {\n\t\t\t\t\tget: function() {\n\t\t\t\t\t\treturn options.clientY +\n\t\t\t\t\t\t\t( doc && doc.scrollTop || body && body.scrollTop || 0 ) -\n\t\t\t\t\t\t\t( doc && doc.clientTop || body && body.clientTop || 0 );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t} else if ( document.createEventObject ) {\n\t\t\tevent = document.createEventObject();\n\t\t\t$.extend( event, options );\n\t\t\t// standards event.button uses constants defined here: http://msdn.microsoft.com/en-us/library/ie/ff974877(v=vs.85).aspx\n\t\t\t// old IE event.button uses constants defined here: http://msdn.microsoft.com/en-us/library/ie/ms533544(v=vs.85).aspx\n\t\t\t// so we actually need to map the standard back to oldIE\n\t\t\tevent.button = {\n\t\t\t\t0: 1,\n\t\t\t\t1: 4,\n\t\t\t\t2: 2\n\t\t\t}[ event.button ] || ( event.button === -1 ? 0 : event.button );\n\t\t}\n\n\t\treturn event;\n\t},\n\n\tkeyboardEvent: function( type, options ) {\n\t\tvar event;\n\t\toptions = $.extend({\n\t\t\tbubbles: true,\n\t\t\tcancelable: true,\n\t\t\tview: window,\n\t\t\tctrlKey: false,\n\t\t\taltKey: false,\n\t\t\tshiftKey: false,\n\t\t\tmetaKey: false,\n\t\t\tkeyCode: 0,\n\t\t\tcharCode: undefined\n\t\t}, options );\n\n\t\tif ( document.createEvent ) {\n\t\t\ttry {\n\t\t\t\tevent = document.createEvent( \"KeyEvents\" );\n\t\t\t\tevent.initKeyEvent( type, options.bubbles, options.cancelable, options.view,\n\t\t\t\t\toptions.ctrlKey, options.altKey, options.shiftKey, options.metaKey,\n\t\t\t\t\toptions.keyCode, options.charCode );\n\t\t\t// initKeyEvent throws an exception in WebKit\n\t\t\t// see: http://stackoverflow.com/questions/6406784/initkeyevent-keypress-only-works-in-firefox-need-a-cross-browser-solution\n\t\t\t// and also https://bugs.webkit.org/show_bug.cgi?id=13368\n\t\t\t// fall back to a generic event until we decide to implement initKeyboardEvent\n\t\t\t} catch( err ) {\n\t\t\t\tevent = document.createEvent( \"Events\" );\n\t\t\t\tevent.initEvent( type, options.bubbles, options.cancelable );\n\t\t\t\t$.extend( event, {\n\t\t\t\t\tview: options.view,\n\t\t\t\t\tctrlKey: options.ctrlKey,\n\t\t\t\t\taltKey: options.altKey,\n\t\t\t\t\tshiftKey: options.shiftKey,\n\t\t\t\t\tmetaKey: options.metaKey,\n\t\t\t\t\tkeyCode: options.keyCode,\n\t\t\t\t\tcharCode: options.charCode\n\t\t\t\t});\n\t\t\t}\n\t\t} else if ( document.createEventObject ) {\n\t\t\tevent = document.createEventObject();\n\t\t\t$.extend( event, options );\n\t\t}\n\n\t\tif ( !!/msie [\\w.]+/.exec( navigator.userAgent.toLowerCase() ) || (({}).toString.call( window.opera ) === \"[object Opera]\") ) {\n\t\t\tevent.keyCode = (options.charCode > 0) ? options.charCode : options.keyCode;\n\t\t\tevent.charCode = undefined;\n\t\t}\n\n\t\treturn event;\n\t},\n\n\tdispatchEvent: function( elem, type, event ) {\n\t\tif ( elem.dispatchEvent ) {\n\t\t\telem.dispatchEvent( event );\n\t\t} else if ( type === \"click\" && elem.click && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\telem.click();\n\t\t} else if ( elem.fireEvent ) {\n\t\t\telem.fireEvent( \"on\" + type, event );\n\t\t}\n\t},\n\n\tsimulateFocus: function() {\n\t\tvar focusinEvent,\n\t\t\ttriggered = false,\n\t\t\telement = $( this.target );\n\n\t\tfunction trigger() {\n\t\t\ttriggered = true;\n\t\t}\n\n\t\telement.bind( \"focus\", trigger );\n\t\telement[ 0 ].focus();\n\n\t\tif ( !triggered ) {\n\t\t\tfocusinEvent = $.Event( \"focusin\" );\n\t\t\tfocusinEvent.preventDefault();\n\t\t\telement.trigger( focusinEvent );\n\t\t\telement.triggerHandler( \"focus\" );\n\t\t}\n\t\telement.unbind( \"focus\", trigger );\n\t},\n\n\tsimulateBlur: function() {\n\t\tvar focusoutEvent,\n\t\t\ttriggered = false,\n\t\t\telement = $( this.target );\n\n\t\tfunction trigger() {\n\t\t\ttriggered = true;\n\t\t}\n\n\t\telement.bind( \"blur\", trigger );\n\t\telement[ 0 ].blur();\n\n\t\t// blur events are async in IE\n\t\tsetTimeout(function() {\n\t\t\t// IE won't let the blur occur if the window is inactive\n\t\t\tif ( element[ 0 ].ownerDocument.activeElement === element[ 0 ] ) {\n\t\t\t\telement[ 0 ].ownerDocument.body.focus();\n\t\t\t}\n\n\t\t\t// Firefox won't trigger events if the window is inactive\n\t\t\t// IE doesn't trigger events if we had to manually focus the body\n\t\t\tif ( !triggered ) {\n\t\t\t\tfocusoutEvent = $.Event( \"focusout\" );\n\t\t\t\tfocusoutEvent.preventDefault();\n\t\t\t\telement.trigger( focusoutEvent );\n\t\t\t\telement.triggerHandler( \"blur\" );\n\t\t\t}\n\t\t\telement.unbind( \"blur\", trigger );\n\t\t}, 1 );\n\t}\n});\n\n\n\n/** complex events **/\n\nfunction _findCenter( elem ) {\n\tvar offset,\n\t\tdocument = $( elem.ownerDocument );\n\telem = $( elem );\n\toffset = elem.offset();\n\n\treturn {\n\t\tx: offset.left + elem.outerWidth() / 2 - document.scrollLeft(),\n\t\ty: offset.top + elem.outerHeight() / 2 - document.scrollTop()\n\t};\n}\n\nfunction _findCorner( elem ) {\n\tvar offset,\n\t\tdocument = $( elem.ownerDocument );\n\telem = $( elem );\n\toffset = elem.offset();\n\n\treturn {\n\t\tx: offset.left - document.scrollLeft(),\n\t\ty: offset.top - document.scrollTop()\n\t};\n}\n\n$.extend( $.simulate.prototype, {\n\tsimulateDrag: function() {\n\t\tvar i = 0,\n\t\t\ttarget = this.target,\n\t\t\teventDoc = target.ownerDocument,\n\t\t\toptions = this.options,\n\t\t\tcenter = options.handle === \"corner\" ? _findCorner( target ) : _findCenter( target ),\n\t\t\tx = Math.floor( center.x ),\n\t\t\ty = Math.floor( center.y ),\n\t\t\tcoord = { clientX: x, clientY: y },\n\t\t\tdx = options.dx || ( options.x !== undefined ? options.x - x : 0 ),\n\t\t\tdy = options.dy || ( options.y !== undefined ? options.y - y : 0 ),\n\t\t\tmoves = options.moves || 3;\n\n\t\tthis.simulateEvent( target, \"mousedown\", coord );\n\n\t\tfor ( ; i < moves ; i++ ) {\n\t\t\tx += dx / moves;\n\t\t\ty += dy / moves;\n\n\t\t\tcoord = {\n\t\t\t\tclientX: Math.round( x ),\n\t\t\t\tclientY: Math.round( y )\n\t\t\t};\n\n\t\t\tthis.simulateEvent( eventDoc, \"mousemove\", coord );\n\t\t}\n\n\t\tif ( $.contains( eventDoc, target ) ) {\n\t\t\tthis.simulateEvent( target, \"mouseup\", coord );\n\t\t\tthis.simulateEvent( target, \"click\", coord );\n\t\t} else {\n\t\t\tthis.simulateEvent( eventDoc, \"mouseup\", coord );\n\t\t}\n\t},\n\tdrag:function(el){\n\t\tsimulateDrag();\n\t},\n\tfindCenter: function(el) {\n\t\tvar el = $(this.target), o = el.offset();\n\t\treturn {\n\t\t\t\tx: o.left + el.outerWidth() / 2,\n\t\t\t\ty: o.top + el.outerHeight() / 2\n\t\t}\n\t}\n});\n\n\n}\n\n\nif (document.readyState === \"complete\"){\n\tinject(_uft.jQuery);\n} else{\n\twindow.addEventListener(\"load\", function(){\n\t\tinject(_uft.jQuery);\n\t}, false);\n}\n\n})();"
        ], 
        "JSFUNCTION": [
            "SAPUI_Button.js", 
            "SAPUI_Calendar.js", 
            "SAPUI_Carousel.js", 
            "SAPUI_CheckBox.js", 
            "SAPUI_Common.js", 
            "SAPUI_DatePicker.js", 
            "SAPUI_DateTimeInput.js", 
            "SAPUI_Dialog.js", 
            "SAPUI_FacetFilter.js", 
            "SAPUI_Header.js", 
            "SAPUI_ListBox.js", 
            "SAPUI_Menu.js", 
            "SAPUI_Password.js", 
            "SAPUI_RadioButton.js", 
            "SAPUI_RadioGroup.js", 
            "SAPUI_RatingIndicator.js", 
            "SAPUI_Table.js", 
            "SAPUI_TabStrip.js", 
            "SAPUI_TextEdit.js", 
            "SAPUI_Tile.js", 
            "SAPUI_ToggleButton.js", 
            "SAPUI_Toolbar.js", 
            "common.js"
        ], 
        "name": "SAPUI5", 
        "progid": "Mercury.WebExtKit", 
        "TOOLKIT": "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!-- xsi:noNamespaceSchemaLocation=\"file:///C:\\Program Files (x86)\\HP\\Unified Functional Testing\\Dat\\Extensibility\\Web\\Toolkits\\Toolkit.xsd\" -->\n<Controls\n        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n        xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">\n    <Settings>\n        <!--\n        Possible Settings values:\n\n        default_imp_file - the default file from which the implementation functions are called.\n                          (The corresponding value attribute contains the name of the file.)\n\n        common_file - the file in which you store helper functions used for more than one test object class.\n                      (The corresponding value attribute contains the name of the file.)\n                      This variable is only relevant in a Settings element within a Controls element.\n\n        func_to_get_base_elem - the function that returns the Web element whose corresponding test object implements the properties and test object methods\n                                inherited from the base class and not implemented for this control.\n                                (The corresponding value attribute contains the name of the function.)\n                                This variable is only relevant in a Settings element within a Control element.\n\n        file_for_func_to_get_base_elem - the file that contains the function that returns the base element.\n                                         If no file is specified, the default file is used.\n                                         (The corresponding value attribute contains the name of the file.)\n                                         This variable is only relevant in a Settings element within a Control element.\n\n        cache scripts - Specifies whether to always use the JavaScript file that was injected into the Web page when it was opened.\n                        true (default) - Inject JavaScript files into the Web page only when the page is opened.\n                        false - Re-inject JavaScript files into the Web page every time the page is refreshed.\n                        If this variable's value is set to false, the relevant JavaScript files are re-injected every time the Web page is refreshed.\n                        (The corresponding value attribute is set to true or false.)  This variable is relevant in a Settings element within a Controls element.\n\n        Note: Setting \"cache scripts\" value to false is useful during the development stage, as it enables you to test changes that you make in your JavaScript functions without needing to close and reopen the Web page.\n        When you finish developing, set this value back to true, to avoid performance degradation.\n        -->\n\n        <!-- common_file - The name of the file in which you store helper functions used for more than one test object class. -->\n        <Variable name=\"common_file\" value=\"JavaScript\\SAPUI_Common.js\"/>\n        <!--  cache scripts:\n              true (default) - Inject JavaScript files into the Web page only when the page is opened.\n              false - Re-inject JavaScript files into the Web page every time the page is refreshed.\n        -->\n        <Variable name=\"cache scripts\" value=\"true\" />\n\n\n    </Settings>\n\n    <JSLibrariesToInject>\n        <JSLibrary path=\"INSTALLDIR\\bin\\JSFiles\\jquery-1.12.4.js\" />\n        <JSLibrary path=\"INSTALLDIR\\bin\\JSFiles\\jquery.simulate-1.12.4.js\" />\n    </JSLibrariesToInject>\n    <!--  Defines the implementation for the SAPUI_Button test object class. -->\n\n  <!--SAPUI_ToggleButton -->\n  <Control TestObjectClass=\"SAPUIToggleButton\">\n    <Settings>\n      <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_ToggleButton.js\" />\n    </Settings>\n    <Identification >\n      <Browser name=\"*\">\n        <HTMLTags>\n          <Tag name=\"BUTTON\"/>\n        </HTMLTags>\n        <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n          <!--mobile support-->\n          <Conditions logic=\"and\">\n            <Condition prop_name=\"className\" expected_value=\"\\bsapMBtn\\b\" is_reg_exp=\"true\" />\n            <Condition prop_name=\"aria-pressed\" expected_value=\"true|false\" is_reg_exp=\"true\"/>\n          </Conditions>\n          <Conditions logic=\"or\">\n            <Condition prop_name=\"className\" expected_value=\"\\bsapUiToggleBtn\\b\" is_reg_exp=\"true\" />\n            <Condition prop_name=\"innerHTML\" expected_value=\"\\bpressed\\b\" is_reg_exp=\"true\" />\n          </Conditions>\n        </Conditions>\n      </Browser>\n    </Identification>\n    <Record>\n      <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n    </Record>\n    <!-- Methods overriding  -->\n    <Run>\n      <Methods>\n        <Method name=\"Set\" function=\"Set\" />\n      </Methods>\n    </Run>\n    <Filter>\n      <Spy is_control_spyable=\"Yes\"/>\n      <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n    </Filter>\n  </Control>\n\n  <!--SAPUI_Button MUST be after toggle button identification\n   improve performance by excluding SkipIfPropMatch -->\n    <Control TestObjectClass=\"SAPUIButton\">\n        <!-- Indicates the JavaScript file that contains the implementation JavaScript functions. -->\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Button.js\" />\n        </Settings>\n        <!--  Defines how this control is identified. -->\n        <Identification >\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"BUTTON\"/>\n                    <!-- LI.sapMSegBBTN -->\n                    <Tag name=\"LI\"/>\n                    <!-- LINK as a BUTTON -->\n                    <Tag name=\"A\"/>\n                    <!-- DIV.sapMSltIconOnly -->\n                    <Tag name=\"DIV\"/>\n                    <!-- SPAN.sapUiMeLegendIcon inside of DIV.sapUiMeLegend -->\n                    <Tag name=\"SPAN\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic =\"or\">\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMSltIconOnly\\b\" is_reg_exp=\"true\" />\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMSegBBtn\\b\" is_reg_exp=\"true\" />\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMBtn\\b\" is_reg_exp=\"true\" />\n                    <!-- Legend icon as a BUTTON -->\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapUiMeLegendIcon\\b\" is_reg_exp=\"true\" />\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapUiBtn\\b\" is_reg_exp=\"true\" />\n                  <!-- LINK as a BUTTON - carousel expand/collapse element-->\n                    <Conditions logic=\"and\">\n                        <Condition prop_name=\"tagName\" expected_value=\"A\" />\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapUiPanelCollIco\\b|\\bsapUiPanelCollArrow\\b|\\bsapUiUx3ShellTool\\b\" is_reg_exp=\"true\" />\n                        <Condition prop_name=\"role\" expected_value=\"button\" />\n                    </Conditions>\n                </Conditions>\n                <Conditions type=\"SkipIfPropMatch\" logic=\"or\">\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapUiToggleBtn\\b\" is_reg_exp=\"true\" equal=\"false\" />\n                    <Condition prop_name=\"innerHTML\" expected_value=\"\\bpressed\\b\" is_reg_exp=\"true\" equal=\"false\"/>\n                    <!-- Exclude toggle button-->\n                    <Condition prop_name=\"aria-pressed\" expected_value=\"true\" />\n                    <Condition prop_name=\"aria-pressed\" expected_value=\"false\" />\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"Click\" function=\"Click\" />\n                <Method name=\"OpenMenu\" function=\"OpenMenu\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n\n    <!--SAPUI_CheckBox -->\n    <Control TestObjectClass=\"SAPUICheckBox\">\n        <!-- Indicates the JavaScript file that contains the implementation JavaScript functions. -->\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_CheckBox.js\" />\n        </Settings>\n        <!--  Defines how this control is identified. -->\n        <Identification>\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"SPAN\"/>\n                    <Tag name=\"DIV\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMCb\\b\" is_reg_exp=\"true\" />\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapUiCb\\b\" is_reg_exp=\"true\" />\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapUiTriCb\\b\" is_reg_exp=\"true\" />\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n \t      <Run>\n            <Methods>\n                <Method name=\"Set\" function=\"Set\" />\n            </Methods>\n        </Run>\n       <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n   <!-- SAPUI_TabStrip-->\n    <Control TestObjectClass=\"SAPUITabStrip\">\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_TabStrip.js\" />\n        </Settings>\n        <Identification>\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"div\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n                  <Condition prop_name=\"className\" expected_value=\"\\bsapMITBHead\\b\" is_reg_exp=\"true\"/>\n                  <Condition prop_name=\"className\" expected_value=\"\\bsapUiTabBar\\b\" is_reg_exp=\"true\"/>\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling=\"false\" use_default_event_handling_for_children=\"false\" function=\"ListenToEvents\" type=\"javascript\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"Select\" function=\"Select\" />\n                <Method name=\"Remove\" function=\"Remove\" />\n                <Method name=\"Deselect\" function=\"Deselect\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_control=\"Yes\" learn_children=\"No\"/>\n        </Filter>\n    </Control>\n\n    <!-- SAPUI_Menu -->\n    <Control TestObjectClass=\"SAPUIMenu\">\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Menu.js\" />\n        </Settings>\n        <Identification file_name=\"JavaScript\\SAPUI_Menu.js\" function=\"isSAPUIMenu\">\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMSltList\\b\" is_reg_exp=\"true\"/>\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMSltDefault\\b\" is_reg_exp=\"true\"/>\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMSltPicker\\b\" is_reg_exp=\"true\"/>\n                </Conditions>\n                <Conditions type=\"CallIDFuncIfPropMatch\">\n                    <Condition prop_name=\"role\" expected_value=\"menu\" />\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapUiMnu\\b\" is_reg_exp=\"true\"/>\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"Select\" function=\"Select\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n\n    <!-- SAPUI_ListBox -->\n    <Control TestObjectClass=\"SAPUIList\">\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_ListBox.js\" />\n\t\t\t<Variable name=\"func_to_extract_data\" value=\"ExtractData\" />\n        </Settings>\n        <Identification file_name=\"JavaScript\\SAPUI_Common.js\" function=\"isNotComboBoxVisbleChildList\">\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                </HTMLTags>\n                <Conditions type=\"CallIDFuncIfPropMatch\" logic=\"or\">\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMComboBox\\b\" is_reg_exp=\"true\" />\n                    <Conditions logic=\"and\">\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapMList\\b\" is_reg_exp=\"true\" />\n                        <!-- Exclude Menu sap.m.Select :  div.sapMList sapMSltList -->\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapMSltList\\b\" is_reg_exp=\"true\" equal=\"false\"/>\n                        <!-- Exclude Table sap.m.Table :  table.sapMList  sapMListTblCnt -->\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapMListTblCnt\\b\" is_reg_exp=\"true\" equal=\"false\"/>\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapMComboBoxBaseList\\b\" is_reg_exp=\"true\" equal=\"false\"/>\n                    </Conditions>\n                    <Conditions logic=\"or\">\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapUiLbx\\b\" is_reg_exp=\"true\" />\n                        <Conditions logic=\"and\">\n                            <Condition prop_name=\"role\" expected_value=\"combobox\" />\n                            <Condition prop_name=\"className\" expected_value=\"\\bsapUiTfCombo\\b\" is_reg_exp=\"true\"/>\n                            <Condition prop_name=\"className\" expected_value=\"\\bsapUiSearchFieldCb\\b\" is_reg_exp=\"true\" equal=\"false\"/>\n                        </Conditions>\n                    </Conditions>\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"Set\" \t\t\tfunction=\"Set\" />\n                <Method name=\"Select\" \t\tfunction=\"Select\" />\n                <Method name=\"ExtendSelect\" function=\"ExtendSelect\" />\n                <Method name=\"ExtendDeselect\" function=\"ExtendDeselect\" />\n                <Method name=\"SingleSelect\" function=\"SingleSelect\" />\n                <Method name=\"Delete\" \t\tfunction=\"Delete\" />\n                <Method name=\"Details\" \t\tfunction=\"Details\" />\n                <Method name=\"More\" \t\tfunction=\"More\" />\n                <Method name=\"FilterByDate\" function=\"FilterByDate\" />\n                <Method name=\"SetItemData\" \tfunction=\"SetItemData\" />\n          </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n\n    <!--SAPUI_ComboBoxPicker -->\n    <Control TestObjectClass=\"SAPUIComboBoxPicker\">\n        <!--  Defines how this control is identified. -->\n        <Identification>\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\">\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMComboBoxBasePicker\\b\" is_reg_exp=\"true\" />\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Filter>\n            <Spy is_control_spyable=\"No\"/>\n            <Learn learn_children=\"No\" learn_control=\"No\"/>\n        </Filter>\n    </Control>\n\n    <!--SAPUICalendar-->\n    <Control TestObjectClass=\"SAPUICalendar\">\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Calendar.js\" />\n        </Settings>\n        <Identification file_name=\"JavaScript\\SAPUI_Common.js\" function=\"isCalendar\">\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                </HTMLTags>\n                 <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMDP\\b\" is_reg_exp=\"true\" />\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapUiCal\\b\" is_reg_exp=\"true\" />\n\t\t\t\t\t<!--fiori 1.6, begin with \"sapMInputBase sapMInputBaseHeightMargin\",Does not contain \"sapMTextArea\"-->\n\t\t\t\t\t<Condition prop_name=\"className\" expected_value=\"^sapMInputBase sapMInputBaseHeightMargin\\b(?!.*sapMTextArea).*\" is_reg_exp=\"true\" />\n                </Conditions>\n\t\t\t\t\t\t\t\t<Conditions type=\"CallIDFuncIfPropMatch\" logic=\"or\">\n                    <Condition prop_name=\"className\" expected_value=\"sapUiTfBack sapUiTfBrd sapUiTfCombo sapUiTf.*\" is_reg_exp=\"true\" />\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"SetDate\" function=\"SetDate\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n    <Control TestObjectClass=\"SAPUIDatePicker\">\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_DatePicker.js\" />\n        </Settings>\n        <Identification>\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\">\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMeCalendar\\b\" is_reg_exp=\"true\" />\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"Next\" function=\"Next\" />\n                <Method name=\"Previous\" function=\"Previous\" />\n                <Method name=\"SelectDate\" function=\"SelectDate\" />\n                <Method name=\"DeselectDate\" function=\"DeselectDate\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n   <Control TestObjectClass=\"SAPUIDateTimeInput\">\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_DateTimeInput.js\" />\n        </Settings>\n        <Identification>\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\">\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMDTI\\b\" is_reg_exp=\"true\" />\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"SetDateTime\" function=\"SetDateTime\" />\n                <Method name=\"GetDateTime\" function=\"GetDateTime\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n    <!-- SAPUITextEdit -->\n    <Control TestObjectClass=\"SAPUITextEdit\">\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_TextEdit.js\"/>\n            <Variable name=\"func_to_get_base_elem\" value=\"getTextEditBaseElem\"/>\n        </Settings>\n        <!-- Defines how this control is identified -->\n        <Identification type=\"javascript\" function=\"IsNotSAPUIPassword\">\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"INPUT\" />\n                    <Tag name=\"textarea\" />\n                    <Tag name=\"LABEL\" />\n                    <Tag name=\"DIV\"/>\n                </HTMLTags>\n                <!-- exclude datepicker and datetimepicker -->\n                <Conditions type=\"SkipIfPropMatch\" logic=\"and\">\n                    <Conditions logic=\"or\">\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapMDP\\b\" is_reg_exp=\"true\"/>\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapMDTI\\b\" is_reg_exp=\"true\"/>\n                    </Conditions>\n                </Conditions>\n                <Conditions type=\"CallIDFuncIfPropMatch\" logic=\"or\">\n                    <Conditions logic=\"and\">\n                        <Condition prop_name=\"tagName\" expected_value=\"DIV\" />\n                        <Conditions logic=\"or\">\n                            <!-- sap.m search field div.sapMSF-->\n                            <Condition prop_name=\"className\" expected_value=\"\\bsapMSF\\b\" is_reg_exp=\"true\"/>\n                            <!-- sap.m value help div.sapMInput-->\n                            <Condition prop_name=\"className\" expected_value=\"\\bsapMInput\\b\" is_reg_exp=\"true\"/>\n                            <!-- text area div.sapMTextArea-->\n                            <Condition prop_name=\"className\" expected_value=\"\\bsapMTextArea\\b\" is_reg_exp=\"true\"/>\n                            <!-- sap.m Input div.sapMInputBase -->\n                            <Condition prop_name=\"className\" expected_value=\"\\bsapMInputBase\\b\" is_reg_exp=\"true\"/>\n                        </Conditions>\n                    </Conditions>\n\n                    <Conditions logic=\"and\">\n                        <Condition prop_name=\"type\" expected_value=\"password\" equal=\"false\"/>\n                        <Conditions logic=\"and\">\n                            <Condition prop_name=\"className\" expected_value=\"\\bsapUiTf\\b\" is_reg_exp=\"true\"/>\n                            <Conditions logic=\"or\">\n                                <Condition prop_name=\"role\" expected_value=\"textbox\" />\n                                <Condition prop_name=\"type\" expected_value=\"text\" />\n                                <Condition prop_name=\"type\" expected_value=\"search\" />\n                            </Conditions>\n                        </Conditions>\n                    </Conditions>\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"Set\" function=\"Set\" />\n                <Method name=\"Submit\" function=\"Submit\" />\n                <Method name=\"Search\" function=\"Search\" />\n                <Method name=\"Clear\" function=\"Clear\" />\n                <Method name=\"OpenPossibleEntries\" function=\"OpenPossibleEntries\" />\n                <Method name=\"Refresh\" function=\"Refresh\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n        <Control TestObjectClass=\"SAPUIRadioButton\">\n        <!-- Indicates the JavaScript file that contains the implementation JavaScript functions. -->\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_RadioButton.js\" />\n        </Settings>\n        <!--  Defines how this control is identified. -->\n        <Identification >\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"SPAN\"/>\n                    <Tag name=\"DIV\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n                  <Condition prop_name=\"className\" expected_value=\"\\bsapMRb\\b\" is_reg_exp=\"true\" />\n                  <Condition prop_name=\"className\" expected_value=\"\\bsapUiRb\\b\" is_reg_exp=\"true\" />\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"Select\" function=\"Select\" />\n                <Method name=\"Activate\" function=\"Activate\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n    <!--SAPUIDialog -->\n    <Control TestObjectClass=\"SAPUIDialog\">\n        <!-- Indicates the JavaScript file that contains the implementation JavaScript functions. -->\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Dialog.js\" />\n        </Settings>\n        <!--  Defines how this control is identified. -->\n        <Identification >\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n                  <Condition prop_name=\"className\" expected_value=\"\\bsapMDialog\\b\" is_reg_exp=\"true\" />\n                  <Condition prop_name=\"className\" expected_value=\"\\bsapUiDlg\\b\" is_reg_exp=\"true\" />\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"true\" use_default_event_handling=\"true\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"Close\" function=\"Close\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n    <!--SAPUIToolbar -->\n    <Control TestObjectClass=\"SAPUIToolbar\">\n        <!-- Indicates the JavaScript file that contains the implementation JavaScript functions. -->\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Toolbar.js\" />\n        </Settings>\n        <!--  Defines how this control is identified. -->\n        <Identification >\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                    <Tag name=\"HEADER\"/>\n                    <Tag name=\"FOOTER\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n                  <Conditions logic=\"and\">\n                    <Condition prop_name=\"className\" expected_value=\"\\b(sapMTB|sapMBar)\\b\" is_reg_exp=\"true\" />\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMIBar\\b\" is_reg_exp=\"true\" />\n                  </Conditions>\n                  <Conditions logic=\"and\">\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapUiTb\\b\" is_reg_exp=\"true\" />\n                        <Condition prop_name=\"role\" expected_value=\"toolbar\" />\n                    </Conditions>\n                  </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"true\" use_default_event_handling=\"true\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"OpenOverflow\" function=\"OpenOverflow\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"Yes\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n\n    <!--SAPUIRatingIndicator -->\n    <Control TestObjectClass=\"SAPUIRatingIndicator\">\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_RatingIndicator.js\"/>\n        </Settings>\n        <Identification>\n            <HTMLTags>\n                <Tag name=\"div\" />\n            </HTMLTags>\n            <Conditions type=\"IdentifyIfPropMatch\" logic =\"or\">\n              <Condition prop_name=\"className\" expected_value=\"\\bsapMRI\\b\" is_reg_exp=\"true\" />\n              <Condition prop_name=\"className\" expected_value=\"\\bsapUiRating\\b\" is_reg_exp=\"true\" />\n            </Conditions>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\" />\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"Select\" type=\"javascript\" function=\"Select\" />\n                <Method name=\"SetLevel\" type=\"javascript\" function=\"SetLevel\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Learn learn_control=\"Yes\" learn_children=\"No\" />\n            <Spy is_control_spyable=\"Yes\" />\n        </Filter>\n    </Control>\n     <!--SAPUI_Tile -->\n    <Control TestObjectClass=\"SAPUITile\">\n        <!-- Indicates the JavaScript file that contains the implementation JavaScript functions. -->\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Tile.js\" />\n        </Settings>\n        <!--  Defines how this control is identified. -->\n        <Identification >\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                    <Tag name=\"LI\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMTile\\b\" is_reg_exp=\"true\" />\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMTileCnt\\b\" is_reg_exp=\"true\" />\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapUshellTile\\b\" is_reg_exp=\"true\" />\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"Click\" function=\"Click\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n     <!--SAPUI_Header -->\n    <Control TestObjectClass=\"SAPUIHeader\">\n        <!-- Indicates the JavaScript file that contains the implementation JavaScript functions. -->\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Header.js\" />\n        </Settings>\n        <!--  Defines how this control is identified. -->\n        <Identification >\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                    <Tag name=\"SPAN\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic =\"or\">\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMOHTitleActive\\b\" is_reg_exp=\"true\" />\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMObjectAttributeActive\\b\" is_reg_exp=\"true\" />\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMOHIntroActive\\b\" is_reg_exp=\"true\" />\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapMOHTitleArrow\\b\" is_reg_exp=\"true\" />\n                    <Conditions type=\"IdentifyIfPropMatch\" logic =\"and\">\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapMOHIcon\\b\" is_reg_exp=\"true\" />\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapMPointer\\b\" is_reg_exp=\"true\" />\n                    </Conditions>\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"Click\" function=\"Click\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n\n\n    <!-- SAPUI_Paginator-->\n    <Control TestObjectClass=\"SAPUIPaginator\">\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Paginator.js\" />\n        </Settings>\n        <Identification >\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\">\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapUiPag\\b\" is_reg_exp=\"true\" />\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"SetPage\" function=\"SetPage\" />\n                <Method name=\"NextPage\" function=\"NextPage\" />\n                <Method name=\"PreviousPage\" function=\"PreviousPage\" />\n                <Method name=\"FirstPage\" function=\"FirstPage\" />\n                <Method name=\"LastPage\" function=\"LastPage\" />\n                <Method name=\"CurrentPage\" function=\"CurrentPage\" />\n            </Methods>\n        </Run>\n         <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n    <Control TestObjectClass=\"SAPUIPassword\">\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Password.js\"/>\n        </Settings>\n        <!-- Defines how this control is identified -->\n        <Identification>\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"INPUT\" />\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic=\"and\">\n                    <Condition prop_name=\"type\" expected_value=\"password\" />\n                    <Conditions logic=\"or\">\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapMInputBaseInner\\b\" is_reg_exp=\"true\"/>\n                        <Conditions logic=\"and\">\n                            <Condition prop_name=\"role\" expected_value=\"textbox\" />\n                            <Condition prop_name=\"className\" expected_value=\"sapUiTf sapUiTfBack sapUiTfBrd.*\" is_reg_exp=\"true\"/>\n                        </Conditions>\n                    </Conditions>\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"true\"/>\n        </Record>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n\n    <!-- SAPUITable -->\n    <Control TestObjectClass=\"SAPUITable\">\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Table.js\" />\n            <Variable name=\"func_to_get_table_data\" value=\"GetTableData\" />\n            <Variable name=\"func_to_get_cell_elem\" value=\"GetCellElem\" />\n        </Settings>\n        <Identification file_name=\"JavaScript\\SAPUI_Table.js\" function=\"isTableMore\">\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                    <Tag name=\"TABLE\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n                    <Conditions logic=\"and\">\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapMListTbl\\b\" is_reg_exp=\"true\"  />\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapMForm\\b\" is_reg_exp=\"true\" equal=\"false\"/>\n                    </Conditions>\n                    <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n                        <Condition prop_name=\"className\" expected_value=\"\\bsapUiTableCnt\\b\" is_reg_exp=\"true\"/>\n                    </Conditions>\n                </Conditions>\n                <Conditions type=\"CallIDFuncIfPropMatch\" logic=\"or\">\n                    <Condition prop_name=\"className\" expected_value=\"sapMGrowingListTrigger\"/>\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"SelectCell\" function=\"SelectCell\" />\n                <Method name=\"ExtendSelectCell\" function=\"ExtendSelectCell\" />\n                <Method name=\"SelectRow\" function=\"SelectRow\" />\n                <Method name=\"ExtendSelectRow\" function=\"ExtendSelectRow\" />\n                <Method name=\"DeselectRow\" function=\"DeselectRow\" />\n                <Method name=\"DeleteRow\" function=\"DeleteRow\" />\n                <Method name=\"More\" function=\"More\" />\n                <Method name=\"ExtendDeselectRow\" function=\"ExtendDeselectRow\" />\n                <Method name=\"SelectAll\" function=\"SelectAll\" />\n                <Method name=\"DeselectAll\" function=\"DeselectAll\" />\n                <Method name=\"GetCellData\" function=\"GetCellData\" />\n                <Method name=\"GetColumnName\" function=\"GetColumnName\" />\n                <Method name=\"SetCell\" function=\"SetCell\" />\n                <Method name=\"SetCellData\" function=\"SetCellData\" />\n                <Method name=\"ExtendSetCellData\" function=\"ExtendSetCellData\" />\n                <Method name=\"SelectItemInCell\" function=\"SelectItemInCell\" />\n                <Method name=\"OpenMenu\" function=\"OpenMenu\" />\n                <Method name=\"HeaderClick\" function=\"HeaderClick\" />\n                <Method name=\"Move\" function=\"Move\" />\n                <Method name=\"MoveColumn\" function=\"MoveColumn\" />\n                <Method name=\"ResizeColumn\" function=\"ResizeColumn\" />\n                <Method name=\"Navigate\" function=\"Navigate\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n\n    <!--SAPUIFacetFilter -->\n    <Control TestObjectClass=\"SAPUIFacetFilter\">\n        <!-- Indicates the JavaScript file that contains the implementation JavaScript functions. -->\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_FacetFilter.js\" />\n        </Settings>\n        <!--  Defines how this control is identified. -->\n        <Identification >\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n                  <Condition prop_name=\"className\" expected_value=\"\\bsapMFF\\b\" is_reg_exp=\"true\" />\n                  <Condition prop_name=\"className\" expected_value=\"\\bsapUiUx3FacetFilter\\b\" is_reg_exp=\"true\" />\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\"  type=\"javascript\" function=\"ListenToEvents\" />\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"SelectedKeys\" function=\"SelectedKeys\" />\n                <Method name=\"SelectedKeysCount\" function=\"SelectedKeysCount\" />\n                <Method name=\"FilterBy\" function=\"FilterBy\" />\n                <Method name=\"ExtendFilterBy\" function=\"ExtendFilterBy\" />\n                <Method name=\"OpenDialog\" function=\"OpenDialog\" />\n                <Method name=\"Remove\" function=\"Remove\" />\n                <Method name=\"Reset\" function=\"Reset\" />\n                <Method name=\"Open\" function=\"Open\" />\n                <Method name=\"Next\" function=\"Next\" />\n                <Method name=\"Previous\" function=\"Previous\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n\n    <Control TestObjectClass=\"SAPUICarousel\">\n        <!-- Indicates the JavaScript file that contains the implementation JavaScript functions. -->\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Carousel.js\" />\n        </Settings>\n        <!--  Defines how this control is identified. -->\n        <Identification >\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n                  <Condition prop_name=\"className\" expected_value=\"\\bsapMCrsl\\b\" is_reg_exp=\"true\" />\n                  <Condition prop_name=\"className\" expected_value=\"\\bsapUiCrsl\\b\" is_reg_exp=\"true\" />\n                 </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"true\" use_default_event_handling=\"true\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"Next\" function=\"Next\" />\n                <Method name=\"Previous\" function=\"Previous\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n\n\n  <!-- Auxiliary TOs-->\n  <Control TestObjectClass=\"SAPUICalendar_DatePicker\">\n    <Settings>\n      <!--<Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Calendar.js\" />-->\n    </Settings>\n    <Identification>\n      <Browser name=\"*\">\n        <HTMLTags>\n          <Tag name=\"DIV\"/>\n        </HTMLTags>\n        <Conditions type=\"IdentifyIfPropMatch\">\n          <Condition prop_name=\"role\" expected_value=\"dialog\" />\n          <Condition prop_name=\"className\" expected_value=\"\\bui-datepicker\\b\" is_reg_exp=\"true\" />\n        </Conditions>\n      </Browser>\n    </Identification>\n    <Record>\n      <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\"/>\n    </Record>\n    <Filter>\n      <Spy is_control_spyable=\"Yes\"/>\n      <Learn learn_children=\"No\" learn_control=\"No\"/>\n    </Filter>\n  </Control>\n\n  <Control TestObjectClass=\"SAPUITimePickerDialog\">\n    <Settings>\n      <!--<Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Calendar.js\" />-->\n    </Settings>\n    <Identification>\n      <Browser name=\"*\">\n        <HTMLTags>\n          <Tag name=\"DIV\"/>\n        </HTMLTags>\n        <Conditions type=\"IdentifyIfPropMatch\">\n          <Condition prop_name=\"role\" expected_value=\"dialog\" />\n          <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n            <Condition prop_name=\"className\" expected_value=\"\\bsapMDTICustom\\b\" is_reg_exp=\"true\" />\n            <Condition prop_name=\"className\" expected_value=\"\\bsapMDTICustomTime\\b\" is_reg_exp=\"true\" />\n            <Conditions logic=\"and\">\n              <Condition prop_name=\"className\" expected_value=\"\\bsapUiCal\\b\" is_reg_exp=\"true\" />\n              <Condition prop_name=\"role\" expected_value=\"dialog\" />\n            </Conditions>\n          </Conditions>\n        </Conditions>\n      </Browser>\n    </Identification>\n    <Record>\n      <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\"/>\n    </Record>\n    <Filter>\n      <Spy is_control_spyable=\"Yes\"/>\n      <Learn learn_children=\"No\" learn_control=\"No\"/>\n    </Filter>\n  </Control>\n\n  <!-- sap.ui only TOs-->\n    <!--SAPUIRadioGroup -->\n    <Control TestObjectClass=\"SAPUIRadioGroup\">\n        <!-- Indicates the JavaScript file that contains the implementation JavaScript functions. -->\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_RadioGroup.js\" />\n        </Settings>\n        <!--  Defines how this control is identified. -->\n        <Identification>\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic=\"or\">\n                     <Condition prop_name=\"className\" expected_value=\"\\bsapUiRbG\\b\" is_reg_exp=\"true\" />\n                     <Condition prop_name=\"className\" expected_value=\"\\bsapMRbG\\b\" is_reg_exp=\"true\" />\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <!-- radiobutton_group Methods overriding -->\n        <Run>\n            <Methods>\n                <Method name=\"Select\" function=\"Select\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n\n  <!--SAPUINavigationBar -->\n  <Control TestObjectClass=\"SAPUINavigationBar\">\n    <Settings>\n      <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_NavigationBar.js\" />\n    </Settings>\n    <Identification>\n      <Browser name=\"*\">\n        <HTMLTags>\n          <Tag name=\"NAV\"/>\n        </HTMLTags>\n        <Conditions type=\"IdentifyIfPropMatch\">\n          <Condition prop_name=\"className\" expected_value=\"sapUiUx3NavBar.*\" is_reg_exp=\"true\" />\n        </Conditions>\n      </Browser>\n    </Identification>\n    <Record>\n      <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n    </Record>\n\n    <Run>\n      <Methods>\n        <Method name=\"Select\" function=\"Select\" />\n        <Method name=\"OpenMenu\" function=\"OpenMenu\" />\n      </Methods>\n    </Run>\n    <Filter>\n      <Spy is_control_spyable=\"Yes\"/>\n      <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n    </Filter>\n  </Control>\n\n  <Control TestObjectClass=\"SAPUILabel\">\n    <Settings>\n      <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Label.js\" />\n    </Settings>\n    <Identification file_name=\"JavaScript\\SAPUI_Common.js\" function=\"isClickableLabel\">\n      <Browser name=\"*\">\n        <HTMLTags>\n          <Tag name=\"LABEL\"/>\n        </HTMLTags>\n        <Conditions type=\"CallIDFuncIfPropMatch\">\n          <Condition prop_name=\"className\" expected_value=\".*quickViewEntries.*sapUiLbl.*\" is_reg_exp=\"true\" />\n        </Conditions>\n      </Browser>\n    </Identification>\n    <Record>\n      <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n    </Record>\n    <Run>\n      <Methods>\n        <Method name=\"Click\" function=\"Click\" />\n      </Methods>\n    </Run>\n    <Filter>\n      <Spy is_control_spyable=\"Yes\"/>\n      <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n    </Filter>\n  </Control>\n\n  <!--SAPUINotificationBar -->\n  <Control TestObjectClass=\"SAPUINotificationBar\">\n    <Settings>\n      <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_NotificationBar.js\" />\n    </Settings>\n    <Identification>\n      <Browser name=\"*\">\n        <HTMLTags>\n          <Tag name=\"DIV\"/>\n        </HTMLTags>\n        <Conditions type=\"IdentifyIfPropMatch\">\n          <Condition prop_name=\"className\" expected_value=\"\\bsapUiNotificationBar\\b\" is_reg_exp=\"true\" />\n        </Conditions>\n      </Browser>\n    </Identification>\n    <Record>\n      <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n    </Record>\n    <Run>\n      <Methods>\n        <Method name=\"Enlarge\" function=\"Enlarge\" />\n        <Method name=\"Minimize\" function=\"Minimize\" />\n        <Method name=\"Show\" function=\"Show\" />\n        <Method name=\"Hide\" function=\"Hide\" />\n        <Method name=\"SelectNotification\" function=\"SelectNotification\" />\n        <Method name=\"SelectMessage\" function=\"SelectMessage\" />\n        <Method name=\"GetNotificationText\" function=\"GetNotificationText\" />\n        <Method name=\"GetMessageText\" function=\"GetMessageText\" />\n        <Method name=\"GetNotificationTimestamp\" function=\"GetNotificationTimestamp\" />\n        <Method name=\"GetMessageTimestamp\" function=\"GetMessageTimestamp\" />\n        <Method name=\"GetMessageLevel\" function=\"GetMessageLevel\" />\n        <Method name=\"GetMessageCount\" function=\"GetMessageCount\" />\n        <Method name=\"GetNotificationCountByIndex\" function=\"GetNotificationCountByIndex\" />\n      </Methods>\n    </Run>\n    <Filter>\n      <Spy is_control_spyable=\"Yes\"/>\n      <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n    </Filter>\n  </Control>\n\n  <!--SAPUIAccordion -->\n  <Control TestObjectClass=\"SAPUIAccordion\">\n    <Settings>\n      <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Accordion.js\"/>\n    </Settings>\n    <Identification>\n      <HTMLTags>\n        <Tag name=\"div\" />\n      </HTMLTags>\n      <Conditions type=\"IdentifyIfPropMatch\">\n        <Condition prop_name=\"className\" expected_value=\"\\bsapUiAcd\\b\" is_reg_exp=\"true\" />\n      </Conditions>\n    </Identification>\n    <Record>\n      <EventListening use_default_event_handling_for_children=\"true\" use_default_event_handling=\"true\" type=\"javascript\" function=\"ListenToEvents\" />\n    </Record>\n    <Run>\n      <Methods>\n        <Method name=\"Expand\" type=\"javascript\" function=\"Expand\" />\n        <Method name=\"Collapse\" type=\"javascript\" function=\"Collapse\" />\n      </Methods>\n    </Run>\n    <Filter>\n      <Learn learn_control=\"Yes\" learn_children=\"Yes\" />\n      <Spy is_control_spyable=\"Yes\" />\n    </Filter>\n  </Control>\n\n  <!--SAPUIRowRepeater -->\n  <Control TestObjectClass=\"SAPUIRowRepeater\">\n    <!-- Indicates the JavaScript file that contains the implementation JavaScript functions. -->\n    <Settings>\n      <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_RowRepeater.js\" />\n      <Variable name=\"func_to_get_table_data\" value=\"GetRRTableData\" />\n    </Settings>\n    <!--  Defines how this control is identified. -->\n    <Identification >\n      <Browser name=\"*\">\n        <HTMLTags>\n          <Tag name=\"DIV\"/>\n        </HTMLTags>\n        <Conditions type=\"IdentifyIfPropMatch\">\n          <Condition prop_name=\"className\" expected_value=\"sapUiRrDesign.*\" is_reg_exp=\"true\" />\n        </Conditions>\n      </Browser>\n    </Identification>\n    <Record>\n      <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n    </Record>\n    <Run>\n      <Methods>\n        <Method name=\"SortBy\" type=\"javascript\" function=\"SortBy\" />\n        <Method name=\"FilterBy\" type=\"javascript\" function=\"FilterBy\" />\n        <Method name=\"GetRowWithCellText\" type=\"javascript\" function=\"GetRowWithCellText\" />\n        <Method name=\"GetCellData\" type=\"javascript\" function=\"GetCellData\" />\n        <Method name=\"NextPage\" type=\"javascript\" function=\"NextPage\" />\n        <Method name=\"PreviousPage\" type=\"javascript\" function=\"PreviousPage\" />\n        <Method name=\"LastPage\" type=\"javascript\" function=\"LastPage\" />\n        <Method name=\"FirstPage\" type=\"javascript\" function=\"FirstPage\" />\n        <Method name=\"SetPage\" type=\"javascript\" function=\"SetPage\" />\n        <Method name=\"ShowMore\" type=\"javascript\" function=\"ShowMore\" />\n      </Methods>\n    </Run>\n    <Filter>\n      <Spy is_control_spyable=\"Yes\"/>\n      <Learn learn_children=\"Yes\" learn_control=\"Yes\"/>\n    </Filter>\n  </Control>\n\n  <!-- SAPUIRoadMap -->\n  <Control TestObjectClass=\"SAPUIRoadMap\">\n    <Settings>\n      <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_RoadMap.js\" />\n    </Settings>\n    <Identification>\n      <Browser name=\"*\">\n        <HTMLTags>\n          <Tag name=\"div\"/>\n        </HTMLTags>\n        <Conditions type=\"IdentifyIfPropMatch\">\n          <Condition prop_name=\"className\" expected_value=\"\\bsapUiRoadMap\\b\" is_reg_exp=\"true\" />\n        </Conditions>\n      </Browser>\n    </Identification>\n    <Record>\n      <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n    </Record>\n    <Run>\n      <Methods>\n        <Method name=\"Select\" function=\"Select\" />\n        <Method name=\"Expand\" function=\"Expand\" />\n        <Method name=\"Collapse\" function=\"Collapse\" />\n        <Method name=\"Next\" function=\"Next\" />\n        <Method name=\"Previous\" function=\"Previous\" />\n      </Methods>\n    </Run>\n    <Filter>\n      <Spy is_control_spyable=\"Yes\"/>\n      <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n    </Filter>\n  </Control>\n\n <!-- SAPUITree -->\n    <Control TestObjectClass=\"SAPUITree\">\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Tree.js\" />\n            <Variable name=\"func_to_get_base_elem\" value=\"GetUiTreeList\" />\n        </Settings>\n        <Identification>\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"div\"/>\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\">\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapUiTreeCont\\b\" is_reg_exp=\"true\" />\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"Select\" \tfunction=\"Select\" />\n                <Method name=\"Activate\" function=\"Activate\" />\n                <Method name=\"Expand\" \tfunction=\"Expand\" />\n                <Method name=\"Collapse\" function=\"Collapse\" />\n          </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n\n    <Control TestObjectClass=\"SAPUIMenubar\">\n        <Settings>\n            <Variable name=\"default_imp_file\" value=\"JavaScript\\SAPUI_Menubar.js\"/>\n        </Settings>\n        <!-- Defines how this control is identified -->\n        <Identification>\n            <Browser name=\"*\">\n                <HTMLTags>\n                    <Tag name=\"DIV\" />\n                </HTMLTags>\n                <Conditions type=\"IdentifyIfPropMatch\" logic=\"and\">\n                    <Condition prop_name=\"className\" expected_value=\"\\bsapUiMnuBar\\b\" is_reg_exp=\"true\"/>\n                    <Condition prop_name=\"role\" expected_value=\"menubar\"/>\n                </Conditions>\n            </Browser>\n        </Identification>\n        <Record>\n            <EventListening use_default_event_handling_for_children=\"false\" use_default_event_handling=\"false\" type=\"javascript\" function=\"ListenToEvents\"/>\n        </Record>\n        <Run>\n            <Methods>\n                <Method name=\"Select\" function=\"Select\" />\n            </Methods>\n        </Run>\n        <Filter>\n            <Spy is_control_spyable=\"Yes\"/>\n            <Learn learn_children=\"No\" learn_control=\"Yes\"/>\n        </Filter>\n    </Control>\n\n</Controls>"
    }, 
    "_attr_names": [
        "name", 
        "TOOLKIT", 
        "JSFUNCTION", 
        "text", 
        "JSFUNCTION", 
        "text", 
        "JSFUNCTION", 
        "text"
    ], 
    "_msgType": "SRVC_LOAD_EXT_TOOLKIT", 
    "_to": {
        "frame": -1, 
        "object": null, 
        "page": -1, 
        "browser": -1
    }
}	;

	var loadSAPExtension = function(){
		window._hpmcBridge.onRequest(
			{ data: JSON.stringify({ data: sapMsg }) },
			function(error, response) {
				if (error){
					console.error("SAP-SRVC_LOAD_EXT_TOOLKIT: There was an error :( " + error + "\n");
				}else{
					//console.warn("SAP-SRVC_LOAD_EXT_TOOLKIT:" + JSON.stringify(response));
				}
			});
	}

	if (window.hpmcAgent === "ios"){
		setTimeout(function() {
			loadSAPExtension();
		}, 0);
	}
	else{
		loadSAPExtension();
	}

}


function addSAPIdentificationProperties(){

    var extend = function(obj, src) {
    	for (var key in src) {
        	if (src.hasOwnProperty(key)) obj[key] = src[key];
   		}
    	return obj;
	}

	var sapIdentification = {
    "sapuibutton": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag",
            "type"
        ],
        "optionalFilter": [
            "class",
            "innertext"
        ],
        "selector": "index"
    },
    "sapuicalendar": {
        "assistive": [
            "items count"

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [
            "name"
        ],
        "selector": "index"
    },
    "sapuicarousel": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [

        ],
        "selector": "index"
    },
    "sapuicheckbox": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [
            "class"
        ],
        "selector": "index"
    },
    "sapuidatepicker": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag",
            "display mode"
        ],
        "optionalFilter": [
            "html id"
        ],
        "selector": "index"
    },
    "sapuidatetimeinput": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag",
            "display format",
            "date type"
        ],
        "optionalFilter": [

        ],
        "selector": "index"
    },
    "sapuidialog": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [

        ],
        "selector": "index"
    },
    "sapuifacetfilter": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [

        ],
        "selector": "index"
    },
    "sapuiheader": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag",
            "class"
        ],
        "optionalFilter": [
            "text"
        ],
        "selector": "index"
    },
    "sapuilist": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [

        ],
        "selector": "index"
    },
    "sapuimenu": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [

        ],
        "selector": "index"
    },
    "sapuipassword": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag",
            "display mode"
        ],
        "optionalFilter": [
            "html id"
        ],
        "selector": "index"
    },
    "sapuiradiobutton": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [

        ],
        "selector": "index"
    },
    "sapuiradiogroup": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [
            "class"
        ],
        "selector": "index"
    },
    "sapuiratingindicator": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [

        ],
        "selector": "index"
    },
    "sapuitabstrip": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [
            "class"
        ],
        "selector": "index"
    },
    "sapuitable": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [
            "class"
        ],
        "selector": "index"
    },
    "sapuitextedit": {
        "assistive": [

        ],
        "baseFilter": [
            "type"
        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [
            "default value"
        ],
        "selector": "index"
    },
    "sapuitile": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [

        ],
        "selector": "index"
    },
    "sapuitogglebutton": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag",
            "type"
        ],
        "optionalFilter": [
            "class",
            "innertext"
        ],
        "selector": "index"
    },
    "sapuitoolbar": {
        "assistive": [

        ],
        "baseFilter": [

        ],
        "mandatory": [
            "name",
            "html tag"
        ],
        "optionalFilter": [

        ],
        "selector": "index"
		}   
	}

	window._QTP.defaultObjectIdentificationProperties = extend(window._QTP.defaultObjectIdentificationProperties, sapIdentification);

}

addSAPIdentificationProperties();
injectSAPScripts();